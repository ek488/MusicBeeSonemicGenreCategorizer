var voting_choices={community:[{id:"spam",label:"Spam or inappropriate self-promotion",types:["comment","list","review","discussion_post","discussion_thread","guide"]},{id:"copyright",label:"Contains links to copyrighted material or discussion on how to infringe copyright",types:["comment","list","review","discussion_post","discussion_thread","guide"]},{id:"plagiarized",label:"Contains work that is taken from another person and passed off as author's own",types:["comment","list","review","guide"]},{id:"offensive",label:"Contains offensive language or NSFW content (nudity/sexual content/extreme violence/gore)",types:["comment","list","review","discussion_post","discussion_thread","guide"]},{id:"uncivil",label:"Uncivil or disrespectful comments toward other members or artists",types:["comment","list","review","discussion_post","discussion_thread","guide"]},{id:"not_contributive",label:"No meaningful contribution to the discussion",types:["discussion_post"]},{id:"derail",label:"Poster is personally uninterested in topic and thus attempting to derail thread",types:["discussion_post"]},{id:"encouraging_rule_breaking",label:"Supporting or encouraging others' rule-breaking behavior",types:["discussion_post"]},{id:"racist",label:"Racist language/comments",types:["comment","list","review","discussion_post","discussion_thread","guide"]},{id:"sexist",label:"Sexist language and/or misogynistic comments (including gendered slurs)",types:["comment","list","review","discussion_post","discussion_thread","guide"]},{id:"homophobic",label:"Homophobic language (including mild terms)",types:["comment","list","review","discussion_post","discussion_thread","guide"]},{id:"transphobic",label:"Transphobic language (including mild terms)",types:["comment","list","review","discussion_post","discussion_thread","guide"]},{id:"objectification",label:"Objectifying men/women, or inappropriately bringing someone's race, sex, sexual orientation, attractiveness, etc. into a conversation when unwarranted",types:["comment","list","review","discussion_post","discussion_thread","guide"]},{id:"chatty",label:"Topic is to chatty/doesn't have a clear purpose.",types:["discussion_thread"]},{id:"focused_on_member",label:"Topic is too focused on a specific member of the site.",types:["discussion_thread"]},{id:"no_discussion",label:"Topic is not designed in a way to encourage discussion.",types:["discussion_thread"]}],review_guidelines:[{id:"offtopic",label:"Not primarily focused on the actual music/cinematic/game content contained within the release; too much off-topic content",types:["q"]},{id:"glorified_rating",label:'Glorified rating: does not contain any substantial info other than "this album is great/bad"',types:["q"]},{id:"excessive_metadata",label:'Contains excessive metadata/supplementary ratings/credits/etc that should be in the "extra info" section of the review',types:["q"]},{id:"incoherent",label:"Not coherent/understandable to most users who might view the page (including excessive inside jokes)",types:["q"]},{id:"references_non_lasting_data",label:"Contains references to the chart position, average rating, genre voting, other reviewers' comments, or other info that is subject to change.",types:["q"]},{id:"badly_formatted",label:"Badly-formatted: contains excessive whitespace, ASCII-art, URLs or links to external sites, links to images, formatted as a chatlog/script, spoiler tags (in music reviews), repeating the same text over and over, etc.",types:["q"]},{id:"promotional",label:'Contains self-promotional link that is supposed to go in the "attribution" section',types:["q"]}]};function RYMSession(){this.userid=0;this.username="";this.token="";this.init=function(userid,username,token){this.userid=userid;this.username=username;this.token=token};this.logout=function(){this.userid=0;this.username="";this.token=""};this.isLoggedIn=function(){return this.userid!=0}}var RYMresource={};var RYMheader={onClickBars:function(){if($("#header_extended_section").is(":visible")){RYMheader.dismissDesktopMenu();return}$("#header_extended_section").show();$("#content_cover").css({width:"100%",height:$(document).height(),top:0,left:0}).show().on("click",function(){RYMheader.dismissDesktopMenu()})},dismissDesktopMenu:function(){$("#content_cover").off("click").hide();$("#header_extended_section").fadeOut(50)},toggleMobileMenu:function(){if($("#content_cover").is(":visible")){RYMheader.hideMobileMenu()}else{RYMheader.showMobileMenu()}},showMobileMenu:function(){$("#header_expanded").show();var pageHeight=$(document).height()+"px";$("#content_cover").css({width:"100%",height:pageHeight,top:"6em",left:0}).show().on("click",function(){RYMheader.hideMobileMenu()})},hideMobileMenu:function(){$("#header_expanded").hide();$("#content_cover").hide().off("click")}};function RYMRequest(){this.sendRequest=function(requestType,data,callback,dataType,cache,url){if(cache==null){cache=false}if(url==null){url="/httprequest/"+data.action}data.rym_ajax_req=1;data.request_token=rym.session.token;return jQuery.ajax({url:url,type:requestType,data:data,success:callback,dataType:dataType,cache:cache})};this.post=function(action,data,callback,dataType,cache,url){data.action=action;return this.sendRequest("POST",data,callback,dataType,cache,url)}}function RYM(){this.session=new RYMSession;this.request=new RYMRequest;this.doModalLoading=function(){$("#modal_content").show().loadingAnim();$("#modal_parent_frame").show();$("#modal_overlay").show();$("#body").addClass("modal_active")};this.closeModal=function(){$("#modal_parent_frame").hide();$("#modal_content").html("");$("#modal_overlay").hide();$("#body").removeClass("modal_active");$("#body").off("keypress")};this.doModal=function(body,title,options){options=options||{};options=Object.assign({mode:"message",frame_class:"standard"},options);$("#modal_parent_frame_inner")[0].className="modal_parent_frame_inner modal_parent_frame_inner_"+options.frame_class;$("#modal_parent_frame").show();$("#modal_overlay").show();$("#body").addClass("modal_active");var html=RYMtemplate["ui.modal"].render({title:title,body:body,frame_class:options.frame_class});$("#modal_content").html(html).show();$("#body").on("keydown",function(event){if(event&&event.keyCode){switch(event.keyCode){case g_keyCodes.esc:rym.closeModal();return false;break}}})},this.doModalLoading=function(){$("#modal_content").show().loadingAnim();$("#modal_parent_frame").show();$("#modal_overlay").show();$("#body").addClass("modal_active")},this.clearGlobalError=function(){$("#header_error").hide()};this.showGlobalError=function(error){$("#header_error_text").html(error);$("#header_error").fadeIn(100).fadeOut(10).fadeIn(100);if($("#submitbtn")){$("#submitbtn").prop("disabled",false)}};this.showGlobalMessage=function(text){$("#header_message_text").html(text);$("#header_message").fadeIn(100);if($("#submitbtn")){$("#submitbtn").prop("disabled",false)}};this.doSpinner=function(targetId,spinner){spinner=spinner==null?"s":spinner;if(spinner=="s"||spinner=="m"||spinner=="l"){spinner='<img src="/images/spinner_'+spinner+'.gif">'}$("#"+targetId).html(spinner)};this.search=function(searchterm,type,page,targetId,spinner){if(targetId==null){targetId="searchresults"}this.doSpinner(targetId,'<div style="height:400px;text-align:center;padding-top:200px;"><img src="/images/spinner_m.gif><br><em>Searching...</em></div>');this.request.post("Search",{searchterm:searchterm,type:type,page:page},function(data){$("#"+targetId).html(data)},"html")};this.setupPage=function(){$(window).on("hashchange",function(){window.scrollTo(window.scrollX,window.scrollY-60)}).ready(function(){$.force_appear()});$(".delayed_background_img").on("appear",function(){if(window.devicePixelRatio>1&&$(this).data("delayloadurl2x")){$(this).css("background",$(this).data("delayloadurl2x"))}else{$(this).css("background",$(this).data("delayloadurl"))}$(this).off("appear")});$(".delayed_foreground_img").on("appear",function(){if(window.devicePixelRatio>1&&$(this).data("delayload2x")){$(this).attr("src",$(this).data("delayloadurl2x"))}else{$(this).attr("src",$(this).data("delayloadurl"))}$(this).off("appear")});$(".delayed_background_img").appear();$(".delayed_foreground_img").appear();$.force_appear();$(".timeago").timeago();$(".has_tip").tipTip();$(".ui_textarea").textareaUI();$(".ui_fullname").fullnameUI();$(".ui_textfilter").textfilterUI();$(".ui_picker").pickerUI();$(".ui_nav").navUI();$(".ui_chooser").chooserUI();$(".page_section_dynamic_fade").dynamicFadeSectionUI();$(".format_pretty_int").each(function(el){$(this).text(parseInt($(this).text()).toLocaleString("en",{useGrouping:true}))});$(".suggestions").on("appear",function(){var el=$(this);RYMsuggestions.load(el);el.off("appear")}).appear()}}rym=new RYM;String.prototype.toHHMMSS=function(){var sec_num=parseInt(this,10);if(!sec_num){return""}var hours=Math.floor(sec_num/3600);var minutes=Math.floor((sec_num-hours*3600)/60);var seconds=sec_num-hours*3600-minutes*60;if(minutes<10){minutes="0"+minutes}if(seconds<10){seconds="0"+seconds}return hours+":"+minutes+":"+seconds};String.prototype.toMMSS=function(){var sec_num=parseInt(this,10);if(!sec_num){return""}var minutes=Math.floor(sec_num/60);var seconds=sec_num-minutes*60;if(seconds<10){seconds="0"+seconds}return minutes+":"+seconds};String.prototype.abbreviateNumber=function(){var number=parseInt(this);if(number<1e4){return number}var SI_PREFIXES=["","k","M","G","T","P","E"];var tier=Math.log10(number)/3|0;if(tier==0)return number;var prefix=SI_PREFIXES[tier];var scale=Math.pow(10,tier*3);var scaled=number/scale;return scaled.toFixed(1)+prefix};Math.log10=Math.log10||function(x){return Math.log(x)*Math.LOG10E};var Hogan={};(function(Hogan){Hogan.Template=function(codeObj,text,compiler,options){codeObj=codeObj||{};this.r=codeObj.code||this.r;this.c=compiler;this.options=options||{};this.text=text||"";this.partials=codeObj.partials||{};this.subs=codeObj.subs||{};this.ib()};Hogan.Template.prototype={r:function(context,partials,indent){return""},v:hoganEscape,t:coerceToString,render:function render(context,partials,indent){return this.ri([context],partials||{},indent)},ri:function(context,partials,indent){return this.r(context,partials,indent)},ep:function(symbol,partials){var partial=this.partials[symbol];var template=partials[partial.name];if(partial.instance&&partial.base==template){return partial.instance}if(typeof template=="string"){if(!this.c){throw new Error("No compiler available.")}template=this.c.compile(template,this.options)}if(!template){return null}this.partials[symbol].base=template;if(partial.subs){if(this.activeSub===undefined){partials.stackText=this.text}template=createSpecializedPartial(template,partial.subs,partial.partials,partials.stackText||this.text)}this.partials[symbol].instance=template;return template},rp:function(symbol,ctx,partials,indent){var partial=this.ep(symbol,partials);if(!partial){return""}return partial.ri(ctx,partials,indent)},rs:function(ctx,partials,section){var tail=ctx[ctx.length-1],func,offset,arg;if(typeof tail=="function"){func=tail;tail=ctx[ctx.length-2];offset=this.buf.length}if(!isArray(tail)){section(ctx,partials,this)}else{for(var i=0;i<tail.length;i++){ctx.push(tail[i]);section(ctx,partials,this);ctx.pop()}}if(func){arg=this.buf.substr(offset);this.buf=this.buf.substr(0,offset);this.b(func(arg))}},s:function(val,ctx,partials,inverted){if(isArray(val)&&val.length===0){return false}var func;if(typeof val=="function"){val=this.ms(val,ctx,partials);if(typeof val=="function"){func=val}}var pass=!!val;if(!inverted&&pass&&ctx){if(func){ctx.push(func)}else{ctx.push(typeof val=="object"?val:ctx[ctx.length-1])}}return pass},d:function(key,ctx,partials,returnFound){var found,names=key.split("."),val=this.f(names[0],ctx,partials,returnFound),doModelGet=this.options.modelGet,cx=null;if(key==="."&&isArray(ctx[ctx.length-2])){val=ctx[ctx.length-1]}else{for(var i=1;i<names.length;i++){found=findInScope(names[i],val,doModelGet);if(found!=null){cx=val;val=found}else{val=""}}}if(returnFound&&!val){return false}if(!returnFound&&typeof val=="function"){ctx.push(cx);val=this.mv(val,ctx,partials);ctx.pop()}return val},f:function(key,ctx,partials,returnFound){var val=false,v=null,found=false,doModelGet=this.options.modelGet;for(var i=ctx.length-1;i>=0;i--){v=ctx[i];val=findInScope(key,v,doModelGet);if(val!=null){found=true;break}}if(!found){return returnFound?false:""}if(!returnFound&&typeof val=="function"){val=this.mv(val,ctx,partials)}return val},b:function(s){this.buf+=s},fl:function(){var r=this.buf;this.buf="";return r},ib:function(){this.buf=""},ms:function(func,ctx,partials){var cx=ctx[ctx.length-1];return func.call(cx)},mv:function(func,ctx,partials){var cx=ctx[ctx.length-1];return func.call(cx)},sub:function(name,context,partials,indent){var f=this.subs[name];if(f){this.activeSub=name;f(context,partials,this,indent);this.activeSub=false}}};function findInScope(key,scope,doModelGet){var val,checkVal;if(scope&&(typeof scope=="object"||typeof scope=="string"||typeof scope=="number")){if(typeof scope=="number"&&key==="comma"){return scope.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}if(typeof scope=="number"&&key==="decimal_1"){return parseFloat(Math.round(scope*100)/100).toFixed(1)}if(typeof scope=="number"&&key==="decimal_2"){return parseFloat(Math.round(scope*100)/100).toFixed(2)}if(typeof scope=="number"&&key==="singular"){return scope==1}if(typeof scope=="number"&&key==="duration_hhmmss"){return(scope+"").toHHMMSS()}if(typeof scope=="number"&&key==="duration_mmss"){return(scope+"").toMMSS()}if(key==="cap_first_word"){return scope.charAt(0).toUpperCase()+scope.slice(1)}if(key==="first_item"){return scope[0]}if(key==="first_2"){return scope.slice(0,2)}if(key==="first_3"){return scope.slice(0,3)}if(key==="first_4"){return scope.slice(0,4)}if(key==="first_5"){return scope.slice(0,5)}if(key==="first_10"){return scope.slice(0,10)}if(key==="rest_2"){return scope.slice(2)}if(key==="rest_3"){return scope.slice(3)}if(key==="rest_4"){return scope.slice(4)}if(key==="rest_5"){return scope.slice(5)}if(key==="rest_10"){return scope.slice(10)}if(key==="has_one_item"){return scope.length===1}if(key==="has_expand_1"){return scope.length>1}if(key==="has_expand_2"){return scope.length>2}if(key==="has_expand_3"){return scope.length>3}if(key==="has_expand_4"){return scope.length>4}if(key==="has_expand_5"){return scope.length>5}if(key==="has_expand_10"){return scope.length>10}if(key==="abbreviated_num"){return(scope+"").abbreviateNumber()}if(key==="medium_length"){return scope.length>15&&scope.length<=30}if(key==="long_length"){return scope.length>30&&scope.length<=45}if(key==="extralong_length"){return scope.length>45}if(key==="stringify"){return JSON.stringify(scope)}if(scope[key]!=null){val=scope[key]}else if(doModelGet&&scope.get&&typeof scope.get=="function"){val=scope.get(key)}}return val}function createSpecializedPartial(instance,subs,partials,childText){function PartialTemplate(){}PartialTemplate.prototype=instance;function Substitutions(){}Substitutions.prototype=instance.subs;var key;var partial=new PartialTemplate;partial.subs=new Substitutions;partial.subsText={};partial.ib();for(key in subs){partial.subs[key]=subs[key];partial.subsText[key]=childText}for(key in partials){partial.partials[key]=partials[key]}return partial}var rAmp=/&/g,rLt=/</g,rGt=/>/g,rApos=/\'/g,rQuot=/\"/g,hChars=/[&<>\"\']/;function coerceToString(val){return String(val===null||val===undefined?"":val)}function hoganEscape(str){str=coerceToString(str);return hChars.test(str)?str.replace(rAmp,"&amp;").replace(rLt,"&lt;").replace(rGt,"&gt;").replace(rApos,"&#39;").replace(rQuot,"&quot;"):str}var isArray=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"}})(typeof exports!=="undefined"?exports:Hogan);(function(Hogan){var rIsWhitespace=/\S/,rQuot=/\"/g,rNewline=/\n/g,rCr=/\r/g,rSlash=/\\/g;Hogan.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12};Hogan.scan=function scan(text,delimiters){var len=text.length,IN_TEXT=0,IN_TAG_TYPE=1,IN_TAG=2,state=IN_TEXT,tagType=null,tag=null,buf="",tokens=[],seenTag=false,i=0,lineStart=0,otag="{{",ctag="}}";function addBuf(){if(buf.length>0){tokens.push({tag:"_t",text:new String(buf)});buf=""}}function lineIsWhitespace(){var isAllWhitespace=true;for(var j=lineStart;j<tokens.length;j++){isAllWhitespace=Hogan.tags[tokens[j].tag]<Hogan.tags["_v"]||tokens[j].tag=="_t"&&tokens[j].text.match(rIsWhitespace)===null;if(!isAllWhitespace){return false}}return isAllWhitespace}function filterLine(haveSeenTag,noNewLine){addBuf();if(haveSeenTag&&lineIsWhitespace()){for(var j=lineStart,next;j<tokens.length;j++){if(tokens[j].text){if((next=tokens[j+1])&&next.tag==">"){next.indent=tokens[j].text.toString()}tokens.splice(j,1)}}}else if(!noNewLine){tokens.push({tag:"\n"})}seenTag=false;lineStart=tokens.length}function changeDelimiters(text,index){var close="="+ctag,closeIndex=text.indexOf(close,index),delimiters=trim(text.substring(text.indexOf("=",index)+1,closeIndex)).split(" ");otag=delimiters[0];ctag=delimiters[delimiters.length-1];return closeIndex+close.length-1}if(delimiters){delimiters=delimiters.split(" ");otag=delimiters[0];ctag=delimiters[1]}for(i=0;i<len;i++){if(state==IN_TEXT){if(tagChange(otag,text,i)){--i;addBuf();state=IN_TAG_TYPE}else{if(text.charAt(i)=="\n"){filterLine(seenTag)}else{buf+=text.charAt(i)}}}else if(state==IN_TAG_TYPE){i+=otag.length-1;tag=Hogan.tags[text.charAt(i+1)];tagType=tag?text.charAt(i+1):"_v";if(tagType=="="){i=changeDelimiters(text,i);state=IN_TEXT}else{if(tag){i++}state=IN_TAG}seenTag=i}else{if(tagChange(ctag,text,i)){tokens.push({tag:tagType,n:trim(buf),otag:otag,ctag:ctag,i:tagType=="/"?seenTag-otag.length:i+ctag.length});buf="";i+=ctag.length-1;state=IN_TEXT;if(tagType=="{"){if(ctag=="}}"){i++}else{cleanTripleStache(tokens[tokens.length-1])}}}else{buf+=text.charAt(i)}}}filterLine(seenTag,true);return tokens};function cleanTripleStache(token){if(token.n.substr(token.n.length-1)==="}"){token.n=token.n.substring(0,token.n.length-1)}}function trim(s){if(s.trim){return s.trim()}return s.replace(/^\s*|\s*$/g,"")}function tagChange(tag,text,index){if(text.charAt(index)!=tag.charAt(0)){return false}for(var i=1,l=tag.length;i<l;i++){if(text.charAt(index+i)!=tag.charAt(i)){return false}}return true}var allowedInSuper={_t:true,"\n":true,$:true,"/":true};function buildTree(tokens,kind,stack,customTags){var instructions=[],opener=null,tail=null,token=null;tail=stack[stack.length-1];while(tokens.length>0){token=tokens.shift();if(tail&&tail.tag=="<"&&!(token.tag in allowedInSuper)){throw new Error("Illegal content in < super tag.")}if(Hogan.tags[token.tag]<=Hogan.tags["$"]||isOpener(token,customTags)){stack.push(token);token.nodes=buildTree(tokens,token.tag,stack,customTags)}else if(token.tag=="/"){if(stack.length===0){throw new Error("Closing tag without opener: /"+token.n)}opener=stack.pop();if(token.n!=opener.n&&!isCloser(token.n,opener.n,customTags)){throw new Error("Nesting error: "+opener.n+" vs. "+token.n)}opener.end=token.i;return instructions}else if(token.tag=="\n"){token.last=tokens.length==0||tokens[0].tag=="\n"}instructions.push(token)}if(stack.length>0){throw new Error("missing closing tag: "+stack.pop().n)}return instructions}function isOpener(token,tags){for(var i=0,l=tags.length;i<l;i++){if(tags[i].o==token.n){token.tag="#";return true}}}function isCloser(close,open,tags){for(var i=0,l=tags.length;i<l;i++){if(tags[i].c==close&&tags[i].o==open){return true}}}function stringifySubstitutions(obj){var items=[];for(var key in obj){items.push('"'+esc(key)+'": function(c,p,t,i) {'+obj[key]+"}")}return"{ "+items.join(",")+" }"}function stringifyPartials(codeObj){var partials=[];for(var key in codeObj.partials){partials.push('"'+esc(key)+'":{name:"'+esc(codeObj.partials[key].name)+'", '+stringifyPartials(codeObj.partials[key])+"}")}return"partials: {"+partials.join(",")+"}, subs: "+stringifySubstitutions(codeObj.subs)}Hogan.stringify=function(codeObj,text,options){return"{code: function (c,p,i) { "+Hogan.wrapMain(codeObj.code)+" },"+stringifyPartials(codeObj)+"}"};var serialNo=0;Hogan.generate=function(tree,text,options){serialNo=0;var context={code:"",subs:{},partials:{}};Hogan.walk(tree,context);if(options.asString){return this.stringify(context,text,options)}return this.makeTemplate(context,text,options)};Hogan.wrapMain=function(code){return'var t=this;t.b(i=i||"");'+code+"return t.fl();"};Hogan.template=Hogan.Template;Hogan.makeTemplate=function(codeObj,text,options){var template=this.makePartials(codeObj);template.code=new Function("c","p","i",this.wrapMain(codeObj.code));return new this.template(template,text,this,options)};Hogan.makePartials=function(codeObj){var key,template={subs:{},partials:codeObj.partials,name:codeObj.name};for(key in template.partials){template.partials[key]=this.makePartials(template.partials[key])}for(key in codeObj.subs){template.subs[key]=new Function("c","p","t","i",codeObj.subs[key])}return template};function esc(s){return s.replace(rSlash,"\\\\").replace(rQuot,'\\"').replace(rNewline,"\\n").replace(rCr,"\\r")}function chooseMethod(s){return~s.indexOf(".")?"d":"f"}function createPartial(node,context){var prefix="<"+(context.prefix||"");var sym=prefix+node.n+serialNo++;context.partials[sym]={name:node.n,partials:{}};context.code+='t.b(t.rp("'+esc(sym)+'",c,p,"'+(node.indent||"")+'"));';return sym}Hogan.codegen={"#":function(node,context){context.code+="if(t.s(t."+chooseMethod(node.n)+'("'+esc(node.n)+'",c,p,1),'+"c,p,0,"+node.i+","+node.end+',"'+node.otag+" "+node.ctag+'")){'+"t.rs(c,p,"+"function(c,p,t){";Hogan.walk(node.nodes,context);context.code+="});c.pop();}"},"^":function(node,context){context.code+="if(!t.s(t."+chooseMethod(node.n)+'("'+esc(node.n)+'",c,p,1),c,p,1,0,0,"")){';Hogan.walk(node.nodes,context);context.code+="};"},">":createPartial,"<":function(node,context){var ctx={partials:{},code:"",subs:{},inPartial:true};Hogan.walk(node.nodes,ctx);var template=context.partials[createPartial(node,context)];template.subs=ctx.subs;template.partials=ctx.partials},$:function(node,context){var ctx={subs:{},code:"",partials:context.partials,prefix:node.n};Hogan.walk(node.nodes,ctx);context.subs[node.n]=ctx.code;if(!context.inPartial){context.code+='t.sub("'+esc(node.n)+'",c,p,i);'}},"\n":function(node,context){context.code+=write('"\\n"'+(node.last?"":" + i"))},_v:function(node,context){context.code+="t.b(t.v(t."+chooseMethod(node.n)+'("'+esc(node.n)+'",c,p,0)));'},_t:function(node,context){context.code+=write('"'+esc(node.text)+'"')},"{":tripleStache,"&":tripleStache};function tripleStache(node,context){context.code+="t.b(t.t(t."+chooseMethod(node.n)+'("'+esc(node.n)+'",c,p,0)));'}function write(s){return"t.b("+s+");"}Hogan.walk=function(nodelist,context){var func;for(var i=0,l=nodelist.length;i<l;i++){func=Hogan.codegen[nodelist[i].tag];func&&func(nodelist[i],context)}return context};Hogan.parse=function(tokens,text,options){options=options||{};return buildTree(tokens,"",[],options.sectionTags||[])};Hogan.cache={};Hogan.cacheKey=function(text,options){return[text,!!options.asString,!!options.disableLambda,options.delimiters,!!options.modelGet].join("||")};Hogan.compile=function(text,options){options=options||{};var key=Hogan.cacheKey(text,options);var template=this.cache[key];if(template){var partials=template.partials;for(var name in partials){delete partials[name].instance}return template}template=this.generate(this.parse(this.scan(text,options.delimiters),text,options),text,options);return this.cache[key]=template}})(typeof exports!=="undefined"?exports:Hogan);(function($){var converter={vertical:{x:false,y:true},horizontal:{x:true,y:false},both:{x:true,y:true},x:{x:true,y:false},y:{x:false,y:true}};var settings={duration:"fast",direction:"both"};var rootrx=/^(?:html)$/i;var borders=function(domElement,styles){styles=styles||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(domElement,null):domElement.currentStyle);var px=document.defaultView&&document.defaultView.getComputedStyle?true:false;var b={top:parseFloat(px?styles.borderTopWidth:$.css(domElement,"borderTopWidth"))||0,left:parseFloat(px?styles.borderLeftWidth:$.css(domElement,"borderLeftWidth"))||0,bottom:parseFloat(px?styles.borderBottomWidth:$.css(domElement,"borderBottomWidth"))||0,right:parseFloat(px?styles.borderRightWidth:$.css(domElement,"borderRightWidth"))||0};return{top:b.top,left:b.left,bottom:b.bottom,right:b.right,vertical:b.top+b.bottom,horizontal:b.left+b.right}};var dimensions=function($element){var win=$(window);var isRoot=rootrx.test($element[0].nodeName);return{border:isRoot?{top:0,left:0,bottom:0,right:0}:borders($element[0]),scroll:{top:(isRoot?win:$element).scrollTop(),left:(isRoot?win:$element).scrollLeft()},scrollbar:{right:isRoot?0:$element.innerWidth()-$element[0].clientWidth,bottom:isRoot?0:$element.innerHeight()-$element[0].clientHeight},rect:function(){var r=$element[0].getBoundingClientRect();return{top:isRoot?0:r.top,left:isRoot?0:r.left,bottom:isRoot?$element[0].clientHeight:r.bottom,right:isRoot?$element[0].clientWidth:r.right}}()}};$.fn.extend({scrollintoview:function(options){options=$.extend({},settings,options);options.direction=converter[typeof options.direction==="string"&&options.direction.toLowerCase()]||converter.both;var dirStr="";if(options.direction.x===true)dirStr="horizontal";if(options.direction.y===true)dirStr=dirStr?"both":"vertical";var el=this.eq(0);var scroller=el.closest(":scrollable("+dirStr+")");if(scroller.length>0){scroller=scroller.eq(0);var dim={e:dimensions(el),s:dimensions(scroller)};var rel={top:dim.e.rect.top-(dim.s.rect.top+dim.s.border.top),bottom:dim.s.rect.bottom-dim.s.border.bottom-dim.s.scrollbar.bottom-dim.e.rect.bottom,left:dim.e.rect.left-(dim.s.rect.left+dim.s.border.left),right:dim.s.rect.right-dim.s.border.right-dim.s.scrollbar.right-dim.e.rect.right};var animOptions={};if(options.direction.y===true){if(rel.top<0){animOptions.scrollTop=dim.s.scroll.top+rel.top-120}else if(rel.top>0&&rel.bottom<0){animOptions.scrollTop=dim.s.scroll.top+Math.min(rel.top,-rel.bottom)}}if(options.direction.x===true){if(rel.left<0){animOptions.scrollLeft=dim.s.scroll.left+rel.left}else if(rel.left>0&&rel.right<0){animOptions.scrollLeft=dim.s.scroll.left+Math.min(rel.left,-rel.right)}}if(!$.isEmptyObject(animOptions)){if(rootrx.test(scroller[0].nodeName)){scroller=$("html,body")}scroller.animate(animOptions,options.duration).eq(0).queue(function(next){$.isFunction(options.complete)&&options.complete.call(scroller[0]);next()})}else{$.isFunction(options.complete)&&options.complete.call(scroller[0])}}return this}});var scrollValue={auto:true,scroll:true,visible:false,hidden:false};$.extend($.expr[":"],{scrollable:function(element,index,meta,stack){var direction=converter[typeof meta[3]==="string"&&meta[3].toLowerCase()]||converter.both;var styles=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(element,null):element.currentStyle;var overflow={x:scrollValue[styles.overflowX.toLowerCase()]||false,y:scrollValue[styles.overflowY.toLowerCase()]||false,isRoot:rootrx.test(element.nodeName)};if(!overflow.x&&!overflow.y&&!overflow.isRoot){return false}var size={height:{scroll:element.scrollHeight,client:element.clientHeight},width:{scroll:element.scrollWidth,client:element.clientWidth},scrollableX:function(){return(overflow.x||overflow.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(overflow.y||overflow.isRoot)&&this.height.scroll>this.height.client}};return direction.y&&size.scrollableY()||direction.x&&size.scrollableX()}})})(jQuery);!function(){function n(n){return n&&(n.ownerDocument||n.document||n).documentElement}function t(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function e(n,t){return t>n?-1:n>t?1:n>=t?0:NaN}function r(n){return null===n?NaN:+n}function i(n){return!isNaN(n)}function u(n){return{left:function(t,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var u=r+i>>>1;n(t[u],e)<0?r=u+1:i=u}return r},right:function(t,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var u=r+i>>>1;n(t[u],e)>0?i=u:r=u+1}return r}}}function o(n){return n.length}function a(n){for(var t=1;n*t%1;)t*=10;return t}function l(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function c(){this._=Object.create(null)}function f(n){return(n+="")===bo||n[0]===_o?_o+n:n}function s(n){return(n+="")[0]===_o?n.slice(1):n}function h(n){return f(n)in this._}function p(n){return(n=f(n))in this._&&delete this._[n]}function g(){var n=[];for(var t in this._)n.push(s(t));return n}function v(){var n=0;for(var t in this._)++n;return n}function d(){for(var n in this._)return!1;return!0}function y(){this._=Object.create(null)}function m(n){return n}function M(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function x(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=wo.length;r>e;++e){var i=wo[e]+t;if(i in n)return i}}function b(){}function _(){}function w(n){function t(){for(var t,r=e,i=-1,u=r.length;++i<u;)(t=r[i].on)&&t.apply(this,arguments);return n}var e=[],r=new c;return t.on=function(t,i){var u,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,u=e.indexOf(o)).concat(e.slice(u+1)),r.remove(t)),i&&e.push(r.set(t,{on:i})),n)},t}function S(){ao.event.preventDefault()}function k(){for(var n,t=ao.event;n=t.sourceEvent;)t=n;return t}function N(n){for(var t=new _,e=0,r=arguments.length;++e<r;)t[arguments[e]]=w(t);return t.of=function(e,r){return function(i){try{var u=i.sourceEvent=ao.event;i.target=n,ao.event=i,t[i.type].apply(e,r)}finally{ao.event=u}}},t}function E(n){return ko(n,Co),n}function A(n){return"function"==typeof n?n:function(){return No(n,this)}}function C(n){return"function"==typeof n?n:function(){return Eo(n,this)}}function z(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function i(){this.setAttribute(n,t)}function u(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=ao.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?a:o:n.local?u:i}function L(n){return n.trim().replace(/\s+/g," ")}function q(n){return new RegExp("(?:^|\\s+)"+ao.requote(n)+"(?:\\s+|$)","g")}function T(n){return(n+"").trim().split(/^|\s+/)}function R(n,t){function e(){for(var e=-1;++e<i;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<i;)n[e](this,r)}n=T(n).map(D);var i=n.length;return"function"==typeof t?r:e}function D(n){var t=q(n);return function(e,r){if(i=e.classList)return r?i.add(n):i.remove(n);var i=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||e.setAttribute("class",L(i+" "+n))):e.setAttribute("class",L(i.replace(t," ")))}}function P(n,t,e){function r(){this.style.removeProperty(n)}function i(){this.style.setProperty(n,t,e)}function u(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?u:i}function U(n,t){function e(){delete this[n]}function r(){this[n]=t}function i(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?i:r}function j(n){function t(){var t=this.ownerDocument,e=this.namespaceURI;return e===zo&&t.documentElement.namespaceURI===zo?t.createElement(n):t.createElementNS(e,n)}function e(){return this.ownerDocument.createElementNS(n.space,n.local)}return"function"==typeof n?n:(n=ao.ns.qualify(n)).local?e:t}function F(){var n=this.parentNode;n&&n.removeChild(this)}function H(n){return{__data__:n}}function O(n){return function(){return Ao(this,n)}}function I(n){return arguments.length||(n=e),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function Y(n,t){for(var e=0,r=n.length;r>e;e++)for(var i,u=n[e],o=0,a=u.length;a>o;o++)(i=u[o])&&t(i,o,e);return n}function Z(n){return ko(n,qo),n}function V(n){var t,e;return function(r,i,u){var o,a=n[u].update,l=a.length;for(u!=e&&(e=u,t=0),i>=t&&(t=i+1);!(o=a[t])&&++t<l;);return o}}function X(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function i(){var i=l(t,co(arguments));r.call(this),this.addEventListener(n,this[o]=i,i.$=e),i._=t}function u(){var t,e=new RegExp("^__on([^.]+)"+ao.requote(n)+"$");for(var r in this)if(t=r.match(e)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+n,a=n.indexOf("."),l=$;a>0&&(n=n.slice(0,a));var c=To.get(n);return c&&(n=c,l=B),a?t?i:r:t?b:u}function $(n,t){return function(e){var r=ao.event;ao.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{ao.event=r}}}function B(n,t){var e=$(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function W(e){var r=".dragsuppress-"+ ++Do,i="click"+r,u=ao.select(t(e)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==Ro&&(Ro="onselectstart"in e?!1:x(e.style,"userSelect")),Ro){var o=n(e).style,a=o[Ro];o[Ro]="none"}return function(n){if(u.on(r,null),Ro&&(o[Ro]=a),n){var t=function(){u.on(i,null)};u.on(i,function(){S(),t()},!0),setTimeout(t,0)}}}function J(n,e){e.changedTouches&&(e=e.changedTouches[0]);var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>Po){var u=t(n);if(u.scrollX||u.scrollY){r=ao.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Po=!(o.f||o.e),r.remove()}}return Po?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}var a=n.getBoundingClientRect();return[e.clientX-a.left-n.clientLeft,e.clientY-a.top-n.clientTop]}function G(){return ao.event.changedTouches[0].identifier}function K(n){return n>0?1:0>n?-1:0}function Q(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function nn(n){return n>1?0:-1>n?Fo:Math.acos(n)}function tn(n){return n>1?Io:-1>n?-Io:Math.asin(n)}function en(n){return((n=Math.exp(n))-1/n)/2}function rn(n){return((n=Math.exp(n))+1/n)/2}function un(n){return((n=Math.exp(2*n))-1)/(n+1)}function on(n){return(n=Math.sin(n/2))*n}function an(){}function ln(n,t,e){return this instanceof ln?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof ln?new ln(n.h,n.s,n.l):_n(""+n,wn,ln):new ln(n,t,e)}function cn(n,t,e){function r(n){return n>360?n-=360:0>n&&(n+=360),60>n?u+(o-u)*n/60:180>n?o:240>n?u+(o-u)*(240-n)/60:u}function i(n){return Math.round(255*r(n))}var u,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,e=0>e?0:e>1?1:e,o=.5>=e?e*(1+t):e+t-e*t,u=2*e-o,new mn(i(n+120),i(n),i(n-120))}function fn(n,t,e){return this instanceof fn?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof fn?new fn(n.h,n.c,n.l):n instanceof hn?gn(n.l,n.a,n.b):gn((n=Sn((n=ao.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new fn(n,t,e)}function sn(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new hn(e,Math.cos(n*=Yo)*t,Math.sin(n)*t)}function hn(n,t,e){return this instanceof hn?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof hn?new hn(n.l,n.a,n.b):n instanceof fn?sn(n.h,n.c,n.l):Sn((n=mn(n)).r,n.g,n.b):new hn(n,t,e)}function pn(n,t,e){var r=(n+16)/116,i=r+t/500,u=r-e/200;return i=vn(i)*na,r=vn(r)*ta,u=vn(u)*ea,new mn(yn(3.2404542*i-1.5371385*r-.4985314*u),yn(-.969266*i+1.8760108*r+.041556*u),yn(.0556434*i-.2040259*r+1.0572252*u))}function gn(n,t,e){return n>0?new fn(Math.atan2(e,t)*Zo,Math.sqrt(t*t+e*e),n):new fn(NaN,NaN,n)}function vn(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function dn(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function yn(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function mn(n,t,e){return this instanceof mn?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof mn?new mn(n.r,n.g,n.b):_n(""+n,mn,cn):new mn(n,t,e)}function Mn(n){return new mn(n>>16,n>>8&255,255&n)}function xn(n){return Mn(n)+""}function bn(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function _n(n,t,e){var r,i,u,o=0,a=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(n=n.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Nn(i[0]),Nn(i[1]),Nn(i[2]))}return(u=ua.get(n))?t(u.r,u.g,u.b):(null==n||"#"!==n.charAt(0)||isNaN(u=parseInt(n.slice(1),16))||(4===n.length?(o=(3840&u)>>4,o=o>>4|o,a=240&u,a=a>>4|a,l=15&u,l=l<<4|l):7===n.length&&(o=(16711680&u)>>16,a=(65280&u)>>8,l=255&u)),t(o,a,l))}function wn(n,t,e){var r,i,u=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-u,l=(o+u)/2;return a?(i=.5>l?a/(o+u):a/(2-o-u),r=n==o?(t-e)/a+(e>t?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=NaN,i=l>0&&1>l?0:r),new ln(r,i,l)}function Sn(n,t,e){n=kn(n),t=kn(t),e=kn(e);var r=dn((.4124564*n+.3575761*t+.1804375*e)/na),i=dn((.2126729*n+.7151522*t+.072175*e)/ta),u=dn((.0193339*n+.119192*t+.9503041*e)/ea);return hn(116*i-16,500*(r-i),200*(i-u))}function kn(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Nn(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function En(n){return"function"==typeof n?n:function(){return n}}function An(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Cn(t,e,n,r)}}function Cn(n,t,e,r){function i(){var n,t=l.status;if(!t&&Ln(l)||t>=200&&300>t||304===t){try{n=e.call(u,l)}catch(r){return void o.error.call(u,r)}o.load.call(u,n)}else o.error.call(u,l)}var u={},o=ao.dispatch("beforesend","progress","load","error"),a={},l=new XMLHttpRequest,c=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(n)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(n){var t=ao.event;ao.event=n;try{o.progress.call(u,l)}finally{ao.event=t}},u.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+"",u)},u.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",u):t},u.responseType=function(n){return arguments.length?(c=n,u):c},u.response=function(n){return e=n,u},["get","post"].forEach(function(n){u[n]=function(){return u.send.apply(u,[n].concat(co(arguments)))}}),u.send=function(e,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(e,n,!0),null==t||"accept"in a||(a.accept=t+",*/*"),l.setRequestHeader)for(var f in a)l.setRequestHeader(f,a[f]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=c&&(l.responseType=c),null!=i&&u.on("error",i).on("load",function(n){i(null,n)}),o.beforesend.call(u,l),l.send(null==r?null:r),u},u.abort=function(){return l.abort(),u},ao.rebind(u,o,"on"),null==r?u:u.get(zn(r))}function zn(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function Ln(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function qn(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var i=e+t,u={c:n,t:i,n:null};return aa?aa.n=u:oa=u,aa=u,la||(ca=clearTimeout(ca),la=1,fa(Tn)),u}function Tn(){var n=Rn(),t=Dn()-n;t>24?(isFinite(t)&&(clearTimeout(ca),ca=setTimeout(Tn,t)),la=0):(la=1,fa(Tn))}function Rn(){for(var n=Date.now(),t=oa;t;)n>=t.t&&t.c(n-t.t)&&(t.c=null),t=t.n;return n}function Dn(){for(var n,t=oa,e=1/0;t;)t.c?(t.t<e&&(e=t.t),t=(n=t).n):t=n?n.n=t.n:oa=t.n;return aa=n,e}function Pn(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Un(n,t){var e=Math.pow(10,3*xo(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function jn(n){var t=n.decimal,e=n.thousands,r=n.grouping,i=n.currency,u=r&&e?function(n,t){for(var i=n.length,u=[],o=0,a=r[0],l=0;i>0&&a>0&&(l+a+1>t&&(a=Math.max(1,t-l)),u.push(n.substring(i-=a,i+a)),!((l+=a+1)>t));)a=r[o=(o+1)%r.length];return u.reverse().join(e)}:m;return function(n){var e=ha.exec(n),r=e[1]||" ",o=e[2]||">",a=e[3]||"-",l=e[4]||"",c=e[5],f=+e[6],s=e[7],h=e[8],p=e[9],g=1,v="",d="",y=!1,m=!0;switch(h&&(h=+h.substring(1)),(c||"0"===r&&"="===o)&&(c=r="0",o="="),p){case"n":s=!0,p="g";break;case"%":g=100,d="%",p="f";break;case"p":g=100,d="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(v="0"+p.toLowerCase());case"c":m=!1;case"d":y=!0,h=0;break;case"s":g=-1,p="r"}"$"===l&&(v=i[0],d=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):"e"!=p&&"f"!=p||(h=Math.max(0,Math.min(20,h)))),p=pa.get(p)||Fn;var M=c&&s;return function(n){var e=d;if(y&&n%1)return"";var i=0>n||0===n&&0>1/n?(n=-n,"-"):"-"===a?"":a;if(0>g){var l=ao.formatPrefix(n,h);n=l.scale(n),e=l.symbol+d}else n*=g;n=p(n,h);var x,b,_=n.lastIndexOf(".");if(0>_){var w=m?n.lastIndexOf("e"):-1;0>w?(x=n,b=""):(x=n.substring(0,w),b=n.substring(w))}else x=n.substring(0,_),b=t+n.substring(_+1);!c&&s&&(x=u(x,1/0));var S=v.length+x.length+b.length+(M?0:i.length),k=f>S?new Array(S=f-S+1).join(r):"";return M&&(x=u(k+x,k.length?f-b.length:1/0)),i+=v,n=x+b,("<"===o?i+n+k:">"===o?k+i+n:"^"===o?k.substring(0,S>>=1)+i+n+k.substring(S):i+(M?n:k+n))+e}}}function Fn(n){return n+""}function Hn(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function On(n,t,e){function r(t){var e=n(t),r=u(e,1);return r-t>t-e?e:r}function i(e){return t(e=n(new va(e-1)),1),e}function u(n,e){return t(n=new va(+n),e),n}function o(n,r,u){var o=i(n),a=[];if(u>1)for(;r>o;)e(o)%u||a.push(new Date(+o)),t(o,1);else for(;r>o;)a.push(new Date(+o)),t(o,1);return a}function a(n,t,e){try{va=Hn;var r=new Hn;return r._=n,o(r,t,e)}finally{va=Date}}n.floor=n,n.round=r,n.ceil=i,n.offset=u,n.range=o;var l=n.utc=In(n);return l.floor=l,l.round=In(r),l.ceil=In(i),l.offset=In(u),l.range=a,n}function In(n){return function(t,e){try{va=Hn;var r=new Hn;return r._=t,n(r,e)._}finally{va=Date}}}function Yn(n){function t(n){function t(t){for(var e,i,u,o=[],a=-1,l=0;++a<r;)37===n.charCodeAt(a)&&(o.push(n.slice(l,a)),null!=(i=ya[e=n.charAt(++a)])&&(e=n.charAt(++a)),(u=A[e])&&(e=u(t,null==i?"e"===e?" ":"0":i)),o.push(e),l=a+1);return o.push(n.slice(l,a)),o.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=e(r,n,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var u=null!=r.Z&&va!==Hn,o=new(u?Hn:va);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),u?o._:o},t.toString=function(){return n},t}function e(n,t,e,r){for(var i,u,o,a=0,l=t.length,c=e.length;l>a;){if(r>=c)return-1;if(i=t.charCodeAt(a++),37===i){if(o=t.charAt(a++),u=C[o in ya?t.charAt(a++):o],!u||(r=u(n,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){_.lastIndex=0;var r=_.exec(t.slice(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){x.lastIndex=0;var r=x.exec(t.slice(e));return r?(n.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){N.lastIndex=0;var r=N.exec(t.slice(e));return r?(n.m=E.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,e){S.lastIndex=0;var r=S.exec(t.slice(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,r){return e(n,A.c.toString(),t,r)}function l(n,t,r){return e(n,A.x.toString(),t,r)}function c(n,t,r){return e(n,A.X.toString(),t,r)}function f(n,t,e){var r=M.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var s=n.dateTime,h=n.date,p=n.time,g=n.periods,v=n.days,d=n.shortDays,y=n.months,m=n.shortMonths;t.utc=function(n){function e(n){try{va=Hn;var t=new va;return t._=n,r(t)}finally{va=Date}}var r=t(n);return e.parse=function(n){try{va=Hn;var t=r.parse(n);return t&&t._}finally{va=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=ct;var M=ao.map(),x=Vn(v),b=Xn(v),_=Vn(d),w=Xn(d),S=Vn(y),k=Xn(y),N=Vn(m),E=Xn(m);g.forEach(function(n,t){M.set(n.toLowerCase(),t)});var A={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return m[n.getMonth()]},B:function(n){return y[n.getMonth()]},c:t(s),d:function(n,t){return Zn(n.getDate(),t,2)},e:function(n,t){return Zn(n.getDate(),t,2)},H:function(n,t){return Zn(n.getHours(),t,2)},I:function(n,t){return Zn(n.getHours()%12||12,t,2)},j:function(n,t){return Zn(1+ga.dayOfYear(n),t,3)},L:function(n,t){return Zn(n.getMilliseconds(),t,3)},m:function(n,t){return Zn(n.getMonth()+1,t,2)},M:function(n,t){return Zn(n.getMinutes(),t,2)},p:function(n){return g[+(n.getHours()>=12)]},S:function(n,t){return Zn(n.getSeconds(),t,2)},U:function(n,t){return Zn(ga.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return Zn(ga.mondayOfYear(n),t,2)},x:t(h),X:t(p),y:function(n,t){return Zn(n.getFullYear()%100,t,2)},Y:function(n,t){return Zn(n.getFullYear()%1e4,t,4)},Z:at,"%":function(){return"%"}},C={a:r,A:i,b:u,B:o,c:a,d:tt,e:tt,H:rt,I:rt,j:et,L:ot,m:nt,M:it,p:f,S:ut,U:Bn,w:$n,W:Wn,x:l,X:c,y:Gn,Y:Jn,Z:Kn,"%":lt};return t}function Zn(n,t,e){var r=0>n?"-":"",i=(r?-n:n)+"",u=i.length;return r+(e>u?new Array(e-u+1).join(t)+i:i)}function Vn(n){return new RegExp("^(?:"+n.map(ao.requote).join("|")+")","i")}function Xn(n){for(var t=new c,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function $n(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Bn(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function Wn(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Jn(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Gn(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.y=Qn(+r[0]),e+r[0].length):-1}function Kn(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function Qn(n){return n+(n>68?1900:2e3)}function nt(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function tt(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function et(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function rt(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function it(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function ut(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function ot(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function at(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=xo(t)/60|0,i=xo(t)%60;return e+Zn(r,"0",2)+Zn(i,"0",2)}function lt(n,t,e){Ma.lastIndex=0;var r=Ma.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ct(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function ft(){}function st(n,t,e){var r=e.s=n+t,i=r-n,u=r-i;e.t=n-u+(t-i)}function ht(n,t){n&&wa.hasOwnProperty(n.type)&&wa[n.type](n,t)}function pt(n,t,e){var r,i=-1,u=n.length-e;for(t.lineStart();++i<u;)r=n[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function gt(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)pt(n[e],t,1);t.polygonEnd()}function vt(){function n(n,t){n*=Yo,t=t*Yo/2+Fo/4;var e=n-r,o=e>=0?1:-1,a=o*e,l=Math.cos(t),c=Math.sin(t),f=u*c,s=i*l+f*Math.cos(a),h=f*o*Math.sin(a);ka.add(Math.atan2(h,s)),r=n,i=l,u=c}var t,e,r,i,u;Na.point=function(o,a){Na.point=n,r=(t=o)*Yo,i=Math.cos(a=(e=a)*Yo/2+Fo/4),u=Math.sin(a)},Na.lineEnd=function(){n(t,e)}}function dt(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function yt(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function mt(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Mt(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function xt(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function bt(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function _t(n){return[Math.atan2(n[1],n[0]),tn(n[2])]}function wt(n,t){return xo(n[0]-t[0])<Uo&&xo(n[1]-t[1])<Uo}function St(n,t){n*=Yo;var e=Math.cos(t*=Yo);kt(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function kt(n,t,e){++Ea,Ca+=(n-Ca)/Ea,za+=(t-za)/Ea,La+=(e-La)/Ea}function Nt(){function n(n,i){n*=Yo;var u=Math.cos(i*=Yo),o=u*Math.cos(n),a=u*Math.sin(n),l=Math.sin(i),c=Math.atan2(Math.sqrt((c=e*l-r*a)*c+(c=r*o-t*l)*c+(c=t*a-e*o)*c),t*o+e*a+r*l);Aa+=c,qa+=c*(t+(t=o)),Ta+=c*(e+(e=a)),Ra+=c*(r+(r=l)),kt(t,e,r)}var t,e,r;ja.point=function(i,u){i*=Yo;var o=Math.cos(u*=Yo);t=o*Math.cos(i),e=o*Math.sin(i),r=Math.sin(u),ja.point=n,kt(t,e,r)}}function Et(){ja.point=St}function At(){function n(n,t){n*=Yo;var e=Math.cos(t*=Yo),o=e*Math.cos(n),a=e*Math.sin(n),l=Math.sin(t),c=i*l-u*a,f=u*o-r*l,s=r*a-i*o,h=Math.sqrt(c*c+f*f+s*s),p=r*o+i*a+u*l,g=h&&-nn(p)/h,v=Math.atan2(h,p);Da+=g*c,Pa+=g*f,Ua+=g*s,Aa+=v,qa+=v*(r+(r=o)),Ta+=v*(i+(i=a)),Ra+=v*(u+(u=l)),kt(r,i,u)}var t,e,r,i,u;ja.point=function(o,a){t=o,e=a,ja.point=n,o*=Yo;var l=Math.cos(a*=Yo);r=l*Math.cos(o),i=l*Math.sin(o),u=Math.sin(a),kt(r,i,u)},ja.lineEnd=function(){n(t,e),ja.lineEnd=Et,ja.point=St}}function Ct(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function zt(){return!0}function Lt(n,t,e,r,i){var u=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(wt(e,r)){i.lineStart();for(var a=0;t>a;++a)i.point((e=n[a])[0],e[1]);return void i.lineEnd()}var l=new Tt(e,n,null,!0),c=new Tt(e,null,l,!1);l.o=c,u.push(l),o.push(c),l=new Tt(r,n,null,!1),c=new Tt(r,null,l,!0),l.o=c,u.push(l),o.push(c)}}),o.sort(t),qt(u),qt(o),u.length){for(var a=0,l=e,c=o.length;c>a;++a)o[a].e=l=!l;for(var f,s,h=u[0];;){for(var p=h,g=!0;p.v;)if((p=p.n)===h)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(var a=0,c=f.length;c>a;++a)i.point((s=f[a])[0],s[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(g){f=p.p.z;for(var a=f.length-1;a>=0;--a)i.point((s=f[a])[0],s[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,g=!g}while(!p.v);i.lineEnd()}}}function qt(n){if(t=n.length){for(var t,e,r=0,i=n[0];++r<t;)i.n=e=n[r],e.p=i,i=e;i.n=e=n[0],e.p=i}}function Tt(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Rt(n,t,e,r){return function(i,u){function o(t,e){var r=i(t,e);n(t=r[0],e=r[1])&&u.point(t,e)}function a(n,t){var e=i(n,t);d.point(e[0],e[1])}function l(){m.point=a,d.lineStart()}function c(){m.point=o,d.lineEnd()}function f(n,t){v.push([n,t]);var e=i(n,t);x.point(e[0],e[1])}function s(){x.lineStart(),v=[]}function h(){f(v[0][0],v[0][1]),x.lineEnd();var n,t=x.clean(),e=M.buffer(),r=e.length;if(v.pop(),g.push(v),v=null,r)if(1&t){n=e[0];var i,r=n.length-1,o=-1;if(r>0){for(b||(u.polygonStart(),b=!0),u.lineStart();++o<r;)u.point((i=n[o])[0],i[1]);u.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),p.push(e.filter(Dt))}var p,g,v,d=t(u),y=i.invert(r[0],r[1]),m={point:o,lineStart:l,lineEnd:c,polygonStart:function(){m.point=f,m.lineStart=s,m.lineEnd=h,p=[],g=[]},polygonEnd:function(){m.point=o,m.lineStart=l,m.lineEnd=c,p=ao.merge(p);var n=Ot(y,g);p.length?(b||(u.polygonStart(),b=!0),Lt(p,Ut,n,e,u)):n&&(b||(u.polygonStart(),b=!0),u.lineStart(),e(null,null,1,u),u.lineEnd()),b&&(u.polygonEnd(),b=!1),p=g=null},sphere:function(){u.polygonStart(),u.lineStart(),e(null,null,1,u),u.lineEnd(),u.polygonEnd()}},M=Pt(),x=t(M),b=!1;return m}}function Dt(n){return n.length>1}function Pt(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:b,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Ut(n,t){return((n=n.x)[0]<0?n[1]-Io-Uo:Io-n[1])-((t=t.x)[0]<0?t[1]-Io-Uo:Io-t[1])}function jt(n){var t,e=NaN,r=NaN,i=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(u,o){var a=u>0?Fo:-Fo,l=xo(u-e);xo(l-Fo)<Uo?(n.point(e,r=(r+o)/2>0?Io:-Io),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(u,r),t=0):i!==a&&l>=Fo&&(xo(e-i)<Uo&&(e-=i*Uo),xo(u-a)<Uo&&(u-=a*Uo),r=Ft(e,r,u,o),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=u,r=o),i=a},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}}function Ft(n,t,e,r){var i,u,o=Math.sin(n-e);return xo(o)>Uo?Math.atan((Math.sin(t)*(u=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(t))*Math.sin(n))/(i*u*o)):(t+r)/2}function Ht(n,t,e,r){var i;if(null==n)i=e*Io,r.point(-Fo,i),r.point(0,i),r.point(Fo,i),r.point(Fo,0),r.point(Fo,-i),r.point(0,-i),r.point(-Fo,-i),r.point(-Fo,0),r.point(-Fo,i);else if(xo(n[0]-t[0])>Uo){var u=n[0]<t[0]?Fo:-Fo;i=e*u/2,r.point(-u,i),r.point(0,i),r.point(u,i)}else r.point(t[0],t[1])}function Ot(n,t){var e=n[0],r=n[1],i=[Math.sin(e),-Math.cos(e),0],u=0,o=0;ka.reset();for(var a=0,l=t.length;l>a;++a){var c=t[a],f=c.length;if(f)for(var s=c[0],h=s[0],p=s[1]/2+Fo/4,g=Math.sin(p),v=Math.cos(p),d=1;;){d===f&&(d=0),n=c[d];var y=n[0],m=n[1]/2+Fo/4,M=Math.sin(m),x=Math.cos(m),b=y-h,_=b>=0?1:-1,w=_*b,S=w>Fo,k=g*M;if(ka.add(Math.atan2(k*_*Math.sin(w),v*x+k*Math.cos(w))),u+=S?b+_*Ho:b,S^h>=e^y>=e){var N=mt(dt(s),dt(n));bt(N);var E=mt(i,N);bt(E);var A=(S^b>=0?-1:1)*tn(E[2]);(r>A||r===A&&(N[0]||N[1]))&&(o+=S^b>=0?1:-1)}if(!d++)break;h=y,g=M,v=x,s=n}}return(-Uo>u||Uo>u&&-Uo>ka)^1&o}function It(n){function t(n,t){return Math.cos(n)*Math.cos(t)>u}function e(n){var e,u,l,c,f;return{lineStart:function(){c=l=!1,f=1},point:function(s,h){var p,g=[s,h],v=t(s,h),d=o?v?0:i(s,h):v?i(s+(0>s?Fo:-Fo),h):0;if(!e&&(c=l=v)&&n.lineStart(),v!==l&&(p=r(e,g),(wt(e,p)||wt(g,p))&&(g[0]+=Uo,g[1]+=Uo,v=t(g[0],g[1]))),v!==l)f=0,v?(n.lineStart(),p=r(g,e),n.point(p[0],p[1])):(p=r(e,g),n.point(p[0],p[1]),n.lineEnd()),e=p;else if(a&&e&&o^v){var y;d&u||!(y=r(g,e,!0))||(f=0,o?(n.lineStart(),n.point(y[0][0],y[0][1]),n.point(y[1][0],y[1][1]),n.lineEnd()):(n.point(y[1][0],y[1][1]),n.lineEnd(),n.lineStart(),n.point(y[0][0],y[0][1])))}!v||e&&wt(e,g)||n.point(g[0],g[1]),e=g,l=v,u=d},lineEnd:function(){l&&n.lineEnd(),e=null},clean:function(){return f|(c&&l)<<1}}}function r(n,t,e){var r=dt(n),i=dt(t),o=[1,0,0],a=mt(r,i),l=yt(a,a),c=a[0],f=l-c*c;if(!f)return!e&&n;var s=u*l/f,h=-u*c/f,p=mt(o,a),g=xt(o,s),v=xt(a,h);Mt(g,v);var d=p,y=yt(g,d),m=yt(d,d),M=y*y-m*(yt(g,g)-1);if(!(0>M)){var x=Math.sqrt(M),b=xt(d,(-y-x)/m);if(Mt(b,g),b=_t(b),!e)return b;var _,w=n[0],S=t[0],k=n[1],N=t[1];w>S&&(_=w,w=S,S=_);var E=S-w,A=xo(E-Fo)<Uo,C=A||Uo>E;if(!A&&k>N&&(_=k,k=N,N=_),C?A?k+N>0^b[1]<(xo(b[0]-w)<Uo?k:N):k<=b[1]&&b[1]<=N:E>Fo^(w<=b[0]&&b[0]<=S)){var z=xt(d,(-y+x)/m);return Mt(z,g),[b,_t(z)]}}}function i(t,e){var r=o?n:Fo-n,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>e?i|=4:e>r&&(i|=8),i}var u=Math.cos(n),o=u>0,a=xo(u)>Uo,l=ve(n,6*Yo);return Rt(t,e,l,o?[0,-n]:[-Fo,n-Fo])}function Yt(n,t,e,r){return function(i){var u,o=i.a,a=i.b,l=o.x,c=o.y,f=a.x,s=a.y,h=0,p=1,g=f-l,v=s-c;if(u=n-l,g||!(u>0)){if(u/=g,0>g){if(h>u)return;p>u&&(p=u)}else if(g>0){if(u>p)return;u>h&&(h=u)}if(u=e-l,g||!(0>u)){if(u/=g,0>g){if(u>p)return;u>h&&(h=u)}else if(g>0){if(h>u)return;p>u&&(p=u)}if(u=t-c,v||!(u>0)){if(u/=v,0>v){if(h>u)return;p>u&&(p=u)}else if(v>0){if(u>p)return;u>h&&(h=u)}if(u=r-c,v||!(0>u)){if(u/=v,0>v){if(u>p)return;u>h&&(h=u)}else if(v>0){if(h>u)return;p>u&&(p=u)}return h>0&&(i.a={x:l+h*g,y:c+h*v}),1>p&&(i.b={x:l+p*g,y:c+p*v}),i}}}}}}function Zt(n,t,e,r){function i(r,i){return xo(r[0]-n)<Uo?i>0?0:3:xo(r[0]-e)<Uo?i>0?2:1:xo(r[1]-t)<Uo?i>0?1:0:i>0?3:2}function u(n,t){return o(n.x,t.x)}function o(n,t){var e=i(n,1),r=i(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function l(n){for(var t=0,e=d.length,r=n[1],i=0;e>i;++i)for(var u,o=1,a=d[i],l=a.length,c=a[0];l>o;++o)u=a[o],c[1]<=r?u[1]>r&&Q(c,u,n)>0&&++t:u[1]<=r&&Q(c,u,n)<0&&--t,c=u;return 0!==t}function c(u,a,l,c){var f=0,s=0;if(null==u||(f=i(u,l))!==(s=i(a,l))||o(u,a)<0^l>0){do{c.point(0===f||3===f?n:e,f>1?r:t)}while((f=(f+l+4)%4)!==s)}else c.point(a[0],a[1])}function f(i,u){return i>=n&&e>=i&&u>=t&&r>=u}function s(n,t){f(n,t)&&a.point(n,t)}function h(){C.point=g,d&&d.push(y=[]),S=!0,w=!1,b=_=NaN}function p(){v&&(g(m,M),x&&w&&E.rejoin(),v.push(E.buffer())),C.point=s,w&&a.lineEnd()}function g(n,t){n=Math.max(-Ha,Math.min(Ha,n)),t=Math.max(-Ha,Math.min(Ha,t));var e=f(n,t);if(d&&y.push([n,t]),S)m=n,M=t,x=e,S=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&w)a.point(n,t);else{var r={a:{x:b,y:_},b:{x:n,y:t}};A(r)?(w||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),k=!1):e&&(a.lineStart(),a.point(n,t),k=!1)}b=n,_=t,w=e}var v,d,y,m,M,x,b,_,w,S,k,N=a,E=Pt(),A=Yt(n,t,e,r),C={point:s,lineStart:h,lineEnd:p,polygonStart:function(){a=E,v=[],d=[],k=!0},polygonEnd:function(){a=N,v=ao.merge(v);var t=l([n,r]),e=k&&t,i=v.length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),c(null,null,1,a),a.lineEnd()),i&&Lt(v,u,t,c,a),a.polygonEnd()),v=d=y=null}};return C}}function Vt(n){var t=0,e=Fo/3,r=ae(n),i=r(t,e);return i.parallels=function(n){return arguments.length?r(t=n[0]*Fo/180,e=n[1]*Fo/180):[t/Fo*180,e/Fo*180]},i}function Xt(n,t){function e(n,t){var e=Math.sqrt(u-2*i*Math.sin(t))/i;return[e*Math.sin(n*=i),o-e*Math.cos(n)]}var r=Math.sin(n),i=(r+Math.sin(t))/2,u=1+r*(2*i-r),o=Math.sqrt(u)/i;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/i,tn((u-(n*n+e*e)*i*i)/(2*i))]},e}function $t(){function n(n,t){Ia+=i*n-r*t,r=n,i=t}var t,e,r,i;$a.point=function(u,o){$a.point=n,t=r=u,e=i=o},$a.lineEnd=function(){n(t,e)}}function Bt(n,t){Ya>n&&(Ya=n),n>Va&&(Va=n),Za>t&&(Za=t),t>Xa&&(Xa=t)}function Wt(){function n(n,t){o.push("M",n,",",t,u)}function t(n,t){o.push("M",n,",",t),a.point=e}function e(n,t){o.push("L",n,",",t)}function r(){a.point=n}function i(){o.push("Z")}var u=Jt(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return u=Jt(n),a},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return a}function Jt(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Gt(n,t){Ca+=n,za+=t,++La}function Kt(){function n(n,r){var i=n-t,u=r-e,o=Math.sqrt(i*i+u*u);qa+=o*(t+n)/2,Ta+=o*(e+r)/2,Ra+=o,Gt(t=n,e=r)}var t,e;Wa.point=function(r,i){Wa.point=n,Gt(t=r,e=i)}}function Qt(){Wa.point=Gt}function ne(){function n(n,t){var e=n-r,u=t-i,o=Math.sqrt(e*e+u*u);qa+=o*(r+n)/2,Ta+=o*(i+t)/2,Ra+=o,o=i*n-r*t,Da+=o*(r+n),Pa+=o*(i+t),Ua+=3*o,Gt(r=n,i=t)}var t,e,r,i;Wa.point=function(u,o){Wa.point=n,Gt(t=r=u,e=i=o)},Wa.lineEnd=function(){n(t,e)}}function te(n){function t(t,e){n.moveTo(t+o,e),n.arc(t,e,o,0,Ho)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function i(){a.point=t}function u(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:i,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=i,a.point=t},pointRadius:function(n){return o=n,a},result:b};return a}function ee(n){function t(n){return(a?r:e)(n)}function e(t){return ue(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){M=NaN,S.point=u,t.lineStart()}function u(e,r){var u=dt([e,r]),o=n(e,r);i(M,x,m,b,_,w,M=o[0],x=o[1],m=e,b=u[0],_=u[1],w=u[2],a,t),t.point(M,x)}function o(){S.point=e,t.lineEnd()}function l(){r(),S.point=c,S.lineEnd=f}function c(n,t){u(s=n,h=t),p=M,g=x,v=b,d=_,y=w,S.point=u}function f(){i(M,x,m,b,_,w,p,g,s,v,d,y,a,t),S.lineEnd=o,o()}var s,h,p,g,v,d,y,m,M,x,b,_,w,S={point:e,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=l},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function i(t,e,r,a,l,c,f,s,h,p,g,v,d,y){var m=f-t,M=s-e,x=m*m+M*M;if(x>4*u&&d--){var b=a+p,_=l+g,w=c+v,S=Math.sqrt(b*b+_*_+w*w),k=Math.asin(w/=S),N=xo(xo(w)-1)<Uo||xo(r-h)<Uo?(r+h)/2:Math.atan2(_,b),E=n(N,k),A=E[0],C=E[1],z=A-t,L=C-e,q=M*z-m*L;(q*q/x>u||xo((m*z+M*L)/x-.5)>.3||o>a*p+l*g+c*v)&&(i(t,e,r,a,l,c,A,C,N,b/=S,_/=S,w,d,y),y.point(A,C),i(A,C,N,b,_,w,f,s,h,p,g,v,d,y))}}var u=.5,o=Math.cos(30*Yo),a=16;return t.precision=function(n){return arguments.length?(a=(u=n*n)>0&&16,t):Math.sqrt(u)},t}function re(n){var t=ee(function(t,e){return n([t*Zo,e*Zo])});return function(n){return le(t(n))}}function ie(n){this.stream=n}function ue(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function oe(n){return ae(function(){return n})()}function ae(n){function t(n){return n=a(n[0]*Yo,n[1]*Yo),[n[0]*h+l,c-n[1]*h]}function e(n){return n=a.invert((n[0]-l)/h,(c-n[1])/h),n&&[n[0]*Zo,n[1]*Zo]}function r(){a=Ct(o=se(y,M,x),u);var n=u(v,d);return l=p-n[0]*h,c=g+n[1]*h,i()}function i(){return f&&(f.valid=!1,f=null),t}var u,o,a,l,c,f,s=ee(function(n,t){return n=u(n,t),[n[0]*h+l,c-n[1]*h]}),h=150,p=480,g=250,v=0,d=0,y=0,M=0,x=0,b=Fa,_=m,w=null,S=null;return t.stream=function(n){return f&&(f.valid=!1),f=le(b(o,s(_(n)))),f.valid=!0,f},t.clipAngle=function(n){return arguments.length?(b=null==n?(w=n,Fa):It((w=+n)*Yo),i()):w},t.clipExtent=function(n){return arguments.length?(S=n,_=n?Zt(n[0][0],n[0][1],n[1][0],n[1][1]):m,i()):S},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(p=+n[0],g=+n[1],r()):[p,g]},t.center=function(n){return arguments.length?(v=n[0]%360*Yo,d=n[1]%360*Yo,r()):[v*Zo,d*Zo]},t.rotate=function(n){return arguments.length?(y=n[0]%360*Yo,M=n[1]%360*Yo,x=n.length>2?n[2]%360*Yo:0,r()):[y*Zo,M*Zo,x*Zo]},ao.rebind(t,s,"precision"),function(){return u=n.apply(this,arguments),t.invert=u.invert&&e,r()}}function le(n){return ue(n,function(t,e){n.point(t*Yo,e*Yo)})}function ce(n,t){return[n,t]}function fe(n,t){return[n>Fo?n-Ho:-Fo>n?n+Ho:n,t]}function se(n,t,e){return n?t||e?Ct(pe(n),ge(t,e)):pe(n):t||e?ge(t,e):fe}function he(n){return function(t,e){return t+=n,[t>Fo?t-Ho:-Fo>t?t+Ho:t,e]}}function pe(n){var t=he(n);return t.invert=he(-n),t}function ge(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,l=Math.sin(n)*e,c=Math.sin(t),f=c*r+a*i;return[Math.atan2(l*u-f*o,a*r-c*i),tn(f*u+l*o)]}var r=Math.cos(n),i=Math.sin(n),u=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,l=Math.sin(n)*e,c=Math.sin(t),f=c*u-l*o;return[Math.atan2(l*u+c*o,a*r+f*i),tn(f*r-a*i)]},e}function ve(n,t){var e=Math.cos(n),r=Math.sin(n);return function(i,u,o,a){var l=o*t;null!=i?(i=de(e,i),u=de(e,u),(o>0?u>i:i>u)&&(i+=o*Ho)):(i=n+o*Ho,u=n-.5*l);for(var c,f=i;o>0?f>u:u>f;f-=l)a.point((c=_t([e,-r*Math.cos(f),-r*Math.sin(f)]))[0],c[1])}}function de(n,t){var e=dt(t);e[0]-=n,bt(e);var r=nn(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Uo)%(2*Math.PI)}function ye(n,t,e){var r=ao.range(n,t-Uo,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function me(n,t,e){var r=ao.range(n,t-Uo,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function Me(n){return n.source}function xe(n){return n.target}function be(n,t,e,r){var i=Math.cos(t),u=Math.sin(t),o=Math.cos(r),a=Math.sin(r),l=i*Math.cos(n),c=i*Math.sin(n),f=o*Math.cos(e),s=o*Math.sin(e),h=2*Math.asin(Math.sqrt(on(r-t)+i*o*on(e-n))),p=1/Math.sin(h),g=h?function(n){var t=Math.sin(n*=h)*p,e=Math.sin(h-n)*p,r=e*l+t*f,i=e*c+t*s,o=e*u+t*a;return[Math.atan2(i,r)*Zo,Math.atan2(o,Math.sqrt(r*r+i*i))*Zo]}:function(){return[n*Zo,t*Zo]};return g.distance=h,g}function _e(){function n(n,i){var u=Math.sin(i*=Yo),o=Math.cos(i),a=xo((n*=Yo)-t),l=Math.cos(a);Ja+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*u-e*o*l)*a),e*u+r*o*l),t=n,e=u,r=o}var t,e,r;Ga.point=function(i,u){t=i*Yo,e=Math.sin(u*=Yo),r=Math.cos(u),Ga.point=n},Ga.lineEnd=function(){Ga.point=Ga.lineEnd=b}}function we(n,t){function e(t,e){var r=Math.cos(t),i=Math.cos(e),u=n(r*i);return[u*i*Math.sin(t),u*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),i=t(r),u=Math.sin(i),o=Math.cos(i);return[Math.atan2(n*u,r*o),Math.asin(r&&e*u/r)]},e}function Se(n,t){function e(n,t){o>0?-Io+Uo>t&&(t=-Io+Uo):t>Io-Uo&&(t=Io-Uo);var e=o/Math.pow(i(t),u);return[e*Math.sin(u*n),o-e*Math.cos(u*n)]}var r=Math.cos(n),i=function(n){return Math.tan(Fo/4+n/2)},u=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(i(t)/i(n)),o=r*Math.pow(i(n),u)/u;return u?(e.invert=function(n,t){var e=o-t,r=K(u)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/u,2*Math.atan(Math.pow(o/r,1/u))-Io]},e):Ne}function ke(n,t){function e(n,t){var e=u-t;return[e*Math.sin(i*n),u-e*Math.cos(i*n)]}var r=Math.cos(n),i=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),u=r/i+n;return xo(i)<Uo?ce:(e.invert=function(n,t){var e=u-t;return[Math.atan2(n,e)/i,u-K(i)*Math.sqrt(n*n+e*e)]},e)}function Ne(n,t){return[n,Math.log(Math.tan(Fo/4+t/2))]}function Ee(n){var t,e=oe(n),r=e.scale,i=e.translate,u=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=i.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=u.apply(e,arguments);if(o===e){if(t=null==n){var a=Fo*r(),l=i();u([[l[0]-a,l[1]-a],[l[0]+a,l[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function Ae(n,t){return[Math.log(Math.tan(Fo/4+t/2)),-n]}function Ce(n){return n[0]}function ze(n){return n[1]}function Le(n){for(var t=n.length,e=[0,1],r=2,i=2;t>i;i++){for(;r>1&&Q(n[e[r-2]],n[e[r-1]],n[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function qe(n,t){return n[0]-t[0]||n[1]-t[1]}function Te(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Re(n,t,e,r){var i=n[0],u=e[0],o=t[0]-i,a=r[0]-u,l=n[1],c=e[1],f=t[1]-l,s=r[1]-c,h=(a*(l-c)-s*(i-u))/(s*o-a*f);return[i+h*o,l+h*f]}function De(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Pe(){rr(this),this.edge=this.site=this.circle=null}function Ue(n){var t=cl.pop()||new Pe;return t.site=n,t}function je(n){Be(n),ol.remove(n),cl.push(n),rr(n)}function Fe(n){var t=n.circle,e=t.x,r=t.cy,i={x:e,y:r},u=n.P,o=n.N,a=[n];je(n);for(var l=u;l.circle&&xo(e-l.circle.x)<Uo&&xo(r-l.circle.cy)<Uo;)u=l.P,a.unshift(l),je(l),l=u;a.unshift(l),Be(l);for(var c=o;c.circle&&xo(e-c.circle.x)<Uo&&xo(r-c.circle.cy)<Uo;)o=c.N,a.push(c),je(c),c=o;a.push(c),Be(c);var f,s=a.length;for(f=1;s>f;++f)c=a[f],l=a[f-1],nr(c.edge,l.site,c.site,i);l=a[0],c=a[s-1],c.edge=Ke(l.site,c.site,null,i),$e(l),$e(c)}function He(n){for(var t,e,r,i,u=n.x,o=n.y,a=ol._;a;)if(r=Oe(a,o)-u,r>Uo)a=a.L;else{if(i=u-Ie(a,o),!(i>Uo)){r>-Uo?(t=a.P,e=a):i>-Uo?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var l=Ue(n);if(ol.insert(t,l),t||e){if(t===e)return Be(t),e=Ue(t.site),ol.insert(l,e),l.edge=e.edge=Ke(t.site,l.site),$e(t),void $e(e);if(!e)return void(l.edge=Ke(t.site,l.site));Be(t),Be(e);var c=t.site,f=c.x,s=c.y,h=n.x-f,p=n.y-s,g=e.site,v=g.x-f,d=g.y-s,y=2*(h*d-p*v),m=h*h+p*p,M=v*v+d*d,x={x:(d*m-p*M)/y+f,y:(h*M-v*m)/y+s};nr(e.edge,c,g,x),l.edge=Ke(c,n,null,x),e.edge=Ke(n,g,null,x),$e(t),$e(e)}}function Oe(n,t){var e=n.site,r=e.x,i=e.y,u=i-t;if(!u)return r;var o=n.P;if(!o)return-(1/0);e=o.site;var a=e.x,l=e.y,c=l-t;if(!c)return a;var f=a-r,s=1/u-1/c,h=f/c;return s?(-h+Math.sqrt(h*h-2*s*(f*f/(-2*c)-l+c/2+i-u/2)))/s+r:(r+a)/2}function Ie(n,t){var e=n.N;if(e)return Oe(e,t);var r=n.site;return r.y===t?r.x:1/0}function Ye(n){this.site=n,this.edges=[]}function Ze(n){for(var t,e,r,i,u,o,a,l,c,f,s=n[0][0],h=n[1][0],p=n[0][1],g=n[1][1],v=ul,d=v.length;d--;)if(u=v[d],u&&u.prepare())for(a=u.edges,l=a.length,o=0;l>o;)f=a[o].end(),r=f.x,i=f.y,c=a[++o%l].start(),t=c.x,e=c.y,(xo(r-t)>Uo||xo(i-e)>Uo)&&(a.splice(o,0,new tr(Qe(u.site,f,xo(r-s)<Uo&&g-i>Uo?{x:s,y:xo(t-s)<Uo?e:g}:xo(i-g)<Uo&&h-r>Uo?{x:xo(e-g)<Uo?t:h,y:g}:xo(r-h)<Uo&&i-p>Uo?{x:h,y:xo(t-h)<Uo?e:p}:xo(i-p)<Uo&&r-s>Uo?{x:xo(e-p)<Uo?t:s,y:p}:null),u.site,null)),++l)}function Ve(n,t){return t.angle-n.angle}function Xe(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function $e(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,i=n.site,u=e.site;if(r!==u){var o=i.x,a=i.y,l=r.x-o,c=r.y-a,f=u.x-o,s=u.y-a,h=2*(l*s-c*f);if(!(h>=-jo)){var p=l*l+c*c,g=f*f+s*s,v=(s*p-c*g)/h,d=(l*g-f*p)/h,s=d+a,y=fl.pop()||new Xe;y.arc=n,y.site=i,y.x=v+o,y.y=s+Math.sqrt(v*v+d*d),y.cy=s,n.circle=y;for(var m=null,M=ll._;M;)if(y.y<M.y||y.y===M.y&&y.x<=M.x){if(!M.L){m=M.P;break}M=M.L}else{if(!M.R){m=M;break}M=M.R}ll.insert(m,y),m||(al=y)}}}}function Be(n){var t=n.circle;t&&(t.P||(al=t.N),ll.remove(t),fl.push(t),rr(t),n.circle=null)}function We(n){for(var t,e=il,r=Yt(n[0][0],n[0][1],n[1][0],n[1][1]),i=e.length;i--;)t=e[i],(!Je(t,n)||!r(t)||xo(t.a.x-t.b.x)<Uo&&xo(t.a.y-t.b.y)<Uo)&&(t.a=t.b=null,e.splice(i,1))}function Je(n,t){var e=n.b;if(e)return!0;var r,i,u=n.a,o=t[0][0],a=t[1][0],l=t[0][1],c=t[1][1],f=n.l,s=n.r,h=f.x,p=f.y,g=s.x,v=s.y,d=(h+g)/2,y=(p+v)/2;if(v===p){if(o>d||d>=a)return;if(h>g){if(u){if(u.y>=c)return}else u={x:d,y:l};e={x:d,y:c}}else{if(u){if(u.y<l)return}else u={x:d,y:c};e={x:d,y:l}}}else if(r=(h-g)/(v-p),i=y-r*d,-1>r||r>1)if(h>g){if(u){if(u.y>=c)return}else u={x:(l-i)/r,y:l};e={x:(c-i)/r,y:c}}else{if(u){if(u.y<l)return}else u={x:(c-i)/r,y:c};e={x:(l-i)/r,y:l}}else if(v>p){if(u){if(u.x>=a)return}else u={x:o,y:r*o+i};e={x:a,y:r*a+i}}else{if(u){if(u.x<o)return}else u={x:a,y:r*a+i};e={x:o,y:r*o+i}}return n.a=u,n.b=e,!0}function Ge(n,t){this.l=n,this.r=t,this.a=this.b=null}function Ke(n,t,e,r){var i=new Ge(n,t);return il.push(i),e&&nr(i,n,t,e),r&&nr(i,t,n,r),ul[n.i].edges.push(new tr(i,n,t)),ul[t.i].edges.push(new tr(i,t,n)),i}function Qe(n,t,e){var r=new Ge(n,null);return r.a=t,r.b=e,il.push(r),r}function nr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function tr(n,t,e){var r=n.a,i=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function er(){this._=null}function rr(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function ir(n,t){var e=t,r=t.R,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ur(n,t){var e=t,r=t.L,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function or(n){for(;n.L;)n=n.L;return n}function ar(n,t){var e,r,i,u=n.sort(lr).pop();for(il=[],ul=new Array(n.length),ol=new er,ll=new er;;)if(i=al,u&&(!i||u.y<i.y||u.y===i.y&&u.x<i.x))u.x===e&&u.y===r||(ul[u.i]=new Ye(u),He(u),e=u.x,r=u.y),u=n.pop();else{if(!i)break;Fe(i.arc)}t&&(We(t),Ze(t));var o={cells:ul,edges:il};return ol=ll=il=ul=null,o}function lr(n,t){return t.y-n.y||t.x-n.x}function cr(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function fr(n){return n.x}function sr(n){return n.y}function hr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function pr(n,t,e,r,i,u){if(!n(t,e,r,i,u)){var o=.5*(e+i),a=.5*(r+u),l=t.nodes;l[0]&&pr(n,l[0],e,r,o,a),l[1]&&pr(n,l[1],o,r,i,a),l[2]&&pr(n,l[2],e,a,o,u),l[3]&&pr(n,l[3],o,a,i,u)}}function gr(n,t,e,r,i,u,o){var a,l=1/0;return function c(n,f,s,h,p){if(!(f>u||s>o||r>h||i>p)){if(g=n.point){var g,v=t-n.x,d=e-n.y,y=v*v+d*d;if(l>y){var m=Math.sqrt(l=y);r=t-m,i=e-m,u=t+m,o=e+m,a=g}}for(var M=n.nodes,x=.5*(f+h),b=.5*(s+p),_=t>=x,w=e>=b,S=w<<1|_,k=S+4;k>S;++S)if(n=M[3&S])switch(3&S){case 0:c(n,f,s,x,b);break;case 1:c(n,x,s,h,b);break;case 2:c(n,f,b,x,p);break;case 3:c(n,x,b,h,p)}}}(n,r,i,u,o),a}function vr(n,t){n=ao.rgb(n),t=ao.rgb(t);var e=n.r,r=n.g,i=n.b,u=t.r-e,o=t.g-r,a=t.b-i;return function(n){return"#"+bn(Math.round(e+u*n))+bn(Math.round(r+o*n))+bn(Math.round(i+a*n))}}function dr(n,t){var e,r={},i={};for(e in n)e in t?r[e]=Mr(n[e],t[e]):i[e]=n[e];for(e in t)e in n||(i[e]=t[e]);return function(n){for(e in r)i[e]=r[e](n);return i}}function yr(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function mr(n,t){var e,r,i,u=hl.lastIndex=pl.lastIndex=0,o=-1,a=[],l=[];for(n+="",t+="";(e=hl.exec(n))&&(r=pl.exec(t));)(i=r.index)>u&&(i=t.slice(u,i),a[o]?a[o]+=i:a[++o]=i),(e=e[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:yr(e,r)})),u=pl.lastIndex;return u<t.length&&(i=t.slice(u),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?(t=l[0].x,function(n){return t(n)+""}):function(){return t}:(t=l.length,function(n){for(var e,r=0;t>r;++r)a[(e=l[r]).i]=e.x(n);return a.join("")})}function Mr(n,t){for(var e,r=ao.interpolators.length;--r>=0&&!(e=ao.interpolators[r](n,t)););return e}function xr(n,t){var e,r=[],i=[],u=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;a>e;++e)r.push(Mr(n[e],t[e]));for(;u>e;++e)i[e]=n[e];for(;o>e;++e)i[e]=t[e];return function(n){for(e=0;a>e;++e)i[e]=r[e](n);return i}}function br(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function _r(n){return function(t){return 1-n(1-t)}}function wr(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function Sr(n){return n*n}function kr(n){return n*n*n}function Nr(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function Er(n){return function(t){return Math.pow(t,n)}}function Ar(n){return 1-Math.cos(n*Io)}function Cr(n){return Math.pow(2,10*(n-1))}function zr(n){return 1-Math.sqrt(1-n*n)}function Lr(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/Ho*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*Ho/t)}}function qr(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function Tr(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Rr(n,t){n=ao.hcl(n),t=ao.hcl(t);var e=n.h,r=n.c,i=n.l,u=t.h-e,o=t.c-r,a=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(u)?(u=0,e=isNaN(e)?t.h:e):u>180?u-=360:-180>u&&(u+=360),function(n){return sn(e+u*n,r+o*n,i+a*n)+""}}function Dr(n,t){n=ao.hsl(n),t=ao.hsl(t);var e=n.h,r=n.s,i=n.l,u=t.h-e,o=t.s-r,a=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(u)?(u=0,e=isNaN(e)?t.h:e):u>180?u-=360:-180>u&&(u+=360),function(n){return cn(e+u*n,r+o*n,i+a*n)+""}}function Pr(n,t){n=ao.lab(n),t=ao.lab(t);var e=n.l,r=n.a,i=n.b,u=t.l-e,o=t.a-r,a=t.b-i;return function(n){return pn(e+u*n,r+o*n,i+a*n)+""}}function Ur(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function jr(n){var t=[n.a,n.b],e=[n.c,n.d],r=Hr(t),i=Fr(t,e),u=Hr(Or(e,t,-i))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Zo,this.translate=[n.e,n.f],this.scale=[r,u],this.skew=u?Math.atan2(i,u)*Zo:0}function Fr(n,t){return n[0]*t[0]+n[1]*t[1]}function Hr(n){var t=Math.sqrt(Fr(n,n));return t&&(n[0]/=t,n[1]/=t),t}function Or(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Ir(n){return n.length?n.pop()+",":""}function Yr(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var i=e.push("translate(",null,",",null,")");r.push({i:i-4,x:yr(n[0],t[0])},{i:i-2,x:yr(n[1],t[1])})}else(t[0]||t[1])&&e.push("translate("+t+")")}function Zr(n,t,e,r){n!==t?(n-t>180?t+=360:t-n>180&&(n+=360),r.push({i:e.push(Ir(e)+"rotate(",null,")")-2,x:yr(n,t)})):t&&e.push(Ir(e)+"rotate("+t+")")}function Vr(n,t,e,r){n!==t?r.push({i:e.push(Ir(e)+"skewX(",null,")")-2,x:yr(n,t)}):t&&e.push(Ir(e)+"skewX("+t+")")}function Xr(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var i=e.push(Ir(e)+"scale(",null,",",null,")");r.push({i:i-4,x:yr(n[0],t[0])},{i:i-2,x:yr(n[1],t[1])})}else 1===t[0]&&1===t[1]||e.push(Ir(e)+"scale("+t+")")}function $r(n,t){var e=[],r=[];return n=ao.transform(n),t=ao.transform(t),Yr(n.translate,t.translate,e,r),Zr(n.rotate,t.rotate,e,r),Vr(n.skew,t.skew,e,r),Xr(n.scale,t.scale,e,r),n=t=null,function(n){for(var t,i=-1,u=r.length;++i<u;)e[(t=r[i]).i]=t.x(n);return e.join("")}}function Br(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function Wr(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function Jr(n){for(var t=n.source,e=n.target,r=Kr(t,e),i=[t];t!==r;)t=t.parent,i.push(t);for(var u=i.length;e!==r;)i.splice(u,0,e),e=e.parent;return i}function Gr(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Kr(n,t){if(n===t)return n;for(var e=Gr(n),r=Gr(t),i=e.pop(),u=r.pop(),o=null;i===u;)o=i,i=e.pop(),u=r.pop();return o}function Qr(n){n.fixed|=2}function ni(n){n.fixed&=-7}function ti(n){n.fixed|=4,n.px=n.x,n.py=n.y}function ei(n){n.fixed&=-5}function ri(n,t,e){var r=0,i=0;if(n.charge=0,!n.leaf)for(var u,o=n.nodes,a=o.length,l=-1;++l<a;)u=o[l],null!=u&&(ri(u,t,e),n.charge+=u.charge,r+=u.charge*u.cx,i+=u.charge*u.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var c=t*e[n.point.index];n.charge+=n.pointCharge=c,r+=c*n.point.x,i+=c*n.point.y}n.cx=r/n.charge,n.cy=i/n.charge}function ii(n,t){return ao.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=fi,n}function ui(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(i=n.children)&&(r=i.length))for(var r,i;--r>=0;)e.push(i[r])}function oi(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(u=n.children)&&(i=u.length))for(var i,u,o=-1;++o<i;)e.push(u[o]);for(;null!=(n=r.pop());)t(n)}function ai(n){return n.children}function li(n){return n.value}function ci(n,t){return t.value-n.value}function fi(n){return ao.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function si(n){return n.x}function hi(n){return n.y}function pi(n,t,e){n.y0=t,n.y=e}function gi(n){return ao.range(n.length)}function vi(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function di(n){for(var t,e=1,r=0,i=n[0][1],u=n.length;u>e;++e)(t=n[e][1])>i&&(r=e,i=t);return r}function yi(n){return n.reduce(mi,0)}function mi(n,t){return n+t[1]}function Mi(n,t){return xi(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function xi(n,t){for(var e=-1,r=+n[0],i=(n[1]-r)/t,u=[];++e<=t;)u[e]=i*e+r;return u}function bi(n){return[ao.min(n),ao.max(n)]}function _i(n,t){return n.value-t.value}function wi(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function Si(n,t){n._pack_next=t,t._pack_prev=n}function ki(n,t){var e=t.x-n.x,r=t.y-n.y,i=n.r+t.r;return.999*i*i>e*e+r*r}function Ni(n){function t(n){f=Math.min(n.x-n.r,f),s=Math.max(n.x+n.r,s),h=Math.min(n.y-n.r,h),p=Math.max(n.y+n.r,p)}if((e=n.children)&&(c=e.length)){var e,r,i,u,o,a,l,c,f=1/0,s=-(1/0),h=1/0,p=-(1/0);if(e.forEach(Ei),r=e[0],r.x=-r.r,r.y=0,t(r),c>1&&(i=e[1],i.x=i.r,i.y=0,t(i),c>2))for(u=e[2],zi(r,i,u),t(u),wi(r,u),r._pack_prev=u,wi(u,i),i=r._pack_next,o=3;c>o;o++){zi(r,i,u=e[o]);var g=0,v=1,d=1;for(a=i._pack_next;a!==i;a=a._pack_next,v++)if(ki(a,u)){g=1;break}if(1==g)for(l=r._pack_prev;l!==a._pack_prev&&!ki(l,u);l=l._pack_prev,d++);g?(d>v||v==d&&i.r<r.r?Si(r,i=a):Si(r=l,i),o--):(wi(r,u),i=u,t(u))}var y=(f+s)/2,m=(h+p)/2,M=0;for(o=0;c>o;o++)u=e[o],u.x-=y,u.y-=m,M=Math.max(M,u.r+Math.sqrt(u.x*u.x+u.y*u.y));n.r=M,e.forEach(Ai)}}function Ei(n){n._pack_next=n._pack_prev=n}function Ai(n){delete n._pack_next,delete n._pack_prev}function Ci(n,t,e,r){var i=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,i)for(var u=-1,o=i.length;++u<o;)Ci(i[u],t,e,r)}function zi(n,t,e){var r=n.r+e.r,i=t.x-n.x,u=t.y-n.y;if(r&&(i||u)){var o=t.r+e.r,a=i*i+u*u;o*=o,r*=r;var l=.5+(r-o)/(2*a),c=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+l*i+c*u,e.y=n.y+l*u-c*i}else e.x=n.x+r,e.y=n.y}function Li(n,t){return n.parent==t.parent?1:2}function qi(n){var t=n.children;return t.length?t[0]:n.t}function Ti(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Ri(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Di(n){for(var t,e=0,r=0,i=n.children,u=i.length;--u>=0;)t=i[u],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function Pi(n,t,e){return n.a.parent===t.parent?n.a:e}function Ui(n){return 1+ao.max(n,function(n){return n.y})}function ji(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Fi(n){var t=n.children;return t&&t.length?Fi(t[0]):n}function Hi(n){var t,e=n.children;return e&&(t=e.length)?Hi(e[t-1]):n}function Oi(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Ii(n,t){var e=n.x+t[3],r=n.y+t[0],i=n.dx-t[1]-t[3],u=n.dy-t[0]-t[2];return 0>i&&(e+=i/2,i=0),0>u&&(r+=u/2,u=0),{x:e,y:r,dx:i,dy:u}}function Yi(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function Zi(n){return n.rangeExtent?n.rangeExtent():Yi(n.range())}function Vi(n,t,e,r){var i=e(n[0],n[1]),u=r(t[0],t[1]);return function(n){return u(i(n))}}function Xi(n,t){var e,r=0,i=n.length-1,u=n[r],o=n[i];return u>o&&(e=r,r=i,i=e,e=u,u=o,o=e),n[r]=t.floor(u),n[i]=t.ceil(o),n}function $i(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:Sl}function Bi(n,t,e,r){var i=[],u=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)i.push(e(n[o-1],n[o])),u.push(r(t[o-1],t[o]));return function(t){var e=ao.bisect(n,t,1,a)-1;return u[e](i[e](t))}}function Wi(n,t,e,r){function i(){var i=Math.min(n.length,t.length)>2?Bi:Vi,l=r?Wr:Br;return o=i(n,t,l,e),a=i(t,n,l,Mr),u}function u(n){return o(n)}var o,a;return u.invert=function(n){return a(n)},u.domain=function(t){return arguments.length?(n=t.map(Number),i()):n},u.range=function(n){return arguments.length?(t=n,i()):t},u.rangeRound=function(n){return u.range(n).interpolate(Ur)},u.clamp=function(n){return arguments.length?(r=n,i()):r},u.interpolate=function(n){return arguments.length?(e=n,i()):e},u.ticks=function(t){return Qi(n,t)},u.tickFormat=function(t,e){return nu(n,t,e)},u.nice=function(t){return Gi(n,t),i()},u.copy=function(){return Wi(n,t,e,r)},i()}function Ji(n,t){return ao.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Gi(n,t){return Xi(n,$i(Ki(n,t)[2])),Xi(n,$i(Ki(n,t)[2])),n}function Ki(n,t){null==t&&(t=10);var e=Yi(n),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),u=t/r*i;return.15>=u?i*=10:.35>=u?i*=5:.75>=u&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,e}function Qi(n,t){return ao.range.apply(ao,Ki(n,t))}function nu(n,t,e){var r=Ki(n,t);if(e){var i=ha.exec(e);if(i.shift(),"s"===i[8]){var u=ao.formatPrefix(Math.max(xo(r[0]),xo(r[1])));return i[7]||(i[7]="."+tu(u.scale(r[2]))),i[8]="f",e=ao.format(i.join("")),function(n){return e(u.scale(n))+u.symbol}}i[7]||(i[7]="."+eu(i[8],r)),e=i.join("")}else e=",."+tu(r[2])+"f";return ao.format(e)}function tu(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function eu(n,t){var e=tu(t[2]);return n in kl?Math.abs(e-tu(Math.max(xo(t[0]),xo(t[1]))))+ +("e"!==n):e-2*("%"===n)}function ru(n,t,e,r){function i(n){return(e?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function u(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(i(t))}return o.invert=function(t){return u(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(i)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(i)),o):t},o.nice=function(){var t=Xi(r.map(i),e?Math:El);return n.domain(t),r=t.map(u),o},o.ticks=function(){var n=Yi(r),o=[],a=n[0],l=n[1],c=Math.floor(i(a)),f=Math.ceil(i(l)),s=t%1?2:t;if(isFinite(f-c)){if(e){for(;f>c;c++)for(var h=1;s>h;h++)o.push(u(c)*h);o.push(u(c))}else for(o.push(u(c));c++<f;)for(var h=s-1;h>0;h--)o.push(u(c)*h);for(c=0;o[c]<a;c++);for(f=o.length;o[f-1]>l;f--);o=o.slice(c,f)}return o},o.tickFormat=function(n,e){if(!arguments.length)return Nl;arguments.length<2?e=Nl:"function"!=typeof e&&(e=ao.format(e));var r=Math.max(1,t*n/o.ticks().length);return function(n){var o=n/u(Math.round(i(n)));return t-.5>o*t&&(o*=t),r>=o?e(n):""}},o.copy=function(){return ru(n.copy(),t,e,r)},Ji(o,n)}function iu(n,t,e){function r(t){return n(i(t))}var i=uu(t),u=uu(1/t);return r.invert=function(t){return u(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(i)),r):e},r.ticks=function(n){return Qi(e,n)},r.tickFormat=function(n,t){return nu(e,n,t)},r.nice=function(n){return r.domain(Gi(e,n))},r.exponent=function(o){return arguments.length?(i=uu(t=o),u=uu(1/t),n.domain(e.map(i)),r):t},r.copy=function(){return iu(n.copy(),t,e)},Ji(r,n)}function uu(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function ou(n,t){function e(e){return u[((i.get(e)||("range"===t.t?i.set(e,n.push(e)):NaN))-1)%u.length]}function r(t,e){return ao.range(n.length).map(function(n){return t+e*n})}var i,u,o;return e.domain=function(r){if(!arguments.length)return n;n=[],i=new c;for(var u,o=-1,a=r.length;++o<a;)i.has(u=r[o])||i.set(u,n.push(u));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(u=n,o=0,t={t:"range",a:arguments},e):u},e.rangePoints=function(i,a){arguments.length<2&&(a=0);var l=i[0],c=i[1],f=n.length<2?(l=(l+c)/2,0):(c-l)/(n.length-1+a);return u=r(l+f*a/2,f),o=0,t={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(i,a){arguments.length<2&&(a=0);var l=i[0],c=i[1],f=n.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(n.length-1+a)|0;return u=r(l+Math.round(f*a/2+(c-l-(n.length-1+a)*f)/2),f),o=0,t={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(i,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var c=i[1]<i[0],f=i[c-0],s=i[1-c],h=(s-f)/(n.length-a+2*l);return u=r(f+h*l,h),c&&u.reverse(),o=h*(1-a),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(i,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var c=i[1]<i[0],f=i[c-0],s=i[1-c],h=Math.floor((s-f)/(n.length-a+2*l));return u=r(f+Math.round((s-f-(n.length-a)*h)/2),h),c&&u.reverse(),o=Math.round(h*(1-a)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return o},e.rangeExtent=function(){return Yi(t.a[0])},e.copy=function(){return ou(n,t)},e.domain(n)}function au(n,t){function u(){var e=0,r=t.length;for(a=[];++e<r;)a[e-1]=ao.quantile(n,e/r);return o}function o(n){return isNaN(n=+n)?void 0:t[ao.bisect(a,n)]}var a;return o.domain=function(t){return arguments.length?(n=t.map(r).filter(i).sort(e),u()):n},o.range=function(n){return arguments.length?(t=n,u()):t},o.quantiles=function(){return a},o.invertExtent=function(e){return e=t.indexOf(e),0>e?[NaN,NaN]:[e>0?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]},o.copy=function(){return au(n,t)},u()}function lu(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(u*(t-n))))]}function i(){return u=e.length/(t-n),o=e.length-1,r}var u,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],i()):[n,t]},r.range=function(n){return arguments.length?(e=n,i()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?NaN:t/u+n,[t,t+1/u]},r.copy=function(){return lu(n,t,e)},i()}function cu(n,t){function e(e){return e>=e?t[ao.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return cu(n,t)},e}function fu(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Qi(n,t)},t.tickFormat=function(t,e){return nu(n,t,e)},t.copy=function(){return fu(n)},t}function su(){return 0}function hu(n){return n.innerRadius}function pu(n){return n.outerRadius}function gu(n){return n.startAngle}function vu(n){return n.endAngle}function du(n){return n&&n.padAngle}function yu(n,t,e,r){return(n-e)*t-(t-r)*n>0?0:1}function mu(n,t,e,r,i){var u=n[0]-t[0],o=n[1]-t[1],a=(i?r:-r)/Math.sqrt(u*u+o*o),l=a*o,c=-a*u,f=n[0]+l,s=n[1]+c,h=t[0]+l,p=t[1]+c,g=(f+h)/2,v=(s+p)/2,d=h-f,y=p-s,m=d*d+y*y,M=e-r,x=f*p-h*s,b=(0>y?-1:1)*Math.sqrt(Math.max(0,M*M*m-x*x)),_=(x*y-d*b)/m,w=(-x*d-y*b)/m,S=(x*y+d*b)/m,k=(-x*d+y*b)/m,N=_-g,E=w-v,A=S-g,C=k-v;return N*N+E*E>A*A+C*C&&(_=S,w=k),[[_-l,w-c],[_*e/M,w*e/M]]}function Mu(n){function t(t){function o(){c.push("M",u(n(f),a))}for(var l,c=[],f=[],s=-1,h=t.length,p=En(e),g=En(r);++s<h;)i.call(this,l=t[s],s)?f.push([+p.call(this,l,s),+g.call(this,l,s)]):f.length&&(o(),f=[]);return f.length&&o(),c.length?c.join(""):null}var e=Ce,r=ze,i=zt,u=xu,o=u.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(i=n,t):i},t.interpolate=function(n){return arguments.length?(o="function"==typeof n?u=n:(u=Tl.get(n)||xu).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function xu(n){return n.length>1?n.join("L"):n+"Z"}function bu(n){return n.join("L")+"Z"}function _u(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&i.push("H",r[0]),i.join("")}function wu(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("V",(r=n[t])[1],"H",r[0]);return i.join("")}function Su(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("H",(r=n[t])[0],"V",r[1]);return i.join("")}function ku(n,t){return n.length<4?xu(n):n[1]+Au(n.slice(1,-1),Cu(n,t))}function Nu(n,t){return n.length<3?bu(n):n[0]+Au((n.push(n[0]),n),Cu([n[n.length-2]].concat(n,[n[1]]),t))}function Eu(n,t){return n.length<3?xu(n):n[0]+Au(n,Cu(n,t))}function Au(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return xu(n);var e=n.length!=t.length,r="",i=n[0],u=n[1],o=t[0],a=o,l=1;if(e&&(r+="Q"+(u[0]-2*o[0]/3)+","+(u[1]-2*o[1]/3)+","+u[0]+","+u[1],i=n[1],l=2),t.length>1){a=t[1],u=n[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(u[0]-a[0])+","+(u[1]-a[1])+","+u[0]+","+u[1];for(var c=2;c<t.length;c++,l++)u=n[l],a=t[c],r+="S"+(u[0]-a[0])+","+(u[1]-a[1])+","+u[0]+","+u[1]}if(e){var f=n[l];r+="Q"+(u[0]+2*a[0]/3)+","+(u[1]+2*a[1]/3)+","+f[0]+","+f[1]}return r}function Cu(n,t){for(var e,r=[],i=(1-t)/2,u=n[0],o=n[1],a=1,l=n.length;++a<l;)e=u,u=o,o=n[a],r.push([i*(o[0]-e[0]),i*(o[1]-e[1])]);return r}function zu(n){if(n.length<3)return xu(n);var t=1,e=n.length,r=n[0],i=r[0],u=r[1],o=[i,i,i,(r=n[1])[0]],a=[u,u,u,r[1]],l=[i,",",u,"L",Ru(Pl,o),",",Ru(Pl,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),Du(l,o,a);return n.pop(),l.push("L",r),l.join("")}function Lu(n){if(n.length<4)return xu(n);for(var t,e=[],r=-1,i=n.length,u=[0],o=[0];++r<3;)t=n[r],u.push(t[0]),o.push(t[1]);for(e.push(Ru(Pl,u)+","+Ru(Pl,o)),--r;++r<i;)t=n[r],u.shift(),u.push(t[0]),o.shift(),o.push(t[1]),Du(e,u,o);return e.join("")}function qu(n){for(var t,e,r=-1,i=n.length,u=i+4,o=[],a=[];++r<4;)e=n[r%i],o.push(e[0]),a.push(e[1]);for(t=[Ru(Pl,o),",",Ru(Pl,a)],--r;++r<u;)e=n[r%i],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Du(t,o,a);return t.join("")}function Tu(n,t){var e=n.length-1;if(e)for(var r,i,u=n[0][0],o=n[0][1],a=n[e][0]-u,l=n[e][1]-o,c=-1;++c<=e;)r=n[c],i=c/e,r[0]=t*r[0]+(1-t)*(u+i*a),r[1]=t*r[1]+(1-t)*(o+i*l);return zu(n)}function Ru(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Du(n,t,e){n.push("C",Ru(Rl,t),",",Ru(Rl,e),",",Ru(Dl,t),",",Ru(Dl,e),",",Ru(Pl,t),",",Ru(Pl,e))}function Pu(n,t){return(t[1]-n[1])/(t[0]-n[0])}function Uu(n){for(var t=0,e=n.length-1,r=[],i=n[0],u=n[1],o=r[0]=Pu(i,u);++t<e;)r[t]=(o+(o=Pu(i=u,u=n[t+1])))/2;return r[t]=o,r}function ju(n){for(var t,e,r,i,u=[],o=Uu(n),a=-1,l=n.length-1;++a<l;)t=Pu(n[a],n[a+1]),xo(t)<Uo?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,i=e*e+r*r,i>9&&(i=3*t/Math.sqrt(i),o[a]=i*e,o[a+1]=i*r));for(a=-1;++a<=l;)i=(n[Math.min(l,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),u.push([i||0,o[a]*i||0]);return u}function Fu(n){return n.length<3?xu(n):n[0]+Au(n,ju(n))}function Hu(n){for(var t,e,r,i=-1,u=n.length;++i<u;)t=n[i],e=t[0],r=t[1]-Io,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Ou(n){function t(t){function l(){v.push("M",a(n(y),s),f,c(n(d.reverse()),s),"Z")}for(var h,p,g,v=[],d=[],y=[],m=-1,M=t.length,x=En(e),b=En(i),_=e===r?function(){return p}:En(r),w=i===u?function(){return g}:En(u);++m<M;)o.call(this,h=t[m],m)?(d.push([p=+x.call(this,h,m),g=+b.call(this,h,m)]),y.push([+_.call(this,h,m),+w.call(this,h,m)])):d.length&&(l(),d=[],y=[]);return d.length&&l(),v.length?v.join(""):null}var e=Ce,r=Ce,i=0,u=ze,o=zt,a=xu,l=a.key,c=a,f="L",s=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(i=u=n,t):u},t.y0=function(n){return arguments.length?(i=n,t):i},t.y1=function(n){return arguments.length?(u=n,t):u},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(l="function"==typeof n?a=n:(a=Tl.get(n)||xu).key,c=a.reverse||a,f=a.closed?"M":"L",t):l},t.tension=function(n){return arguments.length?(s=n,t):s},t}function Iu(n){return n.radius}function Yu(n){return[n.x,n.y]}function Zu(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]-Io;return[e*Math.cos(r),e*Math.sin(r)]}}function Vu(){return 64}function Xu(){return"circle"}function $u(n){var t=Math.sqrt(n/Fo);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Bu(n){return function(){var t,e,r;(t=this[n])&&(r=t[e=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[e]:delete this[n],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Wu(n,t,e){return ko(n,Yl),n.namespace=t,n.id=e,n}function Ju(n,t,e,r){var i=n.id,u=n.namespace;return Y(n,"function"==typeof e?function(n,o,a){n[u][i].tween.set(t,r(e.call(n,n.__data__,o,a)))}:(e=r(e),function(n){n[u][i].tween.set(t,e)}))}function Gu(n){return null==n&&(n=""),function(){this.textContent=n}}function Ku(n){return null==n?"__transition__":"__transition_"+n+"__"}function Qu(n,t,e,r,i){function u(n){var t=v.delay;return f.t=t+l,n>=t?o(n-t):void(f.c=o)}function o(e){var i=g.active,u=g[i];u&&(u.timer.c=null,u.timer.t=NaN,--g.count,delete g[i],u.event&&u.event.interrupt.call(n,n.__data__,u.index));for(var o in g)if(r>+o){var c=g[o];c.timer.c=null,c.timer.t=NaN,--g.count,delete g[o]}f.c=a,qn(function(){return f.c&&a(e||1)&&(f.c=null,f.t=NaN),1},0,l),g.active=r,v.event&&v.event.start.call(n,n.__data__,t),p=[],v.tween.forEach(function(e,r){(r=r.call(n,n.__data__,t))&&p.push(r)}),h=v.ease,s=v.duration}function a(i){for(var u=i/s,o=h(u),a=p.length;a>0;)p[--a].call(n,o);return u>=1?(v.event&&v.event.end.call(n,n.__data__,t),--g.count?delete g[r]:delete n[e],1):void 0}var l,f,s,h,p,g=n[e]||(n[e]={active:0,count:0}),v=g[r];v||(l=i.time,f=qn(u,0,l),v=g[r]={tween:new c,time:l,timer:f,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++g.count)}function no(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function to(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"})}function eo(n){return n.toISOString()}function ro(n,t,e){function r(t){return n(t)}function i(n,e){var r=n[1]-n[0],i=r/e,u=ao.bisect(Kl,i);return u==Kl.length?[t.year,Ki(n.map(function(n){return n/31536e6}),e)[2]]:u?t[i/Kl[u-1]<Kl[u]/i?u-1:u]:[tc,Ki(n,e)[2]]}return r.invert=function(t){return io(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(io)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,io(+e+1),t).length}var u=r.domain(),o=Yi(u),a=null==n?i(o,10):"number"==typeof n&&i(o,n);return a&&(n=a[0],t=a[1]),r.domain(Xi(u,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=io(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=io(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Yi(r.domain()),u=null==n?i(e,10):"number"==typeof n?i(e,n):!n.range&&[{range:n},t];return u&&(n=u[0],t=u[1]),n.range(e[0],io(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return ro(n.copy(),t,e)},Ji(r,n)}function io(n){return new Date(n)}function uo(n){return JSON.parse(n.responseText)}function oo(n){var t=fo.createRange();return t.selectNode(fo.body),t.createContextualFragment(n.responseText)}var ao={version:"3.5.17"},lo=[].slice,co=function(n){return lo.call(n)},fo=this.document;if(fo)try{co(fo.documentElement.childNodes)[0].nodeType}catch(so){co=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}if(Date.now||(Date.now=function(){return+new Date}),fo)try{fo.createElement("DIV").style.setProperty("opacity",0,"")}catch(ho){var po=this.Element.prototype,go=po.setAttribute,vo=po.setAttributeNS,yo=this.CSSStyleDeclaration.prototype,mo=yo.setProperty;po.setAttribute=function(n,t){go.call(this,n,t+"")},po.setAttributeNS=function(n,t,e){vo.call(this,n,t,e+"")},yo.setProperty=function(n,t,e){mo.call(this,n,t+"",e)}}ao.ascending=e,ao.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:NaN},ao.min=function(n,t){var e,r,i=-1,u=n.length;if(1===arguments.length){for(;++i<u;)if(null!=(r=n[i])&&r>=r){e=r;break}for(;++i<u;)null!=(r=n[i])&&e>r&&(e=r)}else{for(;++i<u;)if(null!=(r=t.call(n,n[i],i))&&r>=r){e=r;break}for(;++i<u;)null!=(r=t.call(n,n[i],i))&&e>r&&(e=r)}return e},ao.max=function(n,t){var e,r,i=-1,u=n.length;if(1===arguments.length){for(;++i<u;)if(null!=(r=n[i])&&r>=r){e=r;break}for(;++i<u;)null!=(r=n[i])&&r>e&&(e=r)}else{for(;++i<u;)if(null!=(r=t.call(n,n[i],i))&&r>=r){e=r;break}for(;++i<u;)null!=(r=t.call(n,n[i],i))&&r>e&&(e=r)}return e},ao.extent=function(n,t){var e,r,i,u=-1,o=n.length;if(1===arguments.length){for(;++u<o;)if(null!=(r=n[u])&&r>=r){e=i=r;break}for(;++u<o;)null!=(r=n[u])&&(e>r&&(e=r),r>i&&(i=r))}else{for(;++u<o;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=i=r;break}for(;++u<o;)null!=(r=t.call(n,n[u],u))&&(e>r&&(e=r),r>i&&(i=r))}return[e,i]},ao.sum=function(n,t){var e,r=0,u=n.length,o=-1;if(1===arguments.length)for(;++o<u;)i(e=+n[o])&&(r+=e);else for(;++o<u;)i(e=+t.call(n,n[o],o))&&(r+=e);return r},ao.mean=function(n,t){var e,u=0,o=n.length,a=-1,l=o;if(1===arguments.length)for(;++a<o;)i(e=r(n[a]))?u+=e:--l;else for(;++a<o;)i(e=r(t.call(n,n[a],a)))?u+=e:--l;return l?u/l:void 0},ao.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),i=+n[r-1],u=e-r;return u?i+u*(n[r]-i):i},ao.median=function(n,t){var u,o=[],a=n.length,l=-1;if(1===arguments.length)for(;++l<a;)i(u=r(n[l]))&&o.push(u);else for(;++l<a;)i(u=r(t.call(n,n[l],l)))&&o.push(u);return o.length?ao.quantile(o.sort(e),.5):void 0},ao.variance=function(n,t){var e,u,o=n.length,a=0,l=0,c=-1,f=0;if(1===arguments.length)for(;++c<o;)i(e=r(n[c]))&&(u=e-a,a+=u/++f,l+=u*(e-a));else for(;++c<o;)i(e=r(t.call(n,n[c],c)))&&(u=e-a,a+=u/++f,l+=u*(e-a));return f>1?l/(f-1):void 0},ao.deviation=function(){var n=ao.variance.apply(this,arguments);return n?Math.sqrt(n):n};var Mo=u(e);ao.bisectLeft=Mo.left,ao.bisect=ao.bisectRight=Mo.right,ao.bisector=function(n){return u(1===n.length?function(t,r){return e(n(t),r)}:n)},ao.shuffle=function(n,t,e){(u=arguments.length)<3&&(e=n.length,2>u&&(t=0));for(var r,i,u=e-t;u;)i=Math.random()*u--|0,r=n[u+t],n[u+t]=n[i+t],n[i+t]=r;return n},ao.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},ao.pairs=function(n){for(var t,e=0,r=n.length-1,i=n[0],u=new Array(0>r?0:r);r>e;)u[e]=[t=i,i=n[++e]];return u},ao.transpose=function(n){if(!(i=n.length))return[];for(var t=-1,e=ao.min(n,o),r=new Array(e);++t<e;)for(var i,u=-1,a=r[t]=new Array(i);++u<i;)a[u]=n[u][t];return r},ao.zip=function(){return ao.transpose(arguments)},ao.keys=function(n){var t=[];for(var e in n)t.push(e);return t},ao.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},ao.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},ao.merge=function(n){for(var t,e,r,i=n.length,u=-1,o=0;++u<i;)o+=n[u].length;for(e=new Array(o);--i>=0;)for(r=n[i],t=r.length;--t>=0;)e[--o]=r[t];return e};var xo=Math.abs;ao.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e===1/0)throw new Error("infinite range");var r,i=[],u=a(xo(e)),o=-1;if(n*=u,t*=u,e*=u,0>e)for(;(r=n+e*++o)>t;)i.push(r/u);else for(;(r=n+e*++o)<t;)i.push(r/u);return i},ao.map=function(n,t){var e=new c;if(n instanceof c)n.forEach(function(n,t){e.set(n,t)});else if(Array.isArray(n)){var r,i=-1,u=n.length;if(1===arguments.length)for(;++i<u;)e.set(i,n[i]);else for(;++i<u;)e.set(t.call(n,r=n[i],i),r)}else for(var o in n)e.set(o,n[o]);return e};var bo="__proto__",_o="\0";l(c,{has:h,get:function(n){return this._[f(n)]},set:function(n,t){return this._[f(n)]=t},remove:p,keys:g,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:s(t),value:this._[t]});return n},size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,s(t),this._[t])}}),ao.nest=function(){function n(t,o,a){if(a>=u.length)return r?r.call(i,o):e?o.sort(e):o;for(var l,f,s,h,p=-1,g=o.length,v=u[a++],d=new c;++p<g;)(h=d.get(l=v(f=o[p])))?h.push(f):d.set(l,[f]);return t?(f=t(),s=function(e,r){f.set(e,n(t,r,a))}):(f={},s=function(e,r){f[e]=n(t,r,a)}),d.forEach(s),f}function t(n,e){if(e>=u.length)return n;var r=[],i=o[e++];return n.forEach(function(n,i){r.push({key:n,values:t(i,e)})}),i?r.sort(function(n,t){return i(n.key,t.key)}):r}var e,r,i={},u=[],o=[];return i.map=function(t,e){return n(e,t,0)},i.entries=function(e){return t(n(ao.map,e,0),0)},i.key=function(n){return u.push(n),i},i.sortKeys=function(n){return o[u.length-1]=n,i},i.sortValues=function(n){return e=n,i},i.rollup=function(n){return r=n,i},i},ao.set=function(n){var t=new y;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},l(y,{has:h,add:function(n){return this._[f(n+="")]=!0,n},remove:p,values:g,size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,s(t))}}),ao.behavior={},ao.rebind=function(n,t){for(var e,r=1,i=arguments.length;++r<i;)n[e=arguments[r]]=M(n,t,t[e]);return n};var wo=["webkit","ms","moz","Moz","o","O"];ao.dispatch=function(){for(var n=new _,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=w(n);return n},_.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},ao.event=null,ao.requote=function(n){return n.replace(So,"\\$&")};var So=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ko={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},No=function(n,t){return t.querySelector(n)},Eo=function(n,t){return t.querySelectorAll(n)},Ao=function(n,t){var e=n.matches||n[x(n,"matchesSelector")];return(Ao=function(n,t){return e.call(n,t)})(n,t)};"function"==typeof Sizzle&&(No=function(n,t){return Sizzle(n,t)[0]||null},Eo=Sizzle,Ao=Sizzle.matchesSelector),ao.selection=function(){return ao.select(fo.documentElement)};var Co=ao.selection.prototype=[];Co.select=function(n){var t,e,r,i,u=[];n=A(n);for(var o=-1,a=this.length;++o<a;){u.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var l=-1,c=r.length;++l<c;)(i=r[l])?(t.push(e=n.call(i,i.__data__,l,o)),e&&"__data__"in i&&(e.__data__=i.__data__)):t.push(null)}return E(u)},Co.selectAll=function(n){var t,e,r=[];n=C(n);for(var i=-1,u=this.length;++i<u;)for(var o=this[i],a=-1,l=o.length;++a<l;)(e=o[a])&&(r.push(t=co(n.call(e,e.__data__,a,i))),t.parentNode=e);return E(r)};var zo="http://www.w3.org/1999/xhtml",Lo={svg:"http://www.w3.org/2000/svg",xhtml:zo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ao.ns={prefix:Lo,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&"xmlns"!==(e=n.slice(0,t))&&(n=n.slice(t+1)),Lo.hasOwnProperty(e)?{space:Lo[e],local:n}:n}},Co.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=ao.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(z(t,n[t]));return this}return this.each(z(n,t))},Co.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=T(n)).length,i=-1;if(t=e.classList){for(;++i<r;)if(!t.contains(n[i]))return!1}else for(t=e.getAttribute("class");++i<r;)if(!q(n[i]).test(t))return!1;return!0}for(t in n)this.each(R(t,n[t]));return this}return this.each(R(n,t))},Co.style=function(n,e,r){var i=arguments.length;if(3>i){if("string"!=typeof n){2>i&&(e="");for(r in n)this.each(P(r,n[r],e));return this}if(2>i){var u=this.node();return t(u).getComputedStyle(u,null).getPropertyValue(n)}r=""}return this.each(P(n,e,r))},Co.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(U(t,n[t]));return this}return this.each(U(n,t))},Co.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},Co.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},Co.append=function(n){return n=j(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},Co.insert=function(n,t){return n=j(n),t=A(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},Co.remove=function(){return this.each(F)},Co.data=function(n,t){function e(n,e){var r,i,u,o=n.length,s=e.length,h=Math.min(o,s),p=new Array(s),g=new Array(s),v=new Array(o);if(t){var d,y=new c,m=new Array(o);for(r=-1;++r<o;)(i=n[r])&&(y.has(d=t.call(i,i.__data__,r))?v[r]=i:y.set(d,i),m[r]=d);for(r=-1;++r<s;)(i=y.get(d=t.call(e,u=e[r],r)))?i!==!0&&(p[r]=i,i.__data__=u):g[r]=H(u),y.set(d,!0);for(r=-1;++r<o;)r in m&&y.get(m[r])!==!0&&(v[r]=n[r])}else{for(r=-1;++r<h;)i=n[r],u=e[r],i?(i.__data__=u,p[r]=i):g[r]=H(u);for(;s>r;++r)g[r]=H(e[r]);for(;o>r;++r)v[r]=n[r]}g.update=p,g.parentNode=p.parentNode=v.parentNode=n.parentNode,a.push(g),l.push(p),f.push(v)}var r,i,u=-1,o=this.length;if(!arguments.length){for(n=new Array(o=(r=this[0]).length);++u<o;)(i=r[u])&&(n[u]=i.__data__);return n}var a=Z([]),l=E([]),f=E([]);if("function"==typeof n)for(;++u<o;)e(r=this[u],n.call(r,r.parentNode.__data__,u));else for(;++u<o;)e(r=this[u],n);return l.enter=function(){return a},l.exit=function(){return f},l},Co.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},Co.filter=function(n){var t,e,r,i=[];"function"!=typeof n&&(n=O(n));for(var u=0,o=this.length;o>u;u++){i.push(t=[]),t.parentNode=(e=this[u]).parentNode;for(var a=0,l=e.length;l>a;a++)(r=e[a])&&n.call(r,r.__data__,a,u)&&t.push(r)}return E(i)},Co.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],i=r.length-1,u=r[i];--i>=0;)(e=r[i])&&(u&&u!==e.nextSibling&&u.parentNode.insertBefore(e,u),u=e);return this},Co.sort=function(n){n=I.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},Co.each=function(n){return Y(this,function(t,e,r){n.call(t,t.__data__,e,r)})},Co.call=function(n){var t=co(arguments);return n.apply(t[0]=this,t),this},Co.empty=function(){return!this.node()},Co.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,i=e.length;i>r;r++){var u=e[r];if(u)return u}return null},Co.size=function(){var n=0;return Y(this,function(){++n}),n};var qo=[];ao.selection.enter=Z,ao.selection.enter.prototype=qo,qo.append=Co.append,qo.empty=Co.empty,qo.node=Co.node,qo.call=Co.call,qo.size=Co.size,qo.select=function(n){for(var t,e,r,i,u,o=[],a=-1,l=this.length;++a<l;){r=(i=this[a]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var c=-1,f=i.length;++c<f;)(u=i[c])?(t.push(r[c]=e=n.call(i.parentNode,u.__data__,c,a)),e.__data__=u.__data__):t.push(null)}return E(o)},qo.insert=function(n,t){return arguments.length<2&&(t=V(this)),Co.insert.call(this,n,t)},ao.select=function(t){var e;return"string"==typeof t?(e=[No(t,fo)],e.parentNode=fo.documentElement):(e=[t],e.parentNode=n(t)),E([e])},ao.selectAll=function(n){var t;return"string"==typeof n?(t=co(Eo(n,fo)),t.parentNode=fo.documentElement):(t=co(n),t.parentNode=null),E([t])},Co.on=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(e in n)this.each(X(e,n[e],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(X(n,t,e))};var To=ao.map({mouseenter:"mouseover",mouseleave:"mouseout"});fo&&To.forEach(function(n){"on"+n in fo&&To.remove(n)});var Ro,Do=0;ao.mouse=function(n){return J(n,k())};var Po=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ao.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=k().changedTouches),t)for(var r,i=0,u=t.length;u>i;++i)if((r=t[i]).identifier===e)return J(n,r)},ao.behavior.drag=function(){function n(){this.on("mousedown.drag",u).on("touchstart.drag",o)}function e(n,t,e,u,o){return function(){function a(){var n,e,r=t(h,v);r&&(n=r[0]-M[0],e=r[1]-M[1],g|=n|e,M=r,p({type:"drag",x:r[0]+c[0],y:r[1]+c[1],dx:n,dy:e}))}function l(){t(h,v)&&(y.on(u+d,null).on(o+d,null),m(g),p({type:"dragend"}))}var c,f=this,s=ao.event.target.correspondingElement||ao.event.target,h=f.parentNode,p=r.of(f,arguments),g=0,v=n(),d=".drag"+(null==v?"":"-"+v),y=ao.select(e(s)).on(u+d,a).on(o+d,l),m=W(s),M=t(h,v);i?(c=i.apply(f,arguments),c=[c.x-M[0],c.y-M[1]]):c=[0,0],p({type:"dragstart"})}}var r=N(n,"drag","dragstart","dragend"),i=null,u=e(b,ao.mouse,t,"mousemove","mouseup"),o=e(G,ao.touch,m,"touchmove","touchend");return n.origin=function(t){return arguments.length?(i=t,n):i},ao.rebind(n,r,"on")},ao.touches=function(n,t){return arguments.length<2&&(t=k().touches),t?co(t).map(function(t){var e=J(n,t);return e.identifier=t.identifier,e}):[]};var Uo=1e-6,jo=Uo*Uo,Fo=Math.PI,Ho=2*Fo,Oo=Ho-Uo,Io=Fo/2,Yo=Fo/180,Zo=180/Fo,Vo=Math.SQRT2,Xo=2,$o=4;ao.interpolateZoom=function(n,t){var e,r,i=n[0],u=n[1],o=n[2],a=t[0],l=t[1],c=t[2],f=a-i,s=l-u,h=f*f+s*s;if(jo>h)r=Math.log(c/o)/Vo,e=function(n){return[i+n*f,u+n*s,o*Math.exp(Vo*n*r)]};else{var p=Math.sqrt(h),g=(c*c-o*o+$o*h)/(2*o*Xo*p),v=(c*c-o*o-$o*h)/(2*c*Xo*p),d=Math.log(Math.sqrt(g*g+1)-g),y=Math.log(Math.sqrt(v*v+1)-v);r=(y-d)/Vo,e=function(n){var t=n*r,e=rn(d),a=o/(Xo*p)*(e*un(Vo*t+d)-en(d));return[i+a*f,u+a*s,o*e/rn(Vo*t+d)]}}return e.duration=1e3*r,e},ao.behavior.zoom=function(){function n(n){n.on(L,s).on(Wo+".zoom",p).on("dblclick.zoom",g).on(R,h)}function e(n){return[(n[0]-k.x)/k.k,(n[1]-k.y)/k.k]}function r(n){return[n[0]*k.k+k.x,n[1]*k.k+k.y]}function i(n){k.k=Math.max(A[0],Math.min(A[1],n))}function u(n,t){t=r(t),k.x+=n[0]-t[0],k.y+=n[1]-t[1]}function o(t,e,r,o){t.__chart__={x:k.x,y:k.y,k:k.k},i(Math.pow(2,o)),u(d=e,r),t=ao.select(t),C>0&&(t=t.transition().duration(C)),t.call(n.event)}function a(){b&&b.domain(x.range().map(function(n){return(n-k.x)/k.k}).map(x.invert)),w&&w.domain(_.range().map(function(n){return(n-k.y)/k.k}).map(_.invert))}function l(n){z++||n({type:"zoomstart"})}function c(n){a(),n({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function f(n){--z||(n({type:"zoomend"}),d=null)}function s(){function n(){a=1,u(ao.mouse(i),h),c(o)}function r(){s.on(q,null).on(T,null),p(a),f(o)}var i=this,o=D.of(i,arguments),a=0,s=ao.select(t(i)).on(q,n).on(T,r),h=e(ao.mouse(i)),p=W(i);Il.call(i),l(o)}function h(){function n(){var n=ao.touches(g);return p=k.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=e(n))}),n}function t(){var t=ao.event.target;ao.select(t).on(x,r).on(b,a),_.push(t);for(var e=ao.event.changedTouches,i=0,u=e.length;u>i;++i)d[e[i].identifier]=null;var l=n(),c=Date.now();if(1===l.length){if(500>c-M){var f=l[0];o(g,f,d[f.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}M=c}else if(l.length>1){var f=l[0],s=l[1],h=f[0]-s[0],p=f[1]-s[1];y=h*h+p*p}}function r(){var n,t,e,r,o=ao.touches(g);Il.call(g);for(var a=0,l=o.length;l>a;++a,r=null)if(e=o[a],r=d[e.identifier]){if(t)break;n=e,t=r}if(r){var f=(f=e[0]-n[0])*f+(f=e[1]-n[1])*f,s=y&&Math.sqrt(f/y);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],i(s*p)}M=null,u(n,t),c(v)}function a(){if(ao.event.touches.length){for(var t=ao.event.changedTouches,e=0,r=t.length;r>e;++e)delete d[t[e].identifier];for(var i in d)return void n()}ao.selectAll(_).on(m,null),w.on(L,s).on(R,h),N(),f(v)}var p,g=this,v=D.of(g,arguments),d={},y=0,m=".zoom-"+ao.event.changedTouches[0].identifier,x="touchmove"+m,b="touchend"+m,_=[],w=ao.select(g),N=W(g);t(),l(v),w.on(L,null).on(R,t)}function p(){var n=D.of(this,arguments);m?clearTimeout(m):(Il.call(this),v=e(d=y||ao.mouse(this)),l(n)),m=setTimeout(function(){m=null,f(n)},50),S(),i(Math.pow(2,.002*Bo())*k.k),u(d,v),c(n)}function g(){var n=ao.mouse(this),t=Math.log(k.k)/Math.LN2;o(this,n,e(n),ao.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var v,d,y,m,M,x,b,_,w,k={x:0,y:0,k:1},E=[960,500],A=Jo,C=250,z=0,L="mousedown.zoom",q="mousemove.zoom",T="mouseup.zoom",R="touchstart.zoom",D=N(n,"zoomstart","zoom","zoomend");return Wo||(Wo="onwheel"in fo?(Bo=function(){return-ao.event.deltaY*(ao.event.deltaMode?120:1)},"wheel"):"onmousewheel"in fo?(Bo=function(){return ao.event.wheelDelta},"mousewheel"):(Bo=function(){return-ao.event.detail},"MozMousePixelScroll")),n.event=function(n){n.each(function(){var n=D.of(this,arguments),t=k;Hl?ao.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},l(n)}).tween("zoom:zoom",function(){var e=E[0],r=E[1],i=d?d[0]:e/2,u=d?d[1]:r/2,o=ao.interpolateZoom([(i-k.x)/k.k,(u-k.y)/k.k,e/k.k],[(i-t.x)/t.k,(u-t.y)/t.k,e/t.k]);return function(t){var r=o(t),a=e/r[2];this.__chart__=k={x:i-r[0]*a,y:u-r[1]*a,k:a},c(n)}}).each("interrupt.zoom",function(){f(n)}).each("end.zoom",function(){f(n)}):(this.__chart__=k,l(n),c(n),f(n))})},n.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},a(),n):[k.x,k.y]},n.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:null},i(+t),a(),n):k.k},n.scaleExtent=function(t){return arguments.length?(A=null==t?Jo:[+t[0],+t[1]],n):A},n.center=function(t){return arguments.length?(y=t&&[+t[0],+t[1]],n):y},n.size=function(t){return arguments.length?(E=t&&[+t[0],+t[1]],n):E},n.duration=function(t){return arguments.length?(C=+t,n):C},n.x=function(t){return arguments.length?(b=t,x=t.copy(),k={x:0,y:0,k:1},n):b},n.y=function(t){return arguments.length?(w=t,_=t.copy(),k={x:0,y:0,k:1},n):w},ao.rebind(n,D,"on")};var Bo,Wo,Jo=[0,1/0];ao.color=an,an.prototype.toString=function(){return this.rgb()+""},ao.hsl=ln;var Go=ln.prototype=new an;Go.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new ln(this.h,this.s,this.l/n)},Go.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new ln(this.h,this.s,n*this.l)},Go.rgb=function(){return cn(this.h,this.s,this.l)},ao.hcl=fn;var Ko=fn.prototype=new an;Ko.brighter=function(n){return new fn(this.h,this.c,Math.min(100,this.l+Qo*(arguments.length?n:1)))},Ko.darker=function(n){return new fn(this.h,this.c,Math.max(0,this.l-Qo*(arguments.length?n:1)))},Ko.rgb=function(){return sn(this.h,this.c,this.l).rgb()},ao.lab=hn;var Qo=18,na=.95047,ta=1,ea=1.08883,ra=hn.prototype=new an;ra.brighter=function(n){return new hn(Math.min(100,this.l+Qo*(arguments.length?n:1)),this.a,this.b)},ra.darker=function(n){return new hn(Math.max(0,this.l-Qo*(arguments.length?n:1)),this.a,this.b)},ra.rgb=function(){return pn(this.l,this.a,this.b)},ao.rgb=mn;var ia=mn.prototype=new an;ia.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,i=30;return t||e||r?(t&&i>t&&(t=i),e&&i>e&&(e=i),r&&i>r&&(r=i),new mn(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new mn(i,i,i)},ia.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new mn(n*this.r,n*this.g,n*this.b)},ia.hsl=function(){return wn(this.r,this.g,this.b)},ia.toString=function(){return"#"+bn(this.r)+bn(this.g)+bn(this.b)};var ua=ao.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ua.forEach(function(n,t){ua.set(n,Mn(t))}),ao.functor=En,ao.xhr=An(m),ao.dsv=function(n,t){function e(n,e,u){arguments.length<3&&(u=e,e=null);var o=Cn(n,t,null==e?r:i(e),u);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:i(n)):e},o}function r(n){return e.parse(n.responseText)}function i(n){return function(t){return e.parse(t.responseText,n)}}function u(t){return t.map(o).join(n)}function o(n){return a.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var a=new RegExp('["'+n+"\n]"),l=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var i=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(i(n),e)}:i})},e.parseRows=function(n,t){function e(){if(f>=c)return o;if(i)return i=!1,u;var t=f;if(34===n.charCodeAt(t)){for(var e=t;e++<c;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}f=e+2;var r=n.charCodeAt(e+1);return 13===r?(i=!0,10===n.charCodeAt(e+2)&&++f):10===r&&(i=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;c>f;){var r=n.charCodeAt(f++),a=1;if(10===r)i=!0;else if(13===r)i=!0,10===n.charCodeAt(f)&&(++f,++a);else if(r!==l)continue;return n.slice(t,f-a)}return n.slice(t)}for(var r,i,u={},o={},a=[],c=n.length,f=0,s=0;(r=e())!==o;){for(var h=[];r!==u&&r!==o;)h.push(r),r=e();t&&null==(h=t(h,s++))||a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new y,i=[];return t.forEach(function(n){for(var t in n)r.has(t)||i.push(r.add(t))}),[i.map(o).join(n)].concat(t.map(function(t){return i.map(function(n){return o(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(u).join("\n")},e},ao.csv=ao.dsv(",","text/csv"),ao.tsv=ao.dsv("  ","text/tab-separated-values");var oa,aa,la,ca,fa=this[x(this,"requestAnimationFrame")]||function(n){setTimeout(n,17)};ao.timer=function(){qn.apply(this,arguments)},ao.timer.flush=function(){Rn(),Dn()},ao.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var sa=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Un);ao.formatPrefix=function(n,t){var e=0;return(n=+n)&&(0>n&&(n*=-1),t&&(n=ao.round(n,Pn(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),sa[8+e/3]};var ha=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,pa=ao.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=ao.round(n,Pn(n,t))).toFixed(Math.max(0,Math.min(20,Pn(n*(1+1e-15),t))))}}),ga=ao.time={},va=Date;Hn.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){da.setUTCDate.apply(this._,arguments)},setDay:function(){da.setUTCDay.apply(this._,arguments)},setFullYear:function(){da.setUTCFullYear.apply(this._,arguments)},setHours:function(){da.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){da.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){da.setUTCMinutes.apply(this._,arguments)},setMonth:function(){da.setUTCMonth.apply(this._,arguments)},setSeconds:function(){da.setUTCSeconds.apply(this._,arguments)},setTime:function(){da.setTime.apply(this._,arguments)}};var da=Date.prototype;ga.year=On(function(n){return n=ga.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),ga.years=ga.year.range,ga.years.utc=ga.year.utc.range,ga.day=On(function(n){var t=new va(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),ga.days=ga.day.range,ga.days.utc=ga.day.utc.range,ga.dayOfYear=function(n){var t=ga.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=ga[n]=On(function(n){return(n=ga.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=ga.year(n).getDay();return Math.floor((ga.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});ga[n+"s"]=e.range,ga[n+"s"].utc=e.utc.range,ga[n+"OfYear"]=function(n){var e=ga.year(n).getDay();return Math.floor((ga.dayOfYear(n)+(e+t)%7)/7)}}),ga.week=ga.sunday,ga.weeks=ga.sunday.range,ga.weeks.utc=ga.sunday.utc.range,ga.weekOfYear=ga.sundayOfYear;var ya={"-":"",_:" ",0:"0"},ma=/^\s*\d+/,Ma=/^%/;ao.locale=function(n){return{numberFormat:jn(n),timeFormat:Yn(n)}};var xa=ao.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ao.format=xa.numberFormat,ao.geo={},ft.prototype={s:0,t:0,add:function(n){st(n,this.t,ba),st(ba.s,this.s,this),this.s?this.t+=ba.t:this.s=ba.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ba=new ft;ao.geo.stream=function(n,t){n&&_a.hasOwnProperty(n.type)?_a[n.type](n,t):ht(n,t)};var _a={Feature:function(n,t){ht(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)ht(e[r].geometry,t)}},wa={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){pt(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)pt(e[r],t,0)},Polygon:function(n,t){gt(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)gt(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)ht(e[r],t)}};ao.geo.area=function(n){return Sa=0,ao.geo.stream(n,Na),Sa};var Sa,ka=new ft,Na={sphere:function(){Sa+=4*Fo},point:b,lineStart:b,lineEnd:b,polygonStart:function(){ka.reset(),Na.lineStart=vt},polygonEnd:function(){var n=2*ka;Sa+=0>n?4*Fo+n:n,Na.lineStart=Na.lineEnd=Na.point=b}};ao.geo.bounds=function(){function n(n,t){M.push(x=[f=n,h=n]),s>t&&(s=t),t>p&&(p=t)}function t(t,e){var r=dt([t*Yo,e*Yo]);if(y){var i=mt(y,r),u=[i[1],-i[0],0],o=mt(u,i);bt(o),o=_t(o);var l=t-g,c=l>0?1:-1,v=o[0]*Zo*c,d=xo(l)>180;if(d^(v>c*g&&c*t>v)){var m=o[1]*Zo;m>p&&(p=m)}else if(v=(v+360)%360-180,d^(v>c*g&&c*t>v)){var m=-o[1]*Zo;s>m&&(s=m)}else s>e&&(s=e),e>p&&(p=e);d?g>t?a(f,t)>a(f,h)&&(h=t):a(t,h)>a(f,h)&&(f=t):h>=f?(f>t&&(f=t),t>h&&(h=t)):t>g?a(f,t)>a(f,h)&&(h=t):a(t,h)>a(f,h)&&(f=t)}else n(t,e);y=r,g=t}function e(){b.point=t}function r(){x[0]=f,x[1]=h,b.point=n,y=null}function i(n,e){if(y){var r=n-g;m+=xo(r)>180?r+(r>0?360:-360):r}else v=n,d=e;Na.point(n,e),t(n,e)}function u(){Na.lineStart()}function o(){i(v,d),Na.lineEnd(),xo(m)>Uo&&(f=-(h=180)),x[0]=f,x[1]=h,y=null}function a(n,t){return(t-=n)<0?t+360:t}function l(n,t){return n[0]-t[0]}function c(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var f,s,h,p,g,v,d,y,m,M,x,b={point:n,lineStart:e,lineEnd:r,polygonStart:function(){b.point=i,b.lineStart=u,b.lineEnd=o,m=0,Na.polygonStart()},polygonEnd:function(){Na.polygonEnd(),b.point=n,b.lineStart=e,b.lineEnd=r,0>ka?(f=-(h=180),s=-(p=90)):m>Uo?p=90:-Uo>m&&(s=-90),x[0]=f,x[1]=h}};return function(n){p=h=-(f=s=1/0),M=[],ao.geo.stream(n,b);var t=M.length;if(t){M.sort(l);for(var e,r=1,i=M[0],u=[i];t>r;++r)e=M[r],c(e[0],i)||c(e[1],i)?(a(i[0],e[1])>a(i[0],i[1])&&(i[1]=e[1]),a(e[0],i[1])>a(i[0],i[1])&&(i[0]=e[0])):u.push(i=e);for(var o,e,g=-(1/0),t=u.length-1,r=0,i=u[t];t>=r;i=e,++r)e=u[r],(o=a(i[1],e[0]))>g&&(g=o,f=e[0],h=i[1])}return M=x=null,f===1/0||s===1/0?[[NaN,NaN],[NaN,NaN]]:[[f,s],[h,p]]}}(),ao.geo.centroid=function(n){Ea=Aa=Ca=za=La=qa=Ta=Ra=Da=Pa=Ua=0,ao.geo.stream(n,ja);var t=Da,e=Pa,r=Ua,i=t*t+e*e+r*r;return jo>i&&(t=qa,e=Ta,r=Ra,Uo>Aa&&(t=Ca,e=za,r=La),i=t*t+e*e+r*r,jo>i)?[NaN,NaN]:[Math.atan2(e,t)*Zo,tn(r/Math.sqrt(i))*Zo]};var Ea,Aa,Ca,za,La,qa,Ta,Ra,Da,Pa,Ua,ja={sphere:b,point:St,lineStart:Nt,lineEnd:Et,polygonStart:function(){ja.lineStart=At},polygonEnd:function(){ja.lineStart=Nt}},Fa=Rt(zt,jt,Ht,[-Fo,-Fo/2]),Ha=1e9;ao.geo.clipExtent=function(){var n,t,e,r,i,u,o={stream:function(n){return i&&(i.valid=!1),i=u(n),i.valid=!0,i},extent:function(a){return arguments.length?(u=Zt(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),i&&(i.valid=!1,i=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(ao.geo.conicEqualArea=function(){return Vt(Xt)}).raw=Xt,ao.geo.albers=function(){return ao.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ao.geo.albersUsa=function(){function n(n){var u=n[0],o=n[1];return t=null,e(u,o),t||(r(u,o),t)||i(u,o),t}var t,e,r,i,u=ao.geo.albers(),o=ao.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=ao.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=u.scale(),e=u.translate(),r=(n[0]-e[0])/t,i=(n[1]-e[1])/t;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?o:i>=.166&&.234>i&&r>=-.214&&-.115>r?a:u).invert(n)},n.stream=function(n){var t=u.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,i){t.point(n,i),e.point(n,i),r.point(n,i)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(u.precision(t),o.precision(t),a.precision(t),n):u.precision()},n.scale=function(t){return arguments.length?(u.scale(t),o.scale(.35*t),a.scale(t),n.translate(u.translate())):u.scale()},n.translate=function(t){if(!arguments.length)return u.translate();var c=u.scale(),f=+t[0],s=+t[1];return e=u.translate(t).clipExtent([[f-.455*c,s-.238*c],[f+.455*c,s+.238*c]]).stream(l).point,r=o.translate([f-.307*c,s+.201*c]).clipExtent([[f-.425*c+Uo,s+.12*c+Uo],[f-.214*c-Uo,s+.234*c-Uo]]).stream(l).point,i=a.translate([f-.205*c,s+.212*c]).clipExtent([[f-.214*c+Uo,s+.166*c+Uo],[f-.115*c-Uo,s+.234*c-Uo]]).stream(l).point,n},n.scale(1070)};var Oa,Ia,Ya,Za,Va,Xa,$a={point:b,lineStart:b,lineEnd:b,polygonStart:function(){Ia=0,$a.lineStart=$t},polygonEnd:function(){$a.lineStart=$a.lineEnd=$a.point=b,Oa+=xo(Ia/2)}},Ba={point:Bt,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b},Wa={point:Gt,lineStart:Kt,lineEnd:Qt,polygonStart:function(){Wa.lineStart=ne},polygonEnd:function(){Wa.point=Gt,Wa.lineStart=Kt,Wa.lineEnd=Qt}};ao.geo.path=function(){function n(n){return n&&("function"==typeof a&&u.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=i(u)),ao.geo.stream(n,o)),u.result()}function t(){return o=null,n}var e,r,i,u,o,a=4.5;return n.area=function(n){return Oa=0,ao.geo.stream(n,i($a)),Oa},n.centroid=function(n){return Ca=za=La=qa=Ta=Ra=Da=Pa=Ua=0,ao.geo.stream(n,i(Wa)),Ua?[Da/Ua,Pa/Ua]:Ra?[qa/Ra,Ta/Ra]:La?[Ca/La,za/La]:[NaN,NaN]},n.bounds=function(n){return Va=Xa=-(Ya=Za=1/0),ao.geo.stream(n,i(Ba)),[[Ya,Za],[Va,Xa]]},n.projection=function(n){return arguments.length?(i=(e=n)?n.stream||re(n):m,t()):e},n.context=function(n){return arguments.length?(u=null==(r=n)?new Wt:new te(n),"function"!=typeof a&&u.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(u.pointRadius(+t),+t),n):a},n.projection(ao.geo.albersUsa()).context(null)},ao.geo.transform=function(n){return{stream:function(t){var e=new ie(t);for(var r in n)e[r]=n[r];return e}}},ie.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ao.geo.projection=oe,ao.geo.projectionMutator=ae,(ao.geo.equirectangular=function(){return oe(ce)}).raw=ce.invert=ce,ao.geo.rotation=function(n){function t(t){return t=n(t[0]*Yo,t[1]*Yo),t[0]*=Zo,t[1]*=Zo,t}return n=se(n[0]%360*Yo,n[1]*Yo,n.length>2?n[2]*Yo:0),t.invert=function(t){return t=n.invert(t[0]*Yo,t[1]*Yo),t[0]*=Zo,t[1]*=Zo,t},t},fe.invert=ce,ao.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=se(-n[0]*Yo,-n[1]*Yo,0).invert,i=[];return e(null,null,1,{point:function(n,e){i.push(n=t(n,e)),n[0]*=Zo,n[1]*=Zo}}),{type:"Polygon",coordinates:[i]}}var t,e,r=[0,0],i=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=ve((t=+r)*Yo,i*Yo),n):t},n.precision=function(r){return arguments.length?(e=ve(t*Yo,(i=+r)*Yo),n):i},n.angle(90)},ao.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Yo,i=n[1]*Yo,u=t[1]*Yo,o=Math.sin(r),a=Math.cos(r),l=Math.sin(i),c=Math.cos(i),f=Math.sin(u),s=Math.cos(u);return Math.atan2(Math.sqrt((e=s*o)*e+(e=c*f-l*s*a)*e),l*f+c*s*a)},ao.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return ao.range(Math.ceil(u/d)*d,i,d).map(h).concat(ao.range(Math.ceil(c/y)*y,l,y).map(p)).concat(ao.range(Math.ceil(r/g)*g,e,g).filter(function(n){return xo(n%d)>Uo}).map(f)).concat(ao.range(Math.ceil(a/v)*v,o,v).filter(function(n){return xo(n%y)>Uo}).map(s))}var e,r,i,u,o,a,l,c,f,s,h,p,g=10,v=g,d=90,y=360,m=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(u).concat(p(l).slice(1),h(i).reverse().slice(1),p(c).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(u=+t[0][0],i=+t[1][0],c=+t[0][1],l=+t[1][1],u>i&&(t=u,u=i,i=t),c>l&&(t=c,c=l,l=t),n.precision(m)):[[u,c],[i,l]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(m)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],y=+t[1],n):[d,y]},n.minorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],n):[g,v]},n.precision=function(t){return arguments.length?(m=+t,f=ye(a,o,90),s=me(r,e,m),h=ye(c,l,90),p=me(u,i,m),n):m},n.majorExtent([[-180,-90+Uo],[180,90-Uo]]).minorExtent([[-180,-80-Uo],[180,80+Uo]])},ao.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||i.apply(this,arguments)]}}var t,e,r=Me,i=xe;return n.distance=function(){return ao.geo.distance(t||r.apply(this,arguments),e||i.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(i=t,e="function"==typeof t?null:t,n):i},n.precision=function(){return arguments.length?n:0},n},ao.geo.interpolate=function(n,t){return be(n[0]*Yo,n[1]*Yo,t[0]*Yo,t[1]*Yo)},ao.geo.length=function(n){return Ja=0,ao.geo.stream(n,Ga),Ja};var Ja,Ga={sphere:b,point:b,lineStart:_e,lineEnd:b,polygonStart:b,polygonEnd:b},Ka=we(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(ao.geo.azimuthalEqualArea=function(){return oe(Ka)}).raw=Ka;var Qa=we(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},m);(ao.geo.azimuthalEquidistant=function(){return oe(Qa)}).raw=Qa,(ao.geo.conicConformal=function(){return Vt(Se)}).raw=Se,(ao.geo.conicEquidistant=function(){return Vt(ke)}).raw=ke;var nl=we(function(n){return 1/n},Math.atan);(ao.geo.gnomonic=function(){return oe(nl)}).raw=nl,Ne.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Io]},(ao.geo.mercator=function(){return Ee(Ne)}).raw=Ne;var tl=we(function(){return 1},Math.asin);(ao.geo.orthographic=function(){return oe(tl)}).raw=tl;var el=we(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(ao.geo.stereographic=function(){return oe(el)}).raw=el,Ae.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Io]},(ao.geo.transverseMercator=function(){var n=Ee(Ae),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}).raw=Ae,ao.geom={},ao.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,i=En(e),u=En(r),o=n.length,a=[],l=[];for(t=0;o>t;t++)a.push([+i.call(this,n[t],t),+u.call(this,n[t],t),t]);for(a.sort(qe),t=0;o>t;t++)l.push([a[t][0],-a[t][1]]);var c=Le(a),f=Le(l),s=f[0]===c[0],h=f[f.length-1]===c[c.length-1],p=[];for(t=c.length-1;t>=0;--t)p.push(n[a[c[t]][2]]);for(t=+s;t<f.length-h;++t)p.push(n[a[f[t]][2]]);return p}var e=Ce,r=ze;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},ao.geom.polygon=function(n){return ko(n,rl),n};var rl=ao.geom.polygon.prototype=[];rl.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],i=0;++t<e;)n=r,r=this[t],i+=n[1]*r[0]-n[0]*r[1];return.5*i},rl.centroid=function(n){var t,e,r=-1,i=this.length,u=0,o=0,a=this[i-1];for(arguments.length||(n=-1/(6*this.area()));++r<i;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],u+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[u*n,o*n]},rl.clip=function(n){for(var t,e,r,i,u,o,a=De(n),l=-1,c=this.length-De(this),f=this[c-1];++l<c;){for(t=n.slice(),n.length=0,i=this[l],u=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],Te(o,f,i)?(Te(u,f,i)||n.push(Re(u,o,f,i)),n.push(o)):Te(u,f,i)&&n.push(Re(u,o,f,i)),u=o;a&&n.push(n[0]),f=i}return n};var il,ul,ol,al,ll,cl=[],fl=[];Ye.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Ve),t.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},er.prototype={insert:function(n,t){var e,r,i;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=or(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.R&&(ir(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ur(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.L&&(ur(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ir(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,i=n.U,u=n.L,o=n.R;if(e=u?o?or(o):u:o,i?i.L===n?i.L=e:i.R=e:this._=e,u&&o?(r=e.C,e.C=n.C,e.L=u,u.U=e,e!==o?(i=e.U,e.U=n.U,n=e.R,i.L=n,e.R=o,o.U=e):(e.U=i,i=e,n=e.R)):(r=n.C,n=e),n&&(n.U=i),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,ir(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ur(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ir(this,i),n=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ur(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ir(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ur(this,i),n=this._;break}t.C=!0,n=i,i=i.U}while(!n.C);n&&(n.C=!1)}}},ao.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],i=a[0][1],u=a[1][0],o=a[1][1];return ar(e(n),a).cells.forEach(function(e,a){var l=e.edges,c=e.site,f=t[a]=l.length?l.map(function(n){var t=n.start();return[t.x,t.y]}):c.x>=r&&c.x<=u&&c.y>=i&&c.y<=o?[[r,o],[u,o],[u,i],[r,i]]:[];f.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(u(n,t)/Uo)*Uo,y:Math.round(o(n,t)/Uo)*Uo,i:t}})}var r=Ce,i=ze,u=r,o=i,a=sl;return n?t(n):(t.links=function(n){return ar(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return ar(e(n)).cells.forEach(function(e,r){for(var i,u,o=e.site,a=e.edges.sort(Ve),l=-1,c=a.length,f=a[c-1].edge,s=f.l===o?f.r:f.l;++l<c;)i=f,u=s,f=a[l].edge,s=f.l===o?f.r:f.l,r<u.i&&r<s.i&&cr(o,u,s)<0&&t.push([n[r],n[u.i],n[s.i]])}),t},t.x=function(n){return arguments.length?(u=En(r=n),t):r},t.y=function(n){return arguments.length?(o=En(i=n),t):i},t.clipExtent=function(n){return arguments.length?(a=null==n?sl:n,t):a===sl?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===sl?null:a&&a[1]},t)};var sl=[[-1e6,-1e6],[1e6,1e6]];ao.geom.delaunay=function(n){return ao.geom.voronoi().triangles(n)},ao.geom.quadtree=function(n,t,e,r,i){function u(n){function u(n,t,e,r,i,u,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var l=n.x,f=n.y;if(null!=l)if(xo(l-e)+xo(f-r)<.01)c(n,t,e,r,i,u,o,a);else{var s=n.point;n.x=n.y=n.point=null,c(n,s,l,f,i,u,o,a),c(n,t,e,r,i,u,o,a)}else n.x=e,n.y=r,n.point=t}else c(n,t,e,r,i,u,o,a)}function c(n,t,e,r,i,o,a,l){var c=.5*(i+a),f=.5*(o+l),s=e>=c,h=r>=f,p=h<<1|s;n.leaf=!1,n=n.nodes[p]||(n.nodes[p]=hr()),s?i=c:a=c,h?o=f:l=f,u(n,t,e,r,i,o,a,l)}var f,s,h,p,g,v,d,y,m,M=En(a),x=En(l);if(null!=t)v=t,d=e,y=r,m=i;else if(y=m=-(v=d=1/0),s=[],h=[],g=n.length,o)for(p=0;g>p;++p)f=n[p],f.x<v&&(v=f.x),f.y<d&&(d=f.y),f.x>y&&(y=f.x),f.y>m&&(m=f.y),s.push(f.x),h.push(f.y);else for(p=0;g>p;++p){var b=+M(f=n[p],p),_=+x(f,p);v>b&&(v=b),d>_&&(d=_),b>y&&(y=b),_>m&&(m=_),s.push(b),h.push(_)}var w=y-v,S=m-d;w>S?m=d+w:y=v+S;var k=hr();if(k.add=function(n){u(k,n,+M(n,++p),+x(n,p),v,d,y,m)},k.visit=function(n){pr(n,k,v,d,y,m)},k.find=function(n){return gr(k,n[0],n[1],v,d,y,m)},p=-1,null==t){for(;++p<g;)u(k,n[p],s[p],h[p],v,d,y,m);--p}else n.forEach(k.add);return s=h=n=f=null,k}var o,a=Ce,l=ze;return(o=arguments.length)?(a=fr,l=sr,3===o&&(i=e,r=t,e=t=0),u(n)):(u.x=function(n){return arguments.length?(a=n,u):a},u.y=function(n){return arguments.length?(l=n,u):l},u.extent=function(n){return arguments.length?(null==n?t=e=r=i=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],i=+n[1][1]),u):null==t?null:[[t,e],[r,i]]},u.size=function(n){return arguments.length?(null==n?t=e=r=i=null:(t=e=0,r=+n[0],i=+n[1]),u):null==t?null:[r-t,i-e]},u)},ao.interpolateRgb=vr,ao.interpolateObject=dr,ao.interpolateNumber=yr,ao.interpolateString=mr;var hl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pl=new RegExp(hl.source,"g");ao.interpolate=Mr,ao.interpolators=[function(n,t){var e=typeof t;return("string"===e?ua.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?vr:mr:t instanceof an?vr:Array.isArray(t)?xr:"object"===e&&isNaN(t)?dr:yr)(n,t)}],ao.interpolateArray=xr;var gl=function(){return m},vl=ao.map({linear:gl,poly:Er,quad:function(){return Sr},cubic:function(){return kr},sin:function(){return Ar},exp:function(){return Cr},circle:function(){return zr},elastic:Lr,back:qr,bounce:function(){return Tr}}),dl=ao.map({in:m,out:_r,"in-out":wr,"out-in":function(n){return wr(_r(n))}});ao.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return e=vl.get(e)||gl,r=dl.get(r)||m,br(r(e.apply(null,lo.call(arguments,1))))},ao.interpolateHcl=Rr,ao.interpolateHsl=Dr,ao.interpolateLab=Pr,ao.interpolateRound=Ur,ao.transform=function(n){var t=fo.createElementNS(ao.ns.prefix.svg,"g");return(ao.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new jr(e?e.matrix:yl)})(n)},jr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var yl={a:1,b:0,c:0,d:1,e:0,f:0};ao.interpolateTransform=$r,ao.layout={},ao.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Jr(n[e]));return t}},ao.layout.chord=function(){function n(){var n,c,s,h,p,g={},v=[],d=ao.range(u),y=[];for(e=[],r=[],n=0,h=-1;++h<u;){for(c=0,p=-1;++p<u;)c+=i[h][p];v.push(c),y.push(ao.range(u)),n+=c}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&y.forEach(function(n,t){n.sort(function(n,e){return a(i[t][n],i[t][e])})}),n=(Ho-f*u)/n,c=0,h=-1;++h<u;){for(s=c,p=-1;++p<u;){var m=d[h],M=y[m][p],x=i[m][M],b=c,_=c+=x*n;g[m+"-"+M]={index:m,subindex:M,startAngle:b,endAngle:_,value:x}}r[m]={index:m,startAngle:s,endAngle:c,value:v[m]},c+=f}for(h=-1;++h<u;)for(p=h-1;++p<u;){var w=g[h+"-"+p],S=g[p+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}l&&t()}function t(){e.sort(function(n,t){return l((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,i,u,o,a,l,c={},f=0;return c.matrix=function(n){return arguments.length?(u=(i=n)&&i.length,e=r=null,c):i},c.padding=function(n){return arguments.length?(f=n,e=r=null,c):f},c.sortGroups=function(n){return arguments.length?(o=n,e=r=null,c):o},c.sortSubgroups=function(n){return arguments.length?(a=n,e=null,c):a},c.sortChords=function(n){return arguments.length?(l=n,e&&t(),c):l},c.chords=function(){return e||n(),e},c.groups=function(){return r||n(),r},c},ao.layout.force=function(){function n(n){return function(t,e,r,i){if(t.point!==n){var u=t.cx-n.x,o=t.cy-n.y,a=i-e,l=u*u+o*o;if(l>a*a/y){if(v>l){var c=t.charge/l;n.px-=u*c,n.py-=o*c}return!0}if(t.point&&l&&v>l){var c=t.pointCharge/l;n.px-=u*c,n.py-=o*c}}return!t.charge}}function t(n){n.px=ao.event.x,n.py=ao.event.y,l.resume()}var e,r,i,u,o,a,l={},c=ao.dispatch("start","tick","end"),f=[1,1],s=.9,h=ml,p=Ml,g=-30,v=xl,d=.1,y=.64,M=[],x=[];return l.tick=function(){if((i*=.99)<.005)return e=null,c.end({type:"end",alpha:i=0}),!0;var t,r,l,h,p,v,y,m,b,_=M.length,w=x.length;for(r=0;w>r;++r)l=x[r],h=l.source,p=l.target,m=p.x-h.x,b=p.y-h.y,(v=m*m+b*b)&&(v=i*o[r]*((v=Math.sqrt(v))-u[r])/v,m*=v,b*=v,p.x-=m*(y=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=b*y,h.x+=m*(y=1-y),h.y+=b*y);if((y=i*d)&&(m=f[0]/2,b=f[1]/2,r=-1,y))for(;++r<_;)l=M[r],l.x+=(m-l.x)*y,l.y+=(b-l.y)*y;if(g)for(ri(t=ao.geom.quadtree(M),i,a),r=-1;++r<_;)(l=M[r]).fixed||t.visit(n(l));for(r=-1;++r<_;)l=M[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*s,l.y-=(l.py-(l.py=l.y))*s);c.tick({type:"tick",alpha:i})},l.nodes=function(n){return arguments.length?(M=n,l):M},l.links=function(n){return arguments.length?(x=n,l):x},l.size=function(n){return arguments.length?(f=n,l):f},l.linkDistance=function(n){return arguments.length?(h="function"==typeof n?n:+n,l):h},l.distance=l.linkDistance,l.linkStrength=function(n){return arguments.length?(p="function"==typeof n?n:+n,l):p},l.friction=function(n){return arguments.length?(s=+n,l):s},l.charge=function(n){return arguments.length?(g="function"==typeof n?n:+n,l):g},l.chargeDistance=function(n){return arguments.length?(v=n*n,l):Math.sqrt(v)},l.gravity=function(n){return arguments.length?(d=+n,l):d},l.theta=function(n){return arguments.length?(y=n*n,l):Math.sqrt(y)},l.alpha=function(n){return arguments.length?(n=+n,i?n>0?i=n:(e.c=null,e.t=NaN,e=null,c.end({type:"end",alpha:i=0})):n>0&&(c.start({type:"start",alpha:i=n}),e=qn(l.tick)),l):i},l.start=function(){function n(n,r){if(!e){for(e=new Array(i),l=0;i>l;++l)e[l]=[];for(l=0;c>l;++l){var u=x[l];e[u.source.index].push(u.target),e[u.target.index].push(u.source)}}for(var o,a=e[t],l=-1,f=a.length;++l<f;)if(!isNaN(o=a[l][n]))return o;return Math.random()*r}var t,e,r,i=M.length,c=x.length,s=f[0],v=f[1];for(t=0;i>t;++t)(r=M[t]).index=t,r.weight=0;for(t=0;c>t;++t)r=x[t],"number"==typeof r.source&&(r.source=M[r.source]),"number"==typeof r.target&&(r.target=M[r.target]),++r.source.weight,++r.target.weight;for(t=0;i>t;++t)r=M[t],isNaN(r.x)&&(r.x=n("x",s)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(u=[],"function"==typeof h)for(t=0;c>t;++t)u[t]=+h.call(this,x[t],t);else for(t=0;c>t;++t)u[t]=h;if(o=[],"function"==typeof p)for(t=0;c>t;++t)o[t]=+p.call(this,x[t],t);else for(t=0;c>t;++t)o[t]=p;if(a=[],"function"==typeof g)for(t=0;i>t;++t)a[t]=+g.call(this,M[t],t);else for(t=0;i>t;++t)a[t]=g;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return r||(r=ao.behavior.drag().origin(m).on("dragstart.force",Qr).on("drag.force",t).on("dragend.force",ni)),arguments.length?void this.on("mouseover.force",ti).on("mouseout.force",ei).call(r):r},ao.rebind(l,c,"on")};var ml=20,Ml=1,xl=1/0;ao.layout.hierarchy=function(){function n(i){var u,o=[i],a=[];for(i.depth=0;null!=(u=o.pop());)if(a.push(u),(c=e.call(n,u,u.depth))&&(l=c.length)){for(var l,c,f;--l>=0;)o.push(f=c[l]),f.parent=u,f.depth=u.depth+1;r&&(u.value=0),u.children=c}else r&&(u.value=+r.call(n,u,u.depth)||0),delete u.children;return oi(i,function(n){var e,i;t&&(e=n.children)&&e.sort(t),r&&(i=n.parent)&&(i.value+=n.value)}),a}var t=ci,e=ai,r=li;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(ui(t,function(n){n.children&&(n.value=0)}),oi(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},ao.layout.partition=function(){function n(t,e,r,i){var u=t.children;if(t.x=e,t.y=t.depth*i,t.dx=r,t.dy=i,u&&(o=u.length)){var o,a,l,c=-1;for(r=t.value?r/t.value:0;++c<o;)n(a=u[c],e,l=a.value*r,i),e+=l}}function t(n){var e=n.children,r=0;if(e&&(i=e.length))for(var i,u=-1;++u<i;)r=Math.max(r,t(e[u]));return 1+r}function e(e,u){var o=r.call(this,e,u);return n(o[0],0,i[0],i[1]/t(o[0])),o}var r=ao.layout.hierarchy(),i=[1,1];return e.size=function(n){return arguments.length?(i=n,e):i},ii(e,r)},ao.layout.pie=function(){function n(o){var a,l=o.length,c=o.map(function(e,r){return+t.call(n,e,r)}),f=+("function"==typeof r?r.apply(this,arguments):r),s=("function"==typeof i?i.apply(this,arguments):i)-f,h=Math.min(Math.abs(s)/l,+("function"==typeof u?u.apply(this,arguments):u)),p=h*(0>s?-1:1),g=ao.sum(c),v=g?(s-l*p)/g:0,d=ao.range(l),y=[];return null!=e&&d.sort(e===bl?function(n,t){return c[t]-c[n]}:function(n,t){return e(o[n],o[t])}),d.forEach(function(n){y[n]={data:o[n],value:a=c[n],startAngle:f,endAngle:f+=a*v+p,padAngle:h}}),y}var t=Number,e=bl,r=0,i=Ho,u=0;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(i=t,n):i},n.padAngle=function(t){return arguments.length?(u=t,n):u},n};var bl={};ao.layout.stack=function(){function n(a,l){if(!(h=a.length))return a;var c=a.map(function(e,r){return t.call(n,e,r)}),f=c.map(function(t){return t.map(function(t,e){return[u.call(n,t,e),o.call(n,t,e)]})}),s=e.call(n,f,l);c=ao.permute(c,s),f=ao.permute(f,s);var h,p,g,v,d=r.call(n,f,l),y=c[0].length;for(g=0;y>g;++g)for(i.call(n,c[0][g],v=d[g],f[0][g][1]),p=1;h>p;++p)i.call(n,c[p][g],v+=f[p-1][g][1],f[p][g][1]);return a}var t=m,e=gi,r=vi,i=pi,u=si,o=hi;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:_l.get(t)||gi,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:wl.get(t)||vi,n):r},n.x=function(t){return arguments.length?(u=t,n):u},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(i=t,n):i},n};var _l=ao.map({"inside-out":function(n){var t,e,r=n.length,i=n.map(di),u=n.map(yi),o=ao.range(r).sort(function(n,t){return i[n]-i[t]}),a=0,l=0,c=[],f=[];for(t=0;r>t;++t)e=o[t],l>a?(a+=u[e],c.push(e)):(l+=u[e],f.push(e));return f.reverse().concat(c)},reverse:function(n){return ao.range(n.length).reverse()},default:gi}),wl=ao.map({silhouette:function(n){var t,e,r,i=n.length,u=n[0].length,o=[],a=0,l=[];for(e=0;u>e;++e){for(t=0,r=0;i>t;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;u>e;++e)l[e]=(a-o[e])/2;return l},wiggle:function(n){var t,e,r,i,u,o,a,l,c,f=n.length,s=n[0],h=s.length,p=[];for(p[0]=l=c=0,e=1;h>e;++e){for(t=0,i=0;f>t;++t)i+=n[t][e][1];for(t=0,u=0,a=s[e][0]-s[e-1][0];f>t;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);t>r;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;u+=o*n[t][e][1]}p[e]=l-=i?u/i*a:0,c>l&&(c=l)}for(e=0;h>e;++e)p[e]-=c;return p},expand:function(n){var t,e,r,i=n.length,u=n[0].length,o=1/i,a=[];for(e=0;u>e;++e){for(t=0,r=0;i>t;t++)r+=n[t][e][1];if(r)for(t=0;i>t;t++)n[t][e][1]/=r;else for(t=0;i>t;t++)n[t][e][1]=o}for(e=0;u>e;++e)a[e]=0;return a},zero:vi});ao.layout.histogram=function(){function n(n,u){for(var o,a,l=[],c=n.map(e,this),f=r.call(this,c,u),s=i.call(this,f,c,u),u=-1,h=c.length,p=s.length-1,g=t?1:1/h;++u<p;)o=l[u]=[],o.dx=s[u+1]-(o.x=s[u]),o.y=0;if(p>0)for(u=-1;++u<h;)a=c[u],a>=f[0]&&a<=f[1]&&(o=l[ao.bisect(s,a,1,p)-1],o.y+=g,o.push(n[u]));return l}var t=!0,e=Number,r=bi,i=Mi;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=En(t),n):r},n.bins=function(t){return arguments.length?(i="number"==typeof t?function(n){return xi(n,t)}:En(t),n):i},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},ao.layout.pack=function(){function n(n,u){var o=e.call(this,n,u),a=o[0],l=i[0],c=i[1],f=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(a.x=a.y=0,oi(a,function(n){n.r=+f(n.value)}),oi(a,Ni),r){var s=r*(t?1:Math.max(2*a.r/l,2*a.r/c))/2;oi(a,function(n){n.r+=s}),oi(a,Ni),oi(a,function(n){n.r-=s})}return Ci(a,l/2,c/2,t?1:1/Math.max(2*a.r/l,2*a.r/c)),o}var t,e=ao.layout.hierarchy().sort(_i),r=0,i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},ii(n,e)},ao.layout.tree=function(){function n(n,i){var f=o.call(this,n,i),s=f[0],h=t(s);if(oi(h,e),h.parent.m=-h.z,ui(h,r),c)ui(s,u);else{var p=s,g=s,v=s;ui(s,function(n){n.x<p.x&&(p=n),n.x>g.x&&(g=n),n.depth>v.depth&&(v=n)});var d=a(p,g)/2-p.x,y=l[0]/(g.x+a(g,p)/2+d),m=l[1]/(v.depth||1);ui(s,function(n){n.x=(n.x+d)*y,n.y=n.depth*m})}return f}function t(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var i,u=t.children,o=0,a=u.length;a>o;++o)r.push((u[o]=i={_:u[o],parent:t,children:(i=u[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return e.children[0]}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){Di(n);var u=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+a(n._,r._),n.m=n.z-u):n.z=u}else r&&(n.z=r.z+a(n._,r._));n.parent.A=i(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function i(n,t,e){if(t){for(var r,i=n,u=n,o=t,l=i.parent.children[0],c=i.m,f=u.m,s=o.m,h=l.m;o=Ti(o),i=qi(i),o&&i;)l=qi(l),u=Ti(u),u.a=n,r=o.z+s-i.z-c+a(o._,i._),r>0&&(Ri(Pi(o,n,e),n,r),c+=r,f+=r),s+=o.m,c+=i.m,h+=l.m,f+=u.m;o&&!Ti(u)&&(u.t=o,u.m+=s-f),i&&!qi(l)&&(l.t=i,l.m+=c-h,e=n)}return e}function u(n){n.x*=l[0],n.y=n.depth*l[1]}var o=ao.layout.hierarchy().sort(null).value(null),a=Li,l=[1,1],c=null;return n.separation=function(t){return arguments.length?(a=t,n):a},n.size=function(t){return arguments.length?(c=null==(l=t)?u:null,n):c?null:l},n.nodeSize=function(t){return arguments.length?(c=null==(l=t)?null:u,n):c?l:null},ii(n,o)},ao.layout.cluster=function(){function n(n,u){var o,a=t.call(this,n,u),l=a[0],c=0;oi(l,function(n){var t=n.children;t&&t.length?(n.x=ji(t),n.y=Ui(t)):(n.x=o?c+=e(n,o):0,n.y=0,o=n)});var f=Fi(l),s=Hi(l),h=f.x-e(f,s)/2,p=s.x+e(s,f)/2;return oi(l,i?function(n){n.x=(n.x-l.x)*r[0],n.y=(l.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(p-h)*r[0],n.y=(1-(l.y?n.y/l.y:1))*r[1]}),a}var t=ao.layout.hierarchy().sort(null).value(null),e=Li,r=[1,1],i=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(i=null==(r=t),n):i?null:r},n.nodeSize=function(t){return arguments.length?(i=null!=(r=t),n):i?r:null},ii(n,t)},ao.layout.treemap=function(){function n(n,t){for(var e,r,i=-1,u=n.length;++i<u;)r=(e=n[i]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var u=e.children;if(u&&u.length){var o,a,l,c=s(e),f=[],h=u.slice(),g=1/0,v="slice"===p?c.dx:"dice"===p?c.dy:"slice-dice"===p?1&e.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(n(h,c.dx*c.dy/e.value),f.area=0;(l=h.length)>0;)f.push(o=h[l-1]),f.area+=o.area,"squarify"!==p||(a=r(f,v))<=g?(h.pop(),g=a):(f.area-=f.pop().area,i(f,v,c,!1),v=Math.min(c.dx,c.dy),f.length=f.area=0,g=1/0);f.length&&(i(f,v,c,!0),f.length=f.area=0),u.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var u,o=s(t),a=r.slice(),l=[];for(n(a,o.dx*o.dy/t.value),l.area=0;u=a.pop();)l.push(u),l.area+=u.area,null!=u.z&&(i(l,u.z?o.dx:o.dy,o,!a.length),l.length=l.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,i=0,u=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(u>e&&(u=e),e>i&&(i=e));return r*=r,t*=t,r?Math.max(t*i*g/r,r/(t*u*g)):1/0}function i(n,t,e,r){var i,u=-1,o=n.length,a=e.x,c=e.y,f=t?l(n.area/t):0;if(t==e.dx){for((r||f>e.dy)&&(f=e.dy);++u<o;)i=n[u],i.x=a,i.y=c,i.dy=f,a+=i.dx=Math.min(e.x+e.dx-a,f?l(i.area/f):0);i.z=!0,i.dx+=e.x+e.dx-a,e.y+=f,e.dy-=f}else{for((r||f>e.dx)&&(f=e.dx);++u<o;)i=n[u],i.x=a,i.y=c,i.dx=f,c+=i.dy=Math.min(e.y+e.dy-c,f?l(i.area/f):0);i.z=!1,i.dy+=e.y+e.dy-c,e.x+=f,e.dx-=f}}function u(r){var i=o||a(r),u=i[0];return u.x=u.y=0,u.value?(u.dx=c[0],u.dy=c[1]):u.dx=u.dy=0,o&&a.revalue(u),n([u],u.dx*u.dy/u.value),(o?e:t)(u),h&&(o=i),i}var o,a=ao.layout.hierarchy(),l=Math.round,c=[1,1],f=null,s=Oi,h=!1,p="squarify",g=.5*(1+Math.sqrt(5));return u.size=function(n){return arguments.length?(c=n,u):c},u.padding=function(n){function t(t){var e=n.call(u,t,t.depth);return null==e?Oi(t):Ii(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Ii(t,n)}if(!arguments.length)return f;var r;return s=null==(f=n)?Oi:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,u},u.round=function(n){return arguments.length?(l=n?Math.round:Number,u):l!=Number},u.sticky=function(n){return arguments.length?(h=n,o=null,u):h},u.ratio=function(n){return arguments.length?(g=n,u):g},u.mode=function(n){return arguments.length?(p=n+"",u):p},ii(u,a)},ao.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,i;do{e=2*Math.random()-1,r=2*Math.random()-1,i=e*e+r*r}while(!i||i>1);return n+t*e*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var n=ao.random.normal.apply(ao,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=ao.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},ao.scale={};var Sl={floor:m,ceil:m};ao.scale.linear=function(){return Wi([0,1],[0,1],Mr,!1)};var kl={s:1,g:1,p:1,r:1,e:1};ao.scale.log=function(){return ru(ao.scale.linear().domain([0,1]),10,!0,[1,10])};var Nl=ao.format(".0e"),El={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};ao.scale.pow=function(){return iu(ao.scale.linear(),1,[0,1])},ao.scale.sqrt=function(){return ao.scale.pow().exponent(.5)},ao.scale.ordinal=function(){return ou([],{t:"range",a:[[]]})},ao.scale.category10=function(){return ao.scale.ordinal().range(Al)},ao.scale.category20=function(){return ao.scale.ordinal().range(Cl)},ao.scale.category20b=function(){return ao.scale.ordinal().range(zl)},ao.scale.category20c=function(){return ao.scale.ordinal().range(Ll)};var Al=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xn),Cl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xn),zl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xn),Ll=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xn);ao.scale.quantile=function(){return au([],[])},ao.scale.quantize=function(){return lu(0,1,[0,1])},ao.scale.threshold=function(){return cu([.5],[0,1])},ao.scale.identity=function(){return fu([0,1])},ao.svg={},ao.svg.arc=function(){function n(){var n=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+r.apply(this,arguments)),f=o.apply(this,arguments)-Io,s=a.apply(this,arguments)-Io,h=Math.abs(s-f),p=f>s?0:1;if(n>c&&(g=c,c=n,n=g),h>=Oo)return t(c,p)+(n?t(n,1-p):"")+"Z";var g,v,d,y,m,M,x,b,_,w,S,k,N=0,E=0,A=[];if((y=(+l.apply(this,arguments)||0)/2)&&(d=u===ql?Math.sqrt(n*n+c*c):+u.apply(this,arguments),p||(E*=-1),c&&(E=tn(d/c*Math.sin(y))),n&&(N=tn(d/n*Math.sin(y)))),c){m=c*Math.cos(f+E),M=c*Math.sin(f+E),x=c*Math.cos(s-E),b=c*Math.sin(s-E);var C=Math.abs(s-f-2*E)<=Fo?0:1;if(E&&yu(m,M,x,b)===p^C){var z=(f+s)/2;m=c*Math.cos(z),M=c*Math.sin(z),x=b=null}}else m=M=0;if(n){_=n*Math.cos(s-N),w=n*Math.sin(s-N),S=n*Math.cos(f+N),k=n*Math.sin(f+N);var L=Math.abs(f-s+2*N)<=Fo?0:1;if(N&&yu(_,w,S,k)===1-p^L){var q=(f+s)/2;_=n*Math.cos(q),w=n*Math.sin(q),S=k=null}}else _=w=0;if(h>Uo&&(g=Math.min(Math.abs(c-n)/2,+i.apply(this,arguments)))>.001){v=c>n^p?0:1;var T=g,R=g;if(Fo>h){var D=null==S?[_,w]:null==x?[m,M]:Re([m,M],[S,k],[x,b],[_,w]),P=m-D[0],U=M-D[1],j=x-D[0],F=b-D[1],H=1/Math.sin(Math.acos((P*j+U*F)/(Math.sqrt(P*P+U*U)*Math.sqrt(j*j+F*F)))/2),O=Math.sqrt(D[0]*D[0]+D[1]*D[1]);R=Math.min(g,(n-O)/(H-1)),T=Math.min(g,(c-O)/(H+1))}if(null!=x){var I=mu(null==S?[_,w]:[S,k],[m,M],c,T,p),Y=mu([x,b],[_,w],c,T,p);g===T?A.push("M",I[0],"A",T,",",T," 0 0,",v," ",I[1],"A",c,",",c," 0 ",1-p^yu(I[1][0],I[1][1],Y[1][0],Y[1][1]),",",p," ",Y[1],"A",T,",",T," 0 0,",v," ",Y[0]):A.push("M",I[0],"A",T,",",T," 0 1,",v," ",Y[0])}else A.push("M",m,",",M);if(null!=S){var Z=mu([m,M],[S,k],n,-R,p),V=mu([_,w],null==x?[m,M]:[x,b],n,-R,p);g===R?A.push("L",V[0],"A",R,",",R," 0 0,",v," ",V[1],"A",n,",",n," 0 ",p^yu(V[1][0],V[1][1],Z[1][0],Z[1][1]),",",1-p," ",Z[1],"A",R,",",R," 0 0,",v," ",Z[0]):A.push("L",V[0],"A",R,",",R," 0 0,",v," ",Z[0])}else A.push("L",_,",",w)}else A.push("M",m,",",M),null!=x&&A.push("A",c,",",c," 0 ",C,",",p," ",x,",",b),A.push("L",_,",",w),null!=S&&A.push("A",n,",",n," 0 ",L,",",1-p," ",S,",",k);return A.push("Z"),A.join("")}function t(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var e=hu,r=pu,i=su,u=ql,o=gu,a=vu,l=du;return n.innerRadius=function(t){return arguments.length?(e=En(t),n):e},n.outerRadius=function(t){return arguments.length?(r=En(t),n):r},n.cornerRadius=function(t){return arguments.length?(i=En(t),n):i},n.padRadius=function(t){return arguments.length?(u=t==ql?ql:En(t),n):u},n.startAngle=function(t){return arguments.length?(o=En(t),n):o},n.endAngle=function(t){return arguments.length?(a=En(t),n):a},n.padAngle=function(t){return arguments.length?(l=En(t),n):l},n.centroid=function(){var n=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-Io;return[Math.cos(t)*n,Math.sin(t)*n]},n};var ql="auto";ao.svg.line=function(){return Mu(m)};var Tl=ao.map({linear:xu,"linear-closed":bu,step:_u,"step-before":wu,"step-after":Su,basis:zu,"basis-open":Lu,"basis-closed":qu,bundle:Tu,cardinal:Eu,"cardinal-open":ku,"cardinal-closed":Nu,monotone:Fu});Tl.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var Rl=[0,2/3,1/3,0],Dl=[0,1/3,2/3,0],Pl=[0,1/6,2/3,1/6];ao.svg.line.radial=function(){var n=Mu(Hu);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},wu.reverse=Su,Su.reverse=wu,ao.svg.area=function(){return Ou(m)},ao.svg.area.radial=function(){var n=Ou(Hu);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},ao.svg.chord=function(){function n(n,a){var l=t(this,u,n,a),c=t(this,o,n,a);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(e(l,c)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,c.r,c.p0)+r(c.r,c.p1,c.a1-c.a0)+i(c.r,c.p1,l.r,l.p0))+"Z"}function t(n,t,e,r){var i=t.call(n,e,r),u=a.call(n,i,r),o=l.call(n,i,r)-Io,f=c.call(n,i,r)-Io;return{r:u,a0:o,a1:f,p0:[u*Math.cos(o),u*Math.sin(o)],p1:[u*Math.cos(f),u*Math.sin(f)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>Fo)+",1 "+t}function i(n,t,e,r){return"Q 0,0 "+r}var u=Me,o=xe,a=Iu,l=gu,c=vu;return n.radius=function(t){return arguments.length?(a=En(t),n):a},n.source=function(t){return arguments.length?(u=En(t),n):u},n.target=function(t){return arguments.length?(o=En(t),n):o},n.startAngle=function(t){return arguments.length?(l=En(t),n):l},n.endAngle=function(t){return arguments.length?(c=En(t),n):c},n},ao.svg.diagonal=function(){function n(n,i){var u=t.call(this,n,i),o=e.call(this,n,i),a=(u.y+o.y)/2,l=[u,{x:u.x,y:a},{x:o.x,y:a},o];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=Me,e=xe,r=Yu;return n.source=function(e){return arguments.length?(t=En(e),n):t},n.target=function(t){return arguments.length?(e=En(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},ao.svg.diagonal.radial=function(){var n=ao.svg.diagonal(),t=Yu,e=n.projection;return n.projection=function(n){return arguments.length?e(Zu(t=n)):t},n},ao.svg.symbol=function(){function n(n,r){return(Ul.get(t.call(this,n,r))||$u)(e.call(this,n,r))}var t=Xu,e=Vu;return n.type=function(e){return arguments.length?(t=En(e),n):t},n.size=function(t){return arguments.length?(e=En(t),n):e},n};var Ul=ao.map({circle:$u,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Fl)),e=t*Fl;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/jl),e=t*jl/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/jl),e=t*jl/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});ao.svg.symbolTypes=Ul.keys();var jl=Math.sqrt(3),Fl=Math.tan(30*Yo);Co.transition=function(n){for(var t,e,r=Hl||++Zl,i=Ku(n),u=[],o=Ol||{time:Date.now(),ease:Nr,delay:0,duration:250},a=-1,l=this.length;++a<l;){u.push(t=[]);for(var c=this[a],f=-1,s=c.length;++f<s;)(e=c[f])&&Qu(e,f,i,r,o),t.push(e)}return Wu(u,i,r)},Co.interrupt=function(n){return this.each(null==n?Il:Bu(Ku(n)))};var Hl,Ol,Il=Bu(Ku()),Yl=[],Zl=0;Yl.call=Co.call,Yl.empty=Co.empty,Yl.node=Co.node,Yl.size=Co.size,ao.transition=function(n,t){return n&&n.transition?Hl?n.transition(t):n:ao.selection().transition(n)},ao.transition.prototype=Yl,Yl.select=function(n){var t,e,r,i=this.id,u=this.namespace,o=[];n=A(n);for(var a=-1,l=this.length;++a<l;){o.push(t=[]);for(var c=this[a],f=-1,s=c.length;++f<s;)(r=c[f])&&(e=n.call(r,r.__data__,f,a))?("__data__"in r&&(e.__data__=r.__data__),Qu(e,f,u,i,r[u][i]),t.push(e)):t.push(null)}return Wu(o,u,i)},Yl.selectAll=function(n){var t,e,r,i,u,o=this.id,a=this.namespace,l=[];n=C(n);for(var c=-1,f=this.length;++c<f;)for(var s=this[c],h=-1,p=s.length;++h<p;)if(r=s[h]){u=r[a][o],e=n.call(r,r.__data__,h,c),l.push(t=[]);for(var g=-1,v=e.length;++g<v;)(i=e[g])&&Qu(i,g,a,o,u),t.push(i)}return Wu(l,a,o)},Yl.filter=function(n){var t,e,r,i=[];"function"!=typeof n&&(n=O(n));for(var u=0,o=this.length;o>u;u++){i.push(t=[]);for(var e=this[u],a=0,l=e.length;l>a;a++)(r=e[a])&&n.call(r,r.__data__,a,u)&&t.push(r)}return Wu(i,this.namespace,this.id)},Yl.tween=function(n,t){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(n):Y(this,null==t?function(t){t[r][e].tween.remove(n)}:function(i){i[r][e].tween.set(n,t)})},Yl.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function i(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function u(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?$r:Mr,a=ao.ns.qualify(n);return Ju(this,"attr."+n,t,a.local?u:i)},Yl.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(i));return r&&function(n){this.setAttribute(i,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(i.space,i.local));return r&&function(n){this.setAttributeNS(i.space,i.local,r(n))}}var i=ao.ns.qualify(n);return this.tween("attr."+n,i.local?r:e)},Yl.style=function(n,e,r){function i(){this.style.removeProperty(n)}function u(e){return null==e?i:(e+="",function(){var i,u=t(this).getComputedStyle(this,null).getPropertyValue(n);return u!==e&&(i=Mr(u,e),function(t){this.style.setProperty(n,i(t),r)})})}var o=arguments.length;if(3>o){if("string"!=typeof n){2>o&&(e="");for(r in n)this.style(r,n[r],e);return this}r=""}return Ju(this,"style."+n,e,u)},Yl.styleTween=function(n,e,r){function i(i,u){var o=e.call(this,i,u,t(this).getComputedStyle(this,null).getPropertyValue(n));return o&&function(t){this.style.setProperty(n,o(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+n,i)},Yl.text=function(n){return Ju(this,"text",n,Gu)},Yl.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Yl.ease=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].ease:("function"!=typeof n&&(n=ao.ease.apply(ao,arguments)),Y(this,function(r){r[e][t].ease=n}))},Yl.delay=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].delay:Y(this,"function"==typeof n?function(r,i,u){r[e][t].delay=+n.call(r,r.__data__,i,u)}:(n=+n,function(r){r[e][t].delay=n}))},Yl.duration=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].duration:Y(this,"function"==typeof n?function(r,i,u){r[e][t].duration=Math.max(1,n.call(r,r.__data__,i,u))}:(n=Math.max(1,n),function(r){r[e][t].duration=n}))},Yl.each=function(n,t){var e=this.id,r=this.namespace;if(arguments.length<2){var i=Ol,u=Hl;try{Hl=e,Y(this,function(t,i,u){Ol=t[r][e],n.call(t,t.__data__,i,u)})}finally{Ol=i,Hl=u}}else Y(this,function(i){var u=i[r][e];(u.event||(u.event=ao.dispatch("start","end","interrupt"))).on(n,t)});return this},Yl.transition=function(){for(var n,t,e,r,i=this.id,u=++Zl,o=this.namespace,a=[],l=0,c=this.length;c>l;l++){a.push(n=[]);for(var t=this[l],f=0,s=t.length;s>f;f++)(e=t[f])&&(r=e[o][i],Qu(e,f,o,u,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),n.push(e)}return Wu(a,o,u)},ao.svg.axis=function(){function n(n){n.each(function(){var n,c=ao.select(this),f=this.__chart__||e,s=this.__chart__=e.copy(),h=null==l?s.ticks?s.ticks.apply(s,a):s.domain():l,p=null==t?s.tickFormat?s.tickFormat.apply(s,a):m:t,g=c.selectAll(".tick").data(h,s),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",Uo),d=ao.transition(g.exit()).style("opacity",Uo).remove(),y=ao.transition(g.order()).style("opacity",1),M=Math.max(i,0)+o,x=Zi(s),b=c.selectAll(".domain").data([0]),_=(b.enter().append("path").attr("class","domain"),ao.transition(b));v.append("line"),v.append("text");var w,S,k,N,E=v.select("line"),A=y.select("line"),C=g.select("text").text(p),z=v.select("text"),L=y.select("text"),q="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=no,w="x",k="y",S="x2",N="y2",C.attr("dy",0>q?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+q*u+"V0H"+x[1]+"V"+q*u)):(n=to,w="y",k="x",S="y2",N="x2",C.attr("dy",".32em").style("text-anchor",0>q?"end":"start"),_.attr("d","M"+q*u+","+x[0]+"H0V"+x[1]+"H"+q*u)),E.attr(N,q*i),z.attr(k,q*M),A.attr(S,0).attr(N,q*i),L.attr(w,0).attr(k,q*M),s.rangeBand){var T=s,R=T.rangeBand()/2;f=s=function(n){return T(n)+R}}else f.rangeBand?f=s:d.call(n,s,f);v.call(n,f,s),y.call(n,s,s)})}var t,e=ao.scale.linear(),r=Vl,i=6,u=6,o=3,a=[10],l=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Xl?t+"":Vl,n):r},n.ticks=function(){return arguments.length?(a=co(arguments),n):a},n.tickValues=function(t){return arguments.length?(l=t,n):l},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(i=+t,u=+arguments[e-1],n):i},n.innerTickSize=function(t){return arguments.length?(i=+t,n):i},n.outerTickSize=function(t){return arguments.length?(u=+t,n):u},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var Vl="bottom",Xl={top:1,right:1,bottom:1,left:1};ao.svg.brush=function(){function n(t){t.each(function(){var t=ao.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",u).on("touchstart.brush",u),o=t.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=t.selectAll(".resize").data(v,m);a.exit().remove(),a.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return $l[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",n.empty()?"none":null);var l,s=ao.transition(t),h=ao.transition(o);c&&(l=Zi(c),h.attr("x",l[0]).attr("width",l[1]-l[0]),r(s)),f&&(l=Zi(f),h.attr("y",l[0]).attr("height",l[1]-l[0]),i(s)),e(s)})}function e(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+s[+/e$/.test(n)]+","+h[+/^s/.test(n)]+")"})}function r(n){n.select(".extent").attr("x",s[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function i(n){n.select(".extent").attr("y",h[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function u(){function u(){32==ao.event.keyCode&&(C||(M=null,L[0]-=s[1],L[1]-=h[1],C=2),S())}function v(){32==ao.event.keyCode&&2==C&&(L[0]+=s[1],L[1]+=h[1],C=0,S())}function d(){var n=ao.mouse(b),t=!1;x&&(n[0]+=x[0],n[1]+=x[1]),C||(ao.event.altKey?(M||(M=[(s[0]+s[1])/2,(h[0]+h[1])/2]),L[0]=s[+(n[0]<M[0])],L[1]=h[+(n[1]<M[1])]):M=null),E&&y(n,c,0)&&(r(k),t=!0),A&&y(n,f,1)&&(i(k),t=!0),t&&(e(k),w({type:"brush",mode:C?"move":"resize"}))}function y(n,t,e){var r,i,u=Zi(t),l=u[0],c=u[1],f=L[e],v=e?h:s,d=v[1]-v[0];return C&&(l-=f,c-=d+f),r=(e?g:p)?Math.max(l,Math.min(c,n[e])):n[e],C?i=(r+=f)+d:(M&&(f=Math.max(l,Math.min(c,2*M[e]-r))),r>f?(i=r,r=f):i=f),v[0]!=r||v[1]!=i?(e?a=null:o=null,v[0]=r,v[1]=i,!0):void 0}function m(){d(),k.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),ao.select("body").style("cursor",null),q.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),w({type:"brushend"})}var M,x,b=this,_=ao.select(ao.event.target),w=l.of(b,arguments),k=ao.select(b),N=_.datum(),E=!/^(n|s)$/.test(N)&&c,A=!/^(e|w)$/.test(N)&&f,C=_.classed("extent"),z=W(b),L=ao.mouse(b),q=ao.select(t(b)).on("keydown.brush",u).on("keyup.brush",v);if(ao.event.changedTouches?q.on("touchmove.brush",d).on("touchend.brush",m):q.on("mousemove.brush",d).on("mouseup.brush",m),k.interrupt().selectAll("*").interrupt(),C)L[0]=s[0]-L[0],L[1]=h[0]-L[1];else if(N){var T=+/w$/.test(N),R=+/^n/.test(N);x=[s[1-T]-L[0],h[1-R]-L[1]],L[0]=s[T],L[1]=h[R]}else ao.event.altKey&&(M=L.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),ao.select("body").style("cursor",_.style("cursor")),w({type:"brushstart"}),d()}var o,a,l=N(n,"brushstart","brush","brushend"),c=null,f=null,s=[0,0],h=[0,0],p=!0,g=!0,v=Bl[0];return n.event=function(n){n.each(function(){var n=l.of(this,arguments),t={x:s,y:h,i:o,j:a},e=this.__chart__||t;this.__chart__=t,Hl?ao.select(this).transition().each("start.brush",function(){o=e.i,a=e.j,s=e.x,h=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=xr(s,t.x),r=xr(h,t.y);return o=a=null,function(i){s=t.x=e(i),h=t.y=r(i),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,a=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(c=t,v=Bl[!c<<1|!f],n):c},n.y=function(t){return arguments.length?(f=t,v=Bl[!c<<1|!f],n):f},n.clamp=function(t){return arguments.length?(c&&f?(p=!!t[0],g=!!t[1]):c?p=!!t:f&&(g=!!t),n):c&&f?[p,g]:c?p:f?g:null},n.extent=function(t){var e,r,i,u,l;return arguments.length?(c&&(e=t[0],r=t[1],f&&(e=e[0],r=r[0]),o=[e,r],c.invert&&(e=c(e),r=c(r)),e>r&&(l=e,e=r,r=l),e==s[0]&&r==s[1]||(s=[e,r])),f&&(i=t[0],u=t[1],c&&(i=i[1],u=u[1]),a=[i,u],f.invert&&(i=f(i),u=f(u)),i>u&&(l=i,i=u,u=l),i==h[0]&&u==h[1]||(h=[i,u])),n):(c&&(o?(e=o[0],r=o[1]):(e=s[0],r=s[1],c.invert&&(e=c.invert(e),r=c.invert(r)),e>r&&(l=e,e=r,r=l))),f&&(a?(i=a[0],u=a[1]):(i=h[0],u=h[1],f.invert&&(i=f.invert(i),u=f.invert(u)),i>u&&(l=i,i=u,u=l))),c&&f?[[e,i],[r,u]]:c?[e,r]:f&&[i,u])},n.clear=function(){return n.empty()||(s=[0,0],h=[0,0],o=a=null),n},n.empty=function(){return!!c&&s[0]==s[1]||!!f&&h[0]==h[1]},ao.rebind(n,l,"on")};var $l={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Bl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Wl=ga.format=xa.timeFormat,Jl=Wl.utc,Gl=Jl("%Y-%m-%dT%H:%M:%S.%LZ");Wl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?eo:Gl,eo.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},eo.toString=Gl.toString,ga.second=On(function(n){return new va(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),ga.seconds=ga.second.range,ga.seconds.utc=ga.second.utc.range,ga.minute=On(function(n){return new va(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),ga.minutes=ga.minute.range,ga.minutes.utc=ga.minute.utc.range,ga.hour=On(function(n){var t=n.getTimezoneOffset()/60;return new va(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),ga.hours=ga.hour.range,ga.hours.utc=ga.hour.utc.range,ga.month=On(function(n){return n=ga.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),ga.months=ga.month.range,ga.months.utc=ga.month.utc.range;var Kl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ql=[[ga.second,1],[ga.second,5],[ga.second,15],[ga.second,30],[ga.minute,1],[ga.minute,5],[ga.minute,15],[ga.minute,30],[ga.hour,1],[ga.hour,3],[ga.hour,6],[ga.hour,12],[ga.day,1],[ga.day,2],[ga.week,1],[ga.month,1],[ga.month,3],[ga.year,1]],nc=Wl.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",zt]]),tc={range:function(n,t,e){return ao.range(Math.ceil(n/e)*e,+t,e).map(io)},floor:m,ceil:m};Ql.year=ga.year,ga.scale=function(){return ro(ao.scale.linear(),Ql,nc)};var ec=Ql.map(function(n){return[n[0].utc,n[1]]}),rc=Jl.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",zt]]);ec.year=ga.year.utc,ga.scale.utc=function(){return ro(ao.scale.linear(),ec,rc)},ao.text=An(function(n){return n.responseText}),ao.json=function(n,t){return Cn(n,"application/json",uo,t)},ao.html=function(n,t){return Cn(n,"text/html",oo,t)},ao.xml=An(function(n){return n.responseXML}),"function"==typeof define&&define.amd?(this.d3=ao,define(ao)):"object"==typeof module&&module.exports?module.exports=ao:this.d3=ao}();d3.tip=function(){var direction=d3_tip_direction,offset=d3_tip_offset,html=d3_tip_html,node=initNode(),svg=null,point=null,target=null;function tip(vis){svg=getSVGNode(vis);point=svg.createSVGPoint();document.body.appendChild(node)}tip.show=function(){var args=Array.prototype.slice.call(arguments);if(args[args.length-1]instanceof SVGElement)target=args.pop();var content=html.apply(this,args),poffset=offset.apply(this,args),dir=direction.apply(this,args),nodel=d3.select(node),i=0,coords;nodel.html(content).style({opacity:1,"pointer-events":"all"});while(i--)nodel.classed(directions[i],false);coords=direction_callbacks.get(dir).apply(this);nodel.classed(dir,true).style({top:coords.top+poffset[0]+"px",left:coords.left+poffset[1]+"px"});return tip};tip.hide=function(){nodel=d3.select(node);nodel.style({opacity:0,"pointer-events":"none"});return tip};tip.attr=function(n,v){if(arguments.length<2&&typeof n==="string"){return d3.select(node).attr(n)}else{var args=Array.prototype.slice.call(arguments);d3.selection.prototype.attr.apply(d3.select(node),args)}return tip};tip.style=function(n,v){if(arguments.length<2&&typeof n==="string"){return d3.select(node).style(n)}else{var args=Array.prototype.slice.call(arguments);d3.selection.prototype.style.apply(d3.select(node),args)}return tip};tip.direction=function(v){if(!arguments.length)return direction;direction=v==null?v:d3.functor(v);return tip};tip.offset=function(v){if(!arguments.length)return offset;offset=v==null?v:d3.functor(v);return tip};tip.html=function(v){if(!arguments.length)return html;html=v==null?v:d3.functor(v);return tip};function d3_tip_direction(){return"n"}function d3_tip_offset(){return[0,0]}function d3_tip_html(){return" "}var direction_callbacks=d3.map({n:direction_n,s:direction_s,e:direction_e,w:direction_w,nw:direction_nw,ne:direction_ne,sw:direction_sw,se:direction_se}),directions=direction_callbacks.keys();function direction_n(){var bbox=getScreenBBox();return{top:bbox.n.y-node.offsetHeight,left:bbox.n.x-node.offsetWidth/2}}function direction_s(){var bbox=getScreenBBox();return{top:bbox.s.y,left:bbox.s.x-node.offsetWidth/2}}function direction_e(){var bbox=getScreenBBox();return{top:bbox.e.y-node.offsetHeight/2,left:bbox.e.x}}function direction_w(){var bbox=getScreenBBox();return{top:bbox.w.y-node.offsetHeight/2,left:bbox.w.x-node.offsetWidth}}function direction_nw(){var bbox=getScreenBBox();return{top:bbox.nw.y-node.offsetHeight,left:bbox.nw.x-node.offsetWidth}}function direction_ne(){var bbox=getScreenBBox();return{top:bbox.ne.y-node.offsetHeight,left:bbox.ne.x}}function direction_sw(){var bbox=getScreenBBox();return{top:bbox.sw.y,left:bbox.sw.x-node.offsetWidth}}function direction_se(){var bbox=getScreenBBox();return{top:bbox.se.y,left:bbox.e.x}}function initNode(){var node=d3.select(document.createElement("div"));node.style({position:"absolute",opacity:0,pointerEvents:"none",boxSizing:"border-box"});return node.node()}function getSVGNode(el){el=el.node();if(el.tagName.toLowerCase()=="svg")return el;return el.ownerSVGElement}function getScreenBBox(){var targetel=target||d3.event.target,bbox={},matrix=targetel.getScreenCTM(),tbbox=targetel.getBBox(),width=tbbox.width,height=tbbox.height,x=tbbox.x,y=tbbox.y,scrollTop=document.documentElement.scrollTop||document.body.scrollTop,scrollLeft=document.documentElement.scrollLeft||document.body.scrollLeft;point.x=x+scrollLeft;point.y=y+scrollTop;bbox.nw=point.matrixTransform(matrix);point.x+=width;bbox.ne=point.matrixTransform(matrix);point.y+=height;bbox.se=point.matrixTransform(matrix);point.x-=width;bbox.sw=point.matrixTransform(matrix);point.y-=height/2;bbox.w=point.matrixTransform(matrix);point.x+=width;bbox.e=point.matrixTransform(matrix);point.x-=width/2;point.y-=height/2;bbox.n=point.matrixTransform(matrix);point.y+=height;bbox.s=point.matrixTransform(matrix);return bbox}return tip};(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define("d3-venn",["exports"],factory):factory(global.d3_venn={})})(this,function(exports){"use strict";function getSet(option,component){return function(_){if(!arguments.length){return this[option]}this[option]=_;return component}}function applier(component,options){for(var key in options){if(component[key]&&typeof component[key]=="function"){component[key](options[key])}}return component}function binder(component,options){for(var key in options){if(!component[key]){component[key]=getSet(key,component).bind(options)}}}var SMALL=1e-10;function intersectionArea(circles,stats){var intersectionPoints=getIntersectionPoints(circles);var innerPoints=intersectionPoints.filter(function(p){return containedInCircles(p,circles)});var arcArea=0,polygonArea=0,arcs=[],i;if(innerPoints.length>1){var center=getCenter(innerPoints);for(i=0;i<innerPoints.length;++i){var p=innerPoints[i];p.angle=Math.atan2(p.x-center.x,p.y-center.y)}innerPoints.sort(function(a,b){return b.angle-a.angle});var p2=innerPoints[innerPoints.length-1];for(i=0;i<innerPoints.length;++i){var p1=innerPoints[i];polygonArea+=(p2.x+p1.x)*(p1.y-p2.y);var midPoint={x:(p1.x+p2.x)/2,y:(p1.y+p2.y)/2},arc=null;for(var j=0;j<p1.parentIndex.length;++j){if(p2.parentIndex.indexOf(p1.parentIndex[j])>-1){var circle=circles[p1.parentIndex[j]],a1=Math.atan2(p1.x-circle.x,p1.y-circle.y),a2=Math.atan2(p2.x-circle.x,p2.y-circle.y);var angleDiff=a2-a1;if(angleDiff<0){angleDiff+=2*Math.PI}var a=a2-angleDiff/2,width=distance(midPoint,{x:circle.x+circle.radius*Math.sin(a),y:circle.y+circle.radius*Math.cos(a)});if(arc===null||arc.width>width){arc={circle:circle,width:width,p1:p1,p2:p2}}}}arcs.push(arc);arcArea+=circleArea(arc.circle.radius,arc.width);p2=p1}}else{var smallest=circles[0];for(i=1;i<circles.length;++i){if(circles[i].radius<smallest.radius){smallest=circles[i]}}var disjoint=false;for(i=0;i<circles.length;++i){if(distance(circles[i],smallest)>Math.abs(smallest.radius-circles[i].radius)){disjoint=true;break}}if(disjoint){arcArea=polygonArea=0}else{arcArea=smallest.radius*smallest.radius*Math.PI;arcs.push({circle:smallest,p1:{x:smallest.x,y:smallest.y+smallest.radius},p2:{x:smallest.x-SMALL,y:smallest.y+smallest.radius},width:smallest.radius*2})}}polygonArea/=2;if(stats){stats.area=arcArea+polygonArea;stats.arcArea=arcArea;stats.polygonArea=polygonArea;stats.arcs=arcs;stats.innerPoints=innerPoints;stats.intersectionPoints=intersectionPoints}return arcArea+polygonArea}function containedInCircles(point,circles){for(var i=0;i<circles.length;++i){if(distance(point,circles[i])>circles[i].radius+SMALL){return false}}return true}function getIntersectionPoints(circles){var ret=[];for(var i=0;i<circles.length;++i){for(var j=i+1;j<circles.length;++j){var intersect=circleCircleIntersection(circles[i],circles[j]);for(var k=0;k<intersect.length;++k){var p=intersect[k];p.parentIndex=[i,j];ret.push(p)}}}return ret}function circleIntegral(r,x){var y=Math.sqrt(r*r-x*x);return x*y+r*r*Math.atan2(x,y)}function circleArea(r,width){return circleIntegral(r,width-r)-circleIntegral(r,-r)}function distance(p1,p2){return Math.sqrt((p1.x-p2.x)*(p1.x-p2.x)+(p1.y-p2.y)*(p1.y-p2.y))}function circleOverlap(r1,r2,d){if(d>=r1+r2){return 0}if(d<=Math.abs(r1-r2)){return Math.PI*Math.min(r1,r2)*Math.min(r1,r2)}var w1=r1-(d*d-r2*r2+r1*r1)/(2*d),w2=r2-(d*d-r1*r1+r2*r2)/(2*d);return circleArea(r1,w1)+circleArea(r2,w2)}function circleCircleIntersection(p1,p2){var d=distance(p1,p2),r1=p1.radius,r2=p2.radius;if(d>=r1+r2||d<=Math.abs(r1-r2)){return[]}var a=(r1*r1-r2*r2+d*d)/(2*d),h=Math.sqrt(r1*r1-a*a),x0=p1.x+a*(p2.x-p1.x)/d,y0=p1.y+a*(p2.y-p1.y)/d,rx=-(p2.y-p1.y)*(h/d),ry=-(p2.x-p1.x)*(h/d);return[{x:x0+rx,y:y0-ry},{x:x0-rx,y:y0+ry}]}function getCenter(points){var center={x:0,y:0};for(var i=0;i<points.length;++i){center.x+=points[i].x;center.y+=points[i].y}center.x/=points.length;center.y/=points.length;return center}function outOfCircles(point,circles){for(var i=0;i<circles.length;++i){if(venn.distance(point,circles[i])<circles[i].radius+SMALL){return false}}return true}function pack(layout){var packerConfig=layout.packerConfig();layout.sets().forEach(function(k,set){var innerRadius=set.innerRadius,center=set.center,children=set.nodes,x=center.x-innerRadius,y=center.y-innerRadius;applier(d3.layout.pack(),packerConfig).size([innerRadius*2,innerRadius*2]).nodes({children:children});if(children){children.forEach(function(n){n.x+=x;n.y+=y})}})}function distribute(layout){var circles=layout.circles();layout.sets().forEach(function(k,set){var queue=[],maxAttempt=500,k,inCircles=[],outCircles=[];for(k in circles){if(set.sets.indexOf(k)>-1){inCircles.push(circles[k])}else{outCircles.push(circles[k])}}set.nodes.map(function(n,i){var attempt=0,candidate=null;if(i==0){n.x=textCentres[set.__key__].x;n.y=textCentres[set.__key__].y;queue.push(n)}else{while(!candidate&&attempt<maxAttempt){var i=Math.random()*queue.length|0,s=queue[i],a=2*Math.PI*Math.random(),r=Math.sqrt(Math.random()*(innerRadius*innerRadius+10*10)),p={x:s.x+r*Math.cos(a),y:s.y+r*Math.sin(a)};attempt++;if(venn.containedInCircles(p,inCircles)&&outOfCircles(p,outCircles)){candidate=p;queue.push(p)}}if(!candidate){console.warn("NO CANDIDATE");candidate={x:textCentres[set.__key__].x,y:textCentres[set.__key__].y}}n.x=candidate.x;n.y=candidate.y;nodes.push(n)}})})}function force(layout,data){var force=layout.packer();if(!force){force=d3.layout.force();binder(force,{padding:3,maxRadius:10,collider:true,ticker:null})}var packingConfig=layout.packingConfig(),size=layout.size(),sets=layout.sets(),padding=force.padding(),maxRadius=force.maxRadius(),collider=force.collider;applier(force,packingConfig).nodes(data).links([]).gravity(0).charge(-1).size(size).on("start",init).on("tick",tick);function init(e){data.forEach(function(d){var center=sets.get(d.__setKey__).center;d.x=d.x?d.x*1:center.x;d.y=d.y?d.y*1:center.y})}function tick(e){var ticker;data.forEach(gravity(.1*e.alpha));if(collider){data.forEach(collide(.1))}if(ticker=force.ticker()){ticker(layout)}}function gravity(alpha){return function(d){var center=sets.get(d.__setKey__).center;d.y+=(center.y-d.y)*alpha;d.x+=(center.x-d.x)*alpha}}function collide(alpha){var quadtree=d3.geom.quadtree(data);return function(d){var r=d.r+maxRadius+padding,nx1=d.x-r,nx2=d.x+r,ny1=d.y-r,ny2=d.y+r;quadtree.visit(function(quad,x1,y1,x2,y2){if(quad.point&&quad.point!==d){var x=d.x-quad.point.x,y=d.y-quad.point.y,l=Math.sqrt(x*x+y*y),r=d.r+quad.point.r+(d.__setKey__!==quad.point.__setKey__)*padding;if(l<r){l=(l-r)/l*alpha;d.x-=x*=l;d.y-=y*=l;quad.point.x+=x;quad.point.y+=y}}return x1>nx2||x2<nx1||y1>ny2||y2<ny1})}}return force}function bisect(f,a,b,parameters){parameters=parameters||{};var maxIterations=parameters.maxIterations||100,tolerance=parameters.tolerance||1e-10,fA=f(a),fB=f(b),delta=b-a;if(fA*fB>0){throw"Initial bisect points must have opposite signs"}if(fA===0)return a;if(fB===0)return b;for(var i=0;i<maxIterations;++i){delta/=2;var mid=a+delta,fMid=f(mid);if(fMid*fA>=0){a=mid}if(Math.abs(delta)<tolerance||fMid===0){return mid}}return a+delta}function zeros(x){var r=new Array(x);for(var i=0;i<x;++i){r[i]=0}return r}function zerosM(x,y){return zeros(x).map(function(){return zeros(y)})}function dot(a,b){var ret=0;for(var i=0;i<a.length;++i){ret+=a[i]*b[i]}return ret}function norm2(a){return Math.sqrt(dot(a,a))}function multiplyBy(a,c){for(var i=0;i<a.length;++i){a[i]*=c}}function weightedSum(ret,w1,v1,w2,v2){for(var j=0;j<ret.length;++j){ret[j]=w1*v1[j]+w2*v2[j]}}function fmin(f,x0,parameters){parameters=parameters||{};var maxIterations=parameters.maxIterations||x0.length*200,nonZeroDelta=parameters.nonZeroDelta||1.1,zeroDelta=parameters.zeroDelta||.001,minErrorDelta=parameters.minErrorDelta||1e-6,rho=parameters.rho||1,chi=parameters.chi||2,psi=parameters.psi||-.5,sigma=parameters.sigma||.5,callback=parameters.callback,temp;var N=x0.length,simplex=new Array(N+1);simplex[0]=x0;simplex[0].fx=f(x0);for(var i=0;i<N;++i){var point=x0.slice();point[i]=point[i]?point[i]*nonZeroDelta:zeroDelta;simplex[i+1]=point;simplex[i+1].fx=f(point)}var sortOrder=function(a,b){return a.fx-b.fx};var centroid=x0.slice(),reflected=x0.slice(),contracted=x0.slice(),expanded=x0.slice();for(var iteration=0;iteration<maxIterations;++iteration){simplex.sort(sortOrder);if(callback){callback(simplex)}if(Math.abs(simplex[0].fx-simplex[N].fx)<minErrorDelta){break}for(i=0;i<N;++i){centroid[i]=0;for(var j=0;j<N;++j){centroid[i]+=simplex[j][i]}centroid[i]/=N}var worst=simplex[N];weightedSum(reflected,1+rho,centroid,-rho,worst);reflected.fx=f(reflected);if(reflected.fx<=simplex[0].fx){weightedSum(expanded,1+chi,centroid,-chi,worst);expanded.fx=f(expanded);if(expanded.fx<reflected.fx){temp=simplex[N];simplex[N]=expanded;expanded=temp}else{temp=simplex[N];simplex[N]=reflected;reflected=temp}}else if(reflected.fx>=simplex[N-1].fx){var shouldReduce=false;if(reflected.fx<=worst.fx){weightedSum(contracted,1+psi,centroid,-psi,worst);contracted.fx=f(contracted);if(contracted.fx<worst.fx){temp=simplex[N];simplex[N]=contracted;contracted=temp}else{shouldReduce=true}}else{weightedSum(contracted,1-psi*rho,centroid,psi*rho,worst);contracted.fx=f(contracted);if(contracted.fx<=reflected.fx){temp=simplex[N];simplex[N]=contracted;contracted=temp}else{shouldReduce=true}}if(shouldReduce){for(i=1;i<simplex.length;++i){weightedSum(simplex[i],1-sigma,simplex[0],sigma-1,simplex[i]);simplex[i].fx=f(simplex[i])}}}else{temp=simplex[N];simplex[N]=reflected;reflected=temp}}simplex.sort(sortOrder);return{f:simplex[0].fx,solution:simplex[0]}}function minimizeConjugateGradient(f,initial,params){var current={x:initial.slice(),fx:0,fxprime:initial.slice()},next={x:initial.slice(),fx:0,fxprime:initial.slice()},yk=initial.slice(),pk,temp,a=1,maxIterations;params=params||{};maxIterations=params.maxIterations||initial.length*5;current.fx=f(current.x,current.fxprime);pk=current.fxprime.slice();multiplyBy(pk,-1);for(var i=0;i<maxIterations;++i){if(params.history){params.history.push({x:current.x.slice(),fx:current.fx,fxprime:current.fxprime.slice()})}a=wolfeLineSearch(f,pk,current,next,a);if(!a){for(var j=0;j<pk.length;++j){pk[j]=-1*current.fxprime[j]}}else{weightedSum(yk,1,next.fxprime,-1,current.fxprime);var delta_k=dot(current.fxprime,current.fxprime),beta_k=Math.max(0,dot(yk,next.fxprime)/delta_k);weightedSum(pk,beta_k,pk,-1,next.fxprime);temp=current;current=next;next=temp}if(norm2(current.fxprime)<=1e-5){break}}if(params.history){params.history.push({x:current.x.slice(),fx:current.fx,fxprime:current.fxprime.slice()})}return current}var c1=1e-6;var c2=.1;function wolfeLineSearch(f,pk,current,next,a){var phi0=current.fx,phiPrime0=dot(current.fxprime,pk),phi=phi0,phi_old=phi0,phiPrime=phiPrime0,a0=0;a=a||1;function zoom(a_lo,a_high,phi_lo){for(var iteration=0;iteration<16;++iteration){a=(a_lo+a_high)/2;weightedSum(next.x,1,current.x,a,pk);phi=next.fx=f(next.x,next.fxprime);phiPrime=dot(next.fxprime,pk);if(phi>phi0+c1*a*phiPrime0||phi>=phi_lo){a_high=a}else{if(Math.abs(phiPrime)<=-c2*phiPrime0){return a}if(phiPrime*(a_high-a_lo)>=0){a_high=a_lo}a_lo=a;phi_lo=phi}}return 0}for(var iteration=0;iteration<10;++iteration){weightedSum(next.x,1,current.x,a,pk);phi=next.fx=f(next.x,next.fxprime);phiPrime=dot(next.fxprime,pk);if(phi>phi0+c1*a*phiPrime0||iteration&&phi>=phi_old){return zoom(a0,a,phi_old)}if(Math.abs(phiPrime)<=-c2*phiPrime0){return a}if(phiPrime>=0){return zoom(a,a0,phi)}phi_old=phi;a0=a;a*=2}return 0}function venn$2(areas,parameters){parameters=parameters||{};parameters.maxIterations=parameters.maxIterations||500;var lossFn=parameters.lossFunction||lossFunction;var initialLayout=parameters.initialLayout||bestInitialLayout;var fminFn=parameters.fmin||fmin;areas=addMissingAreas(areas);var circles=initialLayout(areas);var initial=[],setids=[],setid;for(setid in circles){if(circles.hasOwnProperty(setid)){initial.push(circles[setid].x);initial.push(circles[setid].y);setids.push(setid)}}var totalFunctionCalls=0;var solution=fminFn(function(values){totalFunctionCalls+=1;var current={};for(var i=0;i<setids.length;++i){var setid=setids[i];current[setid]={x:values[2*i],y:values[2*i+1],radius:circles[setid].radius}}return lossFn(current,areas)},initial,parameters);var positions=solution.solution;for(var i=0;i<setids.length;++i){setid=setids[i];circles[setid].x=positions[2*i];circles[setid].y=positions[2*i+1]}return circles}function distanceFromIntersectArea(r1,r2,overlap){if(Math.min(r1,r2)*Math.min(r1,r2)*Math.PI<=overlap+SMALL){return Math.abs(r1-r2)}return bisect(function(distance){return circleOverlap(r1,r2,distance)-overlap},0,r1+r2)}function addMissingAreas(areas){areas=areas.slice();var ids=[],pairs={},i,j,a,b;for(i=0;i<areas.length;++i){var area=areas[i];if(area.sets.length==1){ids.push(area.sets[0])}else if(area.sets.length==2){a=area.sets[0];b=area.sets[1];pairs[[a,b]]=true;pairs[[b,a]]=true}}ids.sort(function(a,b){return a>b});for(i=0;i<ids.length;++i){a=ids[i];for(j=i+1;j<ids.length;++j){b=ids[j];if(!([a,b]in pairs)){areas.push({sets:[a,b],size:0})}}}return areas}function getDistanceMatrices(areas,sets,setids){var distances=zerosM(sets.length,sets.length),constraints=zerosM(sets.length,sets.length);areas.filter(function(x){return x.sets.length==2}).map(function(current){var left=setids[current.sets[0]],right=setids[current.sets[1]],r1=Math.sqrt(sets[left].size/Math.PI),r2=Math.sqrt(sets[right].size/Math.PI),distance=distanceFromIntersectArea(r1,r2,current.size);distances[left][right]=distances[right][left]=distance;var c=0;if(current.size+1e-10>=Math.min(sets[left].size,sets[right].size)){c=1}else if(current.size<=1e-10){c=-1}constraints[left][right]=constraints[right][left]=c});return{distances:distances,constraints:constraints}}function constrainedMDSGradient(x,fxprime,distances,constraints){var loss=0,i;for(i=0;i<fxprime.length;++i){fxprime[i]=0}for(i=0;i<distances.length;++i){var xi=x[2*i],yi=x[2*i+1];for(var j=i+1;j<distances.length;++j){var xj=x[2*j],yj=x[2*j+1],dij=distances[i][j],constraint=constraints[i][j];var squaredDistance=(xj-xi)*(xj-xi)+(yj-yi)*(yj-yi),distance=Math.sqrt(squaredDistance),delta=squaredDistance-dij*dij;if(constraint>0&&distance<=dij||constraint<0&&distance>=dij){continue}loss+=2*delta*delta;fxprime[2*i]+=4*delta*(xi-xj);fxprime[2*i+1]+=4*delta*(yi-yj);fxprime[2*j]+=4*delta*(xj-xi);fxprime[2*j+1]+=4*delta*(yj-yi)}}return loss}function bestInitialLayout(areas,params){var initial=greedyLayout(areas,params);if(areas.length>=8){var constrained=constrainedMDSLayout(areas,params),constrainedLoss=lossFunction(constrained,areas),greedyLoss=lossFunction(initial,areas);if(constrainedLoss+1e-8<greedyLoss){initial=constrained}}return initial}function constrainedMDSLayout(areas,params){params=params||{};var restarts=params.restarts||10;var sets=[],setids={},i;for(i=0;i<areas.length;++i){var area=areas[i];if(area.sets.length==1){setids[area.sets[0]]=sets.length;sets.push(area)}}var matrices=getDistanceMatrices(areas,sets,setids),distances=matrices.distances,constraints=matrices.constraints;var norm=norm2(distances.map(norm2))/distances.length;distances=distances.map(function(row){return row.map(function(value){return value/norm})});var obj=function(x,fxprime){return constrainedMDSGradient(x,fxprime,distances,constraints)};var best,current;for(i=0;i<restarts;++i){var initial=zeros(distances.length*2).map(Math.random);current=minimizeConjugateGradient(obj,initial,params);if(!best||current.fx<best.fx){best=current}}var positions=best.x;var circles={};for(i=0;i<sets.length;++i){var set=sets[i];circles[set.sets[0]]={x:positions[2*i]*norm,y:positions[2*i+1]*norm,radius:Math.sqrt(set.size/Math.PI)}}if(params.history){for(i=0;i<params.history.length;++i){multiplyBy(params.history[i].x,norm)}}return circles}function greedyLayout(areas){var circles={},setOverlaps={},set;for(var i=0;i<areas.length;++i){var area=areas[i];if(area.sets.length==1){set=area.sets[0];circles[set]={x:1e10,y:1e10,rowid:circles.length,size:area.size,radius:Math.sqrt(area.size/Math.PI)};setOverlaps[set]=[]}}areas=areas.filter(function(a){return a.sets.length==2});for(i=0;i<areas.length;++i){var current=areas[i];var weight=current.hasOwnProperty("weight")?current.weight:1;var left=current.sets[0],right=current.sets[1];if(current.size+SMALL>=Math.min(circles[left].size,circles[right].size)){weight=0}setOverlaps[left].push({set:right,size:current.size,weight:weight});setOverlaps[right].push({set:left,size:current.size,weight:weight})}var mostOverlapped=[];for(set in setOverlaps){if(setOverlaps.hasOwnProperty(set)){var size=0;for(i=0;i<setOverlaps[set].length;++i){size+=setOverlaps[set][i].size*setOverlaps[set][i].weight}mostOverlapped.push({set:set,size:size})}}function sortOrder(a,b){return b.size-a.size}mostOverlapped.sort(sortOrder);var positioned={};function isPositioned(element){return element.set in positioned}function positionSet(point,index){circles[index].x=point.x;circles[index].y=point.y;positioned[index]=true}positionSet({x:0,y:0},mostOverlapped[0].set);for(i=1;i<mostOverlapped.length;++i){var setIndex=mostOverlapped[i].set,overlap=setOverlaps[setIndex].filter(isPositioned);set=circles[setIndex];overlap.sort(sortOrder);if(overlap.length===0){throw"ERROR: missing pairwise overlap information"}var points=[];for(var j=0;j<overlap.length;++j){var p1=circles[overlap[j].set],d1=distanceFromIntersectArea(set.radius,p1.radius,overlap[j].size);points.push({x:p1.x+d1,y:p1.y});points.push({x:p1.x-d1,y:p1.y});points.push({y:p1.y+d1,x:p1.x});points.push({y:p1.y-d1,x:p1.x});for(var k=j+1;k<overlap.length;++k){var p2=circles[overlap[k].set],d2=distanceFromIntersectArea(set.radius,p2.radius,overlap[k].size);var extraPoints=circleCircleIntersection({x:p1.x,y:p1.y,radius:d1},{x:p2.x,y:p2.y,radius:d2});for(var l=0;l<extraPoints.length;++l){points.push(extraPoints[l])}}}var bestLoss=1e50,bestPoint=points[0];for(j=0;j<points.length;++j){circles[setIndex].x=points[j].x;circles[setIndex].y=points[j].y;var loss=lossFunction(circles,areas);if(loss<bestLoss){bestLoss=loss;bestPoint=points[j]}}positionSet(bestPoint,setIndex)}return circles}function lossFunction(sets,overlaps){var output=0;function getCircles(indices){return indices.map(function(i){return sets[i]})}for(var i=0;i<overlaps.length;++i){var area=overlaps[i],overlap;if(area.sets.length==1){continue}else if(area.sets.length==2){var left=sets[area.sets[0]],right=sets[area.sets[1]];overlap=circleOverlap(left.radius,right.radius,distance(left,right))}else{overlap=intersectionArea(getCircles(area.sets))}var weight=area.hasOwnProperty("weight")?area.weight:1;output+=weight*(overlap-area.size)*(overlap-area.size)}return output}function orientateCircles(circles,orientation){circles.sort(function(a,b){return b.radius-a.radius});var i;if(circles.length>0){var largestX=circles[0].x,largestY=circles[0].y;for(i=0;i<circles.length;++i){circles[i].x-=largestX;circles[i].y-=largestY}}if(circles.length>1){var rotation=Math.atan2(circles[1].x,circles[1].y)-orientation,c=Math.cos(rotation),s=Math.sin(rotation),x,y;for(i=0;i<circles.length;++i){x=circles[i].x;y=circles[i].y;circles[i].x=c*x-s*y;circles[i].y=s*x+c*y}}if(circles.length>2){var angle=Math.atan2(circles[2].x,circles[2].y)-orientation;while(angle<0){angle+=2*Math.PI}while(angle>2*Math.PI){angle-=2*Math.PI}if(angle>Math.PI){var slope=circles[1].y/(1e-10+circles[1].x);for(i=0;i<circles.length;++i){var d=(circles[i].x+slope*circles[i].y)/(1+slope*slope);circles[i].x=2*d-circles[i].x;circles[i].y=2*d*slope-circles[i].y}}}}function disjointCluster(circles){circles.map(function(circle){circle.parent=circle});function find(circle){if(circle.parent!==circle){circle.parent=find(circle.parent)}return circle.parent}function union(x,y){var xRoot=find(x),yRoot=find(y);xRoot.parent=yRoot}for(var i=0;i<circles.length;++i){for(var j=i+1;j<circles.length;++j){var maxDistance=circles[i].radius+circles[j].radius;if(distance(circles[i],circles[j])+1e-10<maxDistance){union(circles[j],circles[i])}}}var disjointClst={},setid;for(i=0;i<circles.length;++i){setid=find(circles[i]).parent.setid;if(!(setid in disjointClst)){disjointClst[setid]=[]}disjointClst[setid].push(circles[i])}circles.map(function(circle){delete circle.parent});var ret=[];for(setid in disjointClst){if(disjointClst.hasOwnProperty(setid)){ret.push(disjointClst[setid])}}return ret}function getBoundingBox(circles){var minMax=function(d){var hi=Math.max.apply(null,circles.map(function(c){return c[d]+c.radius})),lo=Math.min.apply(null,circles.map(function(c){return c[d]-c.radius}));return{max:hi,min:lo}};return{xRange:minMax("x"),yRange:minMax("y")}}function normalizeSolution(solution,orientation){orientation=orientation||Math.PI/2;var circles=[],i,setid;for(setid in solution){if(solution.hasOwnProperty(setid)){var previous=solution[setid];circles.push({x:previous.x,y:previous.y,radius:previous.radius,setid:setid})}}var clusters=disjointCluster(circles);for(i=0;i<clusters.length;++i){orientateCircles(clusters[i],orientation);var bounds=getBoundingBox(clusters[i]);clusters[i].size=(bounds.xRange.max-bounds.xRange.min)*(bounds.yRange.max-bounds.yRange.min);clusters[i].bounds=bounds}clusters.sort(function(a,b){return b.size-a.size});circles=clusters[0];var returnBounds=circles.bounds;var spacing=(returnBounds.xRange.max-returnBounds.xRange.min)/50;function addCluster(cluster,right,bottom){if(!cluster)return;var bounds=cluster.bounds,xOffset,yOffset,centreing;if(right){xOffset=returnBounds.xRange.max-bounds.xRange.min+spacing}else{xOffset=returnBounds.xRange.max-bounds.xRange.max-spacing;centreing=(bounds.xRange.max-bounds.xRange.min)/2-(returnBounds.xRange.max-returnBounds.xRange.min)/2;if(centreing<0)xOffset+=centreing}if(bottom){yOffset=returnBounds.yRange.max-bounds.yRange.min+spacing}else{yOffset=returnBounds.yRange.max-bounds.yRange.max-spacing;centreing=(bounds.yRange.max-bounds.yRange.min)/2-(returnBounds.yRange.max-returnBounds.yRange.min)/2;if(centreing<0)yOffset+=centreing}for(var j=0;j<cluster.length;++j){cluster[j].x+=xOffset;cluster[j].y+=yOffset;circles.push(cluster[j])}}var index=1;while(index<clusters.length){addCluster(clusters[index],true,false);addCluster(clusters[index+1],false,true);addCluster(clusters[index+2],true,true);index+=3;returnBounds=getBoundingBox(circles)}var ret={};for(i=0;i<circles.length;++i){ret[circles[i].setid]=circles[i]}return ret}function scaleSolution(solution,width,height,padding){var circles=[],setids=[];for(var setid in solution){if(solution.hasOwnProperty(setid)){setids.push(setid);circles.push(solution[setid])}}width-=2*padding;height-=2*padding;var bounds=getBoundingBox(circles),xRange=bounds.xRange,yRange=bounds.yRange,xScaling=width/(xRange.max-xRange.min),yScaling=height/(yRange.max-yRange.min),scaling=Math.min(yScaling,xScaling),xOffset=(width-(xRange.max-xRange.min)*scaling)/2,yOffset=(height-(yRange.max-yRange.min)*scaling)/2;var scaled={};for(var i=0;i<circles.length;++i){var circle=circles[i];scaled[setids[i]]={radius:scaling*circle.radius,x:padding+xOffset+(circle.x-xRange.min)*scaling,y:padding+yOffset+(circle.y-yRange.min)*scaling}}return scaled}function circleMargin(current,interior,exterior){var margin=interior[0].radius-distance(interior[0],current),i,m;for(i=1;i<interior.length;++i){m=interior[i].radius-distance(interior[i],current);if(m<=margin){margin=m}}for(i=0;i<exterior.length;++i){m=distance(exterior[i],current)-exterior[i].radius;if(m<=margin){margin=m}}return margin}function computeTextCentre(interior,exterior){var points=[],i;for(i=0;i<interior.length;++i){var c=interior[i];points.push({x:c.x,y:c.y});points.push({x:c.x+c.radius/2,y:c.y});points.push({x:c.x-c.radius/2,y:c.y});points.push({x:c.x,y:c.y+c.radius/2});points.push({x:c.x,y:c.y-c.radius/2})}var initial=points[0],margin=circleMargin(points[0],interior,exterior);for(i=1;i<points.length;++i){var m=circleMargin(points[i],interior,exterior);if(m>=margin){initial=points[i];margin=m}}var solution=fmin(function(p){return-1*circleMargin({x:p[0],y:p[1]},interior,exterior)},[initial.x,initial.y],{maxIterations:500,minErrorDelta:1e-10}).solution;var ret={x:solution[0],y:solution[1]};var valid=true;for(i=0;i<interior.length;++i){if(distance(ret,interior[i])>interior[i].radius){valid=false;break}}for(i=0;i<exterior.length;++i){if(distance(ret,exterior[i])<exterior[i].radius){valid=false;break}}if(!valid){if(interior.length==1){ret={x:interior[0].x,y:interior[0].y}}else{var areaStats={};intersectionArea(interior,areaStats);if(areaStats.arcs.length===0){ret={x:0,y:-1e3,disjoint:true}}else if(areaStats.arcs.length==1){ret={x:areaStats.arcs[0].circle.x,y:areaStats.arcs[0].circle.y}}else if(exterior.length){ret=computeTextCentre(interior,[])}else{ret=getCenter(areaStats.arcs.map(function(a){return a.p1}))}}}return ret}function getOverlappingCircles(circles){var ret={},circleids=[];for(var circleid in circles){circleids.push(circleid);ret[circleid]=[]}for(var i=0;i<circleids.length;i++){var a=circles[circleids[i]];for(var j=i+1;j<circleids.length;++j){var b=circles[circleids[j]],d=distance(a,b);if(d+b.radius<=a.radius+1e-10){ret[circleids[j]].push(circleids[i])}else if(d+a.radius<=b.radius+1e-10){ret[circleids[i]].push(circleids[j])}}}return ret}function computeTextCentres(circles,areas){var ret={},overlapped=getOverlappingCircles(circles);for(var i=0;i<areas.length;++i){var area=areas[i].sets,areaids={},exclude={};for(var j=0;j<area.length;++j){areaids[area[j]]=true;var overlaps=overlapped[area[j]];for(var k=0;k<overlaps.length;++k){exclude[overlaps[k]]=true}}var interior=[],exterior=[];for(var setid in circles){if(setid in areaids){interior.push(circles[setid])}else if(!(setid in exclude)){exterior.push(circles[setid])}}var centre=computeTextCentre(interior,exterior);ret[area]=centre;if(centre.disjoint&&areas[i].size>0){console.log("WARNING: area "+area+" not represented on screen")}}return ret}function circlePath(x,y,r){var ret=[];ret.push("\nM",x,y);ret.push("\nm",-r,0);ret.push("\na",r,r,0,1,0,r*2,0);ret.push("\na",r,r,0,1,0,-r*2,0);return ret.join(" ")}function intersectionAreaPath(circles){var stats={};intersectionArea(circles,stats);var arcs=stats.arcs;if(arcs.length===0){return"M 0 0"}else if(arcs.length==1){var circle=arcs[0].circle;return circlePath(circle.x,circle.y,circle.radius)}else{var ret=["\nM",arcs[0].p2.x,arcs[0].p2.y];for(var i=0;i<arcs.length;++i){var arc=arcs[i],r=arc.circle.radius,wide=arc.width>r;ret.push("\nA",r,r,0,wide?1:0,1,arc.p1.x,arc.p1.y)}return ret.join(" ")}}function venn$1(){var opts={sets:null,setsAccessor:setsAccessorFn,setsSize:setsSize,packingStragegy:pack,packingConfig:{value:valueFn},size:[1,1],padding:15,layoutFunction:venn$2,orientation:Math.PI/2,normalize:true};var circles,nodes,packer,centres;binder(venn,opts);function venn(data){if(!arguments.length)return nodes;nodes=compute(data);return venn}function compute(data){var sets=venn.sets(),setsValues,layout=venn.layoutFunction(),packingStragegy=venn.packingStragegy(),size=venn.size(),width=size[0],height=size[1],solution,oldCircles;sets=extractSets(data);setsValues=sets.values();solution=layout(setsValues);console.info("data: ",data);console.info("sets: ",sets);if(venn.normalize()){solution=normalizeSolution(solution,venn.orientation())}oldCircles=circles;circles=scaleSolution(solution,width,height,venn.padding());for(var k in oldCircles){if(circles[k]){circles[k].previous=oldCircles[k]}}oldCircles=null;centres=computeTextCentres(circles,setsValues);sets.forEach(function(k,set){set.d=pathTween(set);set.center=centres[k];set.innerRadius=computeDistanceToCircles(set)});packer=packingStragegy(venn,data);function computeDistanceToCircles(set){var sets=set.sets,center=set.center,k,circle,dist,isInside,isOverlapp,candidate=Infinity;for(k in circles){circle=circles[k];isInside=sets.indexOf(k)>-1;isOverlapp=sets.indexOf(k)<-1&&checkOverlapp(sets,circle);dist=distance(center,circle);dist=isInside?circle.radius-dist:isOverlapp?dist-circle.radius:dist+circle.radius;if(dist<candidate){candidate=dist}}return candidate}function checkOverlapp(sets,circle){var i=0,l=sets.length,c;for(i;i<l;i++){c=circles[sets[i]];if(distance(c,circle)<c.radius){return true}}return false}function pathTween(set){return function(t){var c=set.sets.map(function(set){var circle=circles[set];var start=circle&&circle["previous"],end=circle;if(!start){start={x:width/2,y:height/2,radius:1}}if(!end){end={x:width/2,y:height/2,radius:1}}if(t==1&&circle){circle["previous"]=end}return{x:start.x*(1-t)+end.x*t,y:start.y*(1-t)+end.y*t,radius:start.radius*(1-t)+end.radius*t}});return intersectionAreaPath(c)}}return data}function extractSets(data){var sets=d3.map({},function(d){return d.__key__}),individualSets=d3.map(),accessor=venn.setsAccessor(),size=venn.setsSize(),set,s,key,i,n=data.length;for(i=-1;++i<n;){set=accessor(data[i]);if(set.length){key=set.sort().join(",");set.forEach(function(val){if(s=individualSets.get(val)){s.size+=1}else{individualSets.set(val,{__key__:val,size:1,sets:[val],nodes:[]})}});data[i].__setKey__=key;if(s=sets.get(key)){s.size++;s.nodes.push(data[i])}else{sets.set(key,{__key__:key,sets:set,size:1,nodes:[data[i]]})}}}individualSets.forEach(function(k,v){if(!sets.get(k)){sets.set(k,v)}});sets.forEach(function(k,v){v.size=size(v.size)});venn.sets(sets);return sets}function setsSize(size){return size}function setsAccessorFn(d){return d.set||[]}function valueFn(d){return d.value}venn.packingConfig=function(_){var config=opts.packingConfig;if(!arguments.length){return config}for(var k in _){config[k]=_[k]}if(packer){applier(packer,_)}return venn};venn.packer=function(){return packer};venn.circles=function(){return circles};venn.centres=function(){return centres};venn.nodes=venn;return venn}var version="0.0.9";exports.version=version;exports.venn=venn$1;exports.pack=pack;exports.distribute=distribute;exports.force=force});(function(target,cname,name){if(target){target[name]=this[cname]&&this[cname][name];for(var k in this[cname]){if(k!=name){target[name][k]=this[cname][k]}}delete this[cname]}})(this.d3&&this.d3.layout,"d3_venn","venn");!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.topojson=n.topojson||{})}(this,function(n){"use strict";function t(){}function r(n){if(!n)return t;var r,e,o=n.scale[0],i=n.scale[1],u=n.translate[0],f=n.translate[1];return function(n,t){t||(r=e=0),n[0]=(r+=n[0])*o+u,n[1]=(e+=n[1])*i+f}}function e(n){if(!n)return t;var r,e,o=n.scale[0],i=n.scale[1],u=n.translate[0],f=n.translate[1];return function(n,t){t||(r=e=0);var c=Math.round((n[0]-u)/o),a=Math.round((n[1]-f)/i);n[0]=c-r,n[1]=a-e,r=c,e=a}}function o(n,t){for(var r,e=n.length,o=e-t;o<--e;)r=n[o],n[o++]=n[e],n[e]=r}function i(n,t){for(var r=0,e=n.length;r<e;){var o=r+e>>>1;n[o]<t?r=o+1:e=o}return r}function u(n,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return f(n,t)})}:f(n,t)}function f(n,t){var r={type:"Feature",id:t.id,properties:t.properties||{},geometry:c(n,t)};return null==t.id&&delete r.id,r}function c(n,t){function e(n,t){t.length&&t.pop();for(var r,e=l[n<0?~n:n],i=0,u=e.length;i<u;++i)t.push(r=e[i].slice()),s(r,i);n<0&&o(t,u)}function i(n){return n=n.slice(),s(n,0),n}function u(n){for(var t=[],r=0,o=n.length;r<o;++r)e(n[r],t);return t.length<2&&t.push(t[0].slice()),t}function f(n){for(var t=u(n);t.length<4;)t.push(t[0].slice());return t}function c(n){return n.map(f)}function a(n){var t=n.type;return"GeometryCollection"===t?{type:t,geometries:n.geometries.map(a)}:t in h?{type:t,coordinates:h[t](n)}:null}var s=r(n.transform),l=n.arcs,h={Point:function(n){return i(n.coordinates)},MultiPoint:function(n){return n.coordinates.map(i)},LineString:function(n){return u(n.arcs)},MultiLineString:function(n){return n.arcs.map(u)},Polygon:function(n){return c(n.arcs)},MultiPolygon:function(n){return n.arcs.map(c)}};return a(t)}function a(n,t){function r(t){var r,e=n.arcs[t<0?~t:t],o=e[0];return n.transform?(r=[0,0],e.forEach(function(n){r[0]+=n[0],r[1]+=n[1]})):r=e[e.length-1],t<0?[r,o]:[o,r]}function e(n,t){for(var r in n){var e=n[r];delete t[e.start],delete e.start,delete e.end,e.forEach(function(n){o[n<0?~n:n]=1}),f.push(e)}}var o={},i={},u={},f=[],c=-1;return t.forEach(function(r,e){var o,i=n.arcs[r<0?~r:r];i.length<3&&!i[1][0]&&!i[1][1]&&(o=t[++c],t[c]=r,t[e]=o)}),t.forEach(function(n){var t,e,o=r(n),f=o[0],c=o[1];if(t=u[f])if(delete u[t.end],t.push(n),t.end=c,e=i[c]){delete i[e.start];var a=e===t?t:t.concat(e);i[a.start=t.start]=u[a.end=e.end]=a}else i[t.start]=u[t.end]=t;else if(t=i[c])if(delete i[t.start],t.unshift(n),t.start=f,e=u[f]){delete u[e.end];var s=e===t?t:e.concat(t);i[s.start=e.start]=u[s.end=t.end]=s}else i[t.start]=u[t.end]=t;else t=[n],i[t.start=f]=u[t.end=c]=t}),e(u,i),e(i,u),t.forEach(function(n){o[n<0?~n:n]||f.push([n])}),f}function s(n){return c(n,l.apply(this,arguments))}function l(n,t,r){function e(n){var t=n<0?~n:n;(s[t]||(s[t]=[])).push({i:n,g:c})}function o(n){n.forEach(e)}function i(n){n.forEach(o)}function u(n){"GeometryCollection"===n.type?n.geometries.forEach(u):n.type in l&&(c=n,l[n.type](n.arcs))}var f=[];if(arguments.length>1){var c,s=[],l={LineString:o,MultiLineString:i,Polygon:i,MultiPolygon:function(n){n.forEach(i)}};u(t),s.forEach(arguments.length<3?function(n){f.push(n[0].i)}:function(n){r(n[0].g,n[n.length-1].g)&&f.push(n[0].i)})}else for(var h=0,p=n.arcs.length;h<p;++h)f.push(h);return{type:"MultiLineString",arcs:a(n,f)}}function h(n){var t=n[0],r=n[1],e=n[2];return Math.abs((t[0]-e[0])*(r[1]-t[1])-(t[0]-r[0])*(e[1]-t[1]))}function p(n){for(var t,r=-1,e=n.length,o=n[e-1],i=0;++r<e;)t=o,o=n[r],i+=t[0]*o[1]-t[1]*o[0];return i/2}function v(n){return c(n,g.apply(this,arguments))}function g(n,t){function r(n){n.forEach(function(t){t.forEach(function(t){(o[t=t<0?~t:t]||(o[t]=[])).push(n)})}),i.push(n)}function e(t){return Math.abs(p(c(n,{type:"Polygon",arcs:[t]}).coordinates[0]))}var o={},i=[],u=[];return t.forEach(function(n){"Polygon"===n.type?r(n.arcs):"MultiPolygon"===n.type&&n.arcs.forEach(r)}),i.forEach(function(n){if(!n._){var t=[],r=[n];for(n._=1,u.push(t);n=r.pop();)t.push(n),n.forEach(function(n){n.forEach(function(n){o[n<0?~n:n].forEach(function(n){n._||(n._=1,r.push(n))})})})}}),i.forEach(function(n){delete n._}),{type:"MultiPolygon",arcs:u.map(function(t){var r,i=[];if(t.forEach(function(n){n.forEach(function(n){n.forEach(function(n){o[n<0?~n:n].length<2&&i.push(n)})})}),i=a(n,i),(r=i.length)>1)for(var u,f,c=1,s=e(i[0]);c<r;++c)(u=e(i[c]))>s&&(f=i[0],i[0]=i[c],i[c]=f,s=u);return i})}}function d(n){function t(n,t){n.forEach(function(n){n<0&&(n=~n);var r=o[n];r?r.push(t):o[n]=[t]})}function r(n,r){n.forEach(function(n){t(n,r)})}function e(n,t){"GeometryCollection"===n.type?n.geometries.forEach(function(n){e(n,t)}):n.type in f&&f[n.type](n.arcs,t)}var o={},u=n.map(function(){return[]}),f={LineString:t,MultiLineString:r,Polygon:r,MultiPolygon:function(n,t){n.forEach(function(n){r(n,t)})}};n.forEach(e);for(var c in o)for(var a=o[c],s=a.length,l=0;l<s;++l)for(var h=l+1;h<s;++h){var p,v=a[l],g=a[h];(p=u[v])[c=i(p,g)]!==g&&p.splice(c,0,g),(p=u[g])[c=i(p,v)]!==v&&p.splice(c,0,v)}return u}function y(n,t){return n[1][2]-t[1][2]}function m(){function n(n,t){for(;t>0;){var r=(t+1>>1)-1,o=e[r];if(y(n,o)>=0)break;e[o._=t]=o,e[n._=t=r]=n}}function t(n,t){for(;;){var r=t+1<<1,i=r-1,u=t,f=e[u];if(i<o&&y(e[i],f)<0&&(f=e[u=i]),r<o&&y(e[r],f)<0&&(f=e[u=r]),u===t)break;e[f._=t]=f,e[n._=t=u]=n}}var r={},e=[],o=0;return r.push=function(t){return n(e[t._=o]=t,o++),o},r.pop=function(){if(!(o<=0)){var n,r=e[0];return--o>0&&(n=e[o],t(e[n._=0]=n,0)),r}},r.remove=function(r){var i,u=r._;if(e[u]===r)return u!==--o&&(i=e[o],(y(i,r)<0?n:t)(e[i._=u]=i,u)),u},r}function E(n,t){function o(n){f.remove(n),n[1][2]=t(n),f.push(n)}var i=r(n.transform),u=e(n.transform),f=m();return t||(t=h),n.arcs.forEach(function(n){var r,e,c,a,s=[],l=0;for(e=0,c=n.length;e<c;++e)a=n[e],i(n[e]=[a[0],a[1],1/0],e);for(e=1,c=n.length-1;e<c;++e)r=n.slice(e-1,e+2),r[1][2]=t(r),s.push(r),f.push(r);for(e=0,c=s.length;e<c;++e)r=s[e],r.previous=s[e-1],r.next=s[e+1];for(;r=f.pop();){var h=r.previous,p=r.next;r[1][2]<l?r[1][2]=l:l=r[1][2],h&&(h.next=p,h[2]=r[2],o(h)),p&&(p.previous=h,p[0]=r[0],o(p))}n.forEach(u)}),n}var M="1.6.27";n.version=M,n.mesh=s,n.meshArcs=l,n.merge=v,n.mergeArcs=g,n.feature=u,n.neighbors=d,n.presimplify=E,Object.defineProperty(n,"__esModule",{value:!0})});(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g=g.d3||(g.d3={});g=g.layout||(g.layout={});g.cloud=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var dispatch=require("d3-dispatch").dispatch;var cloudRadians=Math.PI/180,cw=1<<11>>5,ch=1<<11;module.exports=function(){var size=[256,256],text=cloudText,font=cloudFont,fontSize=cloudFontSize,fontStyle=cloudFontNormal,fontWeight=cloudFontNormal,rotate=cloudRotate,padding=cloudPadding,spiral=archimedeanSpiral,words=[],timeInterval=Infinity,event=dispatch("word","end"),timer=null,random=Math.random,cloud={},canvas=cloudCanvas;cloud.canvas=function(_){return arguments.length?(canvas=functor(_),cloud):canvas};cloud.start=function(){var contextAndRatio=getContext(canvas()),board=zeroArray((size[0]>>5)*size[1]),bounds=null,n=words.length,i=-1,tags=[],data=words.map(function(d,i){d.text=text.call(this,d,i);d.font=font.call(this,d,i);d.style=fontStyle.call(this,d,i);d.weight=fontWeight.call(this,d,i);d.rotate=rotate.call(this,d,i);d.size=~~fontSize.call(this,d,i);d.padding=padding.call(this,d,i);return d}).sort(function(a,b){return b.size-a.size});if(timer)clearInterval(timer);timer=setInterval(step,0);step();return cloud;function step(){var start=Date.now();while(Date.now()-start<timeInterval&&++i<n&&timer){var d=data[i];d.x=size[0]*(random()+.5)>>1;d.y=size[1]*(random()+.5)>>1;cloudSprite(contextAndRatio,d,data,i);if(d.hasText&&place(board,d,bounds)){tags.push(d);event.word(d);if(bounds)cloudBounds(bounds,d);else bounds=[{x:d.x+d.x0,y:d.y+d.y0},{x:d.x+d.x1,y:d.y+d.y1}];d.x-=size[0]>>1;d.y-=size[1]>>1}}if(i>=n){cloud.stop();event.end(tags,bounds)}}};cloud.stop=function(){if(timer){clearInterval(timer);timer=null}return cloud};function getContext(canvas){canvas.width=canvas.height=1;var ratio=Math.sqrt(canvas.getContext("2d").getImageData(0,0,1,1).data.length>>2);canvas.width=(cw<<5)/ratio;canvas.height=ch/ratio;var context=canvas.getContext("2d");context.fillStyle=context.strokeStyle="red";context.textAlign="center";return{context:context,ratio:ratio}}function place(board,tag,bounds){var perimeter=[{x:0,y:0},{x:size[0],y:size[1]}],startX=tag.x,startY=tag.y,maxDelta=Math.sqrt(size[0]*size[0]+size[1]*size[1]),s=spiral(size),dt=random()<.5?1:-1,t=-dt,dxdy,dx,dy;while(dxdy=s(t+=dt)){dx=~~dxdy[0];dy=~~dxdy[1];if(Math.min(Math.abs(dx),Math.abs(dy))>=maxDelta)break;tag.x=startX+dx;tag.y=startY+dy;if(tag.x+tag.x0<0||tag.y+tag.y0<0||tag.x+tag.x1>size[0]||tag.y+tag.y1>size[1])continue;if(!bounds||!cloudCollide(tag,board,size[0])){if(!bounds||collideRects(tag,bounds)){var sprite=tag.sprite,w=tag.width>>5,sw=size[0]>>5,lx=tag.x-(w<<4),sx=lx&127,msx=32-sx,h=tag.y1-tag.y0,x=(tag.y+tag.y0)*sw+(lx>>5),last;for(var j=0;j<h;j++){last=0;for(var i=0;i<=w;i++){board[x+i]|=last<<msx|(i<w?(last=sprite[j*w+i])>>>sx:0)}x+=sw}delete tag.sprite;return true}}}return false}cloud.timeInterval=function(_){return arguments.length?(timeInterval=_==null?Infinity:_,cloud):timeInterval};cloud.words=function(_){return arguments.length?(words=_,cloud):words};cloud.size=function(_){return arguments.length?(size=[+_[0],+_[1]],cloud):size};cloud.font=function(_){return arguments.length?(font=functor(_),cloud):font};cloud.fontStyle=function(_){return arguments.length?(fontStyle=functor(_),cloud):fontStyle};cloud.fontWeight=function(_){return arguments.length?(fontWeight=functor(_),cloud):fontWeight};cloud.rotate=function(_){return arguments.length?(rotate=functor(_),cloud):rotate};cloud.text=function(_){return arguments.length?(text=functor(_),cloud):text};cloud.spiral=function(_){return arguments.length?(spiral=spirals[_]||_,cloud):spiral};cloud.fontSize=function(_){return arguments.length?(fontSize=functor(_),cloud):fontSize};cloud.padding=function(_){return arguments.length?(padding=functor(_),cloud):padding};cloud.random=function(_){return arguments.length?(random=_,cloud):random};cloud.on=function(){var value=event.on.apply(event,arguments);return value===event?cloud:value};return cloud};function cloudText(d){return d.text}function cloudFont(){return"serif"}function cloudFontNormal(){return"normal"}function cloudFontSize(d){return Math.sqrt(d.value)}function cloudRotate(){return(~~(Math.random()*6)-3)*30}function cloudPadding(){return 1}function cloudSprite(contextAndRatio,d,data,di){if(d.sprite)return;var c=contextAndRatio.context,ratio=contextAndRatio.ratio;c.clearRect(0,0,(cw<<5)/ratio,ch/ratio);var x=0,y=0,maxh=0,n=data.length;--di;while(++di<n){d=data[di];c.save();c.font=d.style+" "+d.weight+" "+~~((d.size+1)/ratio)+"px "+d.font;var w=c.measureText(d.text+"m").width*ratio,h=d.size<<1;if(d.rotate){var sr=Math.sin(d.rotate*cloudRadians),cr=Math.cos(d.rotate*cloudRadians),wcr=w*cr,wsr=w*sr,hcr=h*cr,hsr=h*sr;w=Math.max(Math.abs(wcr+hsr),Math.abs(wcr-hsr))+31>>5<<5;h=~~Math.max(Math.abs(wsr+hcr),Math.abs(wsr-hcr))}else{w=w+31>>5<<5}if(h>maxh)maxh=h;if(x+w>=cw<<5){x=0;y+=maxh;maxh=0}if(y+h>=ch)break;c.translate((x+(w>>1))/ratio,(y+(h>>1))/ratio);if(d.rotate)c.rotate(d.rotate*cloudRadians);c.fillText(d.text,0,0);if(d.padding)c.lineWidth=2*d.padding,c.strokeText(d.text,0,0);c.restore();d.width=w;d.height=h;d.xoff=x;d.yoff=y;d.x1=w>>1;d.y1=h>>1;d.x0=-d.x1;d.y0=-d.y1;d.hasText=true;x+=w}var pixels=c.getImageData(0,0,(cw<<5)/ratio,ch/ratio).data,sprite=[];while(--di>=0){d=data[di];if(!d.hasText)continue;var w=d.width,w32=w>>5,h=d.y1-d.y0;for(var i=0;i<h*w32;i++)sprite[i]=0;x=d.xoff;if(x==null)return;y=d.yoff;var seen=0,seenRow=-1;for(var j=0;j<h;j++){for(var i=0;i<w;i++){var k=w32*j+(i>>5),m=pixels[(y+j)*(cw<<5)+(x+i)<<2]?1<<31-i%32:0;sprite[k]|=m;seen|=m}if(seen)seenRow=j;else{d.y0++;h--;j--;y++}}d.y1=d.y0+seenRow;d.sprite=sprite.slice(0,(d.y1-d.y0)*w32)}}function cloudCollide(tag,board,sw){sw>>=5;var sprite=tag.sprite,w=tag.width>>5,lx=tag.x-(w<<4),sx=lx&127,msx=32-sx,h=tag.y1-tag.y0,x=(tag.y+tag.y0)*sw+(lx>>5),last;for(var j=0;j<h;j++){last=0;for(var i=0;i<=w;i++){if((last<<msx|(i<w?(last=sprite[j*w+i])>>>sx:0))&board[x+i])return true}x+=sw}return false}function cloudBounds(bounds,d){var b0=bounds[0],b1=bounds[1];if(d.x+d.x0<b0.x)b0.x=d.x+d.x0;if(d.y+d.y0<b0.y)b0.y=d.y+d.y0;if(d.x+d.x1>b1.x)b1.x=d.x+d.x1;if(d.y+d.y1>b1.y)b1.y=d.y+d.y1}function collideRects(a,b){return a.x+a.x1>b[0].x&&a.x+a.x0<b[1].x&&a.y+a.y1>b[0].y&&a.y+a.y0<b[1].y}function archimedeanSpiral(size){var e=size[0]/size[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function rectangularSpiral(size){var dy=4,dx=dy*size[0]/size[1],x=0,y=0;return function(t){var sign=t<0?-1:1;switch(Math.sqrt(1+4*sign*t)-sign&3){case 0:x+=dx;break;case 1:y+=dy;break;case 2:x-=dx;break;default:y-=dy;break}return[x,y]}}function zeroArray(n){var a=[],i=-1;while(++i<n)a[i]=0;return a}function cloudCanvas(){return document.createElement("canvas")}function functor(d){return typeof d==="function"?d:function(){return d}}var spirals={archimedean:archimedeanSpiral,rectangular:rectangularSpiral}},{"d3-dispatch":2}],2:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):factory(global.dispatch={})})(this,function(exports){"use strict";function Dispatch(types){var i=-1,n=types.length,callbacksByType={},callbackByName={},type,that=this;that.on=function(type,callback){type=parseType(type);if(arguments.length<2){return(callback=callbackByName[type.name])&&callback.value}if(type.type){var callbacks=callbacksByType[type.type],callback0=callbackByName[type.name],i;if(callback0){callback0.value=null;i=callbacks.indexOf(callback0);callbacksByType[type.type]=callbacks=callbacks.slice(0,i).concat(callbacks.slice(i+1));delete callbackByName[type.name]}if(callback){callback={value:callback};callbackByName[type.name]=callback;callbacks.push(callback)}}else if(callback==null){for(var otherType in callbacksByType){if(callback=callbackByName[otherType+type.name]){callback.value=null;var callbacks=callbacksByType[otherType],i=callbacks.indexOf(callback);callbacksByType[otherType]=callbacks.slice(0,i).concat(callbacks.slice(i+1));delete callbackByName[callback.name]}}}return that};while(++i<n){type=types[i]+"";if(!type||type in that)throw new Error("illegal or duplicate type: "+type);callbacksByType[type]=[];that[type]=applier(type)}function parseType(type){var i=(type+="").indexOf("."),name=type;if(i>=0)type=type.slice(0,i);else name+=".";if(type&&!callbacksByType.hasOwnProperty(type))throw new Error("unknown type: "+type);return{type:type,name:name}}function applier(type){return function(){var callbacks=callbacksByType[type],callback,callbackValue,i=-1,n=callbacks.length;while(++i<n){if(callbackValue=(callback=callbacks[i]).value){callbackValue.apply(this,arguments)}}return that}}}function dispatch(){return new Dispatch(arguments)}dispatch.prototype=Dispatch.prototype;exports.dispatch=dispatch})},{}]},{},[1])(1)});!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.glitch=e()}}(function(){return function e(t,a,r){function n(o,i){if(!a[o]){if(!t[o]){var f="function"==typeof require&&require;if(!i&&f)return f(o,!0);if(u)return u(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var d=a[o]={exports:{}};t[o][0].call(d.exports,function(e){var a=t[o][1][e];return n(a?a:e)},d,d.exports,e,t,a,r)}return a[o].exports}for(var u="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}({1:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};a["default"]=function(e){function t(){return e}function a(){var e=n({},O);return j||n(e,P),e}function r(){var e=n({},O);return x||n(e,L),e}function u(e){return e}function i(e){return m(f["default"],e)}function s(e){return m(u,e)}function l(e){return y(u)}function g(e){return y(d["default"],e,!0)}function p(e){return y(c["default"],e,!0)}function m(e,t,a){return j=function(){return new Promise(function(r,n){if(a)e(t,r,n);else if(e===u)r(t);else try{r(e(t,r,n))}catch(o){n(o)}})},w()?_():r()}function y(e,t,r){return x=function(a){return new Promise(function(n,o){r?e(a,t,n,o):e===u?n(a):e(a,t).then(n,o)})},w()?_():a()}function w(){return j&&x}function _(){return new Promise(function(t,a){j().then(function(t){return M(t,e)},a).then(function(e){x(e).then(t,a)},a)})}function M(e,t){return new Promise(function(a,r){(0,h["default"])(e,t.quality).then(function(a){return I(e,a,t)},r).then(a,r)})}function I(e,t,a){return new Promise(function(r,n){D.addEventListener("message",function(e){e.data&&e.data.base64URL?r(e.data.base64URL):n(e.data&&e.data.err?e.data.err:e)}),D.postMessage({params:a,base64URL:t,imageData:e,imageDataWidth:e.width,imageDataHeight:e.height})})}e=(0,o["default"])(e);var j=void 0,x=void 0,D=(0,v["default"])(b["default"]),O={getParams:t,getInput:a,getOutput:r},P={fromImageData:s,fromImage:i},L={toImage:g,toDataURL:l,toImageData:p};return a()};var u=e("./input/sanitizeInput"),o=r(u),i=e("./input/browser/fromImage"),f=r(i),s=e("./output/browser/toImage"),d=r(s),l=e("./output/toImageData"),c=r(l),g=e("./glitch/browser/imageDataToBase64"),h=r(g),p=e("./glitch/glitchImageData"),m=(r(p),e("webworkify")),v=r(m),y=e("./workers/glitchWorker"),b=r(y);t.exports=a["default"]},{"./glitch/browser/imageDataToBase64":4,"./glitch/glitchImageData":7,"./input/browser/fromImage":9,"./input/sanitizeInput":11,"./output/browser/toImage":12,"./output/toImageData":13,"./workers/glitchWorker":20,webworkify:22}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=r.split(""),u={};n.forEach(function(e,t){u[e]=t}),a["default"]={map:n,reverse:u},t.exports=a["default"]},{}],3:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){for(var t,a,n,u=[],o=23,i=e.length;i>o;o++){switch(a=r.reverse[e.charAt(o)],t=(o-23)%4){case 1:u.push(n<<2|a>>4);break;case 2:u.push((15&n)<<4|a>>2);break;case 3:u.push((3&n)<<6|a)}n=a}return u};var r=e("./base64Map");t.exports=a["default"]},{"./base64Map":2}],4:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e,t){return new Promise(function(a,r){if((0,i["default"])(e)){var n=new u["default"](e.width,e.height),o=n.getContext("2d");o.putImageData(e,0,0);var f=n.toDataURL("image/jpeg",t/100);a(f)}else r(new Error("object is not valid imageData"))})};var n=e("canvas-browserify"),u=r(n),o=e("../../util/isImageData"),i=r(o);t.exports=a["default"]},{"../../util/isImageData":18,"canvas-browserify":21}],5:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){for(var t=["data:image/jpeg;base64,"],a=void 0,n=void 0,u=void 0,o=0,i=e.length;i>o;o++){switch(n=e[o],a=o%3){case 0:t.push(r.map[n>>2]);break;case 1:t.push(r.map[(3&u)<<4|n>>4]);break;case 2:t.push(r.map[(15&u)<<2|n>>6]),t.push(r.map[63&n])}u=n}return 0===a?(t.push(r.map[(3&u)<<4]),t.push("==")):1===a&&(t.push(r.map[(15&u)<<2]),t.push("=")),t.join("")};var r=e("./base64Map");t.exports=a["default"]},{"./base64Map":2}],6:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e,t,a,r){for(var n=(0,u["default"])(e),o=e.length-n-4,i=a/100,f=t/100,s=0;r>s;s++){var d=o/r*s|0,l=o/r*(s+1)|0,c=l-d,g=d+c*f|0;g>o&&(g=o);var h=~~(n+g);e[h]=~~(256*i)}return e};var n=e("./jpgHeaderLength"),u=r(n);t.exports=a["default"]},{"./jpgHeaderLength":8}],7:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e,t,a){if((0,u["default"])(e)){var r=(0,i["default"])(t),n=(0,s["default"])(r,a.seed,a.amount,a.iterations),o=(0,l["default"])(n);return o}throw new Error("glitchImageData: imageData seems to be corrupt.")};var n=e("../util/isImageData"),u=r(n),o=e("./base64ToByteArray"),i=r(o),f=e("./glitchByteArray"),s=r(f),d=e("./byteArrayToBase64"),l=r(d);t.exports=a["default"]},{"../util/isImageData":18,"./base64ToByteArray":3,"./byteArrayToBase64":5,"./glitchByteArray":6}],8:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){for(var t=417,a=0,r=e.length;r>a;a++)if(255===e[a]&&218===e[a+1]){t=a+2;break}return t},t.exports=a["default"]},{}],9:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){if(e instanceof HTMLImageElement){if(!e.naturalWidth||!e.naturalHeight||e.complete===!1)throw new Error("This this image hasn't finished loading: "+e.src);var t=new u["default"](e.naturalWidth,e.naturalHeight),a=t.getContext("2d");a.drawImage(e,0,0,t.width,t.height);var r=a.getImageData(0,0,t.width,t.height);return r.data&&r.data.length&&("undefined"==typeof r.width&&(r.width=e.naturalWidth),"undefined"==typeof r.height&&(r.height=e.naturalHeight)),r}throw new Error("This object does not seem to be an image.")};var n=e("canvas-browserify"),u=r(n);u["default"].Image;t.exports=a["default"]},{"canvas-browserify":21}],10:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]={amount:35,iterations:20,quality:30,seed:25},t.exports=a["default"]},{}],11:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};a["default"]=function(e){e=(0,f["default"])(e),"object"!==("undefined"==typeof e?"undefined":n(e))&&(e={});var t=Object.keys(d["default"]).filter(function(e){return"iterations"!==e});return t.forEach(function(t){"number"!=typeof e[t]||isNaN(e[t])?e[t]=d["default"][t]:e[t]=(0,o["default"])(e[t],0,100),e[t]=Math.round(e[t])}),("number"!=typeof e.iterations||isNaN(e.iterations)||e.iterations<=0)&&(e.iterations=d["default"].iterations),e.iterations=Math.round(e.iterations),e};var u=e("../util/clamp"),o=r(u),i=e("../util/clone"),f=r(i),s=e("./defaultParams"),d=r(s);t.exports=a["default"]},{"../util/clamp":15,"../util/clone":16,"./defaultParams":10}],12:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e,t,a,r){(0,u["default"])(e).then(a,r)};var n=e("../../util/loadBase64Image"),u=r(n);t.exports=a["default"]},{"../../util/loadBase64Image":19}],13:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e,t,a,r){(0,u["default"])(e).then(function(e){var t=(0,s["default"])(e),r=(0,i["default"])(e).ctx.getImageData(0,0,t.width,t.height);r.width||(r.width=t.width),r.height||(r.height=t.height),a(r)},r)};var n=e("../util/loadBase64Image"),u=r(n),o=e("../util/canvasFromImage"),i=r(o),f=e("../util/getImageSize"),s=r(f);t.exports=a["default"]},{"../util/canvasFromImage":14,"../util/getImageSize":17,"../util/loadBase64Image":19}],14:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){var t=(0,i["default"])(e),a=new u["default"](t.width,t.height),r=a.getContext("2d");return r.drawImage(e,0,0,t.width,t.height),{canvas:a,ctx:r}};var n=e("canvas-browserify"),u=r(n),o=e("./getImageSize"),i=r(o);t.exports=a["default"]},{"./getImageSize":17,"canvas-browserify":21}],15:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e,t,a){return t>e?t:e>a?a:e},t.exports=a["default"]},{}],16:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){var t=!1;if("undefined"!=typeof e)try{t=JSON.parse(JSON.stringify(e))}catch(a){}return t},t.exports=a["default"]},{}],17:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return{width:e.width||e.naturalWidth,height:e.height||e.naturalHeight}},t.exports=a["default"]},{}],18:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};a["default"]=function(e){return e&&"number"==typeof e.width&&"number"==typeof e.height&&e.data&&"number"==typeof e.data.length&&"object"===r(e.data)},t.exports=a["default"]},{}],19:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(e){return new Promise(function(t,a){var n=new r.Image;n.onload=function(){t(n)},n.onerror=function(e){a(e)},n.src=e})};var r=e("canvas-browserify");t.exports=a["default"]},{"canvas-browserify":21}],20:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){e.addEventListener("message",function(t){var a=t.data.imageData,r=t.data.params,n=t.data.base64URL;if(a&&n&&r)try{"undefined"==typeof a.width&&"number"==typeof t.data.imageDataWidth&&(a.width=t.data.imageDataWidth),"undefined"==typeof a.height&&"number"==typeof t.data.imageDataHeight&&(a.height=t.data.imageDataHeight);var i=(0,f["default"])(a,n,r);o(i)}catch(s){u(s)}else u(t.data.imageData?"Parameters are missing.":"ImageData is missing.");e.close()})}function u(e){self.postMessage({err:e.message||e})}function o(e){self.postMessage({base64URL:e})}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=n;var i=e("../glitch/glitchImageData"),f=r(i);t.exports=a["default"]},{"../glitch/glitchImageData":7}],21:[function(e,t,a){var r=t.exports=function(e,t){var a=document.createElement("canvas");return a.width=e||300,a.height=t||150,a};r.Image=function(){var e=document.createElement("img");return e}},{}],22:[function(e,t,a){var r=arguments[3],n=arguments[4],u=arguments[5],o=JSON.stringify;t.exports=function(e){for(var t,a=Object.keys(u),i=0,f=a.length;f>i;i++){var s=a[i],d=u[s].exports;if(d===e||d["default"]===e){t=s;break}}if(!t){t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var l={},i=0,f=a.length;f>i;i++){var s=a[i];l[s]=s}n[t]=[Function(["require","module","exports"],"("+e+")(self)"),l]}var c=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[t]=t,n[c]=[Function(["require"],"var f = require("+o(t)+");(f.default ? f.default : f)(self);"),g];var h="("+r+")({"+Object.keys(n).map(function(e){return o(e)+":["+n[e][0]+","+o(n[e][1])+"]"}).join(",")+"},{},["+o(c)+"])",p=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(p.createObjectURL(new Blob([h],{type:"text/javascript"})))}},{}]},{},[1])(1)});(function(isNode){var Public=function(clone){return merge(clone===true,false,arguments)},publicName="merge";Public.recursive=function(clone){return merge(clone===true,true,arguments)};Public.clone=function(input){var output=input,type=typeOf(input),index,size;if(type==="array"){output=[];size=input.length;for(index=0;index<size;++index)output[index]=Public.clone(input[index])}else if(type==="object"){output={};for(index in input)output[index]=Public.clone(input[index])}return output};function merge_recursive(base,extend){if(typeOf(base)!=="object")return extend;for(var key in extend){if(typeOf(base[key])==="object"&&typeOf(extend[key])==="object"){base[key]=merge_recursive(base[key],extend[key])}else{base[key]=extend[key]}}return base}function merge(clone,recursive,argv){var result=argv[0],size=argv.length;if(clone||typeOf(result)!=="object")result={};for(var index=0;index<size;++index){var item=argv[index],type=typeOf(item);if(type!=="object")continue;for(var key in item){var sitem=clone?Public.clone(item[key]):item[key];if(recursive){result[key]=merge_recursive(result[key],sitem)}else{result[key]=sitem}}}return result}function typeOf(input){return{}.toString.call(input).slice(8,-1).toLowerCase()}if(isNode){module.exports=Public}else{window[publicName]=Public}})(typeof module==="object"&&module&&typeof module.exports==="object"&&module.exports);var Row=function(params){this.top=params.top;this.left=params.left;this.width=params.width;this.spacing=params.spacing;this.targetRowHeight=params.targetRowHeight;this.targetRowHeightTolerance=params.targetRowHeightTolerance;this.minAspectRatio=this.width/params.targetRowHeight*(1-params.targetRowHeightTolerance);this.maxAspectRatio=this.width/params.targetRowHeight*(1+params.targetRowHeightTolerance);this.edgeCaseMinRowHeight=params.edgeCaseMinRowHeight;this.edgeCaseMaxRowHeight=params.edgeCaseMaxRowHeight;this.widowLayoutStyle=params.widowLayoutStyle;this.isBreakoutRow=params.isBreakoutRow;this.items=[];this.height=0};Row.prototype={addItem:function(itemData){var newItems=this.items.concat(itemData),rowWidthWithoutSpacing=this.width-(newItems.length-1)*this.spacing,newAspectRatio=newItems.reduce(function(sum,item){return sum+item.aspectRatio},0),targetAspectRatio=rowWidthWithoutSpacing/this.targetRowHeight,previousRowWidthWithoutSpacing,previousAspectRatio,previousTargetAspectRatio;if(this.isBreakoutRow){if(this.items.length===0){if(itemData.aspectRatio>=1){this.items.push(itemData);this.completeLayout(rowWidthWithoutSpacing/itemData.aspectRatio,this.widowLayoutStyle);return true}}}if(newAspectRatio<this.minAspectRatio){this.items.push(merge(itemData));return true}else if(newAspectRatio>this.maxAspectRatio){if(this.items.length===0){this.items.push(merge(itemData));this.completeLayout(rowWidthWithoutSpacing/newAspectRatio,this.widowLayoutStyle);return true}previousRowWidthWithoutSpacing=this.width-(this.items.length-1)*this.spacing;previousAspectRatio=this.items.reduce(function(sum,item){return sum+item.aspectRatio},0);previousTargetAspectRatio=previousRowWidthWithoutSpacing/this.targetRowHeight;if(Math.abs(newAspectRatio-targetAspectRatio)>Math.abs(previousAspectRatio-previousTargetAspectRatio)){this.completeLayout(previousRowWidthWithoutSpacing/previousAspectRatio,this.widowLayoutStyle);return false}else{this.items.push(merge(itemData));this.completeLayout(rowWidthWithoutSpacing/newAspectRatio,this.widowLayoutStyle);return true}}else{this.items.push(merge(itemData));this.completeLayout(rowWidthWithoutSpacing/newAspectRatio,this.widowLayoutStyle);return true}},isLayoutComplete:function(){return this.height>0},completeLayout:function(newHeight,widowLayoutStyle){var itemWidthSum=this.left,rowWidthWithoutSpacing=this.width-(this.items.length-1)*this.spacing,clampedToNativeRatio,roundedHeight,clampedHeight,errorWidthPerItem,roundedCumulativeErrors,singleItemGeometry,centerOffset;if(typeof widowLayoutStyle==="undefined"||["justify","center","left"].indexOf(widowLayoutStyle)<0){widowLayoutStyle="left"}roundedHeight=Math.round(newHeight);clampedHeight=Math.max(this.edgeCaseMinRowHeight,Math.min(roundedHeight,this.edgeCaseMaxRowHeight));if(roundedHeight!==clampedHeight){this.height=clampedHeight;clampedToNativeRatio=rowWidthWithoutSpacing/clampedHeight/(rowWidthWithoutSpacing/roundedHeight)}else{this.height=roundedHeight;clampedToNativeRatio=1}this.items.forEach(function(item){item.top=this.top;item.width=Math.round(item.aspectRatio*this.height*clampedToNativeRatio);item.height=this.height;item.left=itemWidthSum;itemWidthSum+=item.width+this.spacing},this);if(widowLayoutStyle==="justify"){itemWidthSum-=this.spacing+this.left;errorWidthPerItem=(itemWidthSum-this.width)/this.items.length;roundedCumulativeErrors=this.items.map(function(item,i){return Math.round((i+1)*errorWidthPerItem)});if(this.items.length===1){singleItemGeometry=this.items[0];singleItemGeometry.width-=Math.round(errorWidthPerItem)}else{this.items.forEach(function(item,i){if(i>0){item.left-=roundedCumulativeErrors[i-1];item.width-=roundedCumulativeErrors[i]-roundedCumulativeErrors[i-1]}else{item.width-=roundedCumulativeErrors[i]}})}}else if(widowLayoutStyle==="center"){centerOffset=(this.width-itemWidthSum)/2;this.items.forEach(function(item){item.left+=centerOffset+this.spacing},this)}},forceComplete:function(fitToWidth,rowHeight){if(typeof rowHeight==="number"){this.completeLayout(rowHeight,this.widowLayoutStyle)}else{this.completeLayout(this.targetRowHeight,this.widowLayoutStyle)}},getItems:function(){return this.items}};var layoutConfig={},layoutData={};function createNewRow(){var isBreakoutRow;if(layoutConfig.fullWidthBreakoutRowCadence!==false){if((layoutData._rows.length+1)%layoutConfig.fullWidthBreakoutRowCadence===0){isBreakoutRow=true}}return new Row({top:layoutData._containerHeight,left:layoutConfig.containerPadding.left,width:layoutConfig.containerWidth-layoutConfig.containerPadding.left-layoutConfig.containerPadding.right,spacing:layoutConfig.boxSpacing.horizontal,targetRowHeight:layoutConfig.targetRowHeight,targetRowHeightTolerance:layoutConfig.targetRowHeightTolerance,edgeCaseMinRowHeight:.5*layoutConfig.targetRowHeight,edgeCaseMaxRowHeight:2*layoutConfig.targetRowHeight,rightToLeft:false,isBreakoutRow:isBreakoutRow,widowLayoutStyle:layoutConfig.widowLayoutStyle})}function addRow(row){layoutData._rows.push(row);layoutData._layoutItems=layoutData._layoutItems.concat(row.getItems());layoutData._containerHeight+=row.height+layoutConfig.boxSpacing.vertical;return row.items}function computeLayout(itemLayoutData){var laidOutItems=[],itemAdded,currentRow,nextToLastRowHeight;if(layoutConfig.forceAspectRatio){itemLayoutData.forEach(function(itemData){itemData.forcedAspectRatio=true;itemData.aspectRatio=layoutConfig.forceAspectRatio})}itemLayoutData.some(function(itemData,i){if(isNaN(itemData.aspectRatio)){throw new Error("Item "+i+" has an invalid aspect ratio")}if(!currentRow){currentRow=createNewRow()}itemAdded=currentRow.addItem(itemData);if(currentRow.isLayoutComplete()){laidOutItems=laidOutItems.concat(addRow(currentRow));if(layoutData._rows.length>=layoutConfig.maxNumRows){currentRow=null;return true}currentRow=createNewRow();if(!itemAdded){itemAdded=currentRow.addItem(itemData);if(currentRow.isLayoutComplete()){laidOutItems=laidOutItems.concat(addRow(currentRow));if(layoutData._rows.length>=layoutConfig.maxNumRows){currentRow=null;return true}currentRow=createNewRow()}}}});if(currentRow&&currentRow.getItems().length&&layoutConfig.showWidows){if(layoutData._rows.length){if(layoutData._rows[layoutData._rows.length-1].isBreakoutRow){nextToLastRowHeight=layoutData._rows[layoutData._rows.length-1].targetRowHeight}else{nextToLastRowHeight=layoutData._rows[layoutData._rows.length-1].height}currentRow.forceComplete(false,nextToLastRowHeight)}else{currentRow.forceComplete(false)}laidOutItems=laidOutItems.concat(addRow(currentRow));layoutConfig._widowCount=currentRow.getItems().length}layoutData._containerHeight=layoutData._containerHeight-layoutConfig.boxSpacing.vertical;layoutData._containerHeight=layoutData._containerHeight+layoutConfig.containerPadding.bottom;return{containerHeight:layoutData._containerHeight,widowCount:layoutConfig._widowCount,boxes:layoutData._layoutItems}}function justifiedLayout(input,width,boxSpacing,targetRowHeight){var defaults={containerWidth:width,containerPadding:0,boxSpacing:boxSpacing||0,targetRowHeight:targetRowHeight||250,targetRowHeightTolerance:.25,maxNumRows:Number.POSITIVE_INFINITY,forceAspectRatio:false,showWidows:true,fullWidthBreakoutRowCadence:false,widowLayoutStyle:"left"};var containerPadding={};var boxSpacing={};layoutConfig=defaults;containerPadding.top=!isNaN(parseFloat(layoutConfig.containerPadding.top))?layoutConfig.containerPadding.top:layoutConfig.containerPadding;containerPadding.right=!isNaN(parseFloat(layoutConfig.containerPadding.right))?layoutConfig.containerPadding.right:layoutConfig.containerPadding;containerPadding.bottom=!isNaN(parseFloat(layoutConfig.containerPadding.bottom))?layoutConfig.containerPadding.bottom:layoutConfig.containerPadding;containerPadding.left=!isNaN(parseFloat(layoutConfig.containerPadding.left))?layoutConfig.containerPadding.left:layoutConfig.containerPadding;boxSpacing.horizontal=!isNaN(parseFloat(layoutConfig.boxSpacing.horizontal))?layoutConfig.boxSpacing.horizontal:layoutConfig.boxSpacing;boxSpacing.vertical=!isNaN(parseFloat(layoutConfig.boxSpacing.vertical))?layoutConfig.boxSpacing.vertical:layoutConfig.boxSpacing;layoutConfig.containerPadding=containerPadding;layoutConfig.boxSpacing=boxSpacing;layoutData._layoutItems=[];layoutData._awakeItems=[];layoutData._inViewportItems=[];layoutData._leadingOrphans=[];layoutData._trailingOrphans=[];layoutData._containerHeight=layoutConfig.containerPadding.top;layoutData._rows=[];layoutData._orphans=[];layoutConfig._widowCount=0;return computeLayout(input.map(function(item){if(item.width&&item.height){return{aspectRatio:item.width/item.height}}else{return{aspectRatio:item}}}))}(function($){var selectors=[];var check_binded=false;var check_lock=false;var defaults={interval:250,force_process:false};var $window=$(window);var $prior_appeared=[];function process(){check_lock=false;for(var index=0,selectorsLength=selectors.length;index<selectorsLength;index++){var $appeared=$(selectors[index]).filter(function(){return $(this).is(":appeared")});$appeared.trigger("appear",[$appeared]);if($prior_appeared[index]){var $disappeared=$prior_appeared[index].not($appeared);$disappeared.trigger("disappear",[$disappeared])}$prior_appeared[index]=$appeared}}function add_selector(selector){selectors.push(selector);$prior_appeared.push()}$.expr[":"]["appeared"]=function(element){var $element=$(element);if(!$element.is(":visible")){return false}var window_left=$window.scrollLeft();var window_top=$window.scrollTop();var offset=$element.offset();var left=offset.left;var top=offset.top;if(top+$element.height()>=window_top&&top-($element.data("appear-top-offset")||500)<=window_top+$window.height()&&left+$element.width()>=window_left&&left-($element.data("appear-left-offset")||0)<=window_left+$window.width()){return true}else{return false}};$.fn.extend({appear:function(options){var opts=$.extend({},defaults,options||{});var selector=this.selector||this;if(!check_binded){var on_check=function(){if(check_lock){return}check_lock=true;setTimeout(process,opts.interval)};$(window).scroll(on_check).resize(on_check);check_binded=true}if(opts.force_process){setTimeout(process,opts.interval)}add_selector(selector);return $(selector)}});$.extend({force_appear:function(){if(check_binded){process();return true}return false}})})(function(){if(typeof module!=="undefined"){return require("jquery")}else{return jQuery}}());jQuery.fn.highlight=function(pat){function innerHighlight(node,pat){var skip=0;if(node.nodeType==3){var pos=node.data.toUpperCase().indexOf(pat);if(pos>=0){var spannode=document.createElement("span");spannode.className="highlight";var middlebit=node.splitText(pos);var endbit=middlebit.splitText(pat.length);var middleclone=middlebit.cloneNode(true);spannode.appendChild(middleclone);middlebit.parentNode.replaceChild(spannode,middlebit);skip=1}}else if(node.nodeType==1&&node.childNodes&&!/(script|style)/i.test(node.tagName)){for(var i=0;i<node.childNodes.length;++i){i+=innerHighlight(node.childNodes[i],pat)}}return skip}return this.length&&pat&&pat.length?this.each(function(){innerHighlight(this,pat.toUpperCase())}):this};jQuery.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;with(this.parentNode){replaceChild(this.firstChild,this);normalize()}}).end()};(function($){$.fn.loadingAnim=function(){try{this.html('<div class="loading_anim">'+'<div class="load_text">Loading...</div>'+'<svg version="1.1" id="sonemic" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"     width="100%"  viewBox="-5 -5 150 150" enable-background="new 0 0 128 128.001" xml:space="preserve"> <g>    <path data-delay="30" data-duration="60" stroke="#ddd" fill="transparent" d="M77.164,38.284c9.791,4.032,27.151,3.396,37.908,2.487C106.236,21.377,86.699,7.89,64,7.89       c-10.823,0-20.925,3.074-29.495,8.383C53.401,7.544,62.265,32.15,77.164,38.284z"/>    <path data-delay="30" data-duration="60" stroke="#ddd" fill="transparent" stroke-width="4"  d="M128,64.001c0,35.35-28.654,64-64,64c-35.347,0-64-28.65-64-64c0-35.343,28.652-64,64-64       C99.346,0.002,128,28.658,128,64.001z"/>    <path data-delay="30" data-duration="50" stroke="#ddd" fill="transparent" d="M97.037,60.786c8.663,0.539,16.567-1.694,22.564-4.245c-0.737-5.557-2.289-10.851-4.529-15.771       c-10.756,0.909-28.117,1.545-37.908-2.487C62.265,32.15,52.599,7.113,34.505,16.272C18.533,26.161,7.889,43.836,7.889,64.001       c0,5.215,0.727,10.258,2.061,15.051c8.877-7.82,27.506-22.851,44.129-27.324C76.872,45.589,78.332,59.62,97.037,60.786z"/>    <path data-delay="30" data-duration="60" stroke="#ddd" fill="transparent" d="M119.601,56.542c-5.997,2.55-13.901,4.783-22.564,4.245c-18.705-1.166-20.165-15.197-42.958-9.058       C37.456,56.201,18.827,71.232,9.95,79.052c1.799,6.475,4.725,12.478,8.564,17.786c6.057-5.171,13.374-9.747,21.538-11.5       c23.087-4.967,23.087,11.686,42.666,9.35c10.68-1.275,25.349-11.595,36.489-20.705c0.583-3.246,0.904-6.571,0.904-9.981       C120.11,61.471,119.925,58.98,119.601,56.542z"/>    <path data-delay="30" data-duration="20" stroke="#ddd" fill="transparent" d="M40.052,85.337c-8.164,1.754-15.48,6.33-21.538,11.5c10.192,14.096,26.762,23.27,45.486,23.27       c27.581,0,50.499-19.902,55.206-46.125c-11.14,9.11-25.809,19.43-36.489,20.705C63.139,97.023,63.139,80.37,40.052,85.337z"/>    <path data-delay="30" data-duration="60" stroke="#ddd" fill="transparent" d="M87.655,74.438c2.346,5.617,0.097,11.901-5.028,14.047c-5.127,2.143-11.183-0.671-13.531-6.29       C66.75,76.583,69,70.296,74.128,68.154C79.252,66.011,85.309,68.823,87.655,74.438z"/> </g> </svg>'+"</div>");function myCallback(){setTimeout(function(){xs.reset().play()},500)}var xs=new Vivus("sonemic",{type:"async",duration:100},myCallback);xs.reset().play()}catch(err){console.log("Error playing loading animation:"+err.message)}}})(jQuery);(function($){$.timeago=function(timestamp){if(timestamp instanceof Date){return inWords(timestamp)}else if(typeof timestamp==="string"){return inWords($.timeago.parse(timestamp))}else if(typeof timestamp==="number"){return inWords(new Date(timestamp))}else{return inWords($.timeago.datetime(timestamp))}};var $t=$.timeago;$.extend($.timeago,{settings:{refreshMillis:6e4,allowFuture:false,strings:{prefixAgo:null,prefixFromNow:"+",suffixAgo:null,suffixFromNow:null,justnow:"now",justnow_long:"just now",seconds:"%d sec",seconds_long:"%d seconds ago",minute:"1m",minute_long:"1 minute ago",minutes:"%dm",minutes_long:"%d minutes ago",hour:"1h",hour_long:"1 hour ago",hours:"%dh",hours_long:"%d hours ago",day:"1d",day_long:"1 day ago",days:"%dd",days_long:"%d days ago",wordSeparator:" ",numbers:[]}},inWords:function(date,distanceMillis,longform,dateonly,datetime){var $l=this.settings.strings;var prefix=$l.prefixAgo;var suffix=$l.suffixAgo;if(this.settings.allowFuture){if(distanceMillis<0){prefix=$l.prefixFromNow;suffix=$l.suffixFromNow}}var seconds=Math.abs(distanceMillis)/1e3;var minutes=seconds/60;var hours=minutes/60;var days=hours/24;var years=days/365;function substitute(stringOrFunction,number){var string=$.isFunction(stringOrFunction)?stringOrFunction(number,distanceMillis):stringOrFunction;var value=$l.numbers&&$l.numbers[number]||number;return string.replace(/%d/i,value)}var words;if(longform){words=seconds<15&&substitute($l.justnow_long,Math.round(seconds))||seconds<45&&substitute($l.seconds_long,Math.round(seconds))||seconds<90&&substitute($l.minute_long,1)||minutes<45&&substitute($l.minutes_long,Math.round(minutes))||minutes<90&&substitute($l.hour_long,1)||hours<24&&substitute($l.hours_long,Math.round(hours))||hours<42&&substitute($l.day_long,1)||days<30&&substitute($l.days_long,Math.round(days))}else{words=seconds<15&&substitute($l.justnow,Math.round(seconds))||seconds<45&&substitute($l.seconds,Math.round(seconds))||seconds<90&&substitute($l.minute,1)||minutes<45&&substitute($l.minutes,Math.round(minutes))||minutes<90&&substitute($l.hour,1)||hours<24&&substitute($l.hours,Math.round(hours))||hours<42&&substitute($l.day,1)||days<30&&substitute($l.days,Math.round(days))}if(datetime){var d=date;return"b:"+d.toISOString().slice(0,10)+" "+d.toLocaleTimeString()}else if(dateonly||distanceMillis>1e3*60*60*24*30){var d1=new Date((new Date).getTime()-distanceMillis);var d2=new Date;var month=d1.getMonth();var day=d1.getDate();var months="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");var y1=d1.getFullYear();var y2=d2.getFullYear();return day+" "+months[month]+" "+(y1===y2?"":y1)}else{var separator=$l.wordSeparator===undefined?" ":$l.wordSeparator;return $.trim(words)}},parse:function(iso8601){var s=$.trim(iso8601);s=s.replace(/\.\d+/,"");s=s.replace(/T/," ").replace(/Z/," UTC");s=s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");s=s.replace(/\s/,"T");s=s.replace(/\+00/,"");s+="Z";return new Date(s)},datetime:function(elem){var iso8601=$t.isTime(elem)?$(elem).attr("datetime"):$(elem).attr("title");if(iso8601.indexOf(" ")>-1){return $t.parse(iso8601)}else{return new Date(iso8601)}},isTime:function(elem){return $(elem).get(0).tagName.toLowerCase()==="time"}});$.fn.timeago=function(){var self=this;self.each(refresh);var $s=$t.settings;if($s.refreshMillis>0){setInterval(function(){self.each(refresh)},$s.refreshMillis)}return self};function refresh(){var longform=$(this).hasClass("longform");var dateonly=$(this).hasClass("dateonly");var datetime=$(this).hasClass("datetime");var data=prepareData(this);if(!isNaN(data.datetime)){$(this).text(inWords(data.datetime,longform,dateonly,datetime))}else{}return this}function prepareData(element){element=$(element);if(!element.data("timeago")){element.data("timeago",{datetime:$t.datetime(element)});var text=$.trim(element.text());if(text.length>0&&!($t.isTime(element)&&element.attr("title"))){var dateStr=$t.datetime(element).toString();element.attr("title","").attr("data-tiptip",dateStr).addClass("has_tip").tipTip()}}return element.data("timeago")}function inWords(date,longform,dateonly,datetime){return $t.inWords(date,distance(date),longform,dateonly,datetime)}function distance(date){return(new Date).getTime()-date.getTime()}})(jQuery);(function($){$.fn.drags=function(opt){opt=$.extend({handle:"",cursor:"move"},opt);if(opt.handle===""){var $el=this}else{var $el=this.find(opt.handle)}return $el.css("cursor",opt.cursor).on("mousedown",function(e){if(opt.handle===""){var $drag=$(this).addClass("draggable")}else{var $drag=$(this).addClass("active-handle").parent().addClass("draggable")}var z_idx=$drag.css("z-index"),drg_h=$drag.outerHeight(),drg_w=$drag.outerWidth(),pos_y=$drag.offset().top+drg_h-e.pageY,pos_x=$drag.offset().left+drg_w-e.pageX;$drag.css("z-index",1e3).parents().on("mousemove",function(e){$(".draggable").offset({top:e.pageY+pos_y-drg_h,left:e.pageX+pos_x-drg_w}).on("mouseup",function(){$(this).removeClass("draggable").css("z-index",z_idx)})});e.preventDefault()}).on("mouseup",function(){if(opt.handle===""){$(this).removeClass("draggable")}else{$(this).removeClass("active-handle").parent().removeClass("draggable")}})}})(jQuery);(function($){var dragging,placeholders=$();$.fn.sortable=function(options){var method=String(options);options=$.extend({connectWith:false},options);return this.each(function(){if(/^(enable|disable|destroy)$/.test(method)){var items=$(this).children($(this).data("items")).attr("draggable",method=="enable");if(method=="destroy"){items.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s")}return}var isHandle,index,items=$(this).children(options.items);var placeholder=$("<"+(/^(ul|ol)$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');items.find(options.handle).mousedown(function(){isHandle=true}).mouseup(function(){isHandle=false});$(this).data("items",options.items);placeholders=placeholders.add(placeholder);if(options.connectWith){$(options.connectWith).add(this).data("connectWith",options.connectWith)}items.attr("draggable","true").on("dragstart.h5s",function(e){if(options.handle&&!isHandle){return false}isHandle=false;var dt=e.originalEvent.dataTransfer;dt.effectAllowed="move";dt.setData("Text","dummy");index=(dragging=$(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){if(!dragging){return}dragging.removeClass("sortable-dragging").show();placeholders.detach();if(index!=dragging.index()){dragging.parent().trigger("sortupdate",{item:dragging})}dragging=null}).not("a[href], img").on("selectstart.h5s",function(){this.dragDrop&&this.dragDrop();return false}).end().add([this,placeholder]).on("dragover.h5s dragenter.h5s drop.h5s",function(e){if(!items.is(dragging)&&options.connectWith!==$(dragging).parent().data("connectWith")){return true}if(e.type=="drop"){e.stopPropagation();placeholders.filter(":visible").after(dragging);dragging.trigger("dragend.h5s");return false}e.preventDefault();e.originalEvent.dataTransfer.dropEffect="move";if(items.is(this)){if(options.forcePlaceholderSize){placeholder.height(dragging.outerHeight())}dragging.hide();$(this)[placeholder.index()<$(this).index()?"after":"before"](placeholder);placeholders.not(placeholder).detach()}else if(!placeholders.is(this)&&!$(this).children(options.items).length){placeholders.detach();$(this).append(placeholder)}return false})})}})(jQuery);(function(e,t,n,r){"use strict";function l(e){if(typeof e=="string"||e instanceof String)e=e.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"");return e}var i=function(t){var n=t.length;while(n--)e("head").has("."+t[n]).length===0&&e("head").append('<meta class="'+t[n]+'">')};i(["foundation-mq-small","foundation-mq-medium","foundation-mq-large","foundation-mq-xlarge","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),e(function(){typeof FastClick!="undefined"&&typeof n.body!="undefined"&&FastClick.attach(n.body)});var s=function(t,r){if(typeof t=="string"){if(r){var i;return r.jquery?i=r[0]:i=r,e(i.querySelectorAll(t))}return e(n.querySelectorAll(t))}return e(t,r)},o=function(e){var t=[];return e||t.push("data"),this.namespace.length>0&&t.push(this.namespace),t.push(this.name),t.join("-")},i=function(t){var n=t.length;while(n--)e("head").has("."+t[n]).length===0&&e("head").append('<meta class="'+t[n]+'">')},u=function(e){var t=e.split("-"),n=t.length,r=[];while(n--)n!==0?r.push(t[n]):this.namespace.length>0?r.push(this.namespace,t[n]):r.push(t[n]);return r.reverse().join("-")},a=function(t,n){var r=this,i=!s(this).data(this.attr_name(!0));if(typeof t=="string")return this[t].call(this,n);s(this.scope).is("["+this.attr_name()+"]")?(s(this.scope).data(this.attr_name(!0)+"-init",e.extend({},this.settings,n||t,this.data_options(s(this.scope)))),i&&this.events(this.scope)):s("["+this.attr_name()+"]",this.scope).each(function(){var i=!s(this).data(r.attr_name(!0)+"-init");s(this).data(r.attr_name(!0)+"-init",e.extend({},r.settings,n||t,r.data_options(s(this)))),i&&r.events(this)})},f=function(e,t){function n(){t(e[0])}function r(){this.one("load",n);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var e=this.attr("src"),t=e.match(/\?/)?"&":"?";t+="random="+(new Date).getTime(),this.attr("src",e+t)}}if(!e.attr("src")){n();return}e[0].complete||e[0].readyState===4?n():r.call(e)};t.matchMedia=t.matchMedia||function(e,t){var n,r=e.documentElement,i=r.firstElementChild||r.firstChild,s=e.createElement("body"),o=e.createElement("div");return o.id="mq-test-1",o.style.cssText="position:absolute;top:-100em",s.style.background="none",s.appendChild(o),function(e){return o.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',r.insertBefore(s,i),n=o.offsetWidth===42,r.removeChild(s),{matches:n,media:e}}}(n),function(e){function u(){n&&(s(u),jQuery.fx.tick())}var n,r=0,i=["webkit","moz"],s=t.requestAnimationFrame,o=t.cancelAnimationFrame;for(;r<i.length&&!s;r++)s=t[i[r]+"RequestAnimationFrame"],o=o||t[i[r]+"CancelAnimationFrame"]||t[i[r]+"CancelRequestAnimationFrame"];s?(t.requestAnimationFrame=s,t.cancelAnimationFrame=o,jQuery.fx.timer=function(e){e()&&jQuery.timers.push(e)&&!n&&(n=!0,u())},jQuery.fx.stop=function(){n=!1}):(t.requestAnimationFrame=function(e,n){var i=(new Date).getTime(),s=Math.max(0,16-(i-r)),o=t.setTimeout(function(){e(i+s)},s);return r=i+s,o},t.cancelAnimationFrame=function(e){clearTimeout(e)})}(jQuery),t.Foundation={name:"Foundation",version:"5.1.1",media_queries:{small:s(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:s(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:s(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:s(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:s(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:e("<style></style>").appendTo("head")[0].sheet,global:{namespace:""},init:function(e,t,n,r,i){var o,u=[e,n,r,i],a=[];this.rtl=/rtl/i.test(s("html").attr("dir")),this.scope=e||this.scope,this.set_namespace();if(t&&typeof t=="string"&&!/reflow/i.test(t))this.libs.hasOwnProperty(t)&&a.push(this.init_lib(t,u));else for(var f in this.libs)a.push(this.init_lib(f,t));return e},init_lib:function(e,t){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),t&&t.hasOwnProperty(e)?this.libs[e].init.apply(this.libs[e],[this.scope,t[e]]):(t=t instanceof Array?t:Array(t),this.libs[e].init.apply(this.libs[e],t))):function(){}},patch:function(e){e.scope=this.scope,e.namespace=this.global.namespace,e.rtl=this.rtl,e.data_options=this.utils.data_options,e.attr_name=o,e.add_namespace=u,e.bindings=a,e.S=this.utils.S},inherit:function(e,t){var n=t.split(" "),r=n.length;while(r--)this.utils.hasOwnProperty(n[r])&&(e[n[r]]=this.utils[n[r]])},set_namespace:function(){var t=e(".foundation-data-attribute-namespace").css("font-family");if(/false/i.test(t))return;this.global.namespace=t},libs:{},utils:{S:s,throttle:function(e,t){var n=null;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(r,i)},t)}},debounce:function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},data_options:function(t){function a(e){return!isNaN(e-0)&&e!==null&&e!==""&&e!==!1&&e!==!0}function f(t){return typeof t=="string"?e.trim(t):t}var n={},r,i,s,o=function(e){var t=Foundation.global.namespace;return t.length>0?e.data(t+"-options"):e.data("options")},u=o(t);if(typeof u=="object")return u;s=(u||":").split(";"),r=s.length;while(r--)i=s[r].split(":"),/true/i.test(i[1])&&(i[1]=!0),/false/i.test(i[1])&&(i[1]=!1),a(i[1])&&(i[1]=parseInt(i[1],10)),i.length===2&&i[0].length>0&&(n[f(i[0])]=f(i[1]));return n},register_media:function(t,n){Foundation.media_queries[t]===r&&(e("head").append('<meta class="'+n+'">'),Foundation.media_queries[t]=l(e("."+n).css("font-family")))},add_custom_rule:function(e,t){if(t===r)Foundation.stylesheet.insertRule(e,Foundation.stylesheet.cssRules.length);else{var n=Foundation.media_queries[t];n!==r&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[t]+"{ "+e+" }")}},image_loaded:function(e,t){var n=this,r=e.length;e.each(function(){f(n.S(this),function(){r-=1,r==0&&t(e)})})},random_str:function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));var n="";while(e--)n+=t[Math.floor(Math.random()*t.length)];return n}}},e.fn.foundation=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(e)),this})}})(jQuery,this,this.document),function(e,t,n,r){"use strict";Foundation.libs.offcanvas={name:"offcanvas",version:"5.1.1",settings:{},init:function(e,t,n){this.events()},events:function(){var e=this.S;e(this.scope).off(".offcanvas").on("click.fndtn.offcanvas",".left-off-canvas-toggle",function(t){t.preventDefault(),e(this).closest(".off-canvas-wrap").toggleClass("move-right")}).on("click.fndtn.offcanvas",".exit-off-canvas",function(t){t.preventDefault(),e(".off-canvas-wrap").removeClass("move-right")}).on("click.fndtn.offcanvas",".right-off-canvas-toggle",function(t){t.preventDefault(),e(this).closest(".off-canvas-wrap").toggleClass("move-left")}).on("click.fndtn.offcanvas",".exit-off-canvas",function(t){t.preventDefault(),e(".off-canvas-wrap").removeClass("move-left")})},reflow:function(){}}}(jQuery,this,this.document);(function(){"use strict";function FastClick(layer,options){var oldOnClick;options=options||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=options.touchBoundary||10;this.layer=layer;this.tapDelay=options.tapDelay||200;if(FastClick.notNeeded(layer)){return}function bind(method,context){return function(){return method.apply(context,arguments)}}var methods=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"];var context=this;for(var i=0,l=methods.length;i<l;i++){context[methods[i]]=bind(context[methods[i]],context)}if(deviceIsAndroid){layer.addEventListener("mouseover",this.onMouse,true);layer.addEventListener("mousedown",this.onMouse,true);layer.addEventListener("mouseup",this.onMouse,true)}layer.addEventListener("click",this.onClick,true);layer.addEventListener("touchstart",this.onTouchStart,false);layer.addEventListener("touchmove",this.onTouchMove,false);layer.addEventListener("touchend",this.onTouchEnd,false);layer.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){layer.removeEventListener=function(type,callback,capture){var rmv=Node.prototype.removeEventListener;if(type==="click"){rmv.call(layer,type,callback.hijacked||callback,capture)}else{rmv.call(layer,type,callback,capture)}};layer.addEventListener=function(type,callback,capture){var adv=Node.prototype.addEventListener;if(type==="click"){adv.call(layer,type,callback.hijacked||(callback.hijacked=function(event){if(!event.propagationStopped){callback(event)}}),capture)}else{adv.call(layer,type,callback,capture)}}}if(typeof layer.onclick==="function"){oldOnClick=layer.onclick;layer.addEventListener("click",function(event){oldOnClick(event)},false);layer.onclick=null}}var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0;var deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent);var deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent);var deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);var deviceIsBlackBerry10=navigator.userAgent.indexOf("BB10")>0;FastClick.prototype.needsClick=function(target){switch(target.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(target.disabled){return true}break;case"checkbox":if(deviceIsIOS&&target.type==="file"||target.disabled){return true}break;case"input":if(deviceIsIOS&&target.type==="file"||this.deviceIsIOS7&&target.type==="checkbox"||target.disabled){return true}break;case"label":case"video":return true}return/\bneedsclick\b/.test(target.className)};FastClick.prototype.needsFocus=function(target){switch(target.nodeName.toLowerCase()){case"textarea":return true;case"select":return!deviceIsAndroid;case"input":switch(target.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return!target.disabled&&!target.readOnly;default:return/\bneedsfocus\b/.test(target.className)}};FastClick.prototype.sendClick=function(targetElement,event){var clickEvent,touch;if(document.activeElement&&document.activeElement!==targetElement){document.activeElement.blur()}touch=event.changedTouches[0];clickEvent=document.createEvent("MouseEvents");clickEvent.initMouseEvent(this.determineEventType(targetElement),true,true,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,false,false,false,false,0,null);clickEvent.forwardedTouchEvent=true;targetElement.dispatchEvent(clickEvent)};FastClick.prototype.determineEventType=function(targetElement){if(deviceIsAndroid&&targetElement.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};FastClick.prototype.focus=function(targetElement){var length;if(deviceIsIOS&&targetElement.setSelectionRange&&targetElement.type.indexOf("date")!==0&&targetElement.type!=="time"){length=targetElement.value.length;targetElement.setSelectionRange(length,length)}else{targetElement.focus()}};FastClick.prototype.updateScrollParent=function(targetElement){var scrollParent,parentElement;scrollParent=targetElement.fastClickScrollParent;if(!scrollParent||!scrollParent.contains(targetElement)){parentElement=targetElement;do{if(parentElement.scrollHeight>parentElement.offsetHeight){scrollParent=parentElement;targetElement.fastClickScrollParent=parentElement;break}parentElement=parentElement.parentElement}while(parentElement)}if(scrollParent){scrollParent.fastClickLastScrollTop=scrollParent.scrollTop}};FastClick.prototype.getTargetElementFromEventTarget=function(eventTarget){if(eventTarget.nodeType===Node.TEXT_NODE){return eventTarget.parentNode}return eventTarget};FastClick.prototype.onTouchStart=function(event){var targetElement,touch,selection;if(event.targetTouches.length>1){return true}targetElement=this.getTargetElementFromEventTarget(event.target);touch=event.targetTouches[0];if(deviceIsIOS){selection=window.getSelection();if(selection.rangeCount&&!selection.isCollapsed){return true}if(!deviceIsIOS4){if(touch.identifier&&touch.identifier===this.lastTouchIdentifier){event.preventDefault();return false}this.lastTouchIdentifier=touch.identifier;this.updateScrollParent(targetElement)}}this.trackingClick=true;this.trackingClickStart=event.timeStamp;this.targetElement=targetElement;this.touchStartX=touch.pageX;this.touchStartY=touch.pageY;if(event.timeStamp-this.lastClickTime<this.tapDelay){event.preventDefault()}return true};FastClick.prototype.touchHasMoved=function(event){var touch=event.changedTouches[0],boundary=this.touchBoundary;if(Math.abs(touch.pageX-this.touchStartX)>boundary||Math.abs(touch.pageY-this.touchStartY)>boundary){return true}return false};FastClick.prototype.onTouchMove=function(event){if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(event.target)||this.touchHasMoved(event)){this.trackingClick=false;this.targetElement=null}return true};FastClick.prototype.findControl=function(labelElement){if(labelElement.control!==undefined){return labelElement.control}if(labelElement.htmlFor){return document.getElementById(labelElement.htmlFor)}return labelElement.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};FastClick.prototype.onTouchEnd=function(event){var forElement,trackingClickStart,targetTagName,scrollParent,touch,targetElement=this.targetElement;if(!this.trackingClick){return true}if(event.timeStamp-this.lastClickTime<this.tapDelay){this.cancelNextClick=true;return true}this.cancelNextClick=false;this.lastClickTime=event.timeStamp;trackingClickStart=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(deviceIsIOSWithBadTarget){touch=event.changedTouches[0];targetElement=document.elementFromPoint(touch.pageX-window.pageXOffset,touch.pageY-window.pageYOffset)||targetElement;targetElement.fastClickScrollParent=this.targetElement.fastClickScrollParent}targetTagName=targetElement.tagName.toLowerCase();if(targetTagName==="label"){forElement=this.findControl(targetElement);if(forElement){this.focus(targetElement);if(deviceIsAndroid){return false}targetElement=forElement}}else if(this.needsFocus(targetElement)){if(event.timeStamp-trackingClickStart>100||deviceIsIOS&&window.top!==window&&targetTagName==="input"){this.targetElement=null;return false}this.focus(targetElement);this.sendClick(targetElement,event);if(!deviceIsIOS||targetTagName!=="select"){this.targetElement=null;event.preventDefault()}return false}if(deviceIsIOS&&!deviceIsIOS4){scrollParent=targetElement.fastClickScrollParent;if(scrollParent&&scrollParent.fastClickLastScrollTop!==scrollParent.scrollTop){return true}}if(!this.needsClick(targetElement)){event.preventDefault();this.sendClick(targetElement,event)}return false};FastClick.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};FastClick.prototype.onMouse=function(event){if(!this.targetElement){return true}if(event.forwardedTouchEvent){return true}if(!event.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(event.stopImmediatePropagation){event.stopImmediatePropagation()}else{event.propagationStopped=true}event.stopPropagation();event.preventDefault();return false}return true};FastClick.prototype.onClick=function(event){var permitted;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(event.target.type==="submit"&&event.detail===0){return true}permitted=this.onMouse(event);if(!permitted){this.targetElement=null}return permitted};FastClick.prototype.destroy=function(){var layer=this.layer;if(deviceIsAndroid){layer.removeEventListener("mouseover",this.onMouse,true);layer.removeEventListener("mousedown",this.onMouse,true);layer.removeEventListener("mouseup",this.onMouse,true)}layer.removeEventListener("click",this.onClick,true);layer.removeEventListener("touchstart",this.onTouchStart,false);layer.removeEventListener("touchmove",this.onTouchMove,false);layer.removeEventListener("touchend",this.onTouchEnd,false);layer.removeEventListener("touchcancel",this.onTouchCancel,false)};FastClick.notNeeded=function(layer){var metaViewport;var chromeVersion;var blackberryVersion;if(typeof window.ontouchstart==="undefined"){return true}chromeVersion=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(chromeVersion){if(deviceIsAndroid){metaViewport=document.querySelector("meta[name=viewport]");if(metaViewport){if(metaViewport.content.indexOf("user-scalable=no")!==-1){return true}if(chromeVersion>31&&document.documentElement.scrollWidth<=window.outerWidth){return true}}}else{return true}}if(deviceIsBlackBerry10){blackberryVersion=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(blackberryVersion[1]>=10&&blackberryVersion[2]>=3){metaViewport=document.querySelector("meta[name=viewport]");if(metaViewport){if(metaViewport.content.indexOf("user-scalable=no")!==-1){return true}if(document.documentElement.scrollWidth<=window.outerWidth){return true}}}}if(layer.style.msTouchAction==="none"){return true}return false};FastClick.attach=function(layer,options){return new FastClick(layer,options)};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(function(){return FastClick})}else if(typeof module!=="undefined"&&module.exports){module.exports=FastClick.attach;module.exports.FastClick=FastClick}else{window.FastClick=FastClick}})();md5=function(){var k=[],i=0;for(;i<64;){k[i]=0|Math.abs(Math.sin(++i))*4294967296}function calcMD5(str){var b,c,d,j,x=[],str2=unescape(encodeURI(str)),a=str2.length,h=[b=1732584193,c=-271733879,~b,~c],i=0;for(;i<=a;)x[i>>2]|=(str2.charCodeAt(i)||128)<<8*(i++%4);x[str=(a+8>>6)*16+14]=a*8;i=0;for(;i<str;i+=16){a=h;j=0;for(;j<64;){a=[d=a[3],(b=a[1]|0)+((d=a[0]+[b&(c=a[2])|~b&d,d&b|~d&c,b^c^d,c^(b|~d)][a=j>>4]+(k[j]+(x[[j,5*j+1,3*j+5,7*j][a]%16+i]|0)))<<(a=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*a+j++%4])|d>>>32-a),b,c]}for(j=4;j;)h[--j]=h[j]+a[j]}str="";for(;j<32;)str+=(h[j>>3]>>(1^j++&7)*4&15).toString(16);return str}return calcMD5}();(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.moment=factory()})(this,function(){"use strict";var hookCallback;function utils_hooks__hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(callback){hookCallback=callback}function isArray(input){return input instanceof Array||Object.prototype.toString.call(input)==="[object Array]"}function isObject(input){return Object.prototype.toString.call(input)==="[object Object]"}function isObjectEmpty(obj){var k;for(k in obj){return false}return true}function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==="[object Date]"}function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i))}return res}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i]}}if(hasOwnProp(b,"toString")){a.toString=b.toString}if(hasOwnProp(b,"valueOf")){a.valueOf=b.valueOf}return a}function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc()}function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null}}function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags()}return m._pf}var some;if(Array.prototype.some){some=Array.prototype.some}else{some=function(fun){var t=Object(this);var len=t.length>>>0;for(var i=0;i<len;i++){if(i in t&&fun.call(this,t[i],i,t)){return true}}return false}}function valid__isValid(m){if(m._isValid==null){var flags=getParsingFlags(m);var parsedParts=some.call(flags.parsedDateParts,function(i){return i!=null});m._isValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||flags.meridiem&&parsedParts);if(m._strict){m._isValid=m._isValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined}}return m._isValid}function valid__createInvalid(flags){var m=create_utc__createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags)}else{getParsingFlags(m).userInvalidated=true}return m}function isUndefined(input){return input===void 0}var momentProperties=utils_hooks__hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(!isUndefined(from._isAMomentObject)){to._isAMomentObject=from._isAMomentObject}if(!isUndefined(from._i)){to._i=from._i}if(!isUndefined(from._f)){to._f=from._f}if(!isUndefined(from._l)){to._l=from._l}if(!isUndefined(from._strict)){to._strict=from._strict}if(!isUndefined(from._tzm)){to._tzm=from._tzm}if(!isUndefined(from._isUTC)){to._isUTC=from._isUTC}if(!isUndefined(from._offset)){to._offset=from._offset}if(!isUndefined(from._pf)){to._pf=getParsingFlags(from)}if(!isUndefined(from._locale)){to._locale=from._locale}if(momentProperties.length>0){for(i in momentProperties){prop=momentProperties[i];val=from[prop];if(!isUndefined(val)){to[prop]=val}}}return to}var updateInProgress=false;function Moment(config){copyConfig(this,config);this._d=new Date(config._d!=null?config._d.getTime():NaN);if(updateInProgress===false){updateInProgress=true;utils_hooks__hooks.updateOffset(this);updateInProgress=false}}function isMoment(obj){return obj instanceof Moment||obj!=null&&obj._isAMomentObject!=null}function absFloor(number){if(number<0){return Math.ceil(number)||0}else{return Math.floor(number)}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){value=absFloor(coercedNumber)}return value}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i])){diffs++}}return diffs+lengthDiff}function warn(msg){if(utils_hooks__hooks.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+msg)}}function deprecate(msg,fn){var firstTime=true;return extend(function(){if(utils_hooks__hooks.deprecationHandler!=null){utils_hooks__hooks.deprecationHandler(null,msg)}if(firstTime){warn(msg+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack);firstTime=false}return fn.apply(this,arguments)},fn)}var deprecations={};function deprecateSimple(name,msg){if(utils_hooks__hooks.deprecationHandler!=null){utils_hooks__hooks.deprecationHandler(name,msg)}if(!deprecations[name]){warn(msg);deprecations[name]=true}}utils_hooks__hooks.suppressDeprecationWarnings=false;utils_hooks__hooks.deprecationHandler=null;function isFunction(input){return input instanceof Function||Object.prototype.toString.call(input)==="[object Function]"}function locale_set__set(config){var prop,i;for(i in config){prop=config[i];if(isFunction(prop)){this[i]=prop}else{this["_"+i]=prop}}this._config=config;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function mergeConfigs(parentConfig,childConfig){var res=extend({},parentConfig),prop;for(prop in childConfig){if(hasOwnProp(childConfig,prop)){if(isObject(parentConfig[prop])&&isObject(childConfig[prop])){res[prop]={};extend(res[prop],parentConfig[prop]);extend(res[prop],childConfig[prop])}else if(childConfig[prop]!=null){res[prop]=childConfig[prop]}else{delete res[prop]}}}for(prop in parentConfig){if(hasOwnProp(parentConfig,prop)&&!hasOwnProp(childConfig,prop)&&isObject(parentConfig[prop])){res[prop]=extend({},res[prop])}}return res}function Locale(config){if(config!=null){this.set(config)}}var keys;if(Object.keys){keys=Object.keys}else{keys=function(obj){var i,res=[];for(i in obj){if(hasOwnProp(obj,i)){res.push(i)}}return res}}var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function locale_calendar__calendar(key,mom,now){var output=this._calendar[key]||this._calendar["sameElse"];return isFunction(output)?output.call(mom,now):output}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];if(format||!formatUpper){return format}this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)});return this._longDateFormat[key]}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d";var defaultOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace("%d",number)}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relative__relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return isFunction(output)?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return isFunction(format)?format(output):format.replace(/%s/i,output)}var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return typeof units==="string"?aliases[units]||aliases[units.toLowerCase()]:undefined}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop]}}}return normalizedInput}var priorities={};function addUnitPriority(unit,priority){priorities[unit]=priority}function getPrioritizedUnits(unitsObj){var units=[];for(var u in unitsObj){units.push({unit:u,priority:priorities[u]})}units.sort(function(a,b){return a.priority-b.priority});return units}function makeGetSet(unit,keepTime){return function(value){if(value!=null){get_set__set(this,unit,value);utils_hooks__hooks.updateOffset(this,keepTime);return this}else{return get_set__get(this,unit)}}}function get_set__get(mom,unit){return mom.isValid()?mom._d["get"+(mom._isUTC?"UTC":"")+unit]():NaN}function get_set__set(mom,unit,value){if(mom.isValid()){mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}}function stringGet(units){units=normalizeUnits(units);if(isFunction(this[units])){return this[units]()}return this}function stringSet(units,value){if(typeof units==="object"){units=normalizeObjectUnits(units);var prioritized=getPrioritizedUnits(units);for(var i=0;i<prioritized.length;i++){this[prioritized[i].unit](units[prioritized[i].unit])}}else{units=normalizeUnits(units);if(isFunction(this[units])){return this[units](value)}}return this}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var formatFunctions={};var formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==="string"){func=function(){return this[callback]()}}if(token){formatTokenFunctions[token]=func}if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}}if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)}}}function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,"")}return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]]}else{array[i]=removeFormattingTokens(array[i])}}return function(mom){var output="",i;for(i=0;i<length;i++){output+=array[i]instanceof Function?array[i].call(mom,format):array[i]}return output}}function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate()}format=expandFormat(format,m.localeData());formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format);return formatFunctions[format](m)}function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1}return format}var match1=/\d/;var match2=/\d\d/;var match3=/\d{3}/;var match4=/\d{4}/;var match6=/[+-]?\d{6}/;var match1to2=/\d\d?/;var match3to4=/\d\d\d\d?/;var match5to6=/\d\d\d\d\d\d?/;var match1to3=/\d{1,3}/;var match1to4=/\d{1,4}/;var match1to6=/[+-]?\d{1,6}/;var matchUnsigned=/\d+/;var matchSigned=/[+-]?\d+/;var matchOffset=/Z|[+-]\d\d:?\d\d/gi;var matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi;var matchTimestamp=/[+-]?\d+(\.\d{1,3})?/;var matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var regexes={};function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token))}return regexes[token](config._strict,config._locale)}function unescapeFormat(s){return regexEscape(s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}))}function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==="string"){token=[token]}if(typeof callback==="number"){func=function(input,array){array[callback]=toInt(input)}}for(i=0;i<token.length;i++){tokens[token[i]]=func}}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token)}}var YEAR=0;var MONTH=1;var DATE=2;var HOUR=3;var MINUTE=4;var SECOND=5;var MILLISECOND=6;var WEEK=7;var WEEKDAY=8;var indexOf;if(Array.prototype.indexOf){indexOf=Array.prototype.indexOf}else{indexOf=function(o){var i;for(i=0;i<this.length;++i){if(this[i]===o){return i}}return-1}}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1});addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)});addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)});addUnitAlias("month","M");addUnitPriority("month",8);addRegexToken("M",match1to2);addRegexToken("MM",match1to2,match2);addRegexToken("MMM",function(isStrict,locale){return locale.monthsShortRegex(isStrict)});addRegexToken("MMMM",function(isStrict,locale){return locale.monthsRegex(isStrict)});addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1});addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month}else{getParsingFlags(config).invalidMonth=input}});var MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/;var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function localeMonths(m,format){return isArray(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(format)?"format":"standalone"][m.month()]}var defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function localeMonthsShort(m,format){return isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?"format":"standalone"][m.month()]}function units_month__handleStrictParse(monthName,format,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(i=0;i<12;++i){mom=create_utc__createUTC([2e3,i]);this._shortMonthsParse[i]=this.monthsShort(mom,"").toLocaleLowerCase();this._longMonthsParse[i]=this.months(mom,"").toLocaleLowerCase()}}if(strict){if(format==="MMM"){ii=indexOf.call(this._shortMonthsParse,llc);return ii!==-1?ii:null}else{ii=indexOf.call(this._longMonthsParse,llc);return ii!==-1?ii:null}}else{if(format==="MMM"){ii=indexOf.call(this._shortMonthsParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._longMonthsParse,llc);return ii!==-1?ii:null}else{ii=indexOf.call(this._longMonthsParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._shortMonthsParse,llc);return ii!==-1?ii:null}}}function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(this._monthsParseExact){return units_month__handleStrictParse.call(this,monthName,format,strict)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(i=0;i<12;i++){mom=create_utc__createUTC([2e3,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i");this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")}if(!strict&&!this._monthsParse[i]){regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,"");this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")}if(strict&&format==="MMMM"&&this._longMonthsParse[i].test(monthName)){return i}else if(strict&&format==="MMM"&&this._shortMonthsParse[i].test(monthName)){return i}else if(!strict&&this._monthsParse[i].test(monthName)){return i}}}function setMonth(mom,value){var dayOfMonth;if(!mom.isValid()){return mom}if(typeof value==="string"){if(/^\d+$/.test(value)){value=toInt(value)}else{value=mom.localeData().monthsParse(value);if(typeof value!=="number"){return mom}}}dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth);return mom}function getSetMonth(value){if(value!=null){setMonth(this,value);utils_hooks__hooks.updateOffset(this,true);return this}else{return get_set__get(this,"Month")}}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}var defaultMonthsShortRegex=matchWord;function monthsShortRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,"_monthsRegex")){computeMonthsParse.call(this)}if(isStrict){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!hasOwnProp(this,"_monthsShortRegex")){this._monthsShortRegex=defaultMonthsShortRegex}return this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex}}var defaultMonthsRegex=matchWord;function monthsRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,"_monthsRegex")){computeMonthsParse.call(this)}if(isStrict){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!hasOwnProp(this,"_monthsRegex")){this._monthsRegex=defaultMonthsRegex}return this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex}}function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length}var shortPieces=[],longPieces=[],mixedPieces=[],i,mom;for(i=0;i<12;i++){mom=create_utc__createUTC([2e3,i]);shortPieces.push(this.monthsShort(mom,""));longPieces.push(this.months(mom,""));mixedPieces.push(this.months(mom,""));mixedPieces.push(this.monthsShort(mom,""))}shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<12;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i])}for(i=0;i<24;i++){mixedPieces[i]=regexEscape(mixedPieces[i])}this._monthsRegex=new RegExp("^("+mixedPieces.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+longPieces.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i")}addFormatToken("Y",0,0,function(){var y=this.year();return y<=9999?""+y:"+"+y});addFormatToken(0,["YY",2],0,function(){return this.year()%100});addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,true],0,"year");addUnitAlias("year","y");addUnitPriority("year",1);addRegexToken("Y",matchSigned);addRegexToken("YY",match1to2,match2);addRegexToken("YYYY",match1to4,match4);addRegexToken("YYYYY",match1to6,match6);addRegexToken("YYYYYY",match1to6,match6);addParseToken(["YYYYY","YYYYYY"],YEAR);addParseToken("YYYY",function(input,array){array[YEAR]=input.length===2?utils_hooks__hooks.parseTwoDigitYear(input):toInt(input)});addParseToken("YY",function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input)});addParseToken("Y",function(input,array){array[YEAR]=parseInt(input,10)});function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",true);function getIsLeapYear(){return isLeapYear(this.year())}function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<100&&y>=0&&isFinite(date.getFullYear())){date.setFullYear(y)}return date}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<100&&y>=0&&isFinite(date.getUTCFullYear())){date.setUTCFullYear(y)}return date}function firstWeekOffset(year,dow,doy){var fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1}function dayOfYearFromWeeks(year,week,weekday,dow,doy){var localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset,resYear,resDayOfYear;if(dayOfYear<=0){resYear=year-1;resDayOfYear=daysInYear(resYear)+dayOfYear}else if(dayOfYear>daysInYear(year)){resYear=year+1;resDayOfYear=dayOfYear-daysInYear(year)}else{resYear=year;resDayOfYear=dayOfYear}return{year:resYear,dayOfYear:resDayOfYear}}function weekOfYear(mom,dow,doy){var weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1,resWeek,resYear;if(week<1){resYear=mom.year()-1;resWeek=week+weeksInYear(resYear,dow,doy)}else if(week>weeksInYear(mom.year(),dow,doy)){resWeek=week-weeksInYear(mom.year(),dow,doy);resYear=mom.year()+1}else{resYear=mom.year();resWeek=week}return{week:resWeek,year:resYear}}function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7}addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addUnitAlias("week","w");addUnitAlias("isoWeek","W");addUnitPriority("week",5);addUnitPriority("isoWeek",5);addRegexToken("w",match1to2);addRegexToken("ww",match1to2,match2);addRegexToken("W",match1to2);addRegexToken("WW",match1to2,match2);addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,"d")}addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)});addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)});addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)});addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addUnitAlias("day","d");addUnitAlias("weekday","e");addUnitAlias("isoWeekday","E");addUnitPriority("day",11);addUnitPriority("weekday",11);addUnitPriority("isoWeekday",11);addRegexToken("d",match1to2);addRegexToken("e",match1to2);addRegexToken("E",match1to2);addRegexToken("dd",function(isStrict,locale){return locale.weekdaysMinRegex(isStrict)});addRegexToken("ddd",function(isStrict,locale){return locale.weekdaysShortRegex(isStrict)});addRegexToken("dddd",function(isStrict,locale){return locale.weekdaysRegex(isStrict)});addWeekParseToken(["dd","ddd","dddd"],function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);if(weekday!=null){week.d=weekday}else{getParsingFlags(config).invalidWeekday=input}});addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});function parseWeekday(input,locale){if(typeof input!=="string"){return input}if(!isNaN(input)){return parseInt(input,10)}input=locale.weekdaysParse(input);if(typeof input==="number"){return input}return null}function parseIsoWeekday(input,locale){if(typeof input==="string"){return locale.weekdaysParse(input)%7||7}return isNaN(input)?null:input}var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function localeWeekdays(m,format){return isArray(this._weekdays)?this._weekdays[m.day()]:this._weekdays[this._weekdays.isFormat.test(format)?"format":"standalone"][m.day()]}var defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function localeWeekdaysShort(m){return this._weekdaysShort[m.day()]}var defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function localeWeekdaysMin(m){return this._weekdaysMin[m.day()]}function day_of_week__handleStrictParse(weekdayName,format,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(i=0;i<7;++i){mom=create_utc__createUTC([2e3,1]).day(i);this._minWeekdaysParse[i]=this.weekdaysMin(mom,"").toLocaleLowerCase();this._shortWeekdaysParse[i]=this.weekdaysShort(mom,"").toLocaleLowerCase();this._weekdaysParse[i]=this.weekdays(mom,"").toLocaleLowerCase()}}if(strict){if(format==="dddd"){ii=indexOf.call(this._weekdaysParse,llc);return ii!==-1?ii:null}else if(format==="ddd"){ii=indexOf.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null}else{ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null}}else{if(format==="dddd"){ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null}else if(format==="ddd"){ii=indexOf.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null}else{ii=indexOf.call(this._minWeekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null}}}function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(this._weekdaysParseExact){return day_of_week__handleStrictParse.call(this,weekdayName,format,strict)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(i=0;i<7;i++){mom=create_utc__createUTC([2e3,1]).day(i);if(strict&&!this._fullWeekdaysParse[i]){this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(mom,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(mom,"").replace(".",".?")+"$","i");this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(mom,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[i]){regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,"");this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")}if(strict&&format==="dddd"&&this._fullWeekdaysParse[i].test(weekdayName)){return i}else if(strict&&format==="ddd"&&this._shortWeekdaysParse[i].test(weekdayName)){return i}else if(strict&&format==="dd"&&this._minWeekdaysParse[i].test(weekdayName)){return i}else if(!strict&&this._weekdaysParse[i].test(weekdayName)){return i}}}function getSetDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN}var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,"d")}else{return day}}function getSetLocaleDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN}var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN}if(input!=null){var weekday=parseIsoWeekday(input,this.localeData());return this.day(this.day()%7?weekday:weekday-7)}else{return this.day()||7}}var defaultWeekdaysRegex=matchWord;function weekdaysRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(isStrict){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!hasOwnProp(this,"_weekdaysRegex")){this._weekdaysRegex=defaultWeekdaysRegex}return this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex}}var defaultWeekdaysShortRegex=matchWord;function weekdaysShortRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(isStrict){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!hasOwnProp(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=defaultWeekdaysShortRegex}return this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var defaultWeekdaysMinRegex=matchWord;function weekdaysMinRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(isStrict){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!hasOwnProp(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=defaultWeekdaysMinRegex}return this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length}var minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[],i,mom,minp,shortp,longp;for(i=0;i<7;i++){mom=create_utc__createUTC([2e3,1]).day(i);minp=this.weekdaysMin(mom,"");shortp=this.weekdaysShort(mom,"");longp=this.weekdays(mom,"");minPieces.push(minp);shortPieces.push(shortp);longPieces.push(longp);mixedPieces.push(minp);mixedPieces.push(shortp);mixedPieces.push(longp)}minPieces.sort(cmpLenRev);shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<7;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i]);mixedPieces[i]=regexEscape(mixedPieces[i])}this._weekdaysRegex=new RegExp("^("+mixedPieces.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+longPieces.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+minPieces.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,hFormat);addFormatToken("k",["kk",2],0,kFormat);addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)});addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)});addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}meridiem("a",true);meridiem("A",false);addUnitAlias("hour","h");addUnitPriority("hour",13);function matchMeridiem(isStrict,locale){return locale._meridiemParse}addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",match1to2);addRegexToken("h",match1to2);addRegexToken("HH",match1to2,match2);addRegexToken("hh",match1to2,match2);addRegexToken("hmm",match3to4);addRegexToken("hmmss",match5to6);addRegexToken("Hmm",match3to4);addRegexToken("Hmmss",match5to6);addParseToken(["H","HH"],HOUR);addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input});addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true});addParseToken("hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));getParsingFlags(config).bigHour=true});addParseToken("hmmss",function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));getParsingFlags(config).bigHour=true});addParseToken("Hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos))});addParseToken("Hmmss",function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2))});function localeIsPM(input){return(input+"").toLowerCase().charAt(0)==="p"}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?"pm":"PM"}else{return isLower?"am":"AM"}}var getSetHour=makeGetSet("Hours",true);var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,ordinalParse:defaultOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse};var locales={};var globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split("-");j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split("-"):null;while(j>0){locale=loadLocale(split.slice(0,j).join("-"));if(locale){return locale}if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break}j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&typeof module!=="undefined"&&module&&module.exports){try{oldLocale=globalLocale._abbr;require("./locale/"+name);locale_locales__getSetGlobalLocale(oldLocale)}catch(e){}}return locales[name]}function locale_locales__getSetGlobalLocale(key,values){var data;if(key){if(isUndefined(values)){data=locale_locales__getLocale(key)}else{data=defineLocale(key,values)}if(data){globalLocale=data}}return globalLocale._abbr}function defineLocale(name,config){if(config!==null){var parentConfig=baseConfig;config.abbr=name;if(locales[name]!=null){deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");parentConfig=locales[name]._config}else if(config.parentLocale!=null){if(locales[config.parentLocale]!=null){parentConfig=locales[config.parentLocale]._config}else{deprecateSimple("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")}}locales[name]=new Locale(mergeConfigs(parentConfig,config));locale_locales__getSetGlobalLocale(name);return locales[name]}else{delete locales[name];return null}}function updateLocale(name,config){if(config!=null){var locale,parentConfig=baseConfig;if(locales[name]!=null){parentConfig=locales[name]._config}config=mergeConfigs(parentConfig,config);locale=new Locale(config);locale.parentLocale=locales[name];locales[name]=locale;locale_locales__getSetGlobalLocale(name)}else{if(locales[name]!=null){if(locales[name].parentLocale!=null){locales[name]=locales[name].parentLocale}else if(locales[name]!=null){delete locales[name]}}}return locales[name]}function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr}if(!key){return globalLocale}if(!isArray(key)){locale=loadLocale(key);if(locale){return locale}key=[key]}return chooseLocale(key)}function locale_locales__listLocales(){return keys(locales)}function checkOverflow(m){var overflow;var a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0)?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE}if(getParsingFlags(m)._overflowWeeks&&overflow===-1){overflow=WEEK}if(getParsingFlags(m)._overflowWeekday&&overflow===-1){overflow=WEEKDAY}getParsingFlags(m).overflow=overflow}return m}var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;var basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;var tzRegex=/Z|[+-]\d\d(?::?\d\d)?/;var isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string),allowTime,dateFormat,timeFormat,tzFormat;if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0];allowTime=isoDates[i][2]!==false;break}}if(dateFormat==null){config._isValid=false;return}if(match[3]){for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||" ")+isoTimes[i][0];break}}if(timeFormat==null){config._isValid=false;return}}if(!allowTime&&timeFormat!=null){config._isValid=false;return}if(match[4]){if(tzRegex.exec(match[4])){tzFormat="Z"}else{config._isValid=false;return}}config._f=dateFormat+(timeFormat||"")+(tzFormat||"");configFromStringAndFormat(config)}else{config._isValid=false}}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return}configFromISO(config);if(config._isValid===false){delete config._isValid;utils_hooks__hooks.createFromInputFallback(config)}}utils_hooks__hooks.createFromInputFallback=deprecate("moment construction falls back to js Date. This is "+"discouraged and will be removed in upcoming major "+"release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))});function defaults(a,b,c){if(a!=null){return a}if(b!=null){return b}return c}function currentDateArray(config){var nowValue=new Date(utils_hooks__hooks.now());if(config._useUTC){return[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()]}return[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()]}function configFromArray(config){var i,date,input=[],currentDate,yearToUse;if(config._d){return}currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config)}if(config._dayOfYear){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)){getParsingFlags(config)._overflowDayOfYear=true}date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate()}for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i]}for(;i<7;i++){config._a[i]=input[i]=config._a[i]==null?i===2?1:0:config._a[i]}if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0}config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm)}if(config._nextDay){config._a[HOUR]=24}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1);if(weekday<1||weekday>7){weekdayOverflow=true}}else{dow=config._locale._week.dow;doy=config._locale._week.doy;weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year);week=defaults(w.w,1);if(w.d!=null){weekday=w.d;if(weekday<0||weekday>6){weekdayOverflow=true}}else if(w.e!=null){weekday=w.e+dow;if(w.e<0||w.e>6){weekdayOverflow=true}}else{weekday=dow}}if(week<1||week>weeksInYear(weekYear,dow,doy)){getParsingFlags(config)._overflowWeeks=true}else if(weekdayOverflow!=null){getParsingFlags(config)._overflowWeekday=true}else{temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear}}utils_hooks__hooks.ISO_8601=function(){};function configFromStringAndFormat(config){if(config._f===utils_hooks__hooks.ISO_8601){configFromISO(config);return}config._a=[];getParsingFlags(config).empty=true;var string=""+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped)}string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length}if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false}else{getParsingFlags(config).unusedTokens.push(token)}addTimeToArrayFromToken(token,parsedInput,config)}else if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token)}}getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string)}if(config._a[HOUR]<=12&&getParsingFlags(config).bigHour===true&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined}getParsingFlags(config).parsedDateParts=config._a.slice(0);getParsingFlags(config).meridiem=config._meridiem;config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);configFromArray(config);checkOverflow(config)}function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour}if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem)}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12}if(!isPm&&hour===12){hour=0}return hour}else{return hour}}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return}for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC}tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(!valid__isValid(tempConfig)){continue}currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig}}extend(config,bestMoment||tempConfig)}function configFromObject(config){if(config._d){return}var i=normalizeObjectUnits(config._i);config._a=map([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10)});configFromArray(config)}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));if(res._nextDay){res.add(1,"d");res._nextDay=undefined}return res}function prepareConfig(config){var input=config._i,format=config._f;config._locale=config._locale||locale_locales__getLocale(config._l);if(input===null||format===undefined&&input===""){return valid__createInvalid({nullInput:true})}if(typeof input==="string"){config._i=input=config._locale.preparse(input)}if(isMoment(input)){return new Moment(checkOverflow(input))}else if(isArray(format)){configFromStringAndArray(config)}else if(isDate(input)){config._d=input}else if(format){configFromStringAndFormat(config)}else{configFromInput(config)}if(!valid__isValid(config)){config._d=null}return config}function configFromInput(config){var input=config._i;if(input===undefined){config._d=new Date(utils_hooks__hooks.now())}else if(isDate(input)){config._d=new Date(input.valueOf())}else if(typeof input==="string"){configFromString(config)}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10)});configFromArray(config)}else if(typeof input==="object"){configFromObject(config)}else if(typeof input==="number"){config._d=new Date(input)}else{utils_hooks__hooks.createFromInputFallback(config)}}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(typeof locale==="boolean"){strict=locale;locale=undefined}if(isObject(input)&&isObjectEmpty(input)||isArray(input)&&input.length===0){input=undefined}c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c)}function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false)}var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=local__createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other<this?this:other}else{return valid__createInvalid()}});var prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=local__createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other>this?this:other}else{return valid__createInvalid()}});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0]}if(!moments.length){return local__createLocal()}res=moments[0];for(i=1;i<moments.length;++i){if(!moments[i].isValid()||moments[i][fn](res)){res=moments[i]}}return res}function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)}function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)}var now=function(){return Date.now?Date.now():+new Date};function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+seconds*1e3+minutes*6e4+hours*1e3*60*60;this._days=+days+weeks*7;this._months=+months+quarters*3+years*12;this._data={};this._locale=locale_locales__getLocale();this._bubble()}function isDuration(obj){return obj instanceof Duration}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset();var sign="+";if(offset<0){offset=-offset;sign="-"}return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}offset("Z",":");offset("ZZ","");addRegexToken("Z",matchShortOffset);addRegexToken("ZZ",matchShortOffset);addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(matchShortOffset,input)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(matcher,string){var matches=(string||"").match(matcher)||[];var chunk=matches[matches.length-1]||[];var parts=(chunk+"").match(chunkOffset)||["-",0,0];var minutes=+(parts[1]*60)+toInt(parts[2]);return parts[0]==="+"?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?input.valueOf():local__createLocal(input).valueOf())-res.valueOf();res._d.setTime(res._d.valueOf()+diff);utils_hooks__hooks.updateOffset(res,false);return res}else{return local__createLocal(input).local()}}function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset()/15)*15}utils_hooks__hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime){var offset=this._offset||0,localAdjust;if(!this.isValid()){return input!=null?this:NaN}if(input!=null){if(typeof input==="string"){input=offsetFromString(matchShortOffset,input)}else if(Math.abs(input)<16){input=input*60}if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this)}this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,"m")}if(offset!==input){if(!keepLocalTime||this._changeInProgress){add_subtract__addSubtract(this,create__createDuration(input-offset,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;utils_hooks__hooks.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?offset:getDateOffset(this)}}function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=="string"){input=-input}this.utcOffset(input,keepLocalTime);return this}else{return-this.utcOffset()}}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),"m")}}return this}function setOffsetToParsedOffset(){if(this._tzm){this.utcOffset(this._tzm)}else if(typeof this._i==="string"){this.utcOffset(offsetFromString(matchOffset,this._i))}return this}function hasAlignedHourOffset(input){if(!this.isValid()){return false}input=input?local__createLocal(input).utcOffset():0;return(this.utcOffset()-input)%60===0}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted)){return this._isDSTShifted}var c={};copyConfig(c,this);c=prepareConfig(c);if(c._a){var other=c._isUTC?create_utc__createUTC(c._a):local__createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function isLocal(){return this.isValid()?!this._isUTC:false}function isUtcOffset(){return this.isValid()?this._isUTC:false}function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:false}var aspNetRegex=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/;var isoRegex=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function create__createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months}}else if(typeof input==="number"){duration={};if(key){duration[key]=input}else{duration.milliseconds=input}}else if(!!(match=aspNetRegex.exec(input))){sign=match[1]==="-"?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}}else if(!!(match=isoRegex.exec(input))){sign=match[1]==="-"?-1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)}}else if(duration==null){duration={}}else if(typeof duration==="object"&&("from"in duration||"to"in duration)){diffRes=momentsDifference(local__createLocal(duration.from),local__createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months}ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,"_locale")){ret._locale=input._locale}return ret}create__createDuration.fn=Duration.prototype;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,"M").isAfter(other)){--res.months}res.milliseconds=+other-+base.clone().add(res.months,"M");return res}function momentsDifference(base,other){var res;if(!(base.isValid()&&other.isValid())){return{milliseconds:0,months:0}}other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other)}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months}return res}function absRound(number){if(number<0){return Math.round(-1*number)*-1}else{return Math.round(number)}}function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");tmp=val;val=period;period=tmp}val=typeof val==="string"?+val:val;dur=create__createDuration(val,period);add_subtract__addSubtract(this,dur,direction);return this}}function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);if(!mom.isValid()){return}updateOffset=updateOffset==null?true:updateOffset;if(milliseconds){mom._d.setTime(mom._d.valueOf()+milliseconds*isAdding)}if(days){get_set__set(mom,"Date",get_set__get(mom,"Date")+days*isAdding)}if(months){setMonth(mom,get_set__get(mom,"Month")+months*isAdding)}if(updateOffset){utils_hooks__hooks.updateOffset(mom,days||months)}}var add_subtract__add=createAdder(1,"add");var add_subtract__subtract=createAdder(-1,"subtract");function getCalendarFormat(myMoment,now){var diff=myMoment.diff(now,"days",true);return diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse"}function moment_calendar__calendar(time,formats){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf("day"),format=utils_hooks__hooks.calendarFormat(this,sod)||"sameElse";var output=formats&&(isFunction(formats[format])?formats[format].call(this,now):formats[format]);return this.format(output||this.localeData().calendar(format,this,local__createLocal(now)))}function clone(){return new Moment(this)}function isAfter(input,units){var localInput=isMoment(input)?input:local__createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false}units=normalizeUnits(!isUndefined(units)?units:"millisecond");if(units==="millisecond"){return this.valueOf()>localInput.valueOf()}else{return localInput.valueOf()<this.clone().startOf(units).valueOf()}}function isBefore(input,units){var localInput=isMoment(input)?input:local__createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false}units=normalizeUnits(!isUndefined(units)?units:"millisecond");if(units==="millisecond"){return this.valueOf()<localInput.valueOf()}else{return this.clone().endOf(units).valueOf()<localInput.valueOf()}}function isBetween(from,to,units,inclusivity){inclusivity=inclusivity||"()";return(inclusivity[0]==="("?this.isAfter(from,units):!this.isBefore(from,units))&&(inclusivity[1]===")"?this.isBefore(to,units):!this.isAfter(to,units))}function isSame(input,units){var localInput=isMoment(input)?input:local__createLocal(input),inputMs;if(!(this.isValid()&&localInput.isValid())){return false}units=normalizeUnits(units||"millisecond");if(units==="millisecond"){return this.valueOf()===localInput.valueOf()}else{inputMs=localInput.valueOf();return this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf()}}function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units)}function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units)}function diff(input,units,asFloat){var that,zoneDelta,delta,output;if(!this.isValid()){return NaN}that=cloneWithOffset(input,this);if(!that.isValid()){return NaN}zoneDelta=(that.utcOffset()-this.utcOffset())*6e4;units=normalizeUnits(units);if(units==="year"||units==="month"||units==="quarter"){output=monthDiff(this,that);if(units==="quarter"){output=output/3}else if(units==="year"){output=output/12}}else{delta=this-that;output=units==="second"?delta/1e3:units==="minute"?delta/6e4:units==="hour"?delta/36e5:units==="day"?(delta-zoneDelta)/864e5:units==="week"?(delta-zoneDelta)/6048e5:delta}return asFloat?output:absFloor(output)}function monthDiff(a,b){var wholeMonthDiff=(b.year()-a.year())*12+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months"),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,"months");adjust=(b-anchor)/(anchor-anchor2)}else{anchor2=a.clone().add(wholeMonthDiff+1,"months");adjust=(b-anchor)/(anchor2-anchor)}return-(wholeMonthDiff+adjust)||0}utils_hooks__hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";utils_hooks__hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function moment_format__toISOString(){var m=this.clone().utc();if(0<m.year()&&m.year()<=9999){if(isFunction(Date.prototype.toISOString)){return this.toDate().toISOString()}else{return formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}function moment_format__format(inputString){if(!inputString){inputString=this.isUtc()?utils_hooks__hooks.defaultFormatUtc:utils_hooks__hooks.defaultFormat}var output=formatMoment(this,inputString);return this.localeData().postformat(output)}function from(time,withoutSuffix){if(this.isValid()&&(isMoment(time)&&time.isValid()||local__createLocal(time).isValid())){return create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix)}else{return this.localeData().invalidDate()}}function fromNow(withoutSuffix){return this.from(local__createLocal(),withoutSuffix)}function to(time,withoutSuffix){if(this.isValid()&&(isMoment(time)&&time.isValid()||local__createLocal(time).isValid())){return create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix)}else{return this.localeData().invalidDate()}}function toNow(withoutSuffix){return this.to(local__createLocal(),withoutSuffix)}function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr}else{newLocaleData=locale_locales__getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData}return this}}var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){if(key===undefined){return this.localeData()}else{return this.locale(key)}});function localeData(){return this._locale}function startOf(units){units=normalizeUnits(units);switch(units){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(units==="week"){this.weekday(0)}if(units==="isoWeek"){this.isoWeekday(1)}if(units==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function endOf(units){units=normalizeUnits(units);if(units===undefined||units==="millisecond"){return this}if(units==="date"){units="day"}return this.startOf(units).add(1,units==="isoWeek"?"week":units).subtract(1,"ms")}function to_type__valueOf(){return this._d.valueOf()-(this._offset||0)*6e4}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function moment_valid__isValid(){return valid__isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100});addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addUnitAlias("weekYear","gg");addUnitAlias("isoWeekYear","GG");addUnitPriority("weekYear",1);addUnitPriority("isoWeekYear",1);addRegexToken("G",matchSigned);addRegexToken("g",matchSigned);addRegexToken("GG",match1to2,match2);addRegexToken("gg",match1to2,match2);addRegexToken("GGGG",match1to4,match4);addRegexToken("gggg",match1to4,match4);addRegexToken("GGGGG",match1to6,match6);addRegexToken("ggggg",match1to6,match6);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)});addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input)});function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;if(input==null){return weekOfYear(this,dow,doy).year}else{weeksTarget=weeksInYear(input,dow,doy);if(week>weeksTarget){week=weeksTarget}return setWeekAll.call(this,input,week,weekday,dow,doy)}}function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);this.year(date.getUTCFullYear());this.month(date.getUTCMonth());this.date(date.getUTCDate());return this}addFormatToken("Q",0,"Qo","quarter");addUnitAlias("quarter","Q");addUnitPriority("quarter",7);addRegexToken("Q",match1);addParseToken("Q",function(input,array){array[MONTH]=(toInt(input)-1)*3});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3)}addFormatToken("D",["DD",2],"Do","date");addUnitAlias("date","D");addUnitPriority("date",9);addRegexToken("D",match1to2);addRegexToken("DD",match1to2,match2);addRegexToken("Do",function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient});addParseToken(["D","DD"],DATE);addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10)});var getSetDayOfMonth=makeGetSet("Date",true);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addUnitAlias("dayOfYear","DDD");addUnitPriority("dayOfYear",4);addRegexToken("DDD",match1to3);addRegexToken("DDDD",match3);addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)});function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return input==null?dayOfYear:this.add(input-dayOfYear,"d")}addFormatToken("m",["mm",2],0,"minute");addUnitAlias("minute","m");addUnitPriority("minute",14);addRegexToken("m",match1to2);addRegexToken("mm",match1to2,match2);addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",false);addFormatToken("s",["ss",2],0,"second");addUnitAlias("second","s");addUnitPriority("second",15);addRegexToken("s",match1to2);addRegexToken("ss",match1to2,match2);addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",false);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)});addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)});addFormatToken(0,["SSS",3],0,"millisecond");addFormatToken(0,["SSSS",4],0,function(){return this.millisecond()*10});addFormatToken(0,["SSSSS",5],0,function(){return this.millisecond()*100});addFormatToken(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});addFormatToken(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});addFormatToken(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});addFormatToken(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});addUnitAlias("millisecond","ms");addUnitPriority("millisecond",16);addRegexToken("S",match1to3,match1);addRegexToken("SS",match1to3,match2);addRegexToken("SSS",match1to3,match3);var token;for(token="SSSS";token.length<=9;token+="S"){addRegexToken(token,matchUnsigned)}function parseMs(input,array){array[MILLISECOND]=toInt(("0."+input)*1e3)}for(token="S";token.length<=9;token+="S"){addParseToken(token,parseMs)}var getSetMillisecond=makeGetSet("Milliseconds",false);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add;momentPrototype__proto.calendar=moment_calendar__calendar;momentPrototype__proto.clone=clone;momentPrototype__proto.diff=diff;momentPrototype__proto.endOf=endOf;momentPrototype__proto.format=moment_format__format;momentPrototype__proto.from=from;momentPrototype__proto.fromNow=fromNow;momentPrototype__proto.to=to;momentPrototype__proto.toNow=toNow;momentPrototype__proto.get=stringGet;momentPrototype__proto.invalidAt=invalidAt;momentPrototype__proto.isAfter=isAfter;momentPrototype__proto.isBefore=isBefore;momentPrototype__proto.isBetween=isBetween;momentPrototype__proto.isSame=isSame;momentPrototype__proto.isSameOrAfter=isSameOrAfter;momentPrototype__proto.isSameOrBefore=isSameOrBefore;momentPrototype__proto.isValid=moment_valid__isValid;momentPrototype__proto.lang=lang;momentPrototype__proto.locale=locale;momentPrototype__proto.localeData=localeData;momentPrototype__proto.max=prototypeMax;momentPrototype__proto.min=prototypeMin;momentPrototype__proto.parsingFlags=parsingFlags;momentPrototype__proto.set=stringSet;momentPrototype__proto.startOf=startOf;momentPrototype__proto.subtract=add_subtract__subtract;momentPrototype__proto.toArray=toArray;momentPrototype__proto.toObject=toObject;momentPrototype__proto.toDate=toDate;momentPrototype__proto.toISOString=moment_format__toISOString;momentPrototype__proto.toJSON=toJSON;momentPrototype__proto.toString=toString;momentPrototype__proto.unix=unix;momentPrototype__proto.valueOf=to_type__valueOf;momentPrototype__proto.creationData=creationData;momentPrototype__proto.year=getSetYear;momentPrototype__proto.isLeapYear=getIsLeapYear;momentPrototype__proto.weekYear=getSetWeekYear;momentPrototype__proto.isoWeekYear=getSetISOWeekYear;momentPrototype__proto.quarter=momentPrototype__proto.quarters=getSetQuarter;momentPrototype__proto.month=getSetMonth;momentPrototype__proto.daysInMonth=getDaysInMonth;momentPrototype__proto.week=momentPrototype__proto.weeks=getSetWeek;momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=getSetISOWeek;momentPrototype__proto.weeksInYear=getWeeksInYear;momentPrototype__proto.isoWeeksInYear=getISOWeeksInYear;momentPrototype__proto.date=getSetDayOfMonth;momentPrototype__proto.day=momentPrototype__proto.days=getSetDayOfWeek;momentPrototype__proto.weekday=getSetLocaleDayOfWeek;momentPrototype__proto.isoWeekday=getSetISODayOfWeek;momentPrototype__proto.dayOfYear=getSetDayOfYear;momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour;momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute;momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond;momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond;momentPrototype__proto.utcOffset=getSetOffset;momentPrototype__proto.utc=setOffsetToUTC;momentPrototype__proto.local=setOffsetToLocal;momentPrototype__proto.parseZone=setOffsetToParsedOffset;momentPrototype__proto.hasAlignedHourOffset=hasAlignedHourOffset;momentPrototype__proto.isDST=isDaylightSavingTime;momentPrototype__proto.isLocal=isLocal;momentPrototype__proto.isUtcOffset=isUtcOffset;momentPrototype__proto.isUtc=isUtc;momentPrototype__proto.isUTC=isUtc;momentPrototype__proto.zoneAbbr=getZoneAbbr;momentPrototype__proto.zoneName=getZoneName;momentPrototype__proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth);momentPrototype__proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth);momentPrototype__proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear);momentPrototype__proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone);momentPrototype__proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);var momentPrototype=momentPrototype__proto;function moment_moment__createUnix(input){return local__createLocal(input*1e3)}function moment_moment__createInZone(){return local__createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(string){return string}var prototype__proto=Locale.prototype;prototype__proto.calendar=locale_calendar__calendar;prototype__proto.longDateFormat=longDateFormat;prototype__proto.invalidDate=invalidDate;prototype__proto.ordinal=ordinal;prototype__proto.preparse=preParsePostFormat;prototype__proto.postformat=preParsePostFormat;prototype__proto.relativeTime=relative__relativeTime;prototype__proto.pastFuture=pastFuture;prototype__proto.set=locale_set__set;prototype__proto.months=localeMonths;prototype__proto.monthsShort=localeMonthsShort;prototype__proto.monthsParse=localeMonthsParse;prototype__proto.monthsRegex=monthsRegex;prototype__proto.monthsShortRegex=monthsShortRegex;prototype__proto.week=localeWeek;prototype__proto.firstDayOfYear=localeFirstDayOfYear;prototype__proto.firstDayOfWeek=localeFirstDayOfWeek;prototype__proto.weekdays=localeWeekdays;prototype__proto.weekdaysMin=localeWeekdaysMin;prototype__proto.weekdaysShort=localeWeekdaysShort;prototype__proto.weekdaysParse=localeWeekdaysParse;prototype__proto.weekdaysRegex=weekdaysRegex;prototype__proto.weekdaysShortRegex=weekdaysShortRegex;prototype__proto.weekdaysMinRegex=weekdaysMinRegex;prototype__proto.isPM=localeIsPM;prototype__proto.meridiem=localeMeridiem;function lists__get(format,index,field,setter){var locale=locale_locales__getLocale();var utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format)}function listMonthsImpl(format,index,field){if(typeof format==="number"){index=format;format=undefined}format=format||"";if(index!=null){return lists__get(format,index,field,"month")}var i;var out=[];for(i=0;i<12;i++){out[i]=lists__get(format,i,field,"month")}return out}function listWeekdaysImpl(localeSorted,format,index,field){if(typeof localeSorted==="boolean"){if(typeof format==="number"){index=format;format=undefined}format=format||""}else{format=localeSorted;index=format;localeSorted=false;if(typeof format==="number"){index=format;format=undefined}format=format||""}var locale=locale_locales__getLocale(),shift=localeSorted?locale._week.dow:0;if(index!=null){return lists__get(format,(index+shift)%7,field,"day")}var i;var out=[];for(i=0;i<7;i++){out[i]=lists__get(format,(i+shift)%7,field,"day")}return out}function lists__listMonths(format,index){return listMonthsImpl(format,index,"months")}function lists__listMonthsShort(format,index){return listMonthsImpl(format,index,"monthsShort")}function lists__listWeekdays(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdays")}function lists__listWeekdaysShort(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysShort")}function lists__listWeekdaysMin(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysMin")}locale_locales__getSetGlobalLocale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=toInt(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output}});utils_hooks__hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",locale_locales__getSetGlobalLocale);utils_hooks__hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",locale_locales__getLocale);var mathAbs=Math.abs;function duration_abs__abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this}function duration_add_subtract__addSubtract(duration,input,value,direction){var other=create__createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble()}function duration_add_subtract__add(input,value){return duration_add_subtract__addSubtract(this,input,value,1)}function duration_add_subtract__subtract(input,value){return duration_add_subtract__addSubtract(this,input,value,-1)}function absCeil(number){if(number<0){return Math.floor(number)}else{return Math.ceil(number)}}function bubble(){var milliseconds=this._milliseconds;var days=this._days;var months=this._months;var data=this._data;var seconds,minutes,hours,years,monthsFromDays;if(!(milliseconds>=0&&days>=0&&months>=0||milliseconds<=0&&days<=0&&months<=0)){milliseconds+=absCeil(monthsToDays(months)+days)*864e5;days=0;months=0}data.milliseconds=milliseconds%1e3;seconds=absFloor(milliseconds/1e3);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);monthsFromDays=absFloor(daysToMonths(days));months+=monthsFromDays;days-=absCeil(monthsToDays(monthsFromDays));years=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this}function daysToMonths(days){return days*4800/146097}function monthsToDays(months){return months*146097/4800}function as(units){var days;var months;var milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==="month"||units==="year"){days=this._days+milliseconds/864e5;months=this._months+daysToMonths(days);return units==="month"?months:months/12}else{days=this._days+Math.round(monthsToDays(this._months));switch(units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return days*24+milliseconds/36e5;case"minute":return days*1440+milliseconds/6e4;case"second":return days*86400+milliseconds/1e3;case"millisecond":return Math.floor(days*864e5)+milliseconds;default:throw new Error("Unknown unit "+units)}}}function duration_as__valueOf(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+toInt(this._months/12)*31536e6}function makeAs(alias){return function(){return this.as(alias)}}var asMilliseconds=makeAs("ms");var asSeconds=makeAs("s");var asMinutes=makeAs("m");var asHours=makeAs("h");var asDays=makeAs("d");var asWeeks=makeAs("w");var asMonths=makeAs("M");var asYears=makeAs("y");function duration_get__get(units){units=normalizeUnits(units);return this[units+"s"]()}function makeGetter(name){return function(){return this._data[name]}}var milliseconds=makeGetter("milliseconds");var seconds=makeGetter("seconds");var minutes=makeGetter("minutes");var hours=makeGetter("hours");var days=makeGetter("days");var duration_get__months=makeGetter("months");var years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round=Math.round;var thresholds={s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function duration_humanize__relativeTime(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs();var seconds=round(duration.as("s"));var minutes=round(duration.as("m"));var hours=round(duration.as("h"));var days=round(duration.as("d"));var months=round(duration.as("M"));var years=round(duration.as("y"));var a=seconds<thresholds.s&&["s",seconds]||minutes<=1&&["m"]||minutes<thresholds.m&&["mm",minutes]||hours<=1&&["h"]||hours<thresholds.h&&["hh",hours]||days<=1&&["d"]||days<thresholds.d&&["dd",days]||months<=1&&["M"]||months<thresholds.M&&["MM",months]||years<=1&&["y"]||["yy",years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a)}function duration_humanize__getSetRelativeTimeRounding(roundingFunction){if(roundingFunction===undefined){return round}if(typeof roundingFunction==="function"){round=roundingFunction;return true}return false}function duration_humanize__getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false}if(limit===undefined){return thresholds[threshold]}thresholds[threshold]=limit;return true}function humanize(withSuffix){var locale=this.localeData();var output=duration_humanize__relativeTime(this,!withSuffix,locale);if(withSuffix){output=locale.pastFuture(+this,output)}return locale.postformat(output)}var iso_string__abs=Math.abs;function iso_string__toISOString(){var seconds=iso_string__abs(this._milliseconds)/1e3;var days=iso_string__abs(this._days);var months=iso_string__abs(this._months);var minutes,hours,years;minutes=absFloor(seconds/60);hours=absFloor(minutes/60);seconds%=60;minutes%=60;years=absFloor(months/12);months%=12;var Y=years;var M=months;var D=days;var h=hours;var m=minutes;var s=seconds;var total=this.asSeconds();if(!total){return"P0D"}return(total<0?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+(h||m||s?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":"")}var duration_prototype__proto=Duration.prototype;duration_prototype__proto.abs=duration_abs__abs;duration_prototype__proto.add=duration_add_subtract__add;duration_prototype__proto.subtract=duration_add_subtract__subtract;duration_prototype__proto.as=as;duration_prototype__proto.asMilliseconds=asMilliseconds;duration_prototype__proto.asSeconds=asSeconds;duration_prototype__proto.asMinutes=asMinutes;duration_prototype__proto.asHours=asHours;duration_prototype__proto.asDays=asDays;duration_prototype__proto.asWeeks=asWeeks;duration_prototype__proto.asMonths=asMonths;duration_prototype__proto.asYears=asYears;duration_prototype__proto.valueOf=duration_as__valueOf;duration_prototype__proto._bubble=bubble;duration_prototype__proto.get=duration_get__get;duration_prototype__proto.milliseconds=milliseconds;duration_prototype__proto.seconds=seconds;duration_prototype__proto.minutes=minutes;duration_prototype__proto.hours=hours;duration_prototype__proto.days=days;duration_prototype__proto.weeks=weeks;duration_prototype__proto.months=duration_get__months;duration_prototype__proto.years=years;duration_prototype__proto.humanize=humanize;duration_prototype__proto.toISOString=iso_string__toISOString;duration_prototype__proto.toString=iso_string__toISOString;duration_prototype__proto.toJSON=iso_string__toISOString;duration_prototype__proto.locale=locale;duration_prototype__proto.localeData=localeData;duration_prototype__proto.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",iso_string__toISOString);duration_prototype__proto.lang=lang;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",matchSigned);addRegexToken("X",matchTimestamp);addParseToken("X",function(input,array,config){config._d=new Date(parseFloat(input,10)*1e3)});addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))});utils_hooks__hooks.version="2.14.1";setHookCallback(local__createLocal);utils_hooks__hooks.fn=momentPrototype;utils_hooks__hooks.min=min;utils_hooks__hooks.max=max;utils_hooks__hooks.now=now;utils_hooks__hooks.utc=create_utc__createUTC;utils_hooks__hooks.unix=moment_moment__createUnix;utils_hooks__hooks.months=lists__listMonths;utils_hooks__hooks.isDate=isDate;utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale;utils_hooks__hooks.invalid=valid__createInvalid;utils_hooks__hooks.duration=create__createDuration;utils_hooks__hooks.isMoment=isMoment;utils_hooks__hooks.weekdays=lists__listWeekdays;utils_hooks__hooks.parseZone=moment_moment__createInZone;utils_hooks__hooks.localeData=locale_locales__getLocale;utils_hooks__hooks.isDuration=isDuration;utils_hooks__hooks.monthsShort=lists__listMonthsShort;utils_hooks__hooks.weekdaysMin=lists__listWeekdaysMin;utils_hooks__hooks.defineLocale=defineLocale;utils_hooks__hooks.updateLocale=updateLocale;utils_hooks__hooks.locales=locale_locales__listLocales;utils_hooks__hooks.weekdaysShort=lists__listWeekdaysShort;utils_hooks__hooks.normalizeUnits=normalizeUnits;utils_hooks__hooks.relativeTimeRounding=duration_humanize__getSetRelativeTimeRounding;utils_hooks__hooks.relativeTimeThreshold=duration_humanize__getSetRelativeTimeThreshold;utils_hooks__hooks.calendarFormat=getCalendarFormat;utils_hooks__hooks.prototype=momentPrototype;var moment__default=utils_hooks__hooks;var af=moment__default.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(input){return/^nm$/i.test(input)},meridiem:function(hours,minutes,isLower){if(hours<12){return isLower?"vm":"VM"}else{return isLower?"nm":"NM"}},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(number){return number+(number===1||number===8||number>=20?"ste":"de")},week:{dow:1,doy:4}});var ar_ma=moment__default.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}});var ar_sa__symbolMap={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},ar_sa__numberMap={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var ar_sa=moment__default.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(input){return""===input},meridiem:function(hour,minute,isLower){if(hour<12){return""}else{return""}},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(string){return string.replace(/[]/g,function(match){return ar_sa__numberMap[match]}).replace(//g,",")},postformat:function(string){return string.replace(/\d/g,function(match){return ar_sa__symbolMap[match]}).replace(/,/g,"")},week:{dow:6,doy:12}});var ar_tn=moment__default.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}});var ar__symbolMap={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},ar__numberMap={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},pluralForm=function(n){return n===0?0:n===1?1:n===2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5},plurals={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},pluralize=function(u){return function(number,withoutSuffix,string,isFuture){var f=pluralForm(number),str=plurals[u][pluralForm(number)];if(f===2){str=str[withoutSuffix?0:1]}return str.replace(/%d/i,number)}},ar__months=["  "," "," "," "," "," "," "," "," ","  ","  ","  "];var ar=moment__default.defineLocale("ar",{months:ar__months,monthsShort:ar__months,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(input){return""===input},meridiem:function(hour,minute,isLower){if(hour<12){return""}else{return""}},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:pluralize("s"),m:pluralize("m"),mm:pluralize("m"),h:pluralize("h"),hh:pluralize("h"),d:pluralize("d"),dd:pluralize("d"),M:pluralize("M"),MM:pluralize("M"),y:pluralize("y"),yy:pluralize("y")},preparse:function(string){return string.replace(/\u200f/g,"").replace(/[]/g,function(match){return ar__numberMap[match]}).replace(//g,",")},postformat:function(string){return string.replace(/\d/g,function(match){return ar__symbolMap[match]}).replace(/,/g,"")},week:{dow:6,doy:12}});var az__suffixes={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};var az=moment__default.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"birne saniyy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(input){return/^(gndz|axam)$/.test(input)},meridiem:function(hour,minute,isLower){if(hour<4){return"gec"}else if(hour<12){return"shr"}else if(hour<17){return"gndz"}else{return"axam"}},ordinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(number){if(number===0){return number+"-nc"}var a=number%10,b=number%100-a,c=number>=100?100:null;return number+(az__suffixes[a]||az__suffixes[b]||az__suffixes[c])},week:{dow:1,doy:7}});function be__plural(word,num){var forms=word.split("_");return num%10===1&&num%100!==11?forms[0]:num%10>=2&&num%10<=4&&(num%100<10||num%100>=20)?forms[1]:forms[2]}function be__relativeTimeWithPlural(number,withoutSuffix,key){var format={mm:withoutSuffix?"__":"__",hh:withoutSuffix?"__":"__",dd:"__",MM:"__",yy:"__"};if(key==="m"){return withoutSuffix?"":""}else if(key==="h"){return withoutSuffix?"":""}else{return number+" "+be__plural(format[key],+number)}}var be=moment__default.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:be__relativeTimeWithPlural,mm:be__relativeTimeWithPlural,h:be__relativeTimeWithPlural,hh:be__relativeTimeWithPlural,d:"",dd:be__relativeTimeWithPlural,M:"",MM:be__relativeTimeWithPlural,y:"",yy:be__relativeTimeWithPlural},meridiemParse:/|||/,isPM:function(input){return/^(|)$/.test(input)},meridiem:function(hour,minute,isLower){if(hour<4){return""}else if(hour<12){return""}else if(hour<17){return""}else{return""}},ordinalParse:/\d{1,2}-(||)/,ordinal:function(number,period){switch(period){case"M":case"d":case"DDD":case"w":case"W":return(number%10===2||number%10===3)&&(number%100!==12&&number%100!==13)?number+"-":number+"-";case"D":return number+"-";default:return number}},week:{dow:1,doy:7}});var bg=moment__default.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(number){var lastDigit=number%10,last2Digits=number%100;if(number===0){return number+"-"}else if(last2Digits===0){return number+"-"}else if(last2Digits>10&&last2Digits<20){return number+"-"}else if(lastDigit===1){return number+"-"}else if(lastDigit===2){return number+"-"}else if(lastDigit===7||lastDigit===8){return number+"-"}else{return number+"-"}},week:{dow:1,doy:7}});var bn__symbolMap={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},bn__numberMap={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var bn=moment__default.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(string){return string.replace(/[]/g,function(match){return bn__numberMap[match]})},postformat:function(string){return string.replace(/\d/g,function(match){return bn__symbolMap[match]})},meridiemParse:/||||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem===""&&hour>=4||meridiem===""&&hour<5||meridiem===""){return hour+12}else{return hour}},meridiem:function(hour,minute,isLower){if(hour<4){return""}else if(hour<10){return""}else if(hour<17){return""}else if(hour<20){return""}else{return""}},week:{dow:0,doy:6}});var bo__symbolMap={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},bo__numberMap={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var bo=moment__default.defineLocale("bo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(string){return string.replace(/[]/g,function(match){return bo__numberMap[match]})},postformat:function(string){return string.replace(/\d/g,function(match){return bo__symbolMap[match]})},meridiemParse:/||||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem===""&&hour>=4||meridiem===""&&hour<5||meridiem===""){return hour+12}else{return hour}},meridiem:function(hour,minute,isLower){if(hour<4){return""}else if(hour<10){return""}else if(hour<17){return""}else if(hour<20){return""}else{return""}},week:{dow:0,doy:6}});function relativeTimeWithMutation(number,withoutSuffix,key){var format={mm:"munutenn",MM:"miz",dd:"devezh"};return number+" "+mutation(format[key],number)}function specialMutationForYears(number){switch(lastNumber(number)){case 1:case 3:case 4:case 5:case 9:return number+" bloaz";default:return number+" vloaz"}}function lastNumber(number){if(number>9){return lastNumber(number%10)}return number}function mutation(text,number){if(number===2){return softMutation(text)}return text}function softMutation(text){var mutationTable={m:"v",b:"v",d:"z"};if(mutationTable[text.charAt(0)]===undefined){return text}return mutationTable[text.charAt(0)]+text.substring(1)}var br=moment__default.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno",m:"ur vunutenn",mm:relativeTimeWithMutation,h:"un eur",hh:"%d eur",d:"un devezh",dd:relativeTimeWithMutation,M:"ur miz",MM:relativeTimeWithMutation,y:"ur bloaz",yy:specialMutationForYears},ordinalParse:/\d{1,2}(a|vet)/,ordinal:function(number){var output=number===1?"a":"vet";return number+output},week:{dow:1,doy:4}});function bs__translate(number,withoutSuffix,key){var result=number+" ";switch(key){case"m":return withoutSuffix?"jedna minuta":"jedne minute";case"mm":if(number===1){result+="minuta"}else if(number===2||number===3||number===4){result+="minute"}else{result+="minuta"}return result;case"h":return withoutSuffix?"jedan sat":"jednog sata";case"hh":if(number===1){result+="sat"}else if(number===2||number===3||number===4){result+="sata"}else{result+="sati"}return result;case"dd":if(number===1){result+="dan"}else{result+="dana"}return result;case"MM":if(number===1){result+="mjesec"}else if(number===2||number===3||number===4){result+="mjeseca"}else{result+="mjeseci"}return result;case"yy":if(number===1){result+="godina"}else if(number===2||number===3||number===4){result+="godine"}else{result+="godina"}return result}}var bs=moment__default.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:true,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:bs__translate,mm:bs__translate,h:bs__translate,hh:bs__translate,d:"dan",dd:bs__translate,M:"mjesec",MM:bs__translate,y:"godinu",yy:bs__translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var ca=moment__default.defineLocale("ca",{months:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:true,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[avui a "+(this.hours()!==1?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(this.hours()!==1?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(this.hours()!==1?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(this.hours()!==1?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(this.hours()!==1?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(number,period){var output=number===1?"r":number===2?"n":number===3?"r":number===4?"t":"";if(period==="w"||period==="W"){output="a"}return number+output},week:{dow:1,doy:4}});var cs__months="leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),cs__monthsShort="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_");function cs__plural(n){return n>1&&n<5&&~~(n/10)!==1}function cs__translate(number,withoutSuffix,key,isFuture){var result=number+" ";switch(key){case"s":return withoutSuffix||isFuture?"pr sekund":"pr sekundami";case"m":return withoutSuffix?"minuta":isFuture?"minutu":"minutou";case"mm":if(withoutSuffix||isFuture){return result+(cs__plural(number)?"minuty":"minut")}else{return result+"minutami"}break;case"h":return withoutSuffix?"hodina":isFuture?"hodinu":"hodinou";case"hh":if(withoutSuffix||isFuture){return result+(cs__plural(number)?"hodiny":"hodin")}else{return result+"hodinami"}break;case"d":return withoutSuffix||isFuture?"den":"dnem";case"dd":if(withoutSuffix||isFuture){return result+(cs__plural(number)?"dny":"dn")}else{return result+"dny"}break;case"M":return withoutSuffix||isFuture?"msc":"mscem";case"MM":if(withoutSuffix||isFuture){return result+(cs__plural(number)?"msce":"msc")}else{return result+"msci"}break;case"y":return withoutSuffix||isFuture?"rok":"rokem";case"yy":if(withoutSuffix||isFuture){return result+(cs__plural(number)?"roky":"let")}else{return result+"lety"}break}}var cs=moment__default.defineLocale("cs",{months:cs__months,monthsShort:cs__monthsShort,monthsParse:function(months,monthsShort){var i,_monthsParse=[];for(i=0;i<12;i++){_monthsParse[i]=new RegExp("^"+months[i]+"$|^"+monthsShort[i]+"$","i")}return _monthsParse}(cs__months,cs__monthsShort),shortMonthsParse:function(monthsShort){var i,_shortMonthsParse=[];for(i=0;i<12;i++){_shortMonthsParse[i]=new RegExp("^"+monthsShort[i]+"$","i")}return _shortMonthsParse}(cs__monthsShort),longMonthsParse:function(months){var i,_longMonthsParse=[];for(i=0;i<12;i++){_longMonthsParse[i]=new RegExp("^"+months[i]+"$","i")}return _longMonthsParse}(cs__months),weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:cs__translate,m:cs__translate,mm:cs__translate,h:cs__translate,hh:cs__translate,d:cs__translate,dd:cs__translate,M:cs__translate,MM:cs__translate,y:cs__translate,yy:cs__translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var cv=moment__default.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(output){var affix=/$/i.exec(output)?"":/$/i.exec(output)?"":"";return output+affix},past:"%s ",s:"- ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}});var cy=moment__default.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(number){var b=number,output="",lookup=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];if(b>20){if(b===40||b===50||b===60||b===80||b===100){output="fed"}else{output="ain"}}else if(b>0){output=lookup[b]}return number+output},week:{dow:1,doy:4}});var da=moment__default.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I gr kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});function de_at__processRelativeTime(number,withoutSuffix,key,isFuture){var format={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[number+" Tage",number+" Tagen"],M:["ein Monat","einem Monat"],MM:[number+" Monate",number+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[number+" Jahre",number+" Jahren"]};return withoutSuffix?format[key][0]:format[key][1]}var de_at=moment__default.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:true,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:de_at__processRelativeTime,mm:"%d Minuten",h:de_at__processRelativeTime,hh:"%d Stunden",d:de_at__processRelativeTime,dd:de_at__processRelativeTime,M:de_at__processRelativeTime,MM:de_at__processRelativeTime,y:de_at__processRelativeTime,yy:de_at__processRelativeTime},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});function de__processRelativeTime(number,withoutSuffix,key,isFuture){var format={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[number+" Tage",number+" Tagen"],M:["ein Monat","einem Monat"],MM:[number+" Monate",number+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[number+" Jahre",number+" Jahren"]};return withoutSuffix?format[key][0]:format[key][1]}var de=moment__default.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:true,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:de__processRelativeTime,mm:"%d Minuten",h:de__processRelativeTime,hh:"%d Stunden",d:de__processRelativeTime,dd:de__processRelativeTime,M:de__processRelativeTime,MM:de__processRelativeTime,y:de__processRelativeTime,yy:de__processRelativeTime},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var dv__months=["","","","","","","","","","","",""],dv__weekdays=["","","","","","",""];var dv=moment__default.defineLocale("dv",{months:dv__months,monthsShort:dv__months,weekdays:dv__weekdays,weekdaysShort:dv__weekdays,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(input){return""===input},meridiem:function(hour,minute,isLower){if(hour<12){return""}else{return""}},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(string){return string.replace(//g,",")},postformat:function(string){return string.replace(/,/g,"")},week:{dow:7,doy:12}});var el=moment__default.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(momentToFormat,format){if(/D/.test(format.substring(0,format.indexOf("MMMM")))){return this._monthsGenitiveEl[momentToFormat.month()]}else{return this._monthsNominativeEl[momentToFormat.month()]}},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(hours,minutes,isLower){if(hours>11){return isLower?"":""}else{return isLower?"":""}},isPM:function(input){return(input+"").toLowerCase()[0]===""},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ ] dddd [{}] LT";default:return"[ ] dddd [{}] LT"}},sameElse:"L"},calendar:function(key,mom){var output=this._calendarEl[key],hours=mom&&mom.hours();if(isFunction(output)){output=output.apply(mom)}return output.replace("{}",hours%12===1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});var en_au=moment__default.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output},week:{dow:1,doy:4}});var en_ca=moment__default.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output}});var en_gb=moment__default.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output},week:{dow:1,doy:4}});var en_ie=moment__default.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output},week:{dow:1,doy:4}});var en_nz=moment__default.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output},week:{dow:1,doy:4}});var eo=moment__default.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdays:"Dimano_Lundo_Mardo_Merkredo_ado_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_a_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_a_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-an de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(input){return input.charAt(0).toLowerCase()==="p"},meridiem:function(hours,minutes,isLower){if(hours>11){return isLower?"p.t.m.":"P.T.M."}else{return isLower?"a.t.m.":"A.T.M."}},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"anta %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}});var es_do__monthsShortDot="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),es_do__monthsShort="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");var es_do=moment__default.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(m,format){if(/-MMM-/.test(format)){return es_do__monthsShort[m.month()]}else{return es_do__monthsShortDot[m.month()]}},monthsParseExact:true,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(this.hours()!==1?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(this.hours()!==1?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(this.hours()!==1?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(this.hours()!==1?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(this.hours()!==1?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});var es__monthsShortDot="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),es__monthsShort="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");var es=moment__default.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(m,format){if(/-MMM-/.test(format)){return es__monthsShort[m.month()]}else{return es__monthsShortDot[m.month()]}},monthsParseExact:true,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(this.hours()!==1?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(this.hours()!==1?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(this.hours()!==1?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(this.hours()!==1?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(this.hours()!==1?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});function et__processRelativeTime(number,withoutSuffix,key,isFuture){var format={s:["mne sekundi","mni sekund","paar sekundit"],m:["he minuti","ks minut"],mm:[number+" minuti",number+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[number+" tunni",number+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[number+" kuu",number+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[number+" aasta",number+" aastat"]};if(withoutSuffix){return format[key][2]?format[key][2]:format[key][1]}return isFuture?format[key][0]:format[key][1]}var et=moment__default.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:et__processRelativeTime,m:et__processRelativeTime,mm:et__processRelativeTime,h:et__processRelativeTime,hh:et__processRelativeTime,d:et__processRelativeTime,dd:"%d peva",M:et__processRelativeTime,MM:et__processRelativeTime,y:et__processRelativeTime,yy:et__processRelativeTime},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var eu=moment__default.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:true,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var fa__symbolMap={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},fa__numberMap={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var fa=moment__default.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(input){return/  /.test(input)},meridiem:function(hour,minute,isLower){if(hour<12){return"  "}else{return"  "}},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(string){return string.replace(/[-]/g,function(match){return fa__numberMap[match]}).replace(//g,",")},postformat:function(string){return string.replace(/\d/g,function(match){return fa__symbolMap[match]}).replace(/,/g,"")},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}});var numbersPast="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),numbersFuture=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",numbersPast[7],numbersPast[8],numbersPast[9]];function fi__translate(number,withoutSuffix,key,isFuture){var result="";switch(key){case"s":return isFuture?"muutaman sekunnin":"muutama sekunti";case"m":return isFuture?"minuutin":"minuutti";case"mm":result=isFuture?"minuutin":"minuuttia";break;case"h":return isFuture?"tunnin":"tunti";case"hh":result=isFuture?"tunnin":"tuntia";break;case"d":return isFuture?"pivn":"piv";case"dd":result=isFuture?"pivn":"piv";break;case"M":return isFuture?"kuukauden":"kuukausi";case"MM":result=isFuture?"kuukauden":"kuukautta";break;case"y":return isFuture?"vuoden":"vuosi";case"yy":result=isFuture?"vuoden":"vuotta";break}result=verbalNumber(number,isFuture)+" "+result;return result}function verbalNumber(number,isFuture){return number<10?isFuture?numbersFuture[number]:numbersPast[number]:number}var fi=moment__default.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:fi__translate,m:fi__translate,mm:fi__translate,h:fi__translate,hh:fi__translate,d:fi__translate,dd:fi__translate,M:fi__translate,MM:fi__translate,y:fi__translate,yy:fi__translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var fo=moment__default.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnai",MM:"%d mnair",y:"eitt r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var fr_ca=moment__default.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:true,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(number){return number+(number===1?"er":"e")}});var fr_ch=moment__default.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:true,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(number){return number+(number===1?"er":"e")},week:{dow:1,doy:4}});var fr=moment__default.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:true,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(number){return number+(number===1?"er":"")},week:{dow:1,doy:4}});var fy__monthsShortWithDots="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),fy__monthsShortWithoutDots="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");var fy=moment__default.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(m,format){if(/-MMM-/.test(format)){return fy__monthsShortWithoutDots[m.month()]}else{return fy__monthsShortWithDots[m.month()]}},monthsParseExact:true,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(number){return number+(number===1||number===8||number>=20?"ste":"de")},week:{dow:1,doy:4}});var gd__months=["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"];var gd__monthsShort=["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"];var gd__weekdays=["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"];var weekdaysShort=["Did","Dil","Dim","Dic","Dia","Dih","Dis"];var weekdaysMin=["D","Lu","M","Ci","Ar","Ha","Sa"];var gd=moment__default.defineLocale("gd",{months:gd__months,monthsShort:gd__monthsShort,monthsParseExact:true,weekdays:gd__weekdays,weekdaysShort:weekdaysShort,weekdaysMin:weekdaysMin,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},ordinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(number){var output=number===1?"d":number%10===2?"na":"mh";return number+output},week:{dow:1,doy:4}});var gl=moment__default.defineLocale("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuo_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xu._Xul._Ago._Set._Out._Nov._Dec.".split("_"),monthsParseExact:true,weekdays:"Domingo_Luns_Martes_Mrcores_Xoves_Venres_Sbado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mr._Xov._Ven._Sb.".split("_"),weekdaysMin:"Do_Lu_Ma_M_Xo_Ve_S".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(this.hours()!==1?"s":"")+"] LT"},nextDay:function(){return"[ma "+(this.hours()!==1?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(this.hours()!==1?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(this.hours()!==1?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(this.hours()!==1?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(str){if(str==="uns segundos"){return"nuns segundos"}return"en "+str},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:7}});var he=moment__default.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:function(number){if(number===2){return""}return number+" "},d:"",dd:function(number){if(number===2){return""}return number+" "},M:"",MM:function(number){if(number===2){return""}return number+" "},y:"",yy:function(number){if(number===2){return""}else if(number%10===0&&number!==10){return number+" "}return number+" "}},meridiemParse:/"|"| | | ||/i,isPM:function(input){return/^("| |)$/.test(input)},meridiem:function(hour,minute,isLower){if(hour<5){return" "}else if(hour<10){return""}else if(hour<12){return isLower?'"':" "}else if(hour<18){return isLower?'"':" "}else{return""}}});var hi__symbolMap={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},hi__numberMap={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var hi=moment__default.defineLocale("hi",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(string){return string.replace(/[]/g,function(match){return hi__numberMap[match]})},postformat:function(string){return string.replace(/\d/g,function(match){return hi__symbolMap[match]})},meridiemParse:/|||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem===""){return hour<4?hour:hour+12}else if(meridiem===""){return hour}else if(meridiem===""){return hour>=10?hour:hour+12}else if(meridiem===""){return hour+12}},meridiem:function(hour,minute,isLower){if(hour<4){return""}else if(hour<10){return""}else if(hour<17){return""}else if(hour<20){return""}else{return""}},week:{dow:0,doy:6}});function hr__translate(number,withoutSuffix,key){var result=number+" ";switch(key){case"m":return withoutSuffix?"jedna minuta":"jedne minute";case"mm":if(number===1){result+="minuta"}else if(number===2||number===3||number===4){result+="minute"}else{result+="minuta"}return result;case"h":return withoutSuffix?"jedan sat":"jednog sata";case"hh":if(number===1){result+="sat"}else if(number===2||number===3||number===4){result+="sata"}else{result+="sati"}return result;case"dd":if(number===1){result+="dan"}else{result+="dana"}return result;case"MM":if(number===1){result+="mjesec"}else if(number===2||number===3||number===4){result+="mjeseca"}else{result+="mjeseci"}return result;case"yy":if(number===1){result+="godina"}else if(number===2||number===3||number===4){result+="godine"}else{result+="godina"}return result}}var hr=moment__default.defineLocale("hr",{months:{format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:true,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:hr__translate,mm:hr__translate,h:hr__translate,hh:hr__translate,d:"dan",dd:hr__translate,M:"mjesec",MM:hr__translate,y:"godinu",yy:hr__translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var weekEndings="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");function hu__translate(number,withoutSuffix,key,isFuture){var num=number,suffix;switch(key){case"s":return isFuture||withoutSuffix?"nhny msodperc":"nhny msodperce";case"m":return"egy"+(isFuture||withoutSuffix?" perc":" perce");case"mm":return num+(isFuture||withoutSuffix?" perc":" perce");case"h":return"egy"+(isFuture||withoutSuffix?" ra":" rja");case"hh":return num+(isFuture||withoutSuffix?" ra":" rja");case"d":return"egy"+(isFuture||withoutSuffix?" nap":" napja");case"dd":return num+(isFuture||withoutSuffix?" nap":" napja");case"M":return"egy"+(isFuture||withoutSuffix?" hnap":" hnapja");case"MM":return num+(isFuture||withoutSuffix?" hnap":" hnapja");case"y":return"egy"+(isFuture||withoutSuffix?" v":" ve");case"yy":return num+(isFuture||withoutSuffix?" v":" ve")}return""}function week(isFuture){return(isFuture?"":"[mlt] ")+"["+weekEndings[this.day()]+"] LT[-kor]"}var hu=moment__default.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(input){return input.charAt(1).toLowerCase()==="u"},meridiem:function(hours,minutes,isLower){if(hours<12){return isLower===true?"de":"DE"}else{return isLower===true?"du":"DU"}},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return week.call(this,true)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return week.call(this,false)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:hu__translate,m:hu__translate,mm:hu__translate,h:hu__translate,hh:hu__translate,d:hu__translate,dd:hu__translate,M:hu__translate,MM:hu__translate,y:hu__translate,yy:hu__translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var hy_am=moment__default.defineLocale("hy-am",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(input){return/^(|)$/.test(input)},meridiem:function(hour){if(hour<4){return""}else if(hour<12){return""}else if(hour<17){return""}else{return""}},ordinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(number,period){switch(period){case"DDD":case"w":case"W":case"DDDo":if(number===1){return number+"-"}return number+"-";default:return number}},week:{dow:1,doy:7}});var id=moment__default.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem==="pagi"){return hour}else if(meridiem==="siang"){return hour>=11?hour:hour+12}else if(meridiem==="sore"||meridiem==="malam"){return hour+12}},meridiem:function(hours,minutes,isLower){if(hours<11){return"pagi"}else if(hours<15){return"siang"}else if(hours<19){return"sore"}else{return"malam"}},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}});function is__plural(n){if(n%100===11){return true}else if(n%10===1){return false}return true}function is__translate(number,withoutSuffix,key,isFuture){var result=number+" ";switch(key){case"s":return withoutSuffix||isFuture?"nokkrar sekndur":"nokkrum sekndum";case"m":return withoutSuffix?"mnta":"mntu";case"mm":if(is__plural(number)){return result+(withoutSuffix||isFuture?"mntur":"mntum")}else if(withoutSuffix){return result+"mnta"}return result+"mntu";case"hh":if(is__plural(number)){return result+(withoutSuffix||isFuture?"klukkustundir":"klukkustundum")}return result+"klukkustund";case"d":if(withoutSuffix){return"dagur"}return isFuture?"dag":"degi";case"dd":if(is__plural(number)){if(withoutSuffix){return result+"dagar"}return result+(isFuture?"daga":"dgum")}else if(withoutSuffix){return result+"dagur"}return result+(isFuture?"dag":"degi");case"M":if(withoutSuffix){return"mnuur"}return isFuture?"mnu":"mnui";case"MM":if(is__plural(number)){if(withoutSuffix){return result+"mnuir"}return result+(isFuture?"mnui":"mnuum")}else if(withoutSuffix){return result+"mnuur"}return result+(isFuture?"mnu":"mnui");case"y":return withoutSuffix||isFuture?"r":"ri";case"yy":if(is__plural(number)){return result+(withoutSuffix||isFuture?"r":"rum")}return result+(withoutSuffix||isFuture?"r":"ri")}}var is=moment__default.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:is__translate,m:is__translate,mm:is__translate,h:"klukkustund",hh:is__translate,d:is__translate,dd:is__translate,M:is__translate,MM:is__translate,y:is__translate,yy:is__translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var it=moment__default.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Luned_Marted_Mercoled_Gioved_Venerd_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"Do_Lu_Ma_Me_Gi_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(s){return(/^[0-9].+$/.test(s)?"tra":"in")+" "+s},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});var ja=moment__default.defineLocale("ja",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahm",LTS:"Ahms",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhm",LLLL:"YYYYMDAhm dddd"},meridiemParse:/|/i,isPM:function(input){return input===""},meridiem:function(hour,minute,isLower){if(hour<12){return""}else{return""}},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},ordinalParse:/\d{1,2}/,ordinal:function(number,period){switch(period){case"d":case"D":case"DDD":return number+"";default:return number}},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}});var jv=moment__default.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem==="enjing"){return hour}else if(meridiem==="siyang"){return hour>=11?hour:hour+12}else if(meridiem==="sonten"||meridiem==="ndalu"){return hour+12}},meridiem:function(hours,minutes,isLower){if(hours<11){return"enjing"}else if(hours<15){return"siyang"}else if(hours<19){return"sonten"}else{return"ndalu"}},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}});var ka=moment__default.defineLocale("ka",{months:{standalone:"___________".split("_"),format:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(s){return/(|||)/.test(s)?s.replace(/$/,""):s+""},past:function(s){if(/(||||)/.test(s)){return s.replace(/(|)$/," ")}if(//.test(s)){return s.replace(/$/," ")}},s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(number){if(number===0){return number}if(number===1){return number+"-"}if(number<20||number<=100&&number%20===0||number%100===0){return"-"+number}return number+"-"},week:{dow:1,doy:7}});var kk__suffixes={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};var kk=moment__default.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-(|)/,ordinal:function(number){var a=number%10,b=number>=100?100:null;return number+(kk__suffixes[number]||kk__suffixes[a]||kk__suffixes[b])},week:{dow:1,doy:7}});var km=moment__default.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}});var ko=moment__default.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h m",LTS:"A h m s",L:"YYYY.MM.DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h m",LLLL:"YYYY MMMM D dddd A h m"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d",m:"",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|/,isPM:function(token){return token===""},meridiem:function(hour,minute,isUpper){return hour<12?"":""}});var ky__suffixes={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};var ky=moment__default.defineLocale("ky",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-(|||)/,ordinal:function(number){var a=number%10,b=number>=100?100:null;return number+(ky__suffixes[number]||ky__suffixes[a]||ky__suffixes[b])},week:{dow:1,doy:7}});function lb__processRelativeTime(number,withoutSuffix,key,isFuture){var format={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return withoutSuffix?format[key][0]:format[key][1]}function processFutureTime(string){var number=string.substr(0,string.indexOf(" "));if(eifelerRegelAppliesToNumber(number)){return"a "+string}return"an "+string}function processPastTime(string){var number=string.substr(0,string.indexOf(" "));if(eifelerRegelAppliesToNumber(number)){return"viru "+string}return"virun "+string}function eifelerRegelAppliesToNumber(number){number=parseInt(number,10);if(isNaN(number)){return false}if(number<0){return true}else if(number<10){if(4<=number&&number<=7){return true}return false}else if(number<100){var lastDigit=number%10,firstDigit=number/10;if(lastDigit===0){return eifelerRegelAppliesToNumber(firstDigit)}return eifelerRegelAppliesToNumber(lastDigit)}else if(number<1e4){while(number>=10){number=number/10}return eifelerRegelAppliesToNumber(number)}else{number=number/1e3;return eifelerRegelAppliesToNumber(number)}}var lb=moment__default.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:true,weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:processFutureTime,past:processPastTime,s:"e puer Sekonnen",m:lb__processRelativeTime,mm:"%d Minutten",h:lb__processRelativeTime,hh:"%d Stonnen",d:lb__processRelativeTime,dd:"%d Deeg",M:lb__processRelativeTime,MM:"%d Mint",y:lb__processRelativeTime,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var lo=moment__default.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(input){return input===""},meridiem:function(hour,minute,isLower){if(hour<12){return""}else{return""}},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},ordinalParse:/()\d{1,2}/,ordinal:function(number){return""+number}});var lt__units={m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"};function translateSeconds(number,withoutSuffix,key,isFuture){if(withoutSuffix){return"kelios sekunds"}else{return isFuture?"keli sekundi":"kelias sekundes"}}function translateSingular(number,withoutSuffix,key,isFuture){return withoutSuffix?forms(key)[0]:isFuture?forms(key)[1]:forms(key)[2]}function special(number){return number%10===0||number>10&&number<20}function forms(key){return lt__units[key].split("_")}function lt__translate(number,withoutSuffix,key,isFuture){var result=number+" ";if(number===1){return result+translateSingular(number,withoutSuffix,key[0],isFuture)}else if(withoutSuffix){return result+(special(number)?forms(key)[1]:forms(key)[0])}else{if(isFuture){return result+forms(key)[1]}else{return result+(special(number)?forms(key)[1]:forms(key)[2])}}}var lt=moment__default.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?|MMMM?(\[[^\[\]]*\]|\s+)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:translateSeconds,m:translateSingular,mm:lt__translate,h:translateSingular,hh:lt__translate,d:translateSingular,dd:lt__translate,M:translateSingular,MM:lt__translate,y:translateSingular,yy:lt__translate},ordinalParse:/\d{1,2}-oji/,ordinal:function(number){return number+"-oji"},week:{dow:1,doy:4}});var lv__units={m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function lv__format(forms,number,withoutSuffix){if(withoutSuffix){return number%10===1&&number%100!==11?forms[2]:forms[3]}else{return number%10===1&&number%100!==11?forms[0]:forms[1]}}function lv__relativeTimeWithPlural(number,withoutSuffix,key){return number+" "+lv__format(lv__units[key],number,withoutSuffix)}function relativeTimeWithSingular(number,withoutSuffix,key){return lv__format(lv__units[key],number,withoutSuffix)}function relativeSeconds(number,withoutSuffix){return withoutSuffix?"daas sekundes":"dam sekundm"}var lv=moment__default.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:relativeSeconds,m:relativeTimeWithSingular,mm:lv__relativeTimeWithPlural,h:relativeTimeWithSingular,hh:lv__relativeTimeWithPlural,d:relativeTimeWithSingular,dd:lv__relativeTimeWithPlural,M:relativeTimeWithSingular,MM:lv__relativeTimeWithPlural,y:relativeTimeWithSingular,yy:lv__relativeTimeWithPlural},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var me__translator={words:{m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(number,wordKey){return number===1?wordKey[0]:number>=2&&number<=4?wordKey[1]:wordKey[2]},translate:function(number,withoutSuffix,key){var wordKey=me__translator.words[key];if(key.length===1){return withoutSuffix?wordKey[0]:wordKey[1]}else{return number+" "+me__translator.correctGrammaticalCase(number,wordKey)}}};var me=moment__default.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:true,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){var lastWeekDays=["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"];return lastWeekDays[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",m:me__translator.translate,mm:me__translator.translate,h:me__translator.translate,hh:me__translator.translate,d:"dan",dd:me__translator.translate,M:"mjesec",MM:me__translator.translate,y:"godinu",yy:me__translator.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var mk=moment__default.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(number){var lastDigit=number%10,last2Digits=number%100;if(number===0){return number+"-"}else if(last2Digits===0){return number+"-"}else if(last2Digits>10&&last2Digits<20){return number+"-"}else if(lastDigit===1){return number+"-"}else if(lastDigit===2){return number+"-"}else if(lastDigit===7||lastDigit===8){return number+"-"}else{return number+"-"}},week:{dow:1,doy:7}});var ml=moment__default.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem===""&&hour>=4||meridiem===" "||meridiem===""){return hour+12}else{return hour}},meridiem:function(hour,minute,isLower){if(hour<4){return""}else if(hour<12){return""}else if(hour<17){return" "}else if(hour<20){return""}else{return""}}});var mr__symbolMap={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},mr__numberMap={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};function relativeTimeMr(number,withoutSuffix,string,isFuture){var output="";if(withoutSuffix){switch(string){case"s":output=" ";break;case"m":output=" ";break;case"mm":output="%d ";break;case"h":output=" ";break;case"hh":output="%d ";break;case"d":output=" ";break;case"dd":output="%d ";break;case"M":output=" ";break;case"MM":output="%d ";break;case"y":output=" ";break;case"yy":output="%d ";break}}else{switch(string){case"s":output=" ";break;case"m":output=" ";break;case"mm":output="%d ";break;case"h":output=" ";break;case"hh":output="%d ";break;case"d":output=" ";break;case"dd":output="%d ";break;case"M":output=" ";break;case"MM":output="%d ";break;case"y":output=" ";break;case"yy":output="%d ";break}}return output.replace(/%d/i,number)}var mr=moment__default.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:relativeTimeMr,m:relativeTimeMr,mm:relativeTimeMr,h:relativeTimeMr,hh:relativeTimeMr,d:relativeTimeMr,dd:relativeTimeMr,M:relativeTimeMr,MM:relativeTimeMr,y:relativeTimeMr,yy:relativeTimeMr},preparse:function(string){return string.replace(/[]/g,function(match){return mr__numberMap[match]})},postformat:function(string){return string.replace(/\d/g,function(match){return mr__symbolMap[match]})},meridiemParse:/|||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem===""){return hour<4?hour:hour+12}else if(meridiem===""){return hour}else if(meridiem===""){return hour>=10?hour:hour+12}else if(meridiem===""){return hour+12}},meridiem:function(hour,minute,isLower){if(hour<4){return""}else if(hour<10){return""}else if(hour<17){return""}else if(hour<20){return""}else{return""}},week:{dow:0,doy:6}});var ms_my=moment__default.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem==="pagi"){return hour}else if(meridiem==="tengahari"){return hour>=11?hour:hour+12}else if(meridiem==="petang"||meridiem==="malam"){return hour+12}},meridiem:function(hours,minutes,isLower){if(hours<11){return"pagi"}else if(hours<15){return"tengahari"}else if(hours<19){return"petang"}else{return"malam"}},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}});var locale_ms=moment__default.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem==="pagi"){return hour}else if(meridiem==="tengahari"){return hour>=11?hour:hour+12}else if(meridiem==="petang"||meridiem==="malam"){return hour+12}},meridiem:function(hours,minutes,isLower){if(hours<11){return"pagi"}else if(hours<15){return"tengahari"}else if(hours<19){return"petang"}else{return"malam"}},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}});var my__symbolMap={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},my__numberMap={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var my=moment__default.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(string){return string.replace(/[]/g,function(match){return my__numberMap[match]})},postformat:function(string){return string.replace(/\d/g,function(match){return my__symbolMap[match]})},week:{dow:1,doy:4}});var nb=moment__default.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:true,weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var ne__symbolMap={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},ne__numberMap={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var ne=moment__default.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(string){return string.replace(/[]/g,function(match){return ne__numberMap[match]})},postformat:function(string){return string.replace(/\d/g,function(match){return ne__symbolMap[match]})},meridiemParse:/|||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem===""){return hour<4?hour:hour+12}else if(meridiem===""){return hour}else if(meridiem===""){return hour>=10?hour:hour+12}else if(meridiem===""){return hour+12}},meridiem:function(hour,minute,isLower){if(hour<3){return""}else if(hour<12){return""}else if(hour<16){return""}else if(hour<20){return""}else{return""}},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}});var nl__monthsShortWithDots="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),nl__monthsShortWithoutDots="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");var nl=moment__default.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(m,format){if(/-MMM-/.test(format)){return nl__monthsShortWithoutDots[m.month()]}else{return nl__monthsShortWithDots[m.month()]}},monthsParseExact:true,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(number){return number+(number===1||number===8||number>=20?"ste":"de")},week:{dow:1,doy:4}});var nn=moment__default.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var pa_in__symbolMap={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},pa_in__numberMap={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var pa_in=moment__default.defineLocale("pa-in",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(string){return string.replace(/[]/g,function(match){return pa_in__numberMap[match]})},postformat:function(string){return string.replace(/\d/g,function(match){return pa_in__symbolMap[match]})},meridiemParse:/|||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem===""){return hour<4?hour:hour+12}else if(meridiem===""){return hour}else if(meridiem===""){return hour>=10?hour:hour+12}else if(meridiem===""){return hour+12}},meridiem:function(hour,minute,isLower){if(hour<4){return""}else if(hour<10){return""}else if(hour<17){return""}else if(hour<20){return""}else{return""}},week:{dow:0,doy:6}});var monthsNominative="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),monthsSubjective="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_");function pl__plural(n){return n%10<5&&n%10>1&&~~(n/10)%10!==1}function pl__translate(number,withoutSuffix,key){var result=number+" ";switch(key){case"m":return withoutSuffix?"minuta":"minut";case"mm":return result+(pl__plural(number)?"minuty":"minut");case"h":return withoutSuffix?"godzina":"godzin";case"hh":return result+(pl__plural(number)?"godziny":"godzin");case"MM":return result+(pl__plural(number)?"miesice":"miesicy");case"yy":return result+(pl__plural(number)?"lata":"lat")}}var pl=moment__default.defineLocale("pl",{months:function(momentToFormat,format){if(format===""){return"("+monthsSubjective[momentToFormat.month()]+"|"+monthsNominative[momentToFormat.month()]+")"}else if(/D MMMM/.test(format)){return monthsSubjective[momentToFormat.month()]}else{return monthsNominative[momentToFormat.month()]}},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"nie_pon_wt_r_czw_pt_sb".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:pl__translate,mm:pl__translate,h:pl__translate,hh:pl__translate,d:"1 dzie",dd:"%d dni",M:"miesic",MM:pl__translate,y:"rok",yy:pl__translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var pt_br=moment__default.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Dom_2_3_4_5_6_Sb".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return this.day()===0||this.day()===6?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrs",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d"});var pt=moment__default.defineLocale("pt",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Tera-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Dom_2_3_4_5_6_Sb".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return this.day()===0||this.day()===6?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});function ro__relativeTimeWithPlural(number,withoutSuffix,key){var format={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},separator=" ";if(number%100>=20||number>=100&&number%100===0){separator=" de "}return number+separator+format[key]}var ro=moment__default.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:true,weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",m:"un minut",mm:ro__relativeTimeWithPlural,h:"o or",hh:ro__relativeTimeWithPlural,d:"o zi",dd:ro__relativeTimeWithPlural,M:"o lun",MM:ro__relativeTimeWithPlural,y:"un an",yy:ro__relativeTimeWithPlural},week:{dow:1,doy:7}});function ru__plural(word,num){var forms=word.split("_");return num%10===1&&num%100!==11?forms[0]:num%10>=2&&num%10<=4&&(num%100<10||num%100>=20)?forms[1]:forms[2]}function ru__relativeTimeWithPlural(number,withoutSuffix,key){var format={mm:withoutSuffix?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"};if(key==="m"){return withoutSuffix?"":""}else{return number+" "+ru__plural(format[key],+number)}}var monthsParse=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];var ru=moment__default.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:monthsParse,longMonthsParse:monthsParse,shortMonthsParse:monthsParse,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(now){if(now.week()!==this.week()){switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}}else{if(this.day()===2){return"[] dddd [] LT"}else{return"[] dddd [] LT"}}},lastWeek:function(now){if(now.week()!==this.week()){switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}}else{if(this.day()===2){return"[] dddd [] LT"}else{return"[] dddd [] LT"}}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:ru__relativeTimeWithPlural,mm:ru__relativeTimeWithPlural,h:"",hh:ru__relativeTimeWithPlural,d:"",dd:ru__relativeTimeWithPlural,M:"",MM:ru__relativeTimeWithPlural,y:"",yy:ru__relativeTimeWithPlural},meridiemParse:/|||/i,isPM:function(input){return/^(|)$/.test(input)},meridiem:function(hour,minute,isLower){if(hour<4){return""}else if(hour<12){return""}else if(hour<17){return""}else{return""}},ordinalParse:/\d{1,2}-(||)/,ordinal:function(number,period){switch(period){case"M":case"d":case"DDD":return number+"-";case"D":return number+"-";case"w":case"W":return number+"-";default:return number}},week:{dow:1,doy:7}});var se=moment__default.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var si=moment__default.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},ordinalParse:/\d{1,2} /,ordinal:function(number){return number+" "},meridiemParse:/ | |.|../,isPM:function(input){return input===".."||input===" "},meridiem:function(hours,minutes,isLower){if(hours>11){return isLower?"..":" "}else{return isLower?"..":" "}}});var sk__months="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),sk__monthsShort="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");function sk__plural(n){return n>1&&n<5}function sk__translate(number,withoutSuffix,key,isFuture){var result=number+" ";switch(key){case"s":return withoutSuffix||isFuture?"pr seknd":"pr sekundami";case"m":return withoutSuffix?"minta":isFuture?"mintu":"mintou";case"mm":if(withoutSuffix||isFuture){return result+(sk__plural(number)?"minty":"mint")}else{return result+"mintami"}break;case"h":return withoutSuffix?"hodina":isFuture?"hodinu":"hodinou";case"hh":if(withoutSuffix||isFuture){return result+(sk__plural(number)?"hodiny":"hodn")}else{return result+"hodinami"}break;case"d":return withoutSuffix||isFuture?"de":"dom";case"dd":if(withoutSuffix||isFuture){return result+(sk__plural(number)?"dni":"dn")}else{return result+"dami"}break;case"M":return withoutSuffix||isFuture?"mesiac":"mesiacom";case"MM":if(withoutSuffix||isFuture){return result+(sk__plural(number)?"mesiace":"mesiacov")}else{return result+"mesiacmi"}break;case"y":return withoutSuffix||isFuture?"rok":"rokom";case"yy":if(withoutSuffix||isFuture){return result+(sk__plural(number)?"roky":"rokov")}else{return result+"rokmi"}break}}var sk=moment__default.defineLocale("sk",{months:sk__months,monthsShort:sk__monthsShort,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:sk__translate,m:sk__translate,mm:sk__translate,h:sk__translate,hh:sk__translate,d:sk__translate,dd:sk__translate,M:sk__translate,MM:sk__translate,y:sk__translate,yy:sk__translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});function sl__processRelativeTime(number,withoutSuffix,key,isFuture){var result=number+" ";switch(key){case"s":return withoutSuffix||isFuture?"nekaj sekund":"nekaj sekundami";case"m":return withoutSuffix?"ena minuta":"eno minuto";case"mm":if(number===1){result+=withoutSuffix?"minuta":"minuto"}else if(number===2){result+=withoutSuffix||isFuture?"minuti":"minutama"}else if(number<5){result+=withoutSuffix||isFuture?"minute":"minutami"}else{result+=withoutSuffix||isFuture?"minut":"minutami"}return result;case"h":return withoutSuffix?"ena ura":"eno uro";case"hh":if(number===1){result+=withoutSuffix?"ura":"uro"}else if(number===2){result+=withoutSuffix||isFuture?"uri":"urama"}else if(number<5){result+=withoutSuffix||isFuture?"ure":"urami"}else{result+=withoutSuffix||isFuture?"ur":"urami"}return result;case"d":return withoutSuffix||isFuture?"en dan":"enim dnem";case"dd":if(number===1){result+=withoutSuffix||isFuture?"dan":"dnem"}else if(number===2){result+=withoutSuffix||isFuture?"dni":"dnevoma"}else{result+=withoutSuffix||isFuture?"dni":"dnevi"}return result;case"M":return withoutSuffix||isFuture?"en mesec":"enim mesecem";case"MM":if(number===1){result+=withoutSuffix||isFuture?"mesec":"mesecem"}else if(number===2){result+=withoutSuffix||isFuture?"meseca":"mesecema"}else if(number<5){result+=withoutSuffix||isFuture?"mesece":"meseci"}else{result+=withoutSuffix||isFuture?"mesecev":"meseci"}return result;case"y":return withoutSuffix||isFuture?"eno leto":"enim letom";case"yy":if(number===1){result+=withoutSuffix||isFuture?"leto":"letom"}else if(number===2){result+=withoutSuffix||isFuture?"leti":"letoma"}else if(number<5){result+=withoutSuffix||isFuture?"leta":"leti"}else{result+=withoutSuffix||isFuture?"let":"leti"}return result}}var sl=moment__default.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:true,weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:sl__processRelativeTime,m:sl__processRelativeTime,mm:sl__processRelativeTime,h:sl__processRelativeTime,hh:sl__processRelativeTime,d:sl__processRelativeTime,dd:sl__processRelativeTime,M:sl__processRelativeTime,MM:sl__processRelativeTime,y:sl__processRelativeTime,yy:sl__processRelativeTime},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var sq=moment__default.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),weekdaysParseExact:true,meridiemParse:/PD|MD/,isPM:function(input){return input.charAt(0)==="M"},meridiem:function(hours,minutes,isLower){return hours<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var sr_cyrl__translator={words:{m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(number,wordKey){return number===1?wordKey[0]:number>=2&&number<=4?wordKey[1]:wordKey[2]},translate:function(number,withoutSuffix,key){var wordKey=sr_cyrl__translator.words[key];if(key.length===1){return withoutSuffix?wordKey[0]:wordKey[1]}else{return number+" "+sr_cyrl__translator.correctGrammaticalCase(number,wordKey)}}};var sr_cyrl=moment__default.defineLocale("sr-cyrl",{months:"___________".split("_"),monthsShort:"._._._.____._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){var lastWeekDays=["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"];return lastWeekDays[this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:sr_cyrl__translator.translate,mm:sr_cyrl__translator.translate,h:sr_cyrl__translator.translate,hh:sr_cyrl__translator.translate,d:"",dd:sr_cyrl__translator.translate,M:"",MM:sr_cyrl__translator.translate,y:"",yy:sr_cyrl__translator.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var sr__translator={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(number,wordKey){return number===1?wordKey[0]:number>=2&&number<=4?wordKey[1]:wordKey[2]},translate:function(number,withoutSuffix,key){var wordKey=sr__translator.words[key];if(key.length===1){return withoutSuffix?wordKey[0]:wordKey[1]}else{return number+" "+sr__translator.correctGrammaticalCase(number,wordKey)}}};var sr=moment__default.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:true,weekdays:"nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){var lastWeekDays=["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"];return lastWeekDays[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:sr__translator.translate,mm:sr__translator.translate,h:sr__translator.translate,hh:sr__translator.translate,d:"dan",dd:sr__translator.translate,M:"mesec",MM:sr__translator.translate,y:"godinu",yy:sr__translator.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var ss=moment__default.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(hours,minutes,isLower){if(hours<11){return"ekuseni"}else if(hours<15){return"emini"}else if(hours<19){return"entsambama"}else{return"ebusuku"}},meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem==="ekuseni"){return hour}else if(meridiem==="emini"){return hour>=11?hour:hour+12}else if(meridiem==="entsambama"||meridiem==="ebusuku"){if(hour===0){return 0}return hour+12}},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});var sv=moment__default.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?"e":b===1?"a":b===2?"a":b===3?"e":"e";return number+output},week:{dow:1,doy:4}});var sw=moment__default.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}});var ta__symbolMap={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},ta__numberMap={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};var ta=moment__default.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:function(number){return number+""},preparse:function(string){return string.replace(/[]/g,function(match){return ta__numberMap[match]})},postformat:function(string){return string.replace(/\d/g,function(match){return ta__symbolMap[match]})},meridiemParse:/|||||/,meridiem:function(hour,minute,isLower){if(hour<2){return" "}else if(hour<6){return" "}else if(hour<10){return" "}else if(hour<14){return" "}else if(hour<18){return" "}else if(hour<22){return" "}else{return" "}},meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem===""){return hour<2?hour:hour+12}else if(meridiem===""||meridiem===""){return hour}else if(meridiem===""){return hour>=10?hour:hour+12}else{return hour+12}},week:{dow:0,doy:6}});var te=moment__default.defineLocale("te",{months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem===""){return hour<4?hour:hour+12}else if(meridiem===""){return hour}else if(meridiem===""){return hour>=10?hour:hour+12}else if(meridiem===""){return hour+12}},meridiem:function(hour,minute,isLower){if(hour<4){return""}else if(hour<10){return""}else if(hour<17){return""}else if(hour<20){return""}else{return""}},week:{dow:0,doy:6}});var th=moment__default.defineLocale("th",{months:"___________".split("_"),monthsShort:".._.._.._.._.._.._.._.._.._.._.._..".split("_"),monthsParseExact:true,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"H  m ",LTS:"H  m  s ",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H  m ",LLLL:"dddd D MMMM YYYY  H  m "},meridiemParse:/|/,isPM:function(input){return input===""},meridiem:function(hour,minute,isLower){if(hour<12){return""}else{return""}},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}});var tl_ph=moment__default.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(number){return number},week:{dow:1,doy:4}});var numbersNouns="pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function translateFuture(output){var time=output;time=output.indexOf("jaj")!==-1?time.slice(0,-3)+"leS":output.indexOf("jar")!==-1?time.slice(0,-3)+"waQ":output.indexOf("DIS")!==-1?time.slice(0,-3)+"nem":time+" pIq";return time}function translatePast(output){var time=output;time=output.indexOf("jaj")!==-1?time.slice(0,-3)+"Hu":output.indexOf("jar")!==-1?time.slice(0,-3)+"wen":output.indexOf("DIS")!==-1?time.slice(0,-3)+"ben":time+" ret";return time}function tlh__translate(number,withoutSuffix,string,isFuture){var numberNoun=numberAsNoun(number);switch(string){case"mm":return numberNoun+" tup";case"hh":return numberNoun+" rep";case"dd":return numberNoun+" jaj";case"MM":return numberNoun+" jar";case"yy":return numberNoun+" DIS"}}function numberAsNoun(number){var hundred=Math.floor(number%1e3/100),ten=Math.floor(number%100/10),one=number%10,word="";if(hundred>0){word+=numbersNouns[hundred]+"vatlh"}if(ten>0){word+=(word!==""?" ":"")+numbersNouns[ten]+"maH"}if(one>0){word+=(word!==""?" ":"")+numbersNouns[one]}return word===""?"pagh":word}var tlh=moment__default.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),monthsParseExact:true,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:translateFuture,past:translatePast,s:"puS lup",m:"wa tup",mm:tlh__translate,h:"wa rep",hh:tlh__translate,d:"wa jaj",dd:tlh__translate,M:"wa jar",MM:tlh__translate,y:"wa DIS",yy:tlh__translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var tr__suffixes={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};var tr=moment__default.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinalParse:/\d{1,2}'(inci|nci|nc|nc|uncu|nc)/,ordinal:function(number){if(number===0){return number+"'nc"}var a=number%10,b=number%100-a,c=number>=100?100:null;return number+(tr__suffixes[a]||tr__suffixes[b]||tr__suffixes[c])},week:{dow:1,doy:7}});var tzl=moment__default.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(input){return"d'o"===input.toLowerCase()},meridiem:function(hours,minutes,isLower){if(hours>11){return isLower?"d'o":"D'O"}else{return isLower?"d'a":"D'A"}},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:tzl__processRelativeTime,m:tzl__processRelativeTime,mm:tzl__processRelativeTime,h:tzl__processRelativeTime,hh:tzl__processRelativeTime,d:tzl__processRelativeTime,dd:tzl__processRelativeTime,M:tzl__processRelativeTime,MM:tzl__processRelativeTime,y:tzl__processRelativeTime,yy:tzl__processRelativeTime},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});function tzl__processRelativeTime(number,withoutSuffix,key,isFuture){var format={s:["viensas secunds","'iensas secunds"],m:["'n mut","'iens mut"],mm:[number+" muts",""+number+" muts"],h:["'n ora","'iensa ora"],hh:[number+" oras",""+number+" oras"],d:["'n ziua","'iensa ziua"],dd:[number+" ziuas",""+number+" ziuas"],M:["'n mes","'iens mes"],MM:[number+" mesen",""+number+" mesen"],y:["'n ar","'iens ar"],yy:[number+" ars",""+number+" ars"]};return isFuture?format[key][0]:withoutSuffix?format[key][0]:format[key][1]}var tzm_latn=moment__default.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}});var tzm=moment__default.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}});function uk__plural(word,num){var forms=word.split("_");return num%10===1&&num%100!==11?forms[0]:num%10>=2&&num%10<=4&&(num%100<10||num%100>=20)?forms[1]:forms[2]}function uk__relativeTimeWithPlural(number,withoutSuffix,key){var format={mm:withoutSuffix?"__":"__",hh:withoutSuffix?"__":"__",dd:"__",MM:"__",yy:"__"};if(key==="m"){return withoutSuffix?"":""}else if(key==="h"){return withoutSuffix?"":""}else{return number+" "+uk__plural(format[key],+number)}}function weekdaysCaseReplace(m,format){var weekdays={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")},nounCase=/(\[[]\]) ?dddd/.test(format)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(format)?"genitive":"nominative";return weekdays[nounCase][m.day()]}function processHoursFunction(str){return function(){return str+""+(this.hours()===11?"":"")+"] LT"}}var uk=moment__default.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:weekdaysCaseReplace,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:processHoursFunction("[ "),nextDay:processHoursFunction("[ "),lastDay:processHoursFunction("[ "),nextWeek:processHoursFunction("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return processHoursFunction("[] dddd [").call(this);case 1:case 2:case 4:return processHoursFunction("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:uk__relativeTimeWithPlural,mm:uk__relativeTimeWithPlural,h:"",hh:uk__relativeTimeWithPlural,d:"",dd:uk__relativeTimeWithPlural,M:"",MM:uk__relativeTimeWithPlural,y:"",yy:uk__relativeTimeWithPlural},meridiemParse:/|||/,isPM:function(input){return/^(|)$/.test(input)},meridiem:function(hour,minute,isLower){if(hour<4){return""}else if(hour<12){return""}else if(hour<17){return""}else{return""}},ordinalParse:/\d{1,2}-(|)/,ordinal:function(number,period){switch(period){case"M":case"d":case"DDD":case"w":case"W":return number+"-";case"D":return number+"-";default:return number}},week:{dow:1,doy:7}});var uz=moment__default.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}});var vi=moment__default.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:true,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:true,meridiemParse:/sa|ch/i,isPM:function(input){return/^ch$/i.test(input)},meridiem:function(hours,minutes,isLower){if(hours<12){return isLower?"sa":"SA"}else{return isLower?"ch":"CH"}},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun ri lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},ordinalParse:/\d{1,2}/,ordinal:function(number){return number},week:{dow:1,doy:4}});var x_pseudo=moment__default.defineLocale("x-pseudo",{months:"J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr".split("_"),monthsShort:"J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc".split("_"),monthsParseExact:true,weekdays:"S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d".split("_"),weekdaysShort:"S~_~M_~T_~Wd_~Th_~Fr_~St".split("_"),weekdaysMin:"S~_M~_T_~W_T~h_Fr~_S".split("_"),weekdaysParseExact:true,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~d~ t] LT",nextDay:"[T~m~rr~w t] LT",nextWeek:"dddd [t] LT",lastDay:"[~st~rd~ t] LT",lastWeek:"[L~st] dddd [t] LT",sameElse:"L"},relativeTime:{future:"~ %s",past:"%s ~g",s:" ~fw ~sc~ds",m:" ~m~t",mm:"%d m~~ts",h:"~ h~r",hh:"%d h~rs",d:" ~d",dd:"%d d~s",M:" ~m~th",MM:"%d m~t~hs",y:" ~r",yy:"%d ~rs"},ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=~~(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output},week:{dow:1,doy:4}});var zh_cn=moment__default.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYY-MM-DD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYY-MM-DD",ll:"YYYYMMMD",lll:"YYYYMMMDAhmm",llll:"YYYYMMMDddddAhmm"},meridiemParse:/|||||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem===""||meridiem===""||meridiem===""){return hour}else if(meridiem===""||meridiem===""){return hour+12}else{return hour>=11?hour:hour+12}},meridiem:function(hour,minute,isLower){var hm=hour*100+minute;if(hm<600){return""}else if(hm<900){return""}else if(hm<1130){return""}else if(hm<1230){return""}else if(hm<1800){return""}else{return""}},calendar:{sameDay:function(){return this.minutes()===0?"[]Ah[]":"[]LT"},nextDay:function(){return this.minutes()===0?"[]Ah[]":"[]LT"},lastDay:function(){return this.minutes()===0?"[]Ah[]":"[]LT"},nextWeek:function(){var startOfWeek,prefix;startOfWeek=moment__default().startOf("week");prefix=this.diff(startOfWeek,"days")>=7?"[]":"[]";return this.minutes()===0?prefix+"dddAh":prefix+"dddAhmm"},lastWeek:function(){var startOfWeek,prefix;startOfWeek=moment__default().startOf("week");prefix=this.unix()<startOfWeek.unix()?"[]":"[]";return this.minutes()===0?prefix+"dddAh":prefix+"dddAhmm"},sameElse:"LL"},ordinalParse:/\d{1,2}(||)/,ordinal:function(number,period){switch(period){case"d":case"D":case"DDD":return number+"";case"M":return number+"";case"w":case"W":return number+"";default:return number}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}});var zh_tw=moment__default.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMDAhmm",llll:"YYYYMMMDddddAhmm"},meridiemParse:/|||||/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0}if(meridiem===""||meridiem===""||meridiem===""){return hour}else if(meridiem===""){return hour>=11?hour:hour+12}else if(meridiem===""||meridiem===""){return hour+12}},meridiem:function(hour,minute,isLower){var hm=hour*100+minute;if(hm<600){return""}else if(hm<900){return""}else if(hm<1130){return""}else if(hm<1230){return""}else if(hm<1800){return""}else{return""}},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(||)/,ordinal:function(number,period){switch(period){case"d":case"D":case"DDD":return number+"";case"M":return number+"";case"w":case"W":return number+"";default:return number}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}});var moment_with_locales=moment__default;moment_with_locales.locale("en");return moment_with_locales});if(typeof Object.assign!="function"){Object.assign=function(target,varArgs){"use strict";if(target==null){throw new TypeError("Cannot convert undefined or null to object")}var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey]}}}}return to}}(function(root,factory){if(typeof define==="function"&&define.amd){define([],function(){root.Swipe=factory();return root.Swipe})}else if(typeof module==="object"&&module.exports){module.exports=factory()}else{root.Swipe=factory()}})(this,function(){var root=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||this;var _document=root.document;function Swipe(container,options){"use strict";options=options||{};var start={};var delta={};var isScrolling;var delay=options.auto||0;var interval;var noop=function(){};var offloadFn=function(fn){setTimeout(fn||noop,0)};var throttle=function(fn,threshhold){threshhold=threshhold||100;var timeout=null;function cancel(){if(timeout)clearTimeout(timeout)}function throttledFn(){var context=this;var args=arguments;cancel();timeout=setTimeout(function(){timeout=null;fn.apply(context,args)},threshhold)}throttledFn.cancel=cancel;return throttledFn};var browser={addEventListener:!!root.addEventListener,touch:"ontouchstart"in root||root.DocumentTouch&&_document instanceof DocumentTouch,transitions:function(temp){var props=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var i in props){if(temp.style[props[i]]!==undefined){return true}}return false}(_document.createElement("swipe"))};if(!container)return;var element=container.children[0];var slides,slidePos,width,length;var index=parseInt(options.startSlide,10)||0;var speed=options.speed||300;options.continuous=options.continuous!==undefined?options.continuous:true;options.autoRestart=options.autoRestart!==undefined?options.autoRestart:false;var throttledSetup=throttle(setup);var events={handleEvent:function(event){switch(event.type){case"mousedown":case"touchstart":this.start(event);break;case"mousemove":case"touchmove":this.move(event);break;case"mouseup":case"mouseleave":case"touchend":this.end(event);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":this.transitionEnd(event);break;case"resize":throttledSetup();break}if(options.stopPropagation){event.stopPropagation()}},start:function(event){var touches;if(isMouseEvent(event)){touches=event;event.preventDefault()}else{touches=event.touches[0]}start={x:touches.pageX,y:touches.pageY,time:+new Date};isScrolling=undefined;delta={};if(isMouseEvent(event)){element.addEventListener("mousemove",this,false);element.addEventListener("mouseup",this,false);element.addEventListener("mouseleave",this,false)}else{element.addEventListener("touchmove",this,false);element.addEventListener("touchend",this,false)}},move:function(event){var touches;if(isMouseEvent(event)){touches=event}else{if(event.touches.length>1||event.scale&&event.scale!==1){return}if(options.disableScroll){event.preventDefault()}touches=event.touches[0]}delta={x:touches.pageX-start.x,y:touches.pageY-start.y};if(typeof isScrolling==="undefined"){isScrolling=!!(isScrolling||Math.abs(delta.x)<Math.abs(delta.y))}if(!isScrolling){event.preventDefault();stop();if(options.continuous){translate(circle(index-1),delta.x+slidePos[circle(index-1)],0);translate(index,delta.x+slidePos[index],0);translate(circle(index+1),delta.x+slidePos[circle(index+1)],0)}else{delta.x=delta.x/(!index&&delta.x>0||index===slides.length-1&&delta.x<0?Math.abs(delta.x)/width+1:1);translate(index-1,delta.x+slidePos[index-1],0);translate(index,delta.x+slidePos[index],0);translate(index+1,delta.x+slidePos[index+1],0)}}},end:function(event){var duration=+new Date-start.time;var isValidSlide=Number(duration)<250&&Math.abs(delta.x)>20||Math.abs(delta.x)>width/2;var isPastBounds=!index&&delta.x>0||index===slides.length-1&&delta.x<0;if(options.continuous){isPastBounds=false}var direction=Math.abs(delta.x)/delta.x;if(!isScrolling){if(isValidSlide&&!isPastBounds){if(direction<0){if(options.continuous){move(circle(index-1),-width,0);move(circle(index+2),width,0)}else{move(index-1,-width,0)}move(index,slidePos[index]-width,speed);move(circle(index+1),slidePos[circle(index+1)]-width,speed);index=circle(index+1)}else{if(options.continuous){move(circle(index+1),width,0);move(circle(index-2),-width,0)}else{move(index+1,width,0)}move(index,slidePos[index]+width,speed);move(circle(index-1),slidePos[circle(index-1)]+width,speed);index=circle(index-1)}runCallback(getPos(),slides[index],direction)}else{if(options.continuous){move(circle(index-1),-width,speed);move(index,0,speed);move(circle(index+1),width,speed)}else{move(index-1,-width,speed);move(index,0,speed);move(index+1,width,speed)}}}if(isMouseEvent(event)){element.removeEventListener("mousemove",events,false);element.removeEventListener("mouseup",events,false);element.removeEventListener("mouseleave",events,false)}else{element.removeEventListener("touchmove",events,false);element.removeEventListener("touchend",events,false)}},transitionEnd:function(event){var currentIndex=parseInt(event.target.getAttribute("data-index"),10);if(currentIndex===index){if(delay||options.autoRestart)restart();runTransitionEnd(getPos(),slides[index])}}};setup();if(delay)begin();return{setup:setup,slide:function(to,speed){stop();slide(to,speed)},prev:function(){stop();prev()},next:function(){stop();next()},restart:restart,stop:stop,getPos:getPos,getNumSlides:function(){return length},kill:kill};function detachEvents(){if(browser.addEventListener){element.removeEventListener("touchstart",events,false);element.removeEventListener("mousedown",events,false);element.removeEventListener("webkitTransitionEnd",events,false);element.removeEventListener("msTransitionEnd",events,false);element.removeEventListener("oTransitionEnd",events,false);element.removeEventListener("otransitionend",events,false);element.removeEventListener("transitionend",events,false);root.removeEventListener("resize",events,false)}else{root.onresize=null}}function attachEvents(){if(browser.addEventListener){if(browser.touch){element.addEventListener("touchstart",events,false)}if(options.draggable){element.addEventListener("mousedown",events,false)}if(browser.transitions){element.addEventListener("webkitTransitionEnd",events,false);element.addEventListener("msTransitionEnd",events,false);element.addEventListener("oTransitionEnd",events,false);element.addEventListener("otransitionend",events,false);element.addEventListener("transitionend",events,false)}root.addEventListener("resize",events,false)}else{root.onresize=throttledSetup}}function setup(){slides=element.children;length=slides.length;if(slides.length<2){options.continuous=false}if(browser.transitions&&options.continuous&&slides.length<3){var clone0=slides[0].cloneNode(true);var clone1=element.children[1].cloneNode(true);element.appendChild(clone0);element.appendChild(clone1);clone0.setAttribute("data-cloned",true);clone1.setAttribute("data-cloned",true);slides=element.children}slidePos=new Array(slides.length);width=container.getBoundingClientRect().width||container.offsetWidth;element.style.width=slides.length*width*2+"px";var pos=slides.length;while(pos--){var slide=slides[pos];slide.style.width=width+"px";slide.setAttribute("data-index",pos);if(browser.transitions){slide.style.left=pos*-width+"px";move(pos,index>pos?-width:index<pos?width:0,0)}}var pos=slides.length;while(pos--){var slide=slides[pos];if(options.verticallyCenter){slide.style.top=(container.getBoundingClientRect().height-slide.getBoundingClientRect().height)/2+"px"}}if(options.continuous&&browser.transitions){move(circle(index-1),-width,0);move(circle(index+1),width,0)}if(!browser.transitions){element.style.left=index*-width+"px"}container.style.visibility="visible";detachEvents();attachEvents()}function prev(){if(options.continuous){slide(index-1)}else if(index){slide(index-1)}}function next(){if(options.continuous){slide(index+1)}else if(index<slides.length-1){slide(index+1)}}function runCallback(pos,index,dir){if(options.callback){options.callback(pos,index,dir)}}function runTransitionEnd(pos,index){if(options.transitionEnd){options.transitionEnd(pos,index)}}function circle(index){return(slides.length+index%slides.length)%slides.length}function getPos(){var currentIndex=index;if(currentIndex>=length){currentIndex=currentIndex-length}return currentIndex}function slide(to,slideSpeed){to=typeof to!=="number"?parseInt(to,10):to;if(index===to)return;if(browser.transitions){var direction=Math.abs(index-to)/(index-to);if(options.continuous){var natural_direction=direction;direction=-slidePos[circle(to)]/width;if(direction!==natural_direction){to=-direction*slides.length+to}}var diff=Math.abs(index-to)-1;while(diff--){move(circle((to>index?to:index)-diff-1),width*direction,0)}to=circle(to);move(index,width*direction,slideSpeed||speed);move(to,0,slideSpeed||speed);if(options.continuous){move(circle(to-direction),-(width*direction),0)}}else{to=circle(to);animate(index*-width,to*-width,slideSpeed||speed)}index=to;offloadFn(function(){runCallback(getPos(),slides[index],direction)})}function move(index,dist,speed){translate(index,dist,speed);slidePos[index]=dist}function translate(index,dist,speed){var slide=slides[index];var style=slide&&slide.style;if(!style)return;style.webkitTransitionDuration=style.MozTransitionDuration=style.msTransitionDuration=style.OTransitionDuration=style.transitionDuration=speed+"ms";style.webkitTransform="translate("+dist+"px,0)"+"translateZ(0)";style.msTransform=style.MozTransform=style.OTransform="translateX("+dist+"px)"}function animate(from,to,speed){if(!speed){element.style.left=to+"px";return}var start=+new Date;var timer=setInterval(function(){var timeElap=+new Date-start;if(timeElap>speed){element.style.left=to+"px";if(delay||options.autoRestart)restart();runTransitionEnd(getPos(),slides[index]);clearInterval(timer);return}element.style.left=(to-from)*(Math.floor(timeElap/speed*100)/100)+from+"px"},4)}function begin(){interval=setTimeout(next,delay)}function stop(){delay=0;clearTimeout(interval)}function restart(){stop();delay=options.auto||0;begin()}function isMouseEvent(e){return/^mouse/.test(e.type)}function kill(){stop();container.style.visibility="";element.style.width="";element.style.left="";var pos=slides.length;while(pos--){if(browser.transitions){translate(pos,0,0)}var slide=slides[pos];if(slide.getAttribute("data-cloned")){var _parent=slide.parentElement;_parent.removeChild(slide)}slide.style.width="";slide.style.left="";slide.style.webkitTransitionDuration=slide.style.MozTransitionDuration=slide.style.msTransitionDuration=slide.style.OTransitionDuration=slide.style.transitionDuration="";slide.style.webkitTransform=slide.style.msTransform=slide.style.MozTransform=slide.style.OTransform=""}detachEvents();throttledSetup.cancel()}}if(root.jQuery||root.Zepto){(function($){$.fn.Swipe=function(params){return this.each(function(){$(this).data("Swipe",new Swipe($(this)[0],params))})}})(root.jQuery||root.Zepto)}return Swipe});(function($){$.fn.tipTip=function(options){var defaults={activation:"hover",keepAlive:false,maxWidth:"1200px",edgeOffset:3,defaultPosition:"bottom",delay:200,fadeIn:200,fadeOut:200,attribute:"data-tiptip",content:false,enter:function(){},exit:function(){}};var opts=$.extend(defaults,options);if($("#tiptip_holder").length<=0){var tiptip_holder=$('<div id="tiptip_holder" style="pointer-events:none;max-width:'+opts.maxWidth+';"></div>');var tiptip_content=$('<div id="tiptip_content"></div>');var tiptip_arrow=$('<div id="tiptip_arrow"></div>');$("body").append(tiptip_holder.html(tiptip_content).prepend(tiptip_arrow.html('<div id="tiptip_arrow_inner"></div>')))}else{var tiptip_holder=$("#tiptip_holder");var tiptip_content=$("#tiptip_content");var tiptip_arrow=$("#tiptip_arrow")}return this.each(function(){var org_elem=$(this);if(opts.content){var org_title=opts.content}else{var org_title=org_elem.attr(opts.attribute)}if(org_title!=""){if(!opts.content){org_elem.removeAttr(opts.attribute)}var timeout=false;if(opts.activation=="hover"){org_elem.hover(function(){active_tiptip()},function(){if(!opts.keepAlive){deactive_tiptip()}});if(opts.keepAlive){tiptip_holder.hover(function(){},function(){deactive_tiptip()})}}else if(opts.activation=="focus"){org_elem.focus(function(){active_tiptip()}).blur(function(){deactive_tiptip()})}else if(opts.activation=="click"){org_elem.click(function(){active_tiptip();return false}).hover(function(){},function(){if(!opts.keepAlive){deactive_tiptip()}});if(opts.keepAlive){tiptip_holder.hover(function(){},function(){deactive_tiptip()})}}function active_tiptip(){opts.enter.call(this);tiptip_content.html(org_title);tiptip_holder.hide().removeAttr("class").css("margin","0");tiptip_arrow.removeAttr("style");var top=parseInt(org_elem.offset()["top"]);var left=parseInt(org_elem.offset()["left"]);var org_width=parseInt(org_elem.outerWidth());var org_height=parseInt(org_elem.outerHeight());var tip_w=tiptip_holder.outerWidth();var tip_h=tiptip_holder.outerHeight();var w_compare=Math.round((org_width-tip_w)/2);var h_compare=Math.round((org_height-tip_h)/2);var marg_left=Math.round(left+w_compare);var marg_top=Math.round(top+org_height+opts.edgeOffset);var t_class="";var arrow_top="";var arrow_left=Math.round(tip_w-12)/2;if(opts.defaultPosition=="bottom"){t_class="_bottom"}else if(opts.defaultPosition=="top"){t_class="_top"}else if(opts.defaultPosition=="left"){t_class="_left"}else if(opts.defaultPosition=="right"){t_class="_right"}var right_compare=w_compare+left<parseInt($(window).scrollLeft());var left_compare=tip_w+left>parseInt($(window).width());if(right_compare&&w_compare<0||t_class=="_right"&&!left_compare||t_class=="_left"&&left<tip_w+opts.edgeOffset+5){t_class="_right";arrow_top=Math.round(tip_h-13)/2;arrow_left=-12;marg_left=Math.round(left+org_width+opts.edgeOffset);marg_top=Math.round(top+h_compare)}else if(left_compare&&w_compare<0||t_class=="_left"&&!right_compare){t_class="_left";arrow_top=Math.round(tip_h-13)/2;arrow_left=Math.round(tip_w);marg_left=Math.round(left-(tip_w+opts.edgeOffset+5));marg_top=Math.round(top+h_compare)}var top_compare=top+org_height+opts.edgeOffset+tip_h+8>parseInt($(window).height()+$(window).scrollTop());var bottom_compare=top+org_height-(opts.edgeOffset+tip_h+8)<0;if(top_compare||t_class=="_bottom"&&top_compare||t_class=="_top"&&!bottom_compare){if(t_class=="_top"||t_class=="_bottom"){t_class="_top"}else{t_class=t_class+"_top"}arrow_top=tip_h;marg_top=Math.round(top-(tip_h+5+opts.edgeOffset))}else if(bottom_compare|(t_class=="_top"&&bottom_compare)||t_class=="_bottom"&&!top_compare){if(t_class=="_top"||t_class=="_bottom"){t_class="_bottom"}else{t_class=t_class+"_bottom"}arrow_top=-12;marg_top=Math.round(top+org_height+opts.edgeOffset)}if(t_class=="_right_top"||t_class=="_left_top"){marg_top=marg_top+5}else if(t_class=="_right_bottom"||t_class=="_left_bottom"){marg_top=marg_top-5}if(t_class=="_left_top"||t_class=="_left_bottom"){marg_left=marg_left+5}tiptip_arrow.css({"margin-left":arrow_left+"px","margin-top":arrow_top+"px"});tiptip_holder.css({"margin-left":marg_left+"px","margin-top":marg_top+"px"}).attr("class","tip"+t_class);if(timeout){clearTimeout(timeout)}timeout=setTimeout(function(){tiptip_holder.stop(true,true).fadeIn(opts.fadeIn)},opts.delay)}function deactive_tiptip(){opts.exit.call(this);if(timeout){clearTimeout(timeout)}tiptip_holder.fadeOut(opts.fadeOut)}}})}})(jQuery);(function(){this.ResizeSensor=function(element,callback){function EventQueue(){this.q=[];this.add=function(ev){this.q.push(ev)};var i,j;this.call=function(){for(i=0,j=this.q.length;i<j;i++){this.q[i].call()}}}function getComputedStyle(element,prop){if(element.currentStyle){return element.currentStyle[prop]}else if(window.getComputedStyle){return window.getComputedStyle(element,null).getPropertyValue(prop)}else{return element.style[prop]}}function attachResizeEvent(element,resized){if(!element.resizedAttached){element.resizedAttached=new EventQueue;element.resizedAttached.add(resized)}else if(element.resizedAttached){element.resizedAttached.add(resized);return}element.resizeSensor=document.createElement("div");element.resizeSensor.className="resize-sensor";var style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;";var styleChild="position: absolute; left: 0; top: 0;";element.resizeSensor.style.cssText=style;element.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+style+'">'+'<div style="'+styleChild+'"></div>'+"</div>"+'<div class="resize-sensor-shrink" style="'+style+'">'+'<div style="'+styleChild+' width: 200%; height: 200%"></div>'+"</div>";element.appendChild(element.resizeSensor);if(!{fixed:1,absolute:1}[getComputedStyle(element,"position")]){element.style.position="relative"}var expand=element.resizeSensor.childNodes[0];var expandChild=expand.childNodes[0];var shrink=element.resizeSensor.childNodes[1];var shrinkChild=shrink.childNodes[0];var lastWidth,lastHeight;var reset=function(){expandChild.style.width=expand.offsetWidth+10+"px";expandChild.style.height=expand.offsetHeight+10+"px";expand.scrollLeft=expand.scrollWidth;expand.scrollTop=expand.scrollHeight;shrink.scrollLeft=shrink.scrollWidth;shrink.scrollTop=shrink.scrollHeight;lastWidth=element.offsetWidth;lastHeight=element.offsetHeight};reset();var changed=function(){if(element.resizedAttached){element.resizedAttached.call()}};var addEvent=function(el,name,cb){if(el.attachEvent){el.attachEvent("on"+name,cb)}else{el.addEventListener(name,cb)}};addEvent(expand,"scroll",function(){if(element.offsetWidth>lastWidth||element.offsetHeight>lastHeight){changed()}reset()});addEvent(shrink,"scroll",function(){if(element.offsetWidth<lastWidth||element.offsetHeight<lastHeight){changed()}reset()})}if("[object Array]"===Object.prototype.toString.call(element)||"undefined"!==typeof jQuery&&element instanceof jQuery||"undefined"!==typeof Elements&&element instanceof Elements){var i=0,j=element.length;for(;i<j;i++){attachResizeEvent(element[i],callback)}}else{attachResizeEvent(element,callback)}this.detach=function(){ResizeSensor.detach(element)}};this.ResizeSensor.detach=function(element){if(element.resizeSensor){element.removeChild(element.resizeSensor);delete element.resizeSensor;delete element.resizedAttached}}})();var g_keyCodes={esc:27,ret:13,comma:188,backslash:191,slash:220,pageUp:33,pageDown:34,end:35,"home.safari":63273,home:36,backspace:8,up:38,down:40};var g_imageServerUrl="http://e.snmc.io/";var g_trSources={"search.category_header.artist":"Artists","search.category_header.release":"Releases","search.category_header.song":"Songs","search.category_header.film":"Films","search.category_header.genre_music":"Genres","search.category_header.film_person":"People","search.category_header.location":"Locations","search.category_header.role_music":"Music role","search.category_header.genre_film":"Genres","search.category_header.company_music":"Label / Distributor","search.category_header.game":"Games","search.category_header.game_person":"Game person","search.category_header.company_game":"Companies","search.category_header.game_platform":"Platforms","search.category_header.genre_games":"Genres","search.category_header.user":"User","search.category_header.franchise":"Franchise","search.category_header.character":"Character","search.category_header.more":"More..."};function tr(translationStringVar){return g_trSources[translationStringVar]}function makePrototype(superclass){function f(){}f.prototype=superclass.prototype;return new f}function extend(child,base){child.prototype=makePrototype(base);child.prototype.constructor=child}function uiObjFromId(id){return $("#"+id).data("uiobj")}function uiObj(obj){return $("#"+$(obj).data("mainid")).data("uiobj")}var RYMUI={elements:[],addElement:function(type,obj){this.elements[obj.id]=obj},getElement:function(id){return this.elements[id]}};var RYMFormUI=function(id,parent){this.id=id;this.parent=parent;this.uiObj=$("#"+id);this.value=$("#"+id).val();this.lifespan=1;$("#"+id).data("uiobj",this)};RYMFormUI.prototype.setVal=function(val){this.value=val;return $("#"+this.id).val(val)};RYMFormUI.prototype.getVal=function(){return this.value};RYMFormUI.prototype.setData=function(key,val){return $("#"+this.id).data(key,val)};RYMFormUI.prototype.getData=function(key){return $("#"+this.id).data(key)};RYMFormUI.prototype.clearStatusText=function(text){$("#"+this.id+"_success").hide();$("#"+this.id+"_info").hide();$("#"+this.id+"_error").hide()};RYMFormUI.prototype.showError=function(text){$("#"+this.id+"_success").hide();$("#"+this.id+"_info").hide();$("#"+this.id+"_error").html(text).fadeIn(100)};RYMFormUI.prototype.showSuccess=function(text){$("#"+this.id+"_error").hide();$("#"+this.id+"_info").hide();$("#"+this.id+"_success").html(text).fadeIn(100)};RYMFormUI.prototype.showInfo=function(text){$("#"+this.id+"_success").hide();$("#"+this.id+"_error").hide();$("#"+this.id+"_info").html(text).fadeIn(100)};RYMFormUI.prototype.init=function(){};RYMFormUI.prototype.validate=function(){};RYMFormUI.prototype.propagateEvent=function(eventName){if(this.parent){var pObj=uiObjFromId(this.parent);if(pObj){pObj[eventName](this)}}};RYMFormUI.prototype.checkRows=function(lastEditedObj){var el=$("#"+this.uiType+"_"+this.id+"_frame ."+this.uiType+"_row:last");var lastItem=$(lastEditedObj.uiObj).parents("."+this.uiType+"_row");var isLastItem=$(el).attr("id")==lastItem.attr("id");if($(lastEditedObj.textObj).val().length>0){if(isLastItem){this.addLine()}}else{if(!isLastItem){$(lastEditedObj.uiObj).parents("."+this.uiType+"_row").remove()}}};RYMFormUI.prototype.addLine=function(){var ids=this.clonePrefixIds;var nextId=this.rowNumber++;if(!ids){alert("Error creating UI objects.")}var clonedRow=$("#"+this.uiType+"_"+this.id+"_blank").clone().removeClass("ui_multi_blank");clonedRow.data("rownum",nextId);this._tmpObjList=new Array;var cloneObj=this;clonedRow.find("*").andSelf().filter("[id]").each(function(){var newId=this.id.replace("_blank","_"+nextId);var forAttr=this.htmlFor;if(forAttr){var newFor=forAttr.replace("_blank","_"+nextId);$(this).attr("for",newFor)}$("#"+newId).data("options",$("#"+this.id).data("options"));this.id=newId;if(this.name&&this.name.length){this.name=this.id}var mainId=this.dataset.mainid;if(mainId){if(-1==cloneObj._tmpObjList.indexOf(mainId)){cloneObj._tmpObjList.push(mainId)}mainId=mainId.replace("_blank","_"+nextId);this.dataset.mainid=mainId}});$("#"+this.uiType+"_"+this.id+"_frame").append(clonedRow);for(var i in this._tmpObjList){var blankId=this._tmpObjList[i];var blankObj=uiObjFromId(blankId);if(!blankObj){alert(blankId+" to obj is null")}var newId=blankId.replace("_blank","_"+nextId);var obj=new window["RYM"+blankObj.uiType](newId,blankObj.parent);RYMUI.addElement(blankObj.uiType,obj);$(obj).data("obj",obj);obj.init()}this._tmpObjList=null;if(this.options.focusOnNewLine){$("#"+this.uiType+"_"+this.id+"_frame").find("select").last().focus()}if(this.options.sortable){$("#"+this.uiType+"_"+this.id+"_frame").sortable({axis:"y",handle:".ui_draghandle"})}};var RYMartistPage={expandedIssues:{},expandedIssuesRequests:{},expandedRoles:{},expandedRolesRequests:{},searchTimer:null,pendingSearchRequest:null,artist_id:null,RYMartistPage:"",tempMultiSort:null,discoSection:"music",expandIssues:function(album_id){var state=RYMartistPage.expandedIssues[album_id]||"unknown";if(state=="unknown"){state="loading";$("#issues_"+album_id).html('<div class="loading_issues"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200);RYMartistPage.expandedIssuesRequests[album_id]=rym.request.post("ExpandDiscographyIssues",{album_id:album_id},null,"script")}else if(state=="loaded"&&!$("#issues_"+album_id).is(":visible")){$("#issues_"+album_id).slideDown(200)}else{$("#issues_"+album_id).slideUp(200);if(RYMartistPage.expandedIssuesRequests[album_id]){RYMartistPage.expandedIssuesRequests[album_id].abort();RYMartistPage.expandedIssuesRequests[album_id]=null;state="unknown"}if(state!="loaded"){state="unknown"}}RYMartistPage.expandedIssues[album_id]=state},expandCreditRole:function(artist_id,role_id){var state=RYMartistPage.expandedRoles[role_id]||"unknown";if(state=="unknown"){state="loading";$("#credits_role_"+role_id).html('<div class="loading_issues"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200);RYMartistPage.expandedRolesRequests[role_id]=rym.request.post("ExpandCreditRoleIssues",{artist_id:artist_id,role_id:role_id},null,"script")}else if(state=="loaded"&&!$("#credits_role_"+role_id).is(":visible")){$("#credits_role_"+role_id).slideDown(200)}else{$("#credits_role_"+role_id).slideUp(200);if(RYMartistPage.expandedRolesRequests[role_id]){RYMartistPage.expandedRolesRequests[role_id].abort();RYMartistPage.expandedRolesRequests[role_id]=null;state="unknown"}if(state!="loaded"){state="unknown"}}RYMartistPage.expandedRoles[role_id]=state},_expandIssuesCallback:function(album_id,results){RYMartistPage.expandedIssues[album_id]="loaded";var el=$("#issues_"+album_id);el.html(results);el.find(".has_tip").tipTip()},_expandCreditRoleCallback:function(role_id,results){RYMartistPage.expandedIssues[role_id]="loaded";var el=$("#credits_role_"+role_id);el.html(results);el.find(".has_tip").tipTip();$(".delayed_background_img").appear(function(){$(this).css("background",$(this).data("delayloadurl"))})},applySearchFilters:function(force_refresh){if(RYMartistPage.searchTimer){clearTimeout(RYMartistPage.searchTimer);RYMartistPage.searchTimer=null}RYMartistPage.searchTimer=setTimeout("RYMartistPage._doSearch("+force_refresh+")",300);if($("#disco_search").val().length==0){$("#disco_remove").hide()}else{$("#disco_remove").show()}},sortDiscography:function(sort){$("#disco_sort").val(sort);$("#disco_sort_chosen").text($("#disco_sort_"+sort).text());RYMartistPage.applySearchFilters(true)},sortDiscography:function(sort){$("#disco_sort").val(sort);$("#disco_sort_chosen").text($("#disco_sort_"+sort).text());RYMartistPage.applySearchFilters(true)},expandDiscographySection:function(type){$("#disco_header_"+type).scrollintoview(100);var discoEl=$("#disco_type_"+type);var outerHeight=discoEl.outerHeight();discoEl.css("min-height",outerHeight+"px");discoEl.html('<div class="loading_disco"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200);var show_appearances=$("#disco_show_appearances").is(":checked");var sort=$("#disco_sort").val();rym.request.post("ExpandDiscographySection",{artist_id:RYMartistPage.artist_id,sort:sort,show_appearances:show_appearances,type:type})},_expandDiscographySectionCallback:function(type,results){$("#disco_type_"+type).html(results);$(".delayed_background_img").appear(function(){$(this).css("background",$(this).data("delayloadurl"))});$("#disco_header_"+type).scrollintoview(100)},_doSearch:function(force_refresh){var searchterm=$("#disco_search").val();var show_appearances=$("#disco_show_appearances").is(":checked");var sort=$("#disco_sort").val();if(RYMartistPage.discoSection=="music"){if(force_refresh){$("#discography").html('<div class="loading_disco"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200);RYMartistPage.pendingSearchRequest=rym.request.post("FilterDiscography",{artist_id:RYMartistPage.artist_id,sort:sort,searchterm:searchterm,show_appearances:show_appearances})}else if(RYMartistPage.lastTerm!=searchterm){if(searchterm.length>0){show_appearances=true}$("#discography").html('<div class="loading_disco"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200);RYMartistPage.pendingSearchRequest=rym.request.post("FilterDiscography",{artist_id:RYMartistPage.artist_id,sort:sort,searchterm:searchterm,show_appearances:show_appearances})}}else{if(force_refresh){$("#filmography").html('<div class="loading_disco"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200);RYMartistPage.pendingSearchRequest=rym.request.post("FilterFilmDiscography",{artist_id:RYMartistPage.artist_id,sort:sort,searchterm:searchterm,show_appearances:show_appearances})}else if(RYMartistPage.lastTerm!=searchterm){if(searchterm.length>0){show_appearances=true}$("#filmography").html('<div class="loading_disco"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200);RYMartistPage.pendingSearchRequest=rym.request.post("FilterFilmDiscography",{artist_id:RYMartistPage.artist_id,sort:sort,searchterm:searchterm,show_appearances:show_appearances})}}},clearSearch:function(){$("#disco_search").val("");RYMartistPage.applySearchFilters(true)},_searchCallback:function(term,results){RYMartistPage.lastTerm=term;if(RYMartistPage.discoSection=="music"){$("#discography").html(results)}else if(RYMartistPage.discoSection=="film"){$("#filmography").html(results)}$(".delayed_background_img").appear(function(){$(this).css("background",$(this).data("delayloadurl"))})},clearMultiSort:function(){RYMartistPage.tempMultiSort=new Array;$(".ui_sort_selector_direction").removeClass("selected");console.log("clearing multisort: ")},applyMultiSort:function(){var strMultiSort=RYMartistPage.tempMultiSort.join(",");var oldSort=$("#disco_sort").val();console.log("applying multisort: "+strMultiSort);if(strMultiSort.length==0||oldSort==strMultiSort){return}$("#disco_sort").val(strMultiSort);RYMartistPage.applySearchFilters(true)},addMultiSort:function(field,direction){$("#ui_sort_selector_multi_"+field+"_"+direction).addClass("selected");RYMartistPage.tempMultiSort.push(field+"."+direction);console.log("adding multisort: "+field)},_openIssueCatalogerCallback:function(album_id,results){$("#issue_cataloger_content_"+album_id).html(results);$("#issue_cataloger_"+album_id).show()},openIssueCataloger:function(album_id){rym.request.post("OpenIssueCataloger",{album_id:album_id},null,"script");$("#issue_cataloger_content_"+album_id).html("Loading...");$("#issue_cataloger_"+album_id).show()},collapseIssueCataloger:function(album_id){$("#issue_cataloger_"+album_id).hide()},_openFilmCatalogerCallback:function(film_id,results){$("#film_cataloger_content_"+film_id).html(results);$("#film_cataloger_"+film_id).show()},openFilmCataloger:function(film_id){rym.request.post("OpenFilmCataloger",{film_id:film_id},null,"script");$("#film_cataloger_content_"+film_id).html("Loading...");$("#film_cataloger_"+film_id).show()},collapseFilmCataloger:function(film_id){$("#film_cataloger_"+film_id).hide()},loadShows:function(artist_id,direction){$("#disco_expand_"+direction).text("Loading...").css("cursor","inherit");rym.request.post("LoadMoreShows",{artist_id:artist_id,direction:direction},null,"script")},_loadShowsCallback:function(artist_id,direction,results){if(direction=="prev"){$("#shows").prepend(results)}else{$("#shows").append(results)}$("#no_shows").hide();$("#disco_expand_"+direction).hide()},setWorkGrouping:function(artist_id,grouping){var discoEl=$("#works");var outerHeight=discoEl.outerHeight();discoEl.css("min-height",outerHeight+"px");discoEl.html('<div class="loading_disco"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200);$(".sort_choice").removeClass("selected");$("#work_grouping_choice_"+grouping).addClass("selected");rym.request.post("SetWorkGrouping",{artist_id:artist_id,grouping:grouping},null,"script")},_setWorkGroupingCallback:function(results){$("#works").html(results)},setCreditsGrouping:function(artist_id,grouping){var discoEl=$("#release_credits");var outerHeight=discoEl.outerHeight();discoEl.css("min-height",outerHeight+"px");discoEl.html('<div class="loading_disco"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200);$(".sort_choice").removeClass("selected");$("#credit_grouping_choice_"+grouping).addClass("selected");rym.request.post("SetCreditsGrouping",{artist_id:artist_id,grouping:grouping},null,"script")},_setCreditsGroupingCallback:function(results){$("#release_credits").html(results);$(".delayed_background_img").appear(function(){$(this).css("background",$(this).data("delayloadurl"))})}};var RYMchartPage={start_year:null,end_year:null,temp_start_year:null,temp_end_year:null,in_date_selection:false,submit:function(){var options={scope:$("#scope").val(),type:$("#type").val(),chart_type:$("#chart_type").val(),chart_object:$("#chart_object").val(),release_types:$("#release_types").val(),start_date:$("#start_date").val(),end_date:$("#end_date").val(),include_genres:$("#genre_include").val(),exclude_genres:$("#genre_exclude").val(),include_sec_genres:$("#sec_genre_include").val(),exclude_sec_genres:$("#sec_genre_exclude").val(),include_descriptors:$("#descriptor_include").val(),exclude_descriptors:$("#descriptor_exclude").val(),include_attributes:$("#attribute_include").val(),exclude_attributes:$("#attribute_exclude").val(),include_languages:$("#language_include").val(),exclude_languages:$("#language_exclude").val(),include_artists:$("#artist_include").val(),include_platforms:$("#platform_include").val(),artist_group:$("#artist_group").val(),artist_locations:$("#artist_locations").val(),user_group:$("#user_group").val(),user_locations:$("#user_locations").val(),user_group_other:$("#user_group_other").val(),user_followers:$("#user_group_followers").is(":checked"),user_following:$("#user_group_following").is(":checked"),user_compatible:$("#user_group_compatible").is(":checked"),cat_exclude:$("#cat_exclude").val(),pop_weight:$("#pop_weight").val(),include_live:$("#include_live").val(),include_archival:$("#include_archival").val(),exclude_other:$("#exclude_other").val(),min_ratings:$("#min_ratings").val(),genre_include_all:$("#genre_include_all").val(),sec_genre_include_all:$("#sec_genre_include_all").val(),descriptor_include_all:$("#descriptor_include_all").val(),artist_include_all:$("#artist_include_all").val(),artist_include_minor:$("#artist_include_minor").val(),attribute_include_all:$("#attribute_include_all").val(),genre_include_children:$("#genre_include_incl_children").is(":checked"),genre_exclude_children:$("#genre_exclude_incl_children").is(":checked"),sec_genre_include_children:$("#sec_genre_include_incl_children").is(":checked"),sec_genre_exclude_children:$("#sec_genre_exclude_incl_children").is(":checked"),descriptor_include_children:$("#descriptor_include_incl_children").is(":checked"),descriptor_exclude_children:$("#descriptor_exclude_incl_children").is(":checked")};$(".chart_error").hide();$(".chart_create_btn").addClass("submitted").off("click").text("Loading...");rym.request.post("UpdateChartUrl",options,null,"script")},selectChartType:function(chart_type){$(".chart_type_btn").removeClass("selected");$("#chart_type_btn_"+chart_type).addClass("selected");$("#chart_type").val(chart_type);if(chart_type=="top"){$("#chart_pop_weight_section").show()}else{$("#chart_pop_weight_section").hide();RYMchartPage.selectPopularityWeight(3)}},selectChartItem:function(chart_object){$(".chart_object_btn").removeClass("selected");$("#chart_object_btn_"+chart_object).addClass("selected");$("#chart_object").val(chart_object);if(chart_object=="song"){$("#chart_section_release_type").hide();$("#chart_section_sec_genres").hide();$("#chart_section_exclude_sec_genres").hide();$("#chart_section_catalog").hide();$("#chart_attribute_section").hide()}else{$("#chart_section_release_type").show();$("#chart_section_sec_genres").show();$("#chart_section_exclude_sec_genres").show();$("#chart_section_catalog").show();$("#chart_attribute_section").show()}},selectChartUserGroup:function(user_group){$(".user_group_btn").removeClass("selected");$("#user_group_btn_"+user_group).addClass("selected");$("#user_group_frame")[0].className="user_group group_"+user_group;$("#user_group").val(user_group)},selectChartArtistGroup:function(artist_group){$(".artist_group_btn").removeClass("selected");$("#artist_group_btn_"+artist_group).addClass("selected");$("#artist_group_frame")[0].className="artist_group group_"+artist_group;$("#artist_group").val(artist_group)},_updateReleaseTypeValue:function(){var selectedItems=$(".release_type_btn.selected");var items=[];for(var i in selectedItems){if(selectedItems[i].dataset&&selectedItems[i].dataset.val){items.push(selectedItems[i].dataset.val)}}items=items.sort(function(a,b){return a-b});var jsval=JSON.stringify(items);$(".chart_release_all_none_btn").removeClass("selected");if(jsval=='["1"]'){$("#chart_release_all_none_btn_albums").addClass("selected")}else if(jsval=='["1","2","7","8"]'){$("#chart_release_all_none_btn_main").addClass("selected")}else if(jsval=='["4"]'){$("#chart_release_all_none_btn_singles").addClass("selected")}else if(jsval=="[]"){$("#chart_release_all_none_btn_clear").addClass("selected")}else if(jsval=='["1","2","3","4","5","6","7","8"]'){$("#chart_release_all_none_btn_all").addClass("selected")}$("#release_types").val(jsval)},selectReleaseTypeNone:function(release_type){$(".release_type_btn").removeClass("selected");RYMchartPage._updateReleaseTypeValue()},selectReleaseTypeAll:function(release_type){$(".release_type_btn").addClass("selected");RYMchartPage._updateReleaseTypeValue()},selectReleaseTypeMain:function(release_type){$(".release_type_btn").removeClass("selected");$("#release_type_btn_1").addClass("selected");$("#release_type_btn_2").addClass("selected");$("#release_type_btn_4").addClass("selected");$("#release_type_btn_7").addClass("selected");RYMchartPage._updateReleaseTypeValue()},selectReleaseTypeAlbums:function(release_type){$(".release_type_btn").removeClass("selected");$("#release_type_btn_1").addClass("selected");RYMchartPage._updateReleaseTypeValue()},selectReleaseTypeSingles:function(release_type){$(".release_type_btn").removeClass("selected");$("#release_type_btn_4").addClass("selected");RYMchartPage._updateReleaseTypeValue()},toggleReleaseType:function(release_type){var btnEl=$("#release_type_btn_"+release_type);btnEl.toggleClass("selected");var el=$("#release_types");RYMchartPage._updateReleaseTypeValue()},onCustomDateChange:function(date_el){var date_str=JSON.parse(date_el)[0];var date_els=date_str.split(".");var start_date_els=date_els[0].split("-");var end_date_els=date_els[3].split("-");var start_precision=date_els[1];var end_precision=date_els[4];var start_date=18e6;var end_date=20199999;switch(start_precision){case"a":start_date=start_date_els.join("");break;case"b":start_date=start_date_els[0]+start_date_els[1]+"00";break;case"c":start_date=start_date_els[0]+"0000";break;case"d":start_date=start_date_els[0]+"0000";break;default:alert("Error - this type of date range cannot be used for charts.");return}switch(end_precision){case"a":end_date=end_date_els.join("");break;case"b":end_date=end_date_els[0]+end_date_els[1]+"99";break;case"c":end_date=end_date_els[0]+"9999";break;case"d":end_date=end_date_els[0]+"9999";break;case"p":end_date=20199999;break;default:alert("Error - this type of date range cannot be used for charts.");return}$("#start_date").val(start_date);$("#end_date").val(end_date)},_date_pad:function(num){if(num.length==1){return"0"+num}else{return num}},selectCustomRange:function(start,end){var months=[null,"jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];var start_year=Math.floor(start/1e4);var start_month=Math.floor(start%1e4/100);var start_day=Math.floor(start%100);var end_year=Math.floor(end/1e4);var end_month=Math.floor(end%1e4/100);var end_day=Math.floor(end%100);debugger;var date_str="";var date_text="";var date_end_text="";var date_end_str="";if(start_day!=0){date_text=start_day+" "+months[start_month]+" "+start_year;date_str=start_year+"-"+RYMchartPage._date_pad(start_month)+"-"+RYMchartPage._date_pad(start_day)+".a.0."}else if(start_month!=0){date_text=months[start_month]+" "+start_year;date_str=start_year+"-"+RYMchartPage._date_pad(start_month)+"-"+"01"+".b.0."}else{date_text=start_year;date_str=start_year+"-01-01.c.0."}if(end_day!=99){date_end_text=end_day+" "+months[end_month]+" "+end_year;date_end_str=end_year+"-"+RYMchartPage._date_pad(end_month)+"-"+RYMchartPage._date_pad(end_day)+".a"}else if(end_month!=99){date_end_text=months[end_month]+" "+end_year;date_end_str=end_year+"-"+RYMchartPage._date_pad(end_month)+"-"+"01"+".b"}else{date_end_text=end_year;date_end_str=end_year+"-01-01.c"}if(date_end_text!=date_text){date_text+="-"+date_end_text}date_str+=date_end_str;$("#chart_custom_date_range_text").val(date_text);$("#chart_custom_date_range").val(JSON.stringify(new Array(date_str)))},selectAnyAll:function(id,any_all){$("#any_all_"+id+" .any_all_choice").removeClass("selected");$("#any_all_"+id+"_"+any_all).addClass("selected");$("#"+id).val(any_all=="all"?1:0)},onMouseUpDateChooserDecade:function(event,year){RYMchartPage.in_date_selection=false},onMouseDownDateChooserDecade:function(event,year){if(window.event&&window.event.shiftKey){if(year<RYMchartPage.temp_start_year){RYMchartPage.selectDateRange(year*1e4,RYMchartPage.temp_end_year*1e4+9999)}else if(year>RYMchartPage.temp_end_year){RYMchartPage.selectDateRange(RYMchartPage.temp_start_year*1e4,(year+9)*1e4+9999)}else{RYMchartPage.selectDateRange(RYMchartPage.temp_start_year*1e4,RYMchartPage.temp_end_year*1e4+9999)}}else{RYMchartPage.selectDateRange(year*1e4,(year+9)*1e4+9999);RYMchartPage.temp_start_year=year;RYMchartPage.temp_end_year=year+9;RYMchartPage.in_date_selection=true}},onMouseOverDateChooserDecade:function(event,year){if(RYMchartPage.in_date_selection){if(year<RYMchartPage.temp_start_year){RYMchartPage.selectDateRange(year*1e4,RYMchartPage.temp_end_year*1e4+9999)}else if(year>RYMchartPage.temp_end_year){RYMchartPage.selectDateRange(RYMchartPage.temp_start_year*1e4,(year+9)*1e4+9999)}else{RYMchartPage.selectDateRange(RYMchartPage.temp_start_year*1e4,RYMchartPage.temp_end_year)*1e4+9999}}},onMouseUpDateChooserYear:function(event,year){RYMchartPage.in_date_selection=false},onMouseDownDateChooserYear:function(event,year){if(window.event&&window.event.shiftKey){if(year<RYMchartPage.temp_start_year){RYMchartPage.selectDateRange(year*1e4,RYMchartPage.temp_end_year*1e4+9999)}else if(year>RYMchartPage.temp_end_year){RYMchartPage.selectDateRange(RYMchartPage.temp_start_year*1e4+9999,year*1e4+9999)}}else{RYMchartPage.selectDateRange(year*1e4,year*1e4+9999);RYMchartPage.in_date_selection=true;RYMchartPage.temp_start_year=year;RYMchartPage.temp_end_year=year}},onMouseOverDateChooserYear:function(event,year){if(RYMchartPage.in_date_selection){if(year<RYMchartPage.temp_start_year){RYMchartPage.selectDateRange(year*1e4,RYMchartPage.temp_end_year*1e4+9999)}else if(year>RYMchartPage.temp_end_year){RYMchartPage.selectDateRange(RYMchartPage.temp_start_year*1e4,year*1e4+9999)}}},selectDateType:function(date_type){$(".date_range_btn").removeClass("selected");$("#date_range_"+date_type).addClass("selected");if(date_type=="all_time"){RYMchartPage.selectDateRange(18e6,20199999)}else if(date_type=="custom"){$("#date_year_chooser").hide();$("#chart_date_custom").show()}else{$("#date_year_chooser").show();$("#chart_date_custom").hide()}},selectDateRange:function(start,end){if(start>end){var tmp=end;end=start;start=tmp}if(end>20199999){end=20199999}if(start<18e6){start=18e6}var start_year=start/1e4;var end_year=end/1e4;RYMchartPage.start_year=start_year;RYMchartPage.end_year=end_year;$(".date_year_chooser_decade_btn").removeClass("selected");$(".date_year_chooser_year_btn").removeClass("selected");$("#start_date").val(start);$("#end_date").val(end);if(start==18e6&&end>=20199999){$("#date_year_chooser").hide();$(".date_range_btn").removeClass("selected");$("#date_range_all_time").addClass("selected");$("#chart_date_custom").hide();return}else if(start%1e4==0&&end%1e4==9999){$("#date_year_chooser").show();$(".date_range_btn").removeClass("selected");$("#date_range_range").addClass("selected");$("#chart_date_custom").hide()}else{$("#date_year_chooser").hide();$("#chart_date_custom").show();RYMchartPage.selectCustomRange(start,end);$(".date_range_btn").removeClass("selected");$("#date_range_custom").addClass("selected")}for(var i=start_year;i<=end_year;i++){$("#date_year_chooser_year_"+i).addClass("selected");if(i%10==0&&end>=i+9){$("#date_year_chooser_decade_"+i).addClass("selected")}else if(i==2010&&end==2017){$("#date_year_chooser_decade_2010").addClass("selected")}}if(start<1950){$("#date_year_chooser_extra").show();$("#date_year_chooser_toggle").show();$("#date_year_toggle_icon")[0].className="fa fa-caret-up"}},toggleExcludeType:function(exclude_type){$("#chart_catalog_"+exclude_type).toggleClass("selected");var lst_selected=new Array;if($("#chart_catalog_catalog").hasClass("selected")){lst_selected.push("catalog")}if($("#chart_catalog_ratings").hasClass("selected")){lst_selected.push("ratings")}if($("#chart_catalog_wishlist").hasClass("selected")){lst_selected.push("wishlist")}$("#cat_exclude").val(lst_selected.join(","))},toggleAttributeType:function(attribute_type){$("#attribute_"+attribute_type).toggleClass("selected");var lst_selected=new Array;if($("#attribute_live").hasClass("selected")){$("#include_live").val("1")}else{$("#include_live").val("0")}if($("#attribute_archival").hasClass("selected")){$("#include_archival").val("1")}else{$("#include_archival").val("0")}if($("#attribute_exclude_other").hasClass("selected")){$("#exclude_other").val("1")}else{$("#exclude_other").val("0")}},selectPopularityWeight:function(popularity_weight){$(".chart_pop_label_choice").removeClass("selected");$("#chart_pop_"+popularity_weight).addClass("selected");$("#pop_weight").val(popularity_weight)},_submitErrorCallback:function(errors){var firstError=null;for(var k in errors){if(errors.hasOwnProperty(k)){console.log("errors_"+k+" will be "+errors[k]);$("#errors_"+k).html(errors[k]).show();if(!firstError){firstError=k}}}$("#errors_general").show();$("#errors_"+firstError).scrollintoview(100);$(".chart_create_btn").removeClass("submitted").click(function(){RYMchartPage.submit()}).text("Create Chart")},onFocusTextarea:function(event,id){var help=$("#chart_help_"+id);var el=$("#"+id);var pos=el.position();help.css("top","0").css("left",el.outerWidth()+20+"px").show()},onBlurTextarea:function(event,id){$("#chart_help_"+id).hide()},onClickToggle:function(){if($(".chart_left_col").is(":visible")){$(".chart_left_col").hide();$("#chart_col_glyph").removeClass("fa-arrow-circle-left").addClass("fa-arrow-circle-right");$(".chart_right_col").css({"margin-left":"35px"})}else{$(".chart_left_col").show();$("#chart_col_glyph").removeClass("fa-arrow-circle-right").addClass("fa-arrow-circle-left");$(".chart_right_col").css({"margin-left":"385px"})}},deleteChartBookmark:function(chart_id){if(confirm("Are you sure you want to delete this chart bookmark?")){rym.request.post("DeleteSavedChart",{chart_id:chart_id},null,"script")}},selectRtTab:function(tab){$(".chart_chooser_item").removeClass("selected");$("#chart_chooser_item_"+tab).addClass("selected");$(".chart_section_by_release_type").hide();$("#chart_section_by_release_type_"+tab).show()},showBuilder:function(){$(".chart_show_builder_button").hide();$(".chart_hide_builder_button").show();$("#page_chart").addClass("building")},hideBuilder:function(){$(".chart_show_builder_button").show();$(".chart_hide_builder_button").hide();$("#page_chart").removeClass("building")},_expandIssuesCallback:function(object,assoc_id,html){rym.doModal(html);rym.setupPage()},expandIssues:function(object,assoc_id){rym.doModalLoading();rym.request.post("ChartExpandIssues",{object:object,assoc_id:assoc_id},null,"script")}};var RYMchooser={lastAjaxRequest:null,lastSearchValue:null,lastSearchTimer:null,resultCache:{},currentResultSet:{},currentSelectedItem:{},blurTimer:{},selectedId:null,searchEndpoint:"https://api.sonemic.com/1/search",types:{Music:[{name:"music",label:"All music",searchlabel:"music"},{name:"artist",label:"Artist",searchlabel:"artists"},{name:"release",label:"Release",searchlabel:"releases"},{name:"company_music",label:"Company",searchlabel:"companies"},{name:"genre_music",label:"Genre",searchlabel:"music genres"},{name:"song",label:"Song",searchlabel:"songs"},{name:"work",label:"Work",searchlabel:"works"},{name:"descriptor_music",label:"Descriptor",searchlabel:"music descriptors"},{name:"venue",label:"Venue",searchlabel:"venues"}],Film:[{name:"films",label:"All films",searchlabel:"films"},{name:"film",label:"Film title",searchlabel:"film titles"},{name:"film_person",label:"Cast/crew",searchlabel:"cast/crew"},{name:"genre_film",label:"Genre",searchlabel:"film genres"},{name:"descriptor_film",label:"Descriptor",searchlabel:"film descriptors"}],Games:[{name:"games",label:"All games",searchlabel:"games"},{name:"game",label:"Game title",searchlabel:"game titles"},{name:"game_person",label:"Game person",searchlabel:"game persons"},{name:"company_game",label:"Company",searchlabel:"game companies"},{name:"game_platform",label:"Platform",searchlabel:"game platforms"},{name:"genre_games",label:"Genre",searchlabel:"game genres"},{name:"franchise",label:"Franchise",searchlabel:"franchises"},{name:"character",label:"Character",searchlabel:"characters"},{name:"descriptor_games",label:"Descriptor",searchlabel:"game descriptors"}],Community:[{name:"user",label:"Users",searchlabel:"users"},{name:"list",label:"Lists",searchlabel:"lists"}],location:[{name:"location",label:"Location",searchlabel:"location"}]},init:function(el){var id=el.data("id");el.unbind();var inputEl=$("#ui_chooser_input_"+id).unbind();var selectEl=$("#ui_chooser_select_"+id).unbind();var hasTouch="ontouchstart"in window;var hasTouch=true;var types=el.data("allowed-types");RYMchooser.populateSelectGroup(selectEl,types);inputEl.on("keyup",function(event){return RYMchooser.onInputKeyUp(inputEl,el,event)}).on("focus",function(event){return RYMchooser.onInputFocus(inputEl,el,event)}).on("blur",function(event){return RYMchooser.onInputBlur(inputEl,el,event)});selectEl.on("change",function(event){RYMchooser.onTypeSelectChange(el,event)}).on("focus",function(event){RYMchooser.onTypeSelectFocus(el,event)}).on("blur",function(event){RYMchooser.onTypeSelectBlur(el,event)})},populateSelectGroup:function(selectEl,types){var id=selectEl.data("id");var typeList=types.replace(/ /,"").toLowerCase().split(",");var allTypes=false;if(typeList.length==1&&typeList[0]=="all"){allTypes=true}var typesAdded=new Array;var optGroups=new Array;var numTypes=0;for(var key in RYMchooser.types){var tpList=RYMchooser.types[key];var currentOptGroup=null;for(var i in tpList){var name=tpList[i].name;var label=tpList[i].label;var lowerKey=key.toLowerCase();if(allTypes||typeList.indexOf(name)!=-1||typeList.indexOf(lowerKey)!=-1){if(typesAdded.indexOf(lowerKey)==-1){typesAdded.push(lowerKey);currentOptGroup=$('<optgroup label="'+key+'"></optgroup>')}currentOptGroup.append($('<option value="'+name+'">'+label+"</option>"));numTypes++}}if(currentOptGroup){optGroups.push(currentOptGroup)}}for(var optGroup in optGroups){selectEl.append(optGroups[optGroup])}if(numTypes==1){$("#ui_chooser_type_"+id).hide();$("#ui_chooser_select_"+id).val(typeList[0])}else{$("#ui_chooser_type_"+id).show()}RYMchooser.onTypeSelectChange(selectEl)},getSearchLabel:function(name){for(var key in RYMchooser.types){var tpList=RYMchooser.types[key];for(var i in tpList){if(tpList[i].name==name){return tpList[i].searchlabel}}}},onInputFocus:function(inputEl,el,event){var id=el.data("id");RYMchooser.selectedId=id;if(RYMchooser.blurTimer[id]){clearTimeout(RYMchooser.blurTimer[id])}RYMchooser.onInputKeyUp(inputEl,el,null)},onInputBlur:function(inputEl,el,event){var id=el.data("id");if(RYMchooser.blurTimer[id]){clearTimeout(RYMchooser.blurTimer[id])}if($(".ui_chooser_input:focus").length==0){RYMchooser.blurTimer[id]=setTimeout(function(){RYMchooser.hideResults(el,id)},150)}},hideResults:function(el,id){if(id==RYMchooser.selectedId){$("#ui_chooser_results").hide()}},onTypeSelectFocus:function(selectEl,event){var id=selectEl.data("id");$("#ui_chooser_type_"+id).addClass("selected")},onTypeSelectBlur:function(selectEl,event){var id=selectEl.data("id");$("#ui_chooser_type_"+id).removeClass("selected")},onTypeSelectChange:function(selectEl,event){var id=selectEl.data("id");var el=$("#ui_chooser_"+id);var placeholder=el.data("placeholder");if(placeholder&&placeholder.length){$("#ui_chooser_input_"+id).attr("placeholder",placeholder+" "+RYMchooser.getSearchLabel(selectEl.val())+" ...")}else{$("#ui_chooser_input_"+id).attr("placeholder","search "+RYMchooser.getSearchLabel(selectEl.val())+"...")}RYMchooser.reloadResults(el)},reloadResults:function(el){var id=el.data("id");var inputEl=$("#ui_chooser_input_"+id);RYMchooser.onInputKeyUp(inputEl,el)},clear:function(el){var id=el.data("id");var inputEl=$("#ui_chooser_input_"+id);inputEl.val("");$("#ui_chooser_results").hide()},onInputKeyUp:function(inputEl,el,event){var id=el.data("id");if(event&&event.keyCode){switch(event.keyCode){case g_keyCodes.esc:RYMchooser.clear(el);return false;break;case g_keyCodes.up:RYMchooser.cycleResult(el,event,"up");return false;break;case g_keyCodes.down:RYMchooser.cycleResult(el,event,"down");return false;break;case g_keyCodes.ret:RYMchooser.chooseResult(el,event);case g_keyCodes.comma:case g_keyCodes.backslash:case g_keyCodes.slash:return}}if(RYMchooser.lastSearchTimer){clearTimeout(RYMchooser.lastSearchTimer);RYMchooser.lastSearchTimer=null}var searchterm=inputEl.val();searchterm=searchterm.trim();var type=$("#ui_chooser_select_"+id).val();if(searchterm.length==0){RYMchooser.clear(el)}var query={q:searchterm,t:type};var cacheKey=JSON.stringify(query);if(RYMchooser.resultCache[cacheKey]){RYMchooser._onSearchResults(el,RYMchooser.resultCache[cacheKey]);return}RYMchooser.lastSearchTimer=setTimeout(function(){RYMchooser._doSearch(el,searchterm,type)},50)},_doSearch:function(el,searchterm,type){if(searchterm.length==0){return}var id=el.data("id");var selectFirstResult=el.data("select-first-result");if(typeof selectFirstResult=="undefined"||selectFirstResult==="false"){selectFirstResult=false}else{selectFirstResult=true}if(RYMchooser.lastAjaxRequest){try{RYMchooser.lastAjaxRequest.abort()}catch(e){}RYMchooser.lastAjaxRequest=null}var query={q:searchterm,t:type};var cacheKey=JSON.stringify(query);if(RYMchooser.resultCache[cacheKey]){RYMchooser._onSearchResults(el,RYMchooser.resultCache[cacheKey]);return}RYMchooser.lastAjaxRequest=$.ajax({url:RYMchooser.searchEndpoint,data:query,dataType:"json"}).done(function(data){RYMchooser.resultCache[cacheKey]=data;RYMchooser.currentResultSet[id]=data;RYMchooser._onSearchResults(el,data)});console.log("searching for "+searchterm)},_onSearchResults:function(el,data){var id=el.data("id");var selectFirstResult=el.data("select-first-result");var html='<div class="type">';var lastType=null;RYMchooser.currentSelectedItem[id]=null;for(result in data.results){var obj=data.results[result];var type=obj.type;if(type!=lastType){html+='</div><h5 class="cl-999">'+RYMchooser.getSearchLabel(type)+'</h5><div class="type">';lastType=type}html+=RYMtemplate["card.expanded"].render(obj)}html+="</div>";$("#ui_chooser_results").html(html).show();RYMchooser.updateResultsPosition(el);$(".ui_chooser_results .card").unbind().on("click",function(event){return RYMchooser.onClickResult(el,this,event)});if(data.results.length>0){if(selectFirstResult){RYMchooser.setItemSelected(el,null,0)}else{RYMchooser.deselectAllItems(el,null)}}},updateResultsPosition:function(el){var id=el.data("id");var pos=$(el).offset();var width=$(el).outerWidth();var height=$(el).outerHeight();if(id=="main_search"){height=height/.75-2;$("#ui_chooser_results_frame").css("position","fixed")}else{height+=pos.top;$("#ui_chooser_results_frame").css("position","absolute")}var bodyWidth=$(window).outerWidth();var mobile=false;if(bodyWidth<=48*16){mobile=true}var newLeft=pos.left;var newTop=height;var newWidth=width;var minWidth=0;if(pos.left>document.body.clientWidth/2&&minWidth>newWidth){var diff=minWidth-newWidth;newLeft=pos.left-diff}var docHeight=$(window).height();var verticalSpace=docHeight-newTop-100;if(verticalSpace<300){verticalSpace=300}if(mobile){newLeft=0;newWidth=bodyWidth;verticalSpace=docHeight;$("#ui_chooser_results").css({height:verticalSpace+"px",maxHeight:verticalSpace+"px"});$("#ui_chooser_results_frame").css({top:newTop+"px",left:newLeft+"px",width:newWidth+"px",minWidth:newWidth+"px",maxHeight:verticalSpace+"px"}).show()}else{$("#ui_chooser_results").css({maxHeight:verticalSpace+"px"});$("#ui_chooser_results_frame").css({top:newTop+"px",left:newLeft+"px",width:newWidth+"px",maxHeight:verticalSpace+"px"}).show()}},cycleResult:function(el,event,direction){var id=el.data("id");var sel=RYMchooser.currentSelectedItem[id];if(!sel&&direction=="up"){sel=-1}else if(direction=="up"){sel--}else if(sel===null&&direction=="down"){sel=0}else if(direction=="down"){sel++}RYMchooser.setItemSelected(el,event,sel)},deselectAllItems:function(el,event){var id=el.data("id");var oldSel=RYMchooser.currentSelectedItem[id];if(!RYMchooser.currentResultSet[id]){return}var items=RYMchooser.currentResultSet[id].results;if(oldSel!=null){var oldItem=items[oldSel];$("#card_"+oldItem.cid).removeClass("selected")}RYMchooser.currentSelectedItem[id]=null},setItemSelected:function(el,event,selectedIndex){var id=el.data("id");var oldSel=RYMchooser.currentSelectedItem[id];if(!RYMchooser.currentResultSet[id]){return}var items=RYMchooser.currentResultSet[id].results;if(oldSel!=null){var oldItem=items[oldSel];$("#card_"+oldItem.cid).removeClass("selected")}if(selectedIndex<0){selectedIndex=items.length-1}else if(selectedIndex>=items.length){selectedIndex=0}RYMchooser.currentSelectedItem[id]=selectedIndex;var newItem=items[selectedIndex];$("#card_"+newItem.cid).addClass("selected").scrollintoview(100)},onClickResult:function(el,resultEl,event){RYMchooser.chooseResultByEl(el,resultEl,event);return false},chooseResultByEl:function(el,resultEl,event){var id=el.data("id");var resultSet=RYMchooser.currentResultSet[id];if(!resultSet){return}var cid=$(resultEl).data("itemid");for(var i=0;i<resultSet.results.length;i++){var obj=resultSet.results[i];if(obj.cid==cid){return RYMchooser.chooseResult(el,event,i)}}},getShortcutTypeLabel:function(type){var shortcut_label="";switch(type){case"artist":shortcut_label="Music:Artist";break;case"company_music":shortcut_label="Label";break;case"label":shortcut_label="Label";break;case"descriptor":shortcut_label="Descriptor";break;case"role_music":shortcut_label="Role";break;case"franchise":shortcut_label="Franchise";break;case"genre_music":shortcut_label="Genre";break;case"issue":shortcut_label="Issue";break;case"list":shortcut_label="List";break;case"release":shortcut_label="Album";break;case"album":shortcut_label="Album";break;case"mb_post":shortcut_label="Post";break;case"work":shortcut_label="Work";break;case"user":shortcut_label="@";break;case"venue":shortcut_label="Venue";break;case"song":shortcut_label="Song";break;case"film":shortcut_label="Film";break;case"film_person":shortcut_label="Film:Artist";break;case"genre_film":shortcut_label="Genre";break;case"role_film":shortcut_label="Role";break;case"descriptor_film":shortcut_label="Descriptor";break;case"game_platform":shortcut_label="Platform";break;case"game_person":shortcut_label="Games:Artist";break;case"company_game":shortcut_label="Company";break;case"game":shortcut_label="Game";break;case"game_release":shortcut_label="GameRelease";break;case"genre_games":shortcut_label="Genre";break;case"location":shortcut_label="Location";break;case"character":shortcut_label="Character";break;default:return"??"+type+"??";break}return shortcut_label},getShortcut:function(result){return"["+RYMchooser.getShortcutTypeLabel(result.type)+result.id+"]"},chooseResult:function(el,event,index){var id=el.data("id");if(index===null){index=RYMchooser.currentSelectedItem[id]}var resultSet=RYMchooser.currentResultSet[id];if(!resultSet){return}var result=resultSet.results[index];var selectAction=el.data("select-action");switch(selectAction){case"custom":var customAction=el.data("custom-action");eval(customAction);break;case"navigate":var url=result.url;rym.nav.go(event,url,"neutral");break;case"insertShortcut":var target=el.data("target");var caretPos=document.getElementById(target).selectionStart;var textAreaTxt=jQuery("#"+target).val();var txtToAdd=RYMchooser.getShortcut(result);$("#"+target).val(textAreaTxt.substring(0,caretPos)+txtToAdd+textAreaTxt.substring(caretPos)).focus();break;case"replaceShortcut":$("#"+el.data("target")).val(RYMchooser.getShortcut(result)).focus();break;case"appendShortcut":var targetEl=$("#"+el.data("target"));var text=targetEl.val();if(text.length>0&&text[text.length-1]!="\n"){text+="\n"}text+=RYMchooser.getShortcut(result);targetEl.val(text).focus();break}RYMchooser.hideResults(el,RYMchooser.selectedId)}};$.fn.extend({chooserUI:function(){$(this).each(function(index){RYMchooser.init($(this))})}});var RYMcompatiblePage={selectScope:function(scope){$(".scope_btn").removeClass("selected");$("#scope_"+scope).addClass("selected");$("#compat_scope").val(scope);RYMcompatiblePage.loadCompat()},selectUsers:function(users){$(".users_btn").removeClass("selected");$("#users_"+users).addClass("selected");$("#compat_users").val(users);RYMcompatiblePage.loadCompat()},selectRatings:function(ratings){$(".ratings_btn").removeClass("selected");$("#ratings_"+ratings).addClass("selected");$("#compat_ratings").val(ratings);RYMcompatiblePage.loadCompat()},_loading:function(){$("#compat_results").html($("#loading_anim").html())},loadCompat:function(){RYMcompatiblePage._loading();rym.request.post("CompatibilityLoad",{compat_user:$("#compat_user").val(),compat_scope:$("#compat_scope").val(),compat_users:$("#compat_users").val(),compat_ratings:$("#compat_ratings").val()})}};var RYMtemplate={"card.expanded":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="card bg-fff alternate" id="card_');t.b(t.t(t.f("cid",c,p,0)));t.b('" data-itemid="');t.b(t.t(t.f("cid",c,p,0)));t.b("\" onClick=\"console.log('card_ext_clicked');");t.b(t.v(t.f("onclick",c,p,0)));t.b('"> ');if(t.s(t.f("show_expand",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div data-notooltip title="Show issues and rate/catalog this release" class="has_tip card_expand_tag"> <span class="expand_icon"> <i class="icon-caret-down"></i> </span> <span class="expand_cat"> <span class="expand_cat_catalog"> ');t.b(t.t(t.f("ownership_fmt",c,p,0)));t.b(" ");t.b("\n"+i);t.b(' </span> <span class="expand_cat_rating"> <div class="community_rating"> <div class="rating_');t.b(t.t(t.f("rating",c,p,0)));t.b('"></div> </div> </span> </span> ');if(!t.s(t.f("expand_empty",c,p,1),c,p,1)){t.b(" ");t.b("\n"+i);t.b(' <span class="expand_num"> ');if(t.s(t.f("expand_empty",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){});c.pop()}t.b(" ");t.b("\n"+i);t.b(" ");if(!t.s(t.f("expand_empty",c,p,1),c,p,1)){t.b(" +");t.b(t.t(t.f("expand",c,p,0)));t.b(" ")}t.b("\n"+i);t.b(" </span> ")}t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b(" ");t.b("\n"+i);if(t.s(t.f("rating",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="card_rating ');if(t.s(t.f("expand_text",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_expand")});c.pop()}t.b('"> <div class="rating ');if(!t.s(t.f("is_reliable",c,p,1),c,p,1)){t.b("not_reliable")}t.b('"> ');if(t.s(t.f("is_reliable",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" <span>");t.b(t.t(t.f("average",c,p,0)));t.b(" </span> ")});c.pop()}t.b("\n"+i);t.b(" ");t.b("\n"+i);if(!t.s(t.f("is_reliable",c,p,1),c,p,1)){t.b(' <span data-tooltip class="has_tip" title="Not enough ratings to be reliable">');t.b(t.t(t.f("average",c,p,0)));t.b(" </span> ")}t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b(' </div> <div class="indicator level_');t.b(t.t(t.f("level",c,p,0)));t.b(" ");if(!t.s(t.f("is_reliable",c,p,1),c,p,1)){t.b("not_reliable")}t.b('"> </div> </div> ')});c.pop()}t.b("\n"+i);t.b(' <div class="card_stats hide-for-small"> ');if(t.s(t.f("num_ratings",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");t.b("\n"+i);t.b(' <div class="card_num_ratings"> ');t.b(t.t(t.f("num_ratings",c,p,0)));t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b(" ");t.b("\n"+i);if(t.s(t.f("num_reviews",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="card_num_reviews"> ');t.b(t.t(t.f("num_reviews",c,p,0)));t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b(" ");t.b("\n"+i);t.b(' </div> <div class="card_info"> ');if(t.s(t.f("image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);if(t.s(t.f("image_is_placeholder",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="card_no_image"> </div> ')});c.pop()}t.b("\n"+i);if(!t.s(t.f("image_is_placeholder",c,p,1),c,p,1)){t.b(' <div class="card_image" id="card_');t.b(t.t(t.f("base_id",c,p,0)));t.b("_");t.b(t.t(t.f("cid",c,p,0)));t.b('_image" onMouseOver="RYMcard.onMouseOverImage(event, \'card_');t.b(t.t(t.f("base_id",c,p,0)));t.b("_");t.b(t.t(t.f("cid",c,p,0)));t.b("_image_span');\" onMouseOut=\"RYMcard.onMouseOutImage(event,'card_");t.b(t.t(t.f("base_id",c,p,0)));t.b("_");t.b(t.t(t.f("cid",c,p,0)));t.b('_image_span\');"> <span data-large-version="');t.b(t.t(t.f("image_large",c,p,0)));t.b('" id="card_');t.b(t.t(t.f("base_id",c,p,0)));t.b("_");t.b(t.t(t.f("cid",c,p,0)));t.b('_image_span"> <img src="');t.b(t.t(t.f("image",c,p,0)));t.b('" /> </span> </div> ')}t.b("\n"+i)});c.pop()}t.b(' <div class="card_info_top ');if(t.s(t.f("name_featured",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("featured")});c.pop()}t.b('" title="');t.b(t.t(t.f("name",c,p,0)));t.b('"> <a class="');t.b(t.t(t.f("result_type",c,p,0)));t.b('" ');if(t.s(t.f("url",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('href="');t.b(t.t(t.f("url",c,p,0)));t.b('"')});c.pop()}t.b(">");t.b(t.t(t.f("name",c,p,0)));t.b("</a> ");if(t.s(t.f("relevant_aka",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="relevant_aka"> ');t.b(t.t(t.f("relevant_aka",c,p,0)));t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("name_subtext",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="name_subtext"> ');t.b(t.t(t.f("name_subtext",c,p,0)));t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b(" ");t.b("\n"+i);t.b(' </div> <div class="card_info_bottom"> ');if(t.s(t.f("date",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="fzdate" data-render="full" data-fzdate="');t.b(t.t(t.f("date",c,p,0)));t.b('" id="card_');t.b(t.t(t.f("base_id",c,p,0)));t.b("_");t.b(t.t(t.f("cid",c,p,0)));t.b('_date"> ');t.b(t.t(t.f("formatted_date",c,p,0)));t.b("\n"+i);t.b(" </span>&nbsp;");t.b("\n"+i)});c.pop()}if(t.s(t.f("directors",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="directors" id="card_');t.b(t.t(t.f("base_id",c,p,0)));t.b("_");t.b(t.t(t.f("cid",c,p,0)));t.b('_directors"> <i class="icon-facetime-video"></i> ');t.b(t.t(t.f("directors",c,p,0)));t.b("\n"+i);t.b(" </span>&nbsp; ");t.b("\n"+i)});c.pop()}if(t.s(t.f("starring",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="starring" id="card_');t.b(t.t(t.f("base_id",c,p,0)));t.b("_");t.b(t.t(t.f("cid",c,p,0)));t.b('_starring"> <i class="icon-star"></i> ');t.b(t.t(t.f("starring",c,p,0)));t.b("\n"+i);t.b(" </span>&nbsp;");t.b("\n"+i)});c.pop()}if(t.s(t.f("location",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");t.b("\n"+i);if(t.s(t.f("location_1",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");if(t.s(t.f("flag",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="flag flag-');t.b(t.t(t.f("flag",c,p,0)));t.b('"></span>')});c.pop()}t.b(" ");if(t.s(t.f("formatted_date",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.t(t.f("formatted_date",c,p,0)));t.b(", ")});c.pop()}t.b(" ");t.b(t.t(t.d("name.lastname",c,p,0)));t.b("\n"+i)});c.pop()}t.b(" ");if(t.s(t.f("location_2",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");if(t.s(t.f("location_1",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(", ")});c.pop()}t.b("\n"+i);t.b(" ");if(t.s(t.f("flag",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="flag flag-');t.b(t.t(t.f("flag",c,p,0)));t.b('"></span>')});c.pop()}t.b(" ");t.b("\n"+i);if(!t.s(t.f("location_1",c,p,1),c,p,1)){t.b(" ");if(t.s(t.f("formatted_date",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.t(t.f("formatted_date",c,p,0)));t.b(", ")});c.pop()}t.b("\n"+i)}t.b(" ");t.b(t.t(t.d("name.lastname",c,p,0)));t.b("\n"+i)});c.pop()}});c.pop()}if(!t.s(t.f("location",c,p,1),c,p,1)){t.b(" ");if(t.s(t.f("formatted_date",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.t(t.f("formatted_date",c,p,0)));t.b(" ")});c.pop()}t.b("\n"+i)}t.b(' <span class="card_genres"> ');if(t.s(t.f("genres",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="card_genre">');t.b(t.t(t.f("name",c,p,0)));t.b("</span>")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" </span> </div> </div>");t.b("\n"+i);t.b("</div>");t.b("\n");t.b("\n");return t.fl()},partials:{},subs:{}}),"card.simple":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="card bg-fff alternate sm_card" id="card_');t.b(t.t(t.f("cid",c,p,0)));t.b('" data-itemid="');t.b(t.t(t.f("cid",c,p,0)));t.b('" onClick="');t.b(t.v(t.f("onclick",c,p,0)));t.b('"> ');if(t.s(t.f("expand",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div data-notooltip title="Show issues and rate/catalog this release" class="has_tip sm_card_expand_tag"> <span >');if(t.s(t.f("expand_empty",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){});c.pop()}t.b(" ");if(!t.s(t.f("expand_empty",c,p,1),c,p,1)){t.b("3.5")}t.b(' <i class="icon-caret-down"></i></span> </div> ')});c.pop()}t.b("\n"+i);if(t.s(t.f("rating",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="sm_card_rating"> <div class="rating ');if(!t.s(t.f("is_reliable",c,p,1),c,p,1)){t.b("not_reliable")}t.b('"> ');if(t.s(t.f("is_reliable",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" <span>");t.b(t.t(t.f("average",c,p,0)));t.b(" </span> ")});c.pop()}t.b("\n"+i);t.b(" ");t.b("\n"+i);if(!t.s(t.f("is_reliable",c,p,1),c,p,1)){t.b(' <span data-tooltip class="has_tip" title="Not enough ratings to be reliable">');t.b(t.t(t.f("average",c,p,0)));t.b(" </span> ")}t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b(' </div> <div class="indicator level_');t.b(t.t(t.f("level",c,p,0)));t.b(" ");if(!t.s(t.f("is_reliable",c,p,1),c,p,1)){t.b("not_reliable")}t.b('"> </div> </div> ')});c.pop()}t.b("\n"+i);if(t.s(t.f("image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.f("image_is_placeholder",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){});c.pop()}if(!t.s(t.f("image_is_placeholder",c,p,1),c,p,1)){t.b(' <div class="sm_card_image" id="card_');t.b(t.t(t.f("base_id",c,p,0)));t.b("_");t.b(t.t(t.f("cid",c,p,0)));t.b('_image" onMouseOver="RYMcard.onMouseOverImage(event, \'card_');t.b(t.t(t.f("base_id",c,p,0)));t.b("_");t.b(t.t(t.f("cid",c,p,0)));t.b("_image_span');\" onMouseOut=\"RYMcard.onMouseOutImage(event,'card_");t.b(t.t(t.f("base_id",c,p,0)));t.b("_");t.b(t.t(t.f("cid",c,p,0)));t.b('_image_span\');"> <span data-large-version="');t.b(t.t(t.f("image_large",c,p,0)));t.b('" id="card_');t.b(t.t(t.f("base_id",c,p,0)));t.b("_");t.b(t.t(t.f("cid",c,p,0)));t.b('_image_span"> <img src="');t.b(t.t(t.f("image",c,p,0)));t.b('" /> </span> </div> ')}t.b("\n"+i)});c.pop()}t.b(' <div class="sm_card_info_top ');if(t.s(t.f("name_featured",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("featured")});c.pop()}t.b('" title="');t.b(t.t(t.f("name",c,p,0)));t.b('"> <a class="');t.b(t.t(t.f("result_type",c,p,0)));t.b('">');t.b(t.t(t.f("name",c,p,0)));t.b("</a> ");if(t.s(t.f("play",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="sm_card_play ui_button lightblend"> <button><i class="icon-play"></i></button> </div> ')});c.pop()}t.b("\n"+i);if(t.s(t.f("relevant_aka",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="relevant_aka"> AKA: ');t.b(t.t(t.f("relevant_aka",c,p,0)));t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("name_subtext",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="name_subtext"> ');t.b(t.t(t.f("name_subtext",c,p,0)));t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b(" ");t.b("\n"+i);t.b(' <span class="sm_card_info_extrainfo"> ');if(t.s(t.f("formatted_date",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="sm_date_years" data-fzdate="');t.b(t.t(t.f("formatted_date",c,p,0)));t.b('" id="card_');t.b(t.t(t.f("base_id",c,p,0)));t.b("_");t.b(t.t(t.f("cid",c,p,0)));t.b('_date"> ');t.b(t.t(t.f("formatted_date",c,p,0)));t.b("\n"+i);t.b(" </span>&nbsp;");t.b("\n"+i)});c.pop()}if(t.s(t.f("important_role",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" <b>");t.b(t.t(t.f("important_role",c,p,0)));t.b("</b>, ");t.b(t.t(t.f("important_item",c,p,0)));t.b("\n"+i)});c.pop()}if(!t.s(t.f("important_role",c,p,1),c,p,1)){if(t.s(t.f("directors",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="directors" id="card_');t.b(t.t(t.f("base_id",c,p,0)));t.b("_");t.b(t.t(t.f("cid",c,p,0)));t.b('_directors"> <i class="icon-facetime-video"></i> ');t.b(t.t(t.f("directors",c,p,0)));t.b("\n"+i);t.b(" </span>&nbsp; ");t.b("\n"+i)});c.pop()}if(t.s(t.f("starring",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="starring" id="card_');t.b(t.t(t.f("base_id",c,p,0)));t.b("_");t.b(t.t(t.f("cid",c,p,0)));t.b('_starring"> <i class="icon-star"></i> ');t.b(t.t(t.f("starring",c,p,0)));t.b("\n"+i);t.b(" </span>&nbsp;");t.b("\n"+i)});c.pop()}if(t.s(t.f("location",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.f("flag",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="flag flag-');t.b(t.t(t.f("flag",c,p,0)));t.b('"></span> ')});c.pop()}t.b("\n"+i);if(!t.s(t.f("flag",c,p,1),c,p,1)){t.b(' <i class="icon-map-marker"></i> ')}t.b("\n"+i);t.b(" ");t.b(t.t(t.f("short_name",c,p,0)));t.b("\n"+i)});c.pop()}}t.b(" </span> </div> </div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"collection.singleitem":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);if(t.s(t.f("results",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="collection_card ');if(!t.s(t.f("image_url_s",c,p,1),c,p,1)){t.b("has_no_image")}t.b(" ");if(t.s(t.f("review",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_review")});c.pop()}t.b(" ");if(t.s(t.d("tags.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_tags ")});c.pop()}t.b('" id="cat_');t.b(t.v(t.f("catalog_id",c,p,0)));t.b('"> <div class="collection_card_main"> ');if(t.s(t.f("image_url_s",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <a href="/');t.b(t.v(t.f("url",c,p,0)));t.b('/" class="collection_card_img delayed_background_img" ');t.b("\n"+i);t.b(" data-delayloadurl=\"url('");t.b(t.v(t.f("image_url_f",c,p,0)));t.b("')\" ");t.b("\n"+i);t.b(" data-delayloadurl2x=\"url('");t.b(t.v(t.f("image_url_f",c,p,0)));t.b('\')"> <div class="collection_card_img_overlay_frame"><div class="collection_card_img_overlay"></div></div> </a> ')});c.pop()}t.b("\n"+i);if(!t.s(t.f("image_url_s",c,p,1),c,p,1)){t.b(' <div class="collection_card_no_img"><div class="collection_card_img_overlay_frame"><div class="collection_card_img_overlay"></div></div></div> ')}t.b("\n"+i);t.b(' <div class="collection_card_top"> <div class="collection_shortcut"> [Rating');t.b(t.v(t.f("catalog_id",c,p,0)));t.b("]");t.b("\n"+i);t.b(' </div> <div> <div class="collection_card_title ');if(t.s(t.f("title_is_long",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("long")});c.pop()}t.b('"> <a class="');t.b(t.v(t.d("metadata.object",c,p,0)));t.b('" href="/');t.b(t.v(t.f("url",c,p,0)));t.b('/">');t.b(t.v(t.f("title_display",c,p,0)));t.b("</a> ");if(t.s(t.f("release_date",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="collection_release_year dashed_item">');t.b(t.v(t.f("year",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("locale_title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="collection_card_subtitle">');t.b(t.v(t.f("title_main",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("composer_name_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="collection_card_composer_main">&bull; ');t.b(t.v(t.f("composer_name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b(" ");t.b("\n"+i);t.b(' </div> <div class="collection_card_performer_second"> ');t.b(t.v(t.f("performer_name_display",c,p,0)));t.b("\n"+i);t.b(" </div> </div> </div> ");if(t.s(t.d("directors.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="collection_card_directors"> ');if(t.s(t.f("directors",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="collection_card_director">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);if(t.s(t.d("actors.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="collection_card_actors"> ');if(t.s(t.f("actors",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="collection_card_actor">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);if(t.s(t.d("developers.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="collection_card_developers"> ');if(t.s(t.f("developers",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="collection_card_actor">dev</span> ')});c.pop()}t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("is_game_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="collection_gamerelease_info"> ');if(t.s(t.f("media",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_format bg-ddd cl-777">');t.b(t.v(t.f("name",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);if(t.s(t.f("platforms",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <a href="/game-platform/');t.b(t.v(t.f("url",c,p,0)));t.b('/"><span title="');t.b(t.v(t.f("fullname",c,p,0)));t.b('" class="game_console_logo platform_');t.b(t.v(t.f("url",c,p,0)));t.b('"><div class="game_console_name platform_');t.b(t.v(t.f("url",c,p,0)));t.b('">');t.b(t.t(t.f("name",c,p,0)));t.b("</div><span></a> ")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("has_rym_info",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="collection_rym_info"> ');if(t.s(t.f("avg_rating",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="collection_card_rym_info collection_card_avg_rating"> Avg.: ');t.b(t.v(t.f("avg_rating",c,p,0)));t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("num_ratings",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="collection_card_rym_info collection_card_num_ratings"> Ratings: ');t.b(t.v(t.f("num_ratings",c,p,0)));t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("chart_position",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="collection_card_rym_info collection_card_chart_position"> Ranked # ');t.b(t.v(t.f("chart_position",c,p,0)));t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("personal_notes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="collection_personal_notes"> <i class="fa fa-paperclip"></i> ');t.b(t.v(t.f("personal_notes",c,p,0)));t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="collection_card_catalog"> ');t.b("\n"+i);t.b('<div data-catalog="');t.b(t.v(t.d("data.stringify",c,p,0)));t.b('" class="ui_catalog_btn_display ui_catalog_id_');t.b(t.v(t.f("catalog_id",c,p,0)));t.b(" ui_catalog_btn_");t.b(t.v(t.f("object",c,p,0)));t.b(" ");if(t.s(t.f("is_owner",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b(' " ');t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b(' id="');if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("catalog_id",c,p,0)))});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new")}t.b('"');t.b("\n"+i);t.b(' data-component="');t.b(t.v(t.f("component",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "');t.b("\n"+i);t.b(' > <div class="ui_catalog_btn_extended"> ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_item_info_new" > <span class="page_catalog_item_new_first">Rate / catalog</span> <span class="page_catalog_item_new_more">Rate / catalog another ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("issue")});c.pop()}if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("release")});c.pop()}t.b("</span> </div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.d("author.image_url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_user_image" style="background-image:url(\'');t.b(t.v(t.d("author.image_url_75",c,p,0)));t.b("')\"></div> ")});c.pop()}t.b("\n"+i);if(!t.s(t.d("author.image_url_75",c,p,1),c,p,1)){t.b(' <div class="page_catalog_user_no_image" style="background-position: ');t.b(t.v(t.d("author.no_img_template.x",c,p,0)));t.b("px ");t.b(t.v(t.d("author.no_img_template.y",c,p,0)));t.b("px; filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b("); -webkit-filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b(');"></div> ')}t.b("\n"+i)});c.pop()}if(t.s(t.f("object_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_object_image ');if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_tip delayed_background_img")});c.pop()}t.b('" ');if(t.s(t.f("url_300",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-tiptip=\"<img src='");t.b(t.v(t.f("url_300",c,p,0)));t.b("'>\"")});c.pop()}t.b(" ");if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-delayloadurl=\"url('");t.b(t.v(t.f("url_75",c,p,0)));t.b("')\"")});c.pop()}t.b("></div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_line"> <div class="page_catalog_item_info_top"> ');if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_catalog_item_author_link"> <a class="user" href="/user/');t.b(t.v(t.d("author.username",c,p,0)));t.b('">');t.b(t.v(t.d("author.username",c,p,0)));t.b("</a> </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("title_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_catalog_item_info_title">');t.b(t.v(t.f("title_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(' <span class="page_catalog_item_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> <div class="clearfix"></div> ');if(t.s(t.f("issue_info_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_issue_info">');t.b(t.v(t.f("issue_info_display",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("labels",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_label_info"> ');if(t.s(t.f("formats",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_format bg-ddd cl-777 ');if(t.s(t.f("format_overridden",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("format_overridden")});c.pop()}t.b('">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b(" ");if(t.s(t.f("name_short_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a class="label" href="/label/');t.b(t.v(t.f("label_url",c,p,0)));t.b('/">');t.b(t.v(t.f("name_short_display",c,p,0)));t.b("</a>");if(t.s(t.d("catalog_nos.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(":")});c.pop()}t.b(" ")});c.pop()}if(t.s(t.f("catalog_nos",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_catalog_no">');t.b(t.v(t.f("cat_name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_date"> <span class="page_catalog_item_info_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> </div> </div> <div class="ui_catalog_btn_rating ');if(t.s(t.d("rating_system_label.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("rating_label_is_long")});c.pop()}t.b(" ");if(t.s(t.d("rating_system_label_outof.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("outof_is_long")});c.pop()}t.b('"> <div class="ui_catalog_btn_rating_icon"> <div class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" w32 r");if(t.s(t.f("rating",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("rating",c,p,0)))});c.pop()}if(!t.s(t.f("rating",c,p,1),c,p,1)){t.b("0")}t.b('"><i></i><b></b> </div> </div> <div class="ui_catalog_btn_rating_text ');if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b("base_rating")}t.b('"> <span class="ui_catalog_btn_rating_text_has_rating ');t.b("\n"+i);t.b(' "> ');if(t.s(t.f("rating_system_label",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_system_label",c,p,0)));t.b("</span> ");if(t.s(t.f("rating_system_label_outof",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_outof">/');t.b(t.v(t.f("rating_system_label_outof",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i)});c.pop()}if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_base_num",c,p,0)));t.b("</span> ")}t.b("\n"+i);t.b(' </span> </div> </div> <div class="media_timeline_btn ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_count")});c.pop()}t.b(" ");t.b(t.v(t.f("play_status",c,p,0)));t.b('"> ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b(t.v(t.f("play_count",c,p,0)));t.b("\n"+i)});c.pop()}t.b(' </div> <div class="ui_catalog_btn_rest_frame ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b('" onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "> <div class="ui_catalog_btn_rest"> <div class="ui_catalog_btn_rest_top"> <div class="ui_catalog_btn_other_info"> ');if(t.s(t.f("personal_notes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_has_notes"><i class="fa fa-paperclip"></i></span> ')});c.pop()}t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_ownership ownership_');t.b(t.v(t.f("ownership",c,p,0)));t.b('"> <span class="ui_catalog_btn_ownership_in_collection"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">In collection</span> </span> <span class="ui_catalog_btn_ownership_on_wishlist"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Want to buy</span> </span> <span class="ui_catalog_btn_ownership_used_to_own"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Used to own</span> </span> <span class="ui_catalog_btn_ownership_not_owned"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">&nbsp;</span> </span> </span> </div> <div class="clearfix"></div> </div> <div class="ui_catalog_btn_rest_bottom"> ');if(t.s(t.d("tags.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_catalog_btn_tags"> <span class="ui_catalog_btn_tag_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_btn_taglist"> ');if(t.s(t.f("tags",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated">');t.b(t.v(t.d(".",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="clearfix"></div> </div> </div> </div> <div class="clearfix"></div>');t.b("\n"+i);t.b('</div> </div> <div class="clearfix"></div> </div> ');if(t.s(t.f("review",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="collection_card_review_frame" id="collection_card_review_frame_');t.b(t.v(t.f("review_id",c,p,0)));t.b('"> <div class="collection_card_review"> ');if(t.s(t.f("review_title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="collection_card_review_title">');t.b(t.v(t.f("review_title",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("review_rendered",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="collection_card_review_body">');t.b(t.v(t.f("review_rendered",c,p,0)));t.b("}</div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("review_attribution_rendered",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="collection_card_review_attribution">');t.b(t.v(t.f("review_attribution_rendered",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="collection_card_review_voting"> ');t.b("\n"+i);t.b('<div id="content_voting_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" ');t.b("\n"+i);t.b(' class="content_voting"');t.b("\n"+i);t.b(' data-content-type="');t.b(t.v(t.f("content_type",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-content-promoted="');t.b(t.v(t.f("content_promoted",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-content-level="');t.b(t.v(t.f("content_level",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-content-reasons="');t.b(t.v(t.f("content_reasons",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-user-polarity="');t.b(t.v(t.f("user_polarity",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-user-reasons="');t.b(t.v(t.f("user_reasons",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-user-promoted="');t.b(t.v(t.f("user_promoted",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-user-bookmarked="');t.b(t.v(t.f("user_bookmarked",c,p,0)));t.b('"');t.b("\n"+i);t.b(' ><span id="content_voting_score_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="content_voting_score"></span');t.b("\n"+i);t.b(' ><span id="content_vote_down_btn_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" data-tiptip="Flag this content" class=" has_tip content_voting_btn" onClick="content_vote_');t.b(t.v(t.f("content_id",c,p,0)));t.b('.openVoteDown(this,event)"> <i class="fa fa-warning"></i> </span');t.b("\n"+i);t.b(' ><span id="content_vote_up_btn_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" data-tiptip="Nominate this content to be featured" class="has_tip content_voting_btn" onClick="content_vote_');t.b(t.v(t.f("content_id",c,p,0)));t.b('.onClickVoteUp(this,event)"> <i class="fa fa-certificate"></i> </span');t.b("\n"+i);t.b(' ><span id="content_bookmark_btn_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" data-tiptip="Bookmark this content" class="has_tip content_voting_btn" onClick="content_vote_');t.b(t.v(t.f("content_id",c,p,0)));t.b('.onClickBookmark(this,event)"> <i class="fa fa-bookmark"></i> </span>');t.b("\n"+i);t.b("</div>");t.b("\n"+i);t.b("<script> rymInitPush ( function() { content_vote_");t.b(t.v(t.f("content_id",c,p,0)));t.b(" = new RYMcontentVote(");t.b(t.v(t.f("content_id",c,p,0)));t.b(");});");t.b("\n"+i);t.b('<\/script> <div class="collection_card_review_shortcut">[Review');t.b(t.v(t.f("review_id",c,p,0)));t.b(']</div> <div class="collection_card_review_publish_status">');t.b(t.v(t.f("content_visibility",c,p,0)));t.b('</div> </div> <div style="clear:both"></div> </div> ')});c.pop()}t.b("\n"+i);t.b(' <div style="clear:both"></div> </div>');t.b("\n"+i)});c.pop()}return t.fl()},partials:{},subs:{}}),"community.mod_action":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="mod_action" id="mod_action_');t.b(t.v(t.f("content_id",c,p,0)));t.b('"> <div class="mod_action_question"> What type of action do you want to take? ');t.b("\n"+i);t.b(' </div> <input type="hidden" name="mod_action_reasons_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" id="mod_action_reasons_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="');t.b(t.t(t.f("reasons",c,p,0)));t.b('" /> <label for="mod_action_main_promoted_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_pos"> <input type="radio" onClick="RYMcontentAction.onChangeMainAction(');t.b(t.v(t.f("content_id",c,p,0)));t.b(')" id="mod_action_main_promoted_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_main_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="promoted"> Promote');t.b("\n"+i);t.b(' </label> <label for="mod_action_main_removed_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_neg"> <input type="radio" onClick="RYMcontentAction.onChangeMainAction(');t.b(t.v(t.f("content_id",c,p,0)));t.b(')" id="mod_action_main_removed_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_main_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="removed"> Remove');t.b("\n"+i);t.b(' </label> <label for="mod_action_main_temp_visible_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_neg"> <input type="radio" onClick="RYMcontentAction.onChangeMainAction(');t.b(t.v(t.f("content_id",c,p,0)));t.b(')" id="mod_action_main_temp_visible_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_main_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="temp_visible"> Delayed remove');t.b("\n"+i);t.b(' </label> <label for="mod_action_main_default_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_pos mod_action_neg mod_action_neutral"> <input type="radio" onClick="RYMcontentAction.onChangeMainAction(');t.b(t.v(t.f("content_id",c,p,0)));t.b(')" id="mod_action_main_default_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_main_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="default"> No action ');t.b("\n"+i);t.b(' <span class="subtext">Used when users have flagged content that does not break the rules, or when users upvote content that is acceptable but not promotable</span> </label> <div class="mod_action_question"> What action should be taken regarding the user? ');t.b("\n"+i);t.b(' </div> <label for="mod_action_user_no_action_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_neutral"> <input type="radio" onClick="RYMcontentAction.onChangeUserAction(');t.b(t.v(t.f("content_id",c,p,0)));t.b(')" id="mod_action_user_no_action_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_user_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="no_action"> No action <span class="subtext"></span> </label> <label for="mod_action_user_notify_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_pos mod_action_neg"> <input type="radio" onClick="RYMcontentAction.onChangeUserAction(');t.b(t.v(t.f("content_id",c,p,0)));t.b(')" id="mod_action_user_notify_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_user_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="notify"> Notify <span class="subtext">User will be notified of the action</span> </label> <label for="mod_action_user_warn_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_neg"> <input type="radio" onClick="RYMcontentAction.onChangeUserAction(');t.b(t.v(t.f("content_id",c,p,0)));t.b(')" id="mod_action_user_warn_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_user_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="warn" > Warn <span class="subtext">User will be warned, and must acknowledge warning before using the site again.</span> </label> <div id="mod_action_user_warn_msg_frame_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_user_msg_frame"> <label for="mod_action_user_warn_msg_');t.b(t.v(t.f("content_id",c,p,0)));t.b('">Warning Message:</label> <textarea id="mod_action_user_warn_msg_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_user_msg"></textarea> </div> <label for="mod_action_user_ban_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_neg"> <input type="radio" onClick="RYMcontentAction.onChangeUserAction(');t.b(t.v(t.f("content_id",c,p,0)));t.b(')" id="mod_action_user_ban_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_user_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="ban" > Ban <span class="subtext">User will be banned and must respond. After user responds, the mod can decide on a ban length.</span> </label> <div id="mod_action_user_ban_msg_frame_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_user_msg_frame"> <label for="mod_action_user_ban_msg_');t.b(t.v(t.f("content_id",c,p,0)));t.b('">Ban Message:</label> <textarea id="mod_action_user_ban_msg_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_user_msg"></textarea> </div> <div class="mod_action_question"> What action should be taken regarding the users who voted this up?');t.b("\n"+i);t.b(' </div> <label for="mod_action_upvoters_no_change_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_pos mod_action_neg mod_action_neutral"> <input type="radio" id="mod_action_upvoters_no_change_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_upvoters_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="no_change"> <span>No action</span> </label> <label for="mod_action_upvoters_increase_minor_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_pos"> <input type="radio" id="mod_action_upvoters_increase_minor_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_upvoters_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="increase_minor"> <span>Increase community mod weighting</span> </label> <label for="mod_action_upvoters_decrease_minor_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_neg mod_action_neutral"> <input type="radio" id="mod_action_upvoters_decrease_minor_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_upvoters_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="decrease_minor"> <span >Slightly decrease community mod weighting.</span> </label> <label for="mod_action_upvoters_decrease_major_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_neg"> <input type="radio" id="mod_action_upvoters_decrease_major_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_upvoters_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="decrease_major"> <span >Moderately decrease community mod weighting.</span> </label> <label for="mod_action_upvoters_fully_deweight_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_neg"> <input type="radio" id="mod_action_upvoters_fully_deweight_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_upvoters_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="fully_deweight"> <span >Fully remove community mod weighting.</span> </label> <div class="mod_action_question"> What action should be taken regarding the users who flagged this<span class="mod_action_neg"> correctly</span><span class="mod_action_pos"> as breaking community rules (not including flaggers)</span>? ');t.b("\n"+i);t.b(' </div> <label for="mod_action_flaggers_no_change_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_pos mod_action_neg mod_action_neutral"> <input type="radio" id="mod_action_flaggers_no_change_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_flaggers_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="no_change"> <span>No action</span> </label> <label for="mod_action_flaggers_increase_minor_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_neg"> <input type="radio" id="mod_action_flaggers_increase_minor_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_flaggers_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="increase_minor"> <span>Increase community mod weighting</span> </label> <label for="mod_action_flaggers_decrease_minor_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_pos mod_action_neutral"> <input type="radio" id="mod_action_flaggers_decrease_minor_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_flaggers_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="decrease_minor"> <span >Slightly decrease community mod weighting.</span> </label> <label for="mod_action_flaggers_decrease_major_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_pos"> <input type="radio" id="mod_action_flaggers_decrease_major_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_flaggers_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="decrease_major"> <span >Moderately decrease community mod weighting.</span> </label> <label for="mod_action_flaggers_fully_deweight_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="mod_action_pos"> <input type="radio" id="mod_action_flaggers_fully_deweight_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" name="mod_action_flaggers_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" value="fully_deweight"> <span >Fully remove community mod weighting.</span> </label> <div class="mod_action_buttons"> <a class="btn blue_btn" onClick="RYMcontentAction.submit(');t.b(t.v(t.f("content_id",c,p,0)));t.b(')">Submit</a> <a class="btn" onClick="RYMcontentAction.cancel(');t.b(t.v(t.f("content_id",c,p,0)));t.b(')">Cancel</a> </div>');t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"page.catalog.filter":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="collection_catalog_filter" onClick="RYMcollectionPage.removefilter(');t.b(t.v(t.f("index",c,p,0)));t.b(')"> <span class="collection_catalog_filter_field"> ');t.b(t.v(t.f("field",c,p,0)));t.b("\n"+i);t.b(' </span> <span class="collection_catalog_filter_operator"> ');t.b(t.v(t.f("operator",c,p,0)));t.b("\n"+i);t.b(' </span> <span class="collection_catalog_filter_query"> ');t.b(t.v(t.f("query",c,p,0)));t.b("\n"+i);t.b(' </span> <i class="fa fa-times"></i>');t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"page.catalog.singleitem":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="page_catalog_item bg-f8f8f8 alternate ');if(t.s(t.f("is_following",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_following")});c.pop()}t.b('"> ');t.b("\n"+i);t.b('<div data-catalog="');t.b(t.v(t.d("data.stringify",c,p,0)));t.b('" class="ui_catalog_btn_display ui_catalog_id_');t.b(t.v(t.f("catalog_id",c,p,0)));t.b(" ui_catalog_btn_");t.b(t.v(t.f("object",c,p,0)));t.b(" ");if(t.s(t.f("is_owner",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b(' " ');t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b(' id="');if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("catalog_id",c,p,0)))});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new")}t.b('"');t.b("\n"+i);t.b(' data-component="');t.b(t.v(t.f("component",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "');t.b("\n"+i);t.b(' > <div class="ui_catalog_btn_extended"> ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_item_info_new" > <span class="page_catalog_item_new_first">Rate / catalog</span> <span class="page_catalog_item_new_more">Rate / catalog another ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("issue")});c.pop()}if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("release")});c.pop()}t.b("</span> </div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.d("author.image_url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_user_image" style="background-image:url(\'');t.b(t.v(t.d("author.image_url_75",c,p,0)));t.b("')\"></div> ")});c.pop()}t.b("\n"+i);if(!t.s(t.d("author.image_url_75",c,p,1),c,p,1)){t.b(' <div class="page_catalog_user_no_image" style="background-position: ');t.b(t.v(t.d("author.no_img_template.x",c,p,0)));t.b("px ");t.b(t.v(t.d("author.no_img_template.y",c,p,0)));t.b("px; filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b("); -webkit-filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b(');"></div> ')}t.b("\n"+i)});c.pop()}if(t.s(t.f("object_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_object_image ');if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_tip delayed_background_img")});c.pop()}t.b('" ');if(t.s(t.f("url_300",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-tiptip=\"<img src='");t.b(t.v(t.f("url_300",c,p,0)));t.b("'>\"")});c.pop()}t.b(" ");if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-delayloadurl=\"url('");t.b(t.v(t.f("url_75",c,p,0)));t.b("')\"")});c.pop()}t.b("></div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_line"> <div class="page_catalog_item_info_top"> ');if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_catalog_item_author_link"> <a class="user" href="/user/');t.b(t.v(t.d("author.username",c,p,0)));t.b('">');t.b(t.v(t.d("author.username",c,p,0)));t.b("</a> </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("title_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_catalog_item_info_title">');t.b(t.v(t.f("title_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(' <span class="page_catalog_item_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> <div class="clearfix"></div> ');if(t.s(t.f("issue_info_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_issue_info">');t.b(t.v(t.f("issue_info_display",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("labels",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_label_info"> ');if(t.s(t.f("formats",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_format bg-ddd cl-777 ');if(t.s(t.f("format_overridden",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("format_overridden")});c.pop()}t.b('">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b(" ");if(t.s(t.f("name_short_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a class="label" href="/label/');t.b(t.v(t.f("label_url",c,p,0)));t.b('/">');t.b(t.v(t.f("name_short_display",c,p,0)));t.b("</a>");if(t.s(t.d("catalog_nos.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(":")});c.pop()}t.b(" ")});c.pop()}if(t.s(t.f("catalog_nos",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_catalog_no">');t.b(t.v(t.f("cat_name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_date"> <span class="page_catalog_item_info_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> </div> </div> <div class="ui_catalog_btn_rating ');if(t.s(t.d("rating_system_label.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("rating_label_is_long")});c.pop()}t.b(" ");if(t.s(t.d("rating_system_label_outof.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("outof_is_long")});c.pop()}t.b('"> <div class="ui_catalog_btn_rating_icon"> <div class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" w32 r");if(t.s(t.f("rating",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("rating",c,p,0)))});c.pop()}if(!t.s(t.f("rating",c,p,1),c,p,1)){t.b("0")}t.b('"><i></i><b></b> </div> </div> <div class="ui_catalog_btn_rating_text ');if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b("base_rating")}t.b('"> <span class="ui_catalog_btn_rating_text_has_rating ');t.b("\n"+i);t.b(' "> ');if(t.s(t.f("rating_system_label",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_system_label",c,p,0)));t.b("</span> ");if(t.s(t.f("rating_system_label_outof",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_outof">/');t.b(t.v(t.f("rating_system_label_outof",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i)});c.pop()}if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_base_num",c,p,0)));t.b("</span> ")}t.b("\n"+i);t.b(' </span> </div> </div> <div class="media_timeline_btn ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_count")});c.pop()}t.b(" ");t.b(t.v(t.f("play_status",c,p,0)));t.b('"> ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b(t.v(t.f("play_count",c,p,0)));t.b("\n"+i)});c.pop()}t.b(' </div> <div class="ui_catalog_btn_rest_frame ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b('" onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "> <div class="ui_catalog_btn_rest"> <div class="ui_catalog_btn_rest_top"> <div class="ui_catalog_btn_other_info"> ');if(t.s(t.f("personal_notes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_has_notes"><i class="fa fa-paperclip"></i></span> ')});c.pop()}t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_ownership ownership_');t.b(t.v(t.f("ownership",c,p,0)));t.b('"> <span class="ui_catalog_btn_ownership_in_collection"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">In collection</span> </span> <span class="ui_catalog_btn_ownership_on_wishlist"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Want to buy</span> </span> <span class="ui_catalog_btn_ownership_used_to_own"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Used to own</span> </span> <span class="ui_catalog_btn_ownership_not_owned"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">&nbsp;</span> </span> </span> </div> <div class="clearfix"></div> </div> <div class="ui_catalog_btn_rest_bottom"> ');if(t.s(t.d("tags.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_catalog_btn_tags"> <span class="ui_catalog_btn_tag_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_btn_taglist"> ');if(t.s(t.f("tags",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated">');t.b(t.v(t.d(".",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="clearfix"></div> </div> </div> </div> <div class="clearfix"></div>');t.b("\n"+i);t.b('</div> <div class="clearfix"></div> </div>');t.b("\n");return t.fl()},partials:{},subs:{}}),"page.collection.searchsuggestion":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="catalog_filter_search_suggestion" onClick="RYMcollectionPage.addFilter(\'');t.b(t.v(t.f("field",c,p,0)));t.b("', 'is', null, $(this).children('.catalog_filter_search_suggestion_name').text(), ");t.b(t.v(t.f("id",c,p,0)));t.b(');"> <div class="catalog_filter_search_suggestion_number"> ');t.b(t.v(t.f("count",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="catalog_filter_search_suggestion_name"> ');t.b(t.v(t.f("name_display",c,p,0)));t.b("\n"+i);t.b(" </div>");t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"page.discography.searchresults":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);if(t.s(t.d("items.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("<h4>Search results</h4>");t.b("\n"+i);t.b('<ul id="page_discography_items_');t.b(t.v(t.f("type",c,p,0)));t.b('" class="page_discography_items">');t.b("\n"+i);if(t.s(t.f("items",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");t.b("\n"+i);t.b('<li id="page_discography_line_');t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b('" class="page_discography_line"> <div class="page_discography_line_main"> <div class="page_discography_expand"');t.b("\n"+i);t.b(" onClick=\"RYMdiscographyPage.showDetails('");t.b(t.v(t.f("object",c,p,0)));t.b("', '");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("');\"");t.b("\n"+i);t.b(' ><i class="fa fa-plus-circle"></i></div> <div class="page_discography_average ');if(!t.s(t.f("has_enough_data",c,p,1),c,p,1)){t.b("not_enough_data")}t.b('"> <span class="rating_number rating_number_');t.b(t.v(t.f("object",c,p,0)));t.b('">');t.b(t.v(t.d("rating_info.avg_rating_display",c,p,0)));t.b('</span> </div> <div class="page_discography_ratings"> ');t.b(t.v(t.d("rating_info.num_ratings_display",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="page_discography_reviews"> ');t.b(t.v(t.d("rating_info.num_reviews_display",c,p,0)));t.b("\n"+i);t.b(" </div> ");if(t.s(t.d("gallery_data.placements.main_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_discography_img ');if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_tip delayed_background_img")});c.pop()}t.b('" ');if(t.s(t.f("url_300",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-tiptip=\"<img src='");t.b(t.v(t.f("url_300",c,p,0)));t.b("'>\"")});c.pop()}t.b(" ");if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-delayloadurl=\"url('");t.b(t.v(t.f("url_75",c,p,0)));t.b("')\"")});c.pop()}t.b("></div> ")});c.pop()}t.b("\n"+i);if(!t.s(t.d("gallery_data.placements.main_image",c,p,1),c,p,1)){t.b(' <div class="page_discography_img"></div> ')}t.b("\n"+i);t.b(' <div class="page_discography_line_1 ');if(t.s(t.f("is_recommended",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("recommended")});c.pop()}t.b('">');if(t.s(t.f("link",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.f("url",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a href="');t.b(t.v(t.f("url",c,p,0)));t.b('" ');if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));t.b("</a>");if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b('<span class="object_loc_original_text cl-888"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}});c.pop()}if(!t.s(t.f("url",c,p,1),c,p,1)){t.b("<span ");if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="object_loc_original_text"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}t.b("</span>")}});c.pop()}t.b("\n"+i);if(t.s(t.f("attribute_labels",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_attribute">');t.b(t.v(t.d(".",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("artist_name_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_artist_names">');t.b(t.v(t.f("artist_name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);if(t.s(t.d("composers.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_composers"> ');if(t.s(t.d("composers.first_2",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated cl-555 page_discography_credited_name">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.d("performers.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_performers"> ');if(t.s(t.d("performers.first_2",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated cl-555 page_discography_credited_name">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.d("directors.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_directors"> ');if(t.s(t.d("directors.first_2",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated cl-555 page_discography_credited_name">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.d("starring_actors.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_starring_actors"> ');if(t.s(t.d("starring_actors.first_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated cl-555 page_discography_credited_name">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b(" ");t.b("\n"+i);t.b(' </div> <div class="page_discography_line_2"><span class="page_discography_date ');if(t.s(t.f("release_date_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_tip")});c.pop()}t.b('" ');if(t.s(t.f("release_date_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('data-tiptip="');t.b(t.v(t.f("release_date_display",c,p,0)));t.b('"')});c.pop()}t.b('> <span class="page_discography_date_year">');t.b(t.v(t.f("release_year",c,p,0)));t.b('</span> <span class="page_discography_date_full">');if(t.s(t.f("release_date_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("release_date_display",c,p,0)))});c.pop()}if(!t.s(t.f("release_date_display",c,p,1),c,p,1)){t.b(t.v(t.f("release_year",c,p,0)))}t.b("</span> </span> ");if(t.s(t.f("type_label",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_discography_release_type page_discography_release_type_');t.b(t.v(t.f("type_label",c,p,0)));t.b('">');t.b(t.v(t.f("type_label_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("credited_performers_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_credited_name">');t.b(t.v(t.f("credited_performers_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("credited_composers_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_credited_name">');t.b(t.v(t.f("credited_composers_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);if(t.s(t.d("genres.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_line_genres"> ');if(t.s(t.d("genres.first_2",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_discography_line_genre comma_separated cl-666">');t.b(t.v(t.d("name_display.cap_first_word",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("issue_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.v(t.f("issue_count",c,p,0)));t.b(" issue");if(!t.s(t.d("issue_count.singular",c,p,1),c,p,1)){t.b("s")}t.b("\n"+i)});c.pop()}t.b(' </div> </div> <div class="clearfix"></div> <div id="page_discography_line_detail_');t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b('" class="page_discography_line_detail"></div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</li>");t.b("\n"+i)});c.pop()}if(t.s(t.f("num_releases_shown",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <li id="page_discography_expand_bar_');t.b(t.v(t.f("type",c,p,0)));t.b('" onClick="RYMdiscographyPage.expandSection(');t.b(t.v(t.f("artist_id",c,p,0)));t.b(", '");t.b(t.v(t.f("type",c,p,0)));t.b('\');" class="page_discography_list_bar_item">Show all ');t.b(t.v(t.f("num_releases_total",c,p,0)));t.b(' <i class="fa fa-caret-down"></i></li>');t.b("\n"+i)});c.pop()}t.b("</ul>");t.b("\n"+i)});c.pop()}if(!t.s(t.d("items.length",c,p,1),c,p,1)){t.b("<h4>No results found.</h4>");t.b("\n"+i)}return t.fl()},partials:{},subs:{}}),"page.discography.singleitem":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<li id="page_discography_line_');t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b('" class="page_discography_line"> <div class="page_discography_line_main"> <div class="page_discography_expand"');t.b("\n"+i);t.b(" onClick=\"RYMdiscographyPage.showDetails('");t.b(t.v(t.f("object",c,p,0)));t.b("', '");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("');\"");t.b("\n"+i);t.b(' ><i class="fa fa-plus-circle"></i></div> <div class="page_discography_average ');if(!t.s(t.f("has_enough_data",c,p,1),c,p,1)){t.b("not_enough_data")}t.b('"> <span class="rating_number rating_number_');t.b(t.v(t.f("object",c,p,0)));t.b('">');t.b(t.v(t.d("rating_info.avg_rating_display",c,p,0)));t.b('</span> </div> <div class="page_discography_ratings"> ');t.b(t.v(t.d("rating_info.num_ratings_display",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="page_discography_reviews"> ');t.b(t.v(t.d("rating_info.num_reviews_display",c,p,0)));t.b("\n"+i);t.b(" </div> ");if(t.s(t.d("gallery_data.placements.main_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_discography_img ');if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_tip delayed_background_img")});c.pop()}t.b('" ');if(t.s(t.f("url_300",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-tiptip=\"<img src='");t.b(t.v(t.f("url_300",c,p,0)));t.b("'>\"")});c.pop()}t.b(" ");if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-delayloadurl=\"url('");t.b(t.v(t.f("url_75",c,p,0)));t.b("')\"")});c.pop()}t.b("></div> ")});c.pop()}t.b("\n"+i);if(!t.s(t.d("gallery_data.placements.main_image",c,p,1),c,p,1)){t.b(' <div class="page_discography_img"></div> ')}t.b("\n"+i);t.b(' <div class="page_discography_line_1 ');if(t.s(t.f("is_recommended",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("recommended")});c.pop()}t.b('">');if(t.s(t.f("link",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.f("url",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a href="');t.b(t.v(t.f("url",c,p,0)));t.b('" ');if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));t.b("</a>");if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b('<span class="object_loc_original_text cl-888"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}});c.pop()}if(!t.s(t.f("url",c,p,1),c,p,1)){t.b("<span ");if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="object_loc_original_text"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}t.b("</span>")}});c.pop()}t.b("\n"+i);if(t.s(t.f("attribute_labels",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_attribute">');t.b(t.v(t.d(".",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("artist_name_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_artist_names">');t.b(t.v(t.f("artist_name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);if(t.s(t.d("composers.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_composers"> ');if(t.s(t.d("composers.first_2",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated cl-555 page_discography_credited_name">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.d("performers.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_performers"> ');if(t.s(t.d("performers.first_2",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated cl-555 page_discography_credited_name">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.d("directors.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_directors"> ');if(t.s(t.d("directors.first_2",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated cl-555 page_discography_credited_name">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.d("starring_actors.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_starring_actors"> ');if(t.s(t.d("starring_actors.first_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated cl-555 page_discography_credited_name">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b(" ");t.b("\n"+i);t.b(' </div> <div class="page_discography_line_2"><span class="page_discography_date ');if(t.s(t.f("release_date_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_tip")});c.pop()}t.b('" ');if(t.s(t.f("release_date_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('data-tiptip="');t.b(t.v(t.f("release_date_display",c,p,0)));t.b('"')});c.pop()}t.b('> <span class="page_discography_date_year">');t.b(t.v(t.f("release_year",c,p,0)));t.b('</span> <span class="page_discography_date_full">');if(t.s(t.f("release_date_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("release_date_display",c,p,0)))});c.pop()}if(!t.s(t.f("release_date_display",c,p,1),c,p,1)){t.b(t.v(t.f("release_year",c,p,0)))}t.b("</span> </span> ");if(t.s(t.f("type_label",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_discography_release_type page_discography_release_type_');t.b(t.v(t.f("type_label",c,p,0)));t.b('">');t.b(t.v(t.f("type_label_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("credited_performers_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_credited_name">');t.b(t.v(t.f("credited_performers_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("credited_composers_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_credited_name">');t.b(t.v(t.f("credited_composers_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);if(t.s(t.d("genres.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_discography_line_genres"> ');if(t.s(t.d("genres.first_2",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_discography_line_genre comma_separated cl-666">');t.b(t.v(t.d("name_display.cap_first_word",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("issue_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.v(t.f("issue_count",c,p,0)));t.b(" issue");if(!t.s(t.d("issue_count.singular",c,p,1),c,p,1)){t.b("s")}t.b("\n"+i)});c.pop()}t.b(' </div> </div> <div class="clearfix"></div> <div id="page_discography_line_detail_');t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b('" class="page_discography_line_detail"></div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</li>");t.b("\n");return t.fl()},partials:{},subs:{}}),"page.discography.singleitem.detail":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b("<div> ");if(t.s(t.f("cataloger",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b('<div data-max-items="');t.b(t.v(t.f("max_items",c,p,0)));t.b('" data-num-items="');t.b(t.v(t.f("max_items",c,p,0)));t.b('" class="cataloger_container ');if(t.s(t.f("is_full",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("full")});c.pop()}t.b(" ");if(t.s(t.d("catalogs.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_items")});c.pop()}t.b('" id="catalog_container_');t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b('">');t.b("\n"+i);t.b('<div class="cataloger_container_inner" id="catalog_container_inner_');t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b('"> ');if(t.s(t.f("catalogs",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b('<div data-catalog="');t.b(t.v(t.d("data.stringify",c,p,0)));t.b('" class="ui_catalog_btn_display ui_catalog_id_');t.b(t.v(t.f("catalog_id",c,p,0)));t.b(" ui_catalog_btn_");t.b(t.v(t.f("object",c,p,0)));t.b(" ");if(t.s(t.f("is_owner",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b(' " ');t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b(' id="');if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("catalog_id",c,p,0)))});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new")}t.b('"');t.b("\n"+i);t.b(' data-component="');t.b(t.v(t.f("component",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "');t.b("\n"+i);t.b(' > <div class="ui_catalog_btn_extended"> ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_item_info_new" > <span class="page_catalog_item_new_first">Rate / catalog</span> <span class="page_catalog_item_new_more">Rate / catalog another ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("issue")});c.pop()}if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("release")});c.pop()}t.b("</span> </div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.d("author.image_url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_user_image" style="background-image:url(\'');t.b(t.v(t.d("author.image_url_75",c,p,0)));t.b("')\"></div> ")});c.pop()}t.b("\n"+i);if(!t.s(t.d("author.image_url_75",c,p,1),c,p,1)){t.b(' <div class="page_catalog_user_no_image" style="background-position: ');t.b(t.v(t.d("author.no_img_template.x",c,p,0)));t.b("px ");t.b(t.v(t.d("author.no_img_template.y",c,p,0)));t.b("px; filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b("); -webkit-filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b(');"></div> ')}t.b("\n"+i)});c.pop()}if(t.s(t.f("object_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_object_image ');if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_tip delayed_background_img")});c.pop()}t.b('" ');if(t.s(t.f("url_300",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-tiptip=\"<img src='");t.b(t.v(t.f("url_300",c,p,0)));t.b("'>\"")});c.pop()}t.b(" ");if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-delayloadurl=\"url('");t.b(t.v(t.f("url_75",c,p,0)));t.b("')\"")});c.pop()}t.b("></div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_line"> <div class="page_catalog_item_info_top"> ');if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_catalog_item_author_link"> <a class="user" href="/user/');t.b(t.v(t.d("author.username",c,p,0)));t.b('">');t.b(t.v(t.d("author.username",c,p,0)));t.b("</a> </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("title_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_catalog_item_info_title">');t.b(t.v(t.f("title_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(' <span class="page_catalog_item_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> <div class="clearfix"></div> ');if(t.s(t.f("issue_info_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_issue_info">');t.b(t.v(t.f("issue_info_display",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("labels",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_label_info"> ');if(t.s(t.f("formats",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_format bg-ddd cl-777 ');if(t.s(t.f("format_overridden",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("format_overridden")});c.pop()}t.b('">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b(" ");if(t.s(t.f("name_short_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a class="label" href="/label/');t.b(t.v(t.f("label_url",c,p,0)));t.b('/">');t.b(t.v(t.f("name_short_display",c,p,0)));t.b("</a>");if(t.s(t.d("catalog_nos.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(":")});c.pop()}t.b(" ")});c.pop()}if(t.s(t.f("catalog_nos",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_catalog_no">');t.b(t.v(t.f("cat_name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_date"> <span class="page_catalog_item_info_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> </div> </div> <div class="ui_catalog_btn_rating ');if(t.s(t.d("rating_system_label.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("rating_label_is_long")});c.pop()}t.b(" ");if(t.s(t.d("rating_system_label_outof.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("outof_is_long")});c.pop()}t.b('"> <div class="ui_catalog_btn_rating_icon"> <div class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" w32 r");if(t.s(t.f("rating",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("rating",c,p,0)))});c.pop()}if(!t.s(t.f("rating",c,p,1),c,p,1)){t.b("0")}t.b('"><i></i><b></b> </div> </div> <div class="ui_catalog_btn_rating_text ');if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b("base_rating")}t.b('"> <span class="ui_catalog_btn_rating_text_has_rating ');t.b("\n"+i);t.b(' "> ');if(t.s(t.f("rating_system_label",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_system_label",c,p,0)));t.b("</span> ");if(t.s(t.f("rating_system_label_outof",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_outof">/');t.b(t.v(t.f("rating_system_label_outof",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i)});c.pop()}if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_base_num",c,p,0)));t.b("</span> ")}t.b("\n"+i);t.b(' </span> </div> </div> <div class="media_timeline_btn ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_count")});c.pop()}t.b(" ");t.b(t.v(t.f("play_status",c,p,0)));t.b('"> ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b(t.v(t.f("play_count",c,p,0)));t.b("\n"+i)});c.pop()}t.b(' </div> <div class="ui_catalog_btn_rest_frame ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b('" onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "> <div class="ui_catalog_btn_rest"> <div class="ui_catalog_btn_rest_top"> <div class="ui_catalog_btn_other_info"> ');if(t.s(t.f("personal_notes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_has_notes"><i class="fa fa-paperclip"></i></span> ')});c.pop()}t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_ownership ownership_');t.b(t.v(t.f("ownership",c,p,0)));t.b('"> <span class="ui_catalog_btn_ownership_in_collection"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">In collection</span> </span> <span class="ui_catalog_btn_ownership_on_wishlist"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Want to buy</span> </span> <span class="ui_catalog_btn_ownership_used_to_own"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Used to own</span> </span> <span class="ui_catalog_btn_ownership_not_owned"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">&nbsp;</span> </span> </span> </div> <div class="clearfix"></div> </div> <div class="ui_catalog_btn_rest_bottom"> ');if(t.s(t.d("tags.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_catalog_btn_tags"> <span class="ui_catalog_btn_tag_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_btn_taglist"> ');if(t.s(t.f("tags",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated">');t.b(t.v(t.d(".",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="clearfix"></div> </div> </div> </div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</div> ")});c.pop()}t.b("\n"+i);t.b("</div>");t.b("\n"+i);t.b('<div class="cataloger_container_new" id="cataloger_container_new">  ');if(t.s(t.f("new_catalog",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b('<div data-catalog="');t.b(t.v(t.d("data.stringify",c,p,0)));t.b('" class="ui_catalog_btn_display ui_catalog_id_');t.b(t.v(t.f("catalog_id",c,p,0)));t.b(" ui_catalog_btn_");t.b(t.v(t.f("object",c,p,0)));t.b(" ");if(t.s(t.f("is_owner",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b(' " ');t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b(' id="');if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("catalog_id",c,p,0)))});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new")}t.b('"');t.b("\n"+i);t.b(' data-component="');t.b(t.v(t.f("component",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "');t.b("\n"+i);t.b(' > <div class="ui_catalog_btn_extended"> ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_item_info_new" > <span class="page_catalog_item_new_first">Rate / catalog</span> <span class="page_catalog_item_new_more">Rate / catalog another ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("issue")});c.pop()}if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("release")});c.pop()}t.b("</span> </div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.d("author.image_url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_user_image" style="background-image:url(\'');t.b(t.v(t.d("author.image_url_75",c,p,0)));t.b("')\"></div> ")});c.pop()}t.b("\n"+i);if(!t.s(t.d("author.image_url_75",c,p,1),c,p,1)){t.b(' <div class="page_catalog_user_no_image" style="background-position: ');t.b(t.v(t.d("author.no_img_template.x",c,p,0)));t.b("px ");t.b(t.v(t.d("author.no_img_template.y",c,p,0)));t.b("px; filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b("); -webkit-filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b(');"></div> ')}t.b("\n"+i)});c.pop()}if(t.s(t.f("object_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_object_image ');if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_tip delayed_background_img")});c.pop()}t.b('" ');if(t.s(t.f("url_300",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-tiptip=\"<img src='");t.b(t.v(t.f("url_300",c,p,0)));t.b("'>\"")});c.pop()}t.b(" ");if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-delayloadurl=\"url('");t.b(t.v(t.f("url_75",c,p,0)));t.b("')\"")});c.pop()}t.b("></div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_line"> <div class="page_catalog_item_info_top"> ');if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_catalog_item_author_link"> <a class="user" href="/user/');t.b(t.v(t.d("author.username",c,p,0)));t.b('">');t.b(t.v(t.d("author.username",c,p,0)));t.b("</a> </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("title_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_catalog_item_info_title">');t.b(t.v(t.f("title_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(' <span class="page_catalog_item_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> <div class="clearfix"></div> ');if(t.s(t.f("issue_info_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_issue_info">');t.b(t.v(t.f("issue_info_display",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("labels",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_label_info"> ');if(t.s(t.f("formats",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_format bg-ddd cl-777 ');if(t.s(t.f("format_overridden",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("format_overridden")});c.pop()}t.b('">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b(" ");if(t.s(t.f("name_short_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a class="label" href="/label/');t.b(t.v(t.f("label_url",c,p,0)));t.b('/">');t.b(t.v(t.f("name_short_display",c,p,0)));t.b("</a>");if(t.s(t.d("catalog_nos.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(":")});c.pop()}t.b(" ")});c.pop()}if(t.s(t.f("catalog_nos",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_catalog_no">');t.b(t.v(t.f("cat_name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_date"> <span class="page_catalog_item_info_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> </div> </div> <div class="ui_catalog_btn_rating ');if(t.s(t.d("rating_system_label.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("rating_label_is_long")});c.pop()}t.b(" ");if(t.s(t.d("rating_system_label_outof.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("outof_is_long")});c.pop()}t.b('"> <div class="ui_catalog_btn_rating_icon"> <div class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" w32 r");if(t.s(t.f("rating",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("rating",c,p,0)))});c.pop()}if(!t.s(t.f("rating",c,p,1),c,p,1)){t.b("0")}t.b('"><i></i><b></b> </div> </div> <div class="ui_catalog_btn_rating_text ');if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b("base_rating")}t.b('"> <span class="ui_catalog_btn_rating_text_has_rating ');t.b("\n"+i);t.b(' "> ');if(t.s(t.f("rating_system_label",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_system_label",c,p,0)));t.b("</span> ");if(t.s(t.f("rating_system_label_outof",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_outof">/');t.b(t.v(t.f("rating_system_label_outof",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i)});c.pop()}if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_base_num",c,p,0)));t.b("</span> ")}t.b("\n"+i);t.b(' </span> </div> </div> <div class="media_timeline_btn ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_count")});c.pop()}t.b(" ");t.b(t.v(t.f("play_status",c,p,0)));t.b('"> ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b(t.v(t.f("play_count",c,p,0)));t.b("\n"+i)});c.pop()}t.b(' </div> <div class="ui_catalog_btn_rest_frame ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b('" onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "> <div class="ui_catalog_btn_rest"> <div class="ui_catalog_btn_rest_top"> <div class="ui_catalog_btn_other_info"> ');if(t.s(t.f("personal_notes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_has_notes"><i class="fa fa-paperclip"></i></span> ')});c.pop()}t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_ownership ownership_');t.b(t.v(t.f("ownership",c,p,0)));t.b('"> <span class="ui_catalog_btn_ownership_in_collection"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">In collection</span> </span> <span class="ui_catalog_btn_ownership_on_wishlist"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Want to buy</span> </span> <span class="ui_catalog_btn_ownership_used_to_own"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Used to own</span> </span> <span class="ui_catalog_btn_ownership_not_owned"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">&nbsp;</span> </span> </span> </div> <div class="clearfix"></div> </div> <div class="ui_catalog_btn_rest_bottom"> ');if(t.s(t.d("tags.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_catalog_btn_tags"> <span class="ui_catalog_btn_tag_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_btn_taglist"> ');if(t.s(t.f("tags",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated">');t.b(t.v(t.d(".",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="clearfix"></div> </div> </div> </div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</div> ")});c.pop()}t.b("\n"+i);t.b("</div>");t.b("\n"+i);t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(" ");t.b("\n"+i);if(t.s(t.f("formatted_tracks",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<div class="page_object_section page_release_section_tracklist" id="page_release_section_tracklist"> <div class="page_release_tracklist_header"> ');if(t.s(t.f("has_track_credits",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" <div class=\"page_release_tracklist_toggle\"> <a onClick=\"$('#page_release_section_tracklist').toggleClass('allcredits');\"><span ");t.b("\n"+i);t.b(' class="page_release_tracklist_toggle_show">Show track credits</span><span ');t.b("\n"+i);t.b(' class="page_release_tracklist_toggle_hide">Hide track credits</span></a> </div> ')});c.pop()}t.b("\n"+i);t.b(' <h3 class="page_object_section_header">Tracks</h3> </div> <ul class="page_release_tracklist"> ');if(t.s(t.f("tracks",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b('<li class="page_fragment_track_track " ');t.b("\n"+i);if(t.s(t.f("index",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' id="page_fragment_track_index_');t.b(t.v(t.f("index",c,p,0)));t.b('" ');t.b("\n"+i);t.b(' data-song-id="');t.b(t.v(t.f("song_id",c,p,0)));t.b('" ');t.b("\n"+i);t.b(' data-duration="');t.b(t.v(t.f("duration",c,p,0)));t.b('" ');t.b("\n"+i)});c.pop()}t.b("> ");if(t.s(t.f("song_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_fragment_track_data_catalog"> ');if(t.s(t.f("catalog",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b('<div data-catalog="');t.b(t.v(t.d("data.stringify",c,p,0)));t.b('" class="ui_catalog_btn_display ui_catalog_id_');t.b(t.v(t.f("catalog_id",c,p,0)));t.b(" ui_catalog_btn_");t.b(t.v(t.f("object",c,p,0)));t.b(" ");if(t.s(t.f("is_owner",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b(' " ');t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b(' id="');if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("catalog_id",c,p,0)))});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new")}t.b('"');t.b("\n"+i);t.b(' data-component="');t.b(t.v(t.f("component",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "');t.b("\n"+i);t.b(' > <div class="ui_catalog_btn_extended"> ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_item_info_new" > <span class="page_catalog_item_new_first">Rate / catalog</span> <span class="page_catalog_item_new_more">Rate / catalog another ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("issue")});c.pop()}if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("release")});c.pop()}t.b("</span> </div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.d("author.image_url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_user_image" style="background-image:url(\'');t.b(t.v(t.d("author.image_url_75",c,p,0)));t.b("')\"></div> ")});c.pop()}t.b("\n"+i);if(!t.s(t.d("author.image_url_75",c,p,1),c,p,1)){t.b(' <div class="page_catalog_user_no_image" style="background-position: ');t.b(t.v(t.d("author.no_img_template.x",c,p,0)));t.b("px ");t.b(t.v(t.d("author.no_img_template.y",c,p,0)));t.b("px; filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b("); -webkit-filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b(');"></div> ')}t.b("\n"+i)});c.pop()}if(t.s(t.f("object_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_object_image ');if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_tip delayed_background_img")});c.pop()}t.b('" ');if(t.s(t.f("url_300",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-tiptip=\"<img src='");t.b(t.v(t.f("url_300",c,p,0)));t.b("'>\"")});c.pop()}t.b(" ");if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-delayloadurl=\"url('");t.b(t.v(t.f("url_75",c,p,0)));t.b("')\"")});c.pop()}t.b("></div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_line"> <div class="page_catalog_item_info_top"> ');if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_catalog_item_author_link"> <a class="user" href="/user/');t.b(t.v(t.d("author.username",c,p,0)));t.b('">');t.b(t.v(t.d("author.username",c,p,0)));t.b("</a> </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("title_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_catalog_item_info_title">');t.b(t.v(t.f("title_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(' <span class="page_catalog_item_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> <div class="clearfix"></div> ');if(t.s(t.f("issue_info_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_issue_info">');t.b(t.v(t.f("issue_info_display",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("labels",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_label_info"> ');if(t.s(t.f("formats",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_format bg-ddd cl-777 ');if(t.s(t.f("format_overridden",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("format_overridden")});c.pop()}t.b('">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b(" ");if(t.s(t.f("name_short_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a class="label" href="/label/');t.b(t.v(t.f("label_url",c,p,0)));t.b('/">');t.b(t.v(t.f("name_short_display",c,p,0)));t.b("</a>");if(t.s(t.d("catalog_nos.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(":")});c.pop()}t.b(" ")});c.pop()}if(t.s(t.f("catalog_nos",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_catalog_no">');t.b(t.v(t.f("cat_name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_date"> <span class="page_catalog_item_info_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> </div> </div> <div class="ui_catalog_btn_rating ');if(t.s(t.d("rating_system_label.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("rating_label_is_long")});c.pop()}t.b(" ");if(t.s(t.d("rating_system_label_outof.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("outof_is_long")});c.pop()}t.b('"> <div class="ui_catalog_btn_rating_icon"> <div class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" w32 r");if(t.s(t.f("rating",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("rating",c,p,0)))});c.pop()}if(!t.s(t.f("rating",c,p,1),c,p,1)){t.b("0")}t.b('"><i></i><b></b> </div> </div> <div class="ui_catalog_btn_rating_text ');if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b("base_rating")}t.b('"> <span class="ui_catalog_btn_rating_text_has_rating ');t.b("\n"+i);t.b(' "> ');if(t.s(t.f("rating_system_label",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_system_label",c,p,0)));t.b("</span> ");if(t.s(t.f("rating_system_label_outof",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_outof">/');t.b(t.v(t.f("rating_system_label_outof",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i)});c.pop()}if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_base_num",c,p,0)));t.b("</span> ")}t.b("\n"+i);t.b(' </span> </div> </div> <div class="media_timeline_btn ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_count")});c.pop()}t.b(" ");t.b(t.v(t.f("play_status",c,p,0)));t.b('"> ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b(t.v(t.f("play_count",c,p,0)));t.b("\n"+i)});c.pop()}t.b(' </div> <div class="ui_catalog_btn_rest_frame ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b('" onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "> <div class="ui_catalog_btn_rest"> <div class="ui_catalog_btn_rest_top"> <div class="ui_catalog_btn_other_info"> ');if(t.s(t.f("personal_notes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_has_notes"><i class="fa fa-paperclip"></i></span> ')});c.pop()}t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_ownership ownership_');t.b(t.v(t.f("ownership",c,p,0)));t.b('"> <span class="ui_catalog_btn_ownership_in_collection"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">In collection</span> </span> <span class="ui_catalog_btn_ownership_on_wishlist"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Want to buy</span> </span> <span class="ui_catalog_btn_ownership_used_to_own"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Used to own</span> </span> <span class="ui_catalog_btn_ownership_not_owned"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">&nbsp;</span> </span> </span> </div> <div class="clearfix"></div> </div> <div class="ui_catalog_btn_rest_bottom"> ');if(t.s(t.d("tags.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_catalog_btn_tags"> <span class="ui_catalog_btn_tag_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_btn_taglist"> ');if(t.s(t.f("tags",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated">');t.b(t.v(t.d(".",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="clearfix"></div> </div> </div> </div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_fragment_track_rating_info"> <div class="page_fragment_track_avg_rating ');if(t.s(t.d("rating_info.enough_info",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_enough_info")});c.pop()}t.b(" level_");t.b(t.v(t.d("rating_info.indicator",c,p,0)));t.b('"> ');t.b(t.v(t.d("rating_info.avg_rating.decimal_2",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="page_fragment_track_num_listens"> ');t.b(t.v(t.d("rating_info.num_plays.abbreviated_num",c,p,0)));t.b(" ");t.b("\n"+i);t.b(' </div> <div class="page_fragment_track_num_ratings"> ');t.b(t.v(t.d("rating_info.num_ratings.abbreviated_num.comma",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="page_fragment_track_num_reviews"> ');t.b(t.v(t.d("rating_info.num_reviews.abbreviated_num",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="clearfix"></div> </div> </div> ')});c.pop()}t.b("\n"+i);if(t.s(t.f("has_playlist_delete",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_fragment_track_playlist_delete" onClick="RYMplaylist.removeItem(');t.b(t.v(t.f("index",c,p,0)));t.b(');"><i class="fa fa-minus-circle"></i></div> ')});c.pop()}t.b("\n"+i);t.b(' <div class="page_fragment_track_num_frame"> <div class="page_fragment_track_num">');t.b(t.v(t.f("num",c,p,0)));t.b("</div> ");if(t.s(t.f("sample_data",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_fragment_track_play" onClick="RYMmediaPage.playPreview(\'');t.b(t.v(t.f("preview_url",c,p,0)));t.b("', '");t.b(t.v(t.f("title_rendered",c,p,0)));t.b('\');"><i class="fa fa-caret-right"></i></div> ')});c.pop()}t.b("\n"+i);t.b(' </div> <div class="page_fragment_track_main one_line"> <div class="page_fragment_track_title cl-song ');if(t.s(t.f("is_recommended",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("recommended")});c.pop()}t.b('"> <span class="page_fragment_track_num_small">');t.b(t.v(t.f("num",c,p,0)));t.b("</span> ");if(t.s(t.f("song_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);if(t.s(t.f("for_app",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="song">');t.b(t.t(t.f("title_rendered",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);if(!t.s(t.f("for_app",c,p,1),c,p,1)){t.b(' <a title="[Song');t.b(t.v(t.f("song_id",c,p,0)));t.b(']" ');if(t.s(t.f("index",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' target="_blank" rel="noopener"')});c.pop()}t.b(' class="song" href="/song/');t.b(t.v(t.f("url",c,p,0)));t.b('/">');t.b(t.t(t.f("title_rendered",c,p,0)));t.b("</a> ")}t.b("\n"+i)});c.pop()}if(!t.s(t.f("song_id",c,p,1),c,p,1)){t.b(' <span class="page_release_tracklist_text">');t.b(t.t(t.f("title_rendered",c,p,0)));t.b("</span> ")}t.b("\n"+i);t.b(' <span class="page_fragment_track_title_extra"> ');if(t.s(t.f("artist_name",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="subtext">');t.b(t.v(t.f("artist_name",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b(' <span class="page_fragment_track_duration cl-666">');t.b(t.v(t.d("duration.duration_mmss",c,p,0)));t.b('</span> </span> </div> <div class="page_fragment_track_credits"> ');if(t.s(t.f("credits",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_fragment_track_credit cl-444 ');if(t.s(t.f("guest_info",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.f("is_featured",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" featured ")});c.pop()}if(t.s(t.f("is_guest",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" guest ")});c.pop()}t.b(" ")});c.pop()}t.b('"> ');if(t.s(t.f("guest_info",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);if(t.s(t.f("is_featured",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" <b>feat.</b> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("is_guest",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" <b>with</b> ")});c.pop()}t.b("\n"+i)});c.pop()}if(t.s(t.f("artist",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.d("artist.url",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");if(t.s(t.f("url",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a href="');t.b(t.v(t.f("url",c,p,0)));t.b('" ');if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));t.b("</a>");if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b('<span class="object_loc_original_text cl-888"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}});c.pop()}if(!t.s(t.f("url",c,p,1),c,p,1)){t.b("<span ");if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="object_loc_original_text"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}t.b("</span>")}t.b("\n"+i)});c.pop()}if(!t.s(t.d("artist.url",c,p,1),c,p,1)){t.b(' <span class="page_fragment_track_credit_artist_name">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")}t.b("\n"+i)});c.pop()}if(t.s(t.d("roles.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_fragment_track_credit_roles"> ');if(t.s(t.f("roles",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_fragment_track_credit_role comma_separated cl-666">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="page_fragment_track_genre_date"> <span class="page_fragment_track_date">');t.b(t.v(t.f("release_year",c,p,0)));t.b('</span> <span class="page_fragment_track_genres"> </span> </div> </div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</li> ")});c.pop()}t.b("\n"+i);t.b(" </ul>");t.b("\n"+i);t.b("</div>");t.b("\n"+i)});c.pop()}if(t.s(t.f("issues",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.v(t.f("name_display",c,p,0)));t.b("<br /> ")});c.pop()}t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"page.event.singleitem":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="page_event_item">');t.b("\n"+i);t.b('<div class="page_event_right"> <div class="page_event_ts">');t.b(t.v(t.f("date_display",c,p,0)));t.b('</div> <div class="page_event_toolbar_action_view"> <a class="btn">View event</a> </div>');t.b("\n"+i);t.b("</div>");t.b("\n"+i);t.b('<div class="page_event_rest"> ');if(t.s(t.f("name",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<div class="page_event_name ">');t.b(t.v(t.f("name",c,p,0)));t.b("</div>")});c.pop()}t.b("\n"+i);t.b(' <div class="page_event_artists ');if(t.s(t.f("name",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_name")});c.pop()}t.b('">');if(t.s(t.f("artists",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.f("url",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a href="');t.b(t.v(t.f("url",c,p,0)));t.b('" ');if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));t.b("</a>");if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b('<span class="object_loc_original_text cl-888"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}});c.pop()}if(!t.s(t.f("url",c,p,1),c,p,1)){t.b("<span ");if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="object_loc_original_text"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}t.b("</span>")}});c.pop()}t.b('</div> <div class="page_event_venue">');if(t.s(t.f("venues",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.f("url",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a href="');t.b(t.v(t.f("url",c,p,0)));t.b('" ');if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));t.b("</a>");if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b('<span class="object_loc_original_text cl-888"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}});c.pop()}if(!t.s(t.f("url",c,p,1),c,p,1)){t.b("<span ");if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="object_loc_original_text"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}t.b("</span>")}});c.pop()}t.b('</div> <div class="page_event_location">');if(t.s(t.f("location",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.f("url",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a href="');t.b(t.v(t.f("url",c,p,0)));t.b('" ');if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));t.b("</a>");if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b('<span class="object_loc_original_text cl-888"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}});c.pop()}if(!t.s(t.f("url",c,p,1),c,p,1)){t.b("<span ");if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="object_loc_original_text"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}t.b("</span>")}});c.pop()}t.b('</div> <div class="page_event_toolbar"> <div class="page_event_toolbar_action_comments"></div> <div class="page_event_toolbar_actions_rsvps"></div> <div class="page_event_toolbar_actions_rsvp"></div> </div>');t.b("\n"+i);t.b("</div>");t.b("\n"+i);t.b('<div class="clearfix"></div>');t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"page.fragment.link":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");if(t.s(t.f("url",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a href="');t.b(t.v(t.f("url",c,p,0)));t.b('" ');if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));t.b("</a>");if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b('<span class="object_loc_original_text cl-888"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}});c.pop()}if(!t.s(t.f("url",c,p,1),c,p,1)){t.b("<span ");if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="object_loc_original_text"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}t.b("</span>")}t.b("\n");return t.fl()},partials:{},subs:{}}),"page.fragment.text":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<span ");if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="object_loc_original_text"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}t.b("</span>");t.b("\n");return t.fl()},partials:{},subs:{}}),"page.fragment.track":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<li class="page_fragment_track_track " ');t.b("\n"+i);if(t.s(t.f("index",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' id="page_fragment_track_index_');t.b(t.v(t.f("index",c,p,0)));t.b('" ');t.b("\n"+i);t.b(' data-song-id="');t.b(t.v(t.f("song_id",c,p,0)));t.b('" ');t.b("\n"+i);t.b(' data-duration="');t.b(t.v(t.f("duration",c,p,0)));t.b('" ');t.b("\n"+i)});c.pop()}t.b("> ");if(t.s(t.f("song_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_fragment_track_data_catalog"> ');if(t.s(t.f("catalog",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b('<div data-catalog="');t.b(t.v(t.d("data.stringify",c,p,0)));t.b('" class="ui_catalog_btn_display ui_catalog_id_');t.b(t.v(t.f("catalog_id",c,p,0)));t.b(" ui_catalog_btn_");t.b(t.v(t.f("object",c,p,0)));t.b(" ");if(t.s(t.f("is_owner",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b(' " ');t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b(' id="');if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("catalog_id",c,p,0)))});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new")}t.b('"');t.b("\n"+i);t.b(' data-component="');t.b(t.v(t.f("component",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "');t.b("\n"+i);t.b(' > <div class="ui_catalog_btn_extended"> ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_item_info_new" > <span class="page_catalog_item_new_first">Rate / catalog</span> <span class="page_catalog_item_new_more">Rate / catalog another ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("issue")});c.pop()}if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("release")});c.pop()}t.b("</span> </div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.d("author.image_url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_user_image" style="background-image:url(\'');t.b(t.v(t.d("author.image_url_75",c,p,0)));t.b("')\"></div> ")});c.pop()}t.b("\n"+i);if(!t.s(t.d("author.image_url_75",c,p,1),c,p,1)){t.b(' <div class="page_catalog_user_no_image" style="background-position: ');t.b(t.v(t.d("author.no_img_template.x",c,p,0)));t.b("px ");t.b(t.v(t.d("author.no_img_template.y",c,p,0)));t.b("px; filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b("); -webkit-filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b(');"></div> ')}t.b("\n"+i)});c.pop()}if(t.s(t.f("object_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_object_image ');if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_tip delayed_background_img")});c.pop()}t.b('" ');if(t.s(t.f("url_300",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-tiptip=\"<img src='");t.b(t.v(t.f("url_300",c,p,0)));t.b("'>\"")});c.pop()}t.b(" ");if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-delayloadurl=\"url('");t.b(t.v(t.f("url_75",c,p,0)));t.b("')\"")});c.pop()}t.b("></div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_line"> <div class="page_catalog_item_info_top"> ');if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_catalog_item_author_link"> <a class="user" href="/user/');t.b(t.v(t.d("author.username",c,p,0)));t.b('">');t.b(t.v(t.d("author.username",c,p,0)));t.b("</a> </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("title_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_catalog_item_info_title">');t.b(t.v(t.f("title_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(' <span class="page_catalog_item_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> <div class="clearfix"></div> ');if(t.s(t.f("issue_info_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_issue_info">');t.b(t.v(t.f("issue_info_display",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("labels",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_label_info"> ');if(t.s(t.f("formats",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_format bg-ddd cl-777 ');if(t.s(t.f("format_overridden",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("format_overridden")});c.pop()}t.b('">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b(" ");if(t.s(t.f("name_short_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a class="label" href="/label/');t.b(t.v(t.f("label_url",c,p,0)));t.b('/">');t.b(t.v(t.f("name_short_display",c,p,0)));t.b("</a>");if(t.s(t.d("catalog_nos.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(":")});c.pop()}t.b(" ")});c.pop()}if(t.s(t.f("catalog_nos",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_catalog_no">');t.b(t.v(t.f("cat_name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_date"> <span class="page_catalog_item_info_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> </div> </div> <div class="ui_catalog_btn_rating ');if(t.s(t.d("rating_system_label.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("rating_label_is_long")});c.pop()}t.b(" ");if(t.s(t.d("rating_system_label_outof.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("outof_is_long")});c.pop()}t.b('"> <div class="ui_catalog_btn_rating_icon"> <div class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" w32 r");if(t.s(t.f("rating",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("rating",c,p,0)))});c.pop()}if(!t.s(t.f("rating",c,p,1),c,p,1)){t.b("0")}t.b('"><i></i><b></b> </div> </div> <div class="ui_catalog_btn_rating_text ');if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b("base_rating")}t.b('"> <span class="ui_catalog_btn_rating_text_has_rating ');t.b("\n"+i);t.b(' "> ');if(t.s(t.f("rating_system_label",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_system_label",c,p,0)));t.b("</span> ");if(t.s(t.f("rating_system_label_outof",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_outof">/');t.b(t.v(t.f("rating_system_label_outof",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i)});c.pop()}if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_base_num",c,p,0)));t.b("</span> ")}t.b("\n"+i);t.b(' </span> </div> </div> <div class="media_timeline_btn ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_count")});c.pop()}t.b(" ");t.b(t.v(t.f("play_status",c,p,0)));t.b('"> ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b(t.v(t.f("play_count",c,p,0)));t.b("\n"+i)});c.pop()}t.b(' </div> <div class="ui_catalog_btn_rest_frame ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b('" onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "> <div class="ui_catalog_btn_rest"> <div class="ui_catalog_btn_rest_top"> <div class="ui_catalog_btn_other_info"> ');if(t.s(t.f("personal_notes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_has_notes"><i class="fa fa-paperclip"></i></span> ')});c.pop()}t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_ownership ownership_');t.b(t.v(t.f("ownership",c,p,0)));t.b('"> <span class="ui_catalog_btn_ownership_in_collection"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">In collection</span> </span> <span class="ui_catalog_btn_ownership_on_wishlist"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Want to buy</span> </span> <span class="ui_catalog_btn_ownership_used_to_own"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Used to own</span> </span> <span class="ui_catalog_btn_ownership_not_owned"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">&nbsp;</span> </span> </span> </div> <div class="clearfix"></div> </div> <div class="ui_catalog_btn_rest_bottom"> ');if(t.s(t.d("tags.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_catalog_btn_tags"> <span class="ui_catalog_btn_tag_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_btn_taglist"> ');if(t.s(t.f("tags",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated">');t.b(t.v(t.d(".",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="clearfix"></div> </div> </div> </div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_fragment_track_rating_info"> <div class="page_fragment_track_avg_rating ');if(t.s(t.d("rating_info.enough_info",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_enough_info")});c.pop()}t.b(" level_");t.b(t.v(t.d("rating_info.indicator",c,p,0)));t.b('"> ');t.b(t.v(t.d("rating_info.avg_rating.decimal_2",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="page_fragment_track_num_listens"> ');t.b(t.v(t.d("rating_info.num_plays.abbreviated_num",c,p,0)));t.b(" ");t.b("\n"+i);t.b(' </div> <div class="page_fragment_track_num_ratings"> ');t.b(t.v(t.d("rating_info.num_ratings.abbreviated_num.comma",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="page_fragment_track_num_reviews"> ');t.b(t.v(t.d("rating_info.num_reviews.abbreviated_num",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="clearfix"></div> </div> </div> ')});c.pop()}t.b("\n"+i);if(t.s(t.f("has_playlist_delete",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_fragment_track_playlist_delete" onClick="RYMplaylist.removeItem(');t.b(t.v(t.f("index",c,p,0)));t.b(');"><i class="fa fa-minus-circle"></i></div> ')});c.pop()}t.b("\n"+i);t.b(' <div class="page_fragment_track_num_frame"> <div class="page_fragment_track_num">');t.b(t.v(t.f("num",c,p,0)));t.b("</div> ");if(t.s(t.f("sample_data",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_fragment_track_play" onClick="RYMmediaPage.playPreview(\'');t.b(t.v(t.f("preview_url",c,p,0)));t.b("', '");t.b(t.v(t.f("title_rendered",c,p,0)));t.b('\');"><i class="fa fa-caret-right"></i></div> ')});c.pop()}t.b("\n"+i);t.b(' </div> <div class="page_fragment_track_main one_line"> <div class="page_fragment_track_title cl-song ');if(t.s(t.f("is_recommended",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("recommended")});c.pop()}t.b('"> <span class="page_fragment_track_num_small">');t.b(t.v(t.f("num",c,p,0)));t.b("</span> ");if(t.s(t.f("song_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);if(t.s(t.f("for_app",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="song">');t.b(t.t(t.f("title_rendered",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);if(!t.s(t.f("for_app",c,p,1),c,p,1)){t.b(' <a title="[Song');t.b(t.v(t.f("song_id",c,p,0)));t.b(']" ');if(t.s(t.f("index",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' target="_blank" rel="noopener"')});c.pop()}t.b(' class="song" href="/song/');t.b(t.v(t.f("url",c,p,0)));t.b('/">');t.b(t.t(t.f("title_rendered",c,p,0)));t.b("</a> ")}t.b("\n"+i)});c.pop()}if(!t.s(t.f("song_id",c,p,1),c,p,1)){t.b(' <span class="page_release_tracklist_text">');t.b(t.t(t.f("title_rendered",c,p,0)));t.b("</span> ")}t.b("\n"+i);t.b(' <span class="page_fragment_track_title_extra"> ');if(t.s(t.f("artist_name",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="subtext">');t.b(t.v(t.f("artist_name",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b(' <span class="page_fragment_track_duration cl-666">');t.b(t.v(t.d("duration.duration_mmss",c,p,0)));t.b('</span> </span> </div> <div class="page_fragment_track_credits"> ');if(t.s(t.f("credits",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_fragment_track_credit cl-444 ');if(t.s(t.f("guest_info",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.f("is_featured",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" featured ")});c.pop()}if(t.s(t.f("is_guest",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" guest ")});c.pop()}t.b(" ")});c.pop()}t.b('"> ');if(t.s(t.f("guest_info",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);if(t.s(t.f("is_featured",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" <b>feat.</b> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("is_guest",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" <b>with</b> ")});c.pop()}t.b("\n"+i)});c.pop()}if(t.s(t.f("artist",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.d("artist.url",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");if(t.s(t.f("url",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a href="');t.b(t.v(t.f("url",c,p,0)));t.b('" ');if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));t.b("</a>");if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b('<span class="object_loc_original_text cl-888"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}});c.pop()}if(!t.s(t.f("url",c,p,1),c,p,1)){t.b("<span ");if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="object_loc_original_text"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}t.b("</span>")}t.b("\n"+i)});c.pop()}if(!t.s(t.d("artist.url",c,p,1),c,p,1)){t.b(' <span class="page_fragment_track_credit_artist_name">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")}t.b("\n"+i)});c.pop()}if(t.s(t.d("roles.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_fragment_track_credit_roles"> ');if(t.s(t.f("roles",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_fragment_track_credit_role comma_separated cl-666">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="page_fragment_track_genre_date"> <span class="page_fragment_track_date">');t.b(t.v(t.f("release_year",c,p,0)));t.b('</span> <span class="page_fragment_track_genres"> </span> </div> </div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</li>");t.b("\n");return t.fl()},partials:{},subs:{}}),"page.object.section.customize":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="page_object_section_customize page_object_section_customize_');t.b(t.v(t.f("object",c,p,0)));t.b('"> <h3>Customize this page</h3> <div class="page_object_section_customize_images"> <h4>Images</h4> <ul class="page_object_section_customize_list"> <li id="page_object_customize_li_show_background_image"> <label for="page_object_customize_show_background_image"> <input type="checkbox" id="page_object_customize_show_background_image" name="page_object_customize_show_background_image" ');if(t.s(t.f("show_background_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("checked")});c.pop()}t.b("> Show background image ");t.b("\n"+i);t.b(' </label> </li> <li id="page_object_customize_li_show_hero_image"> <label for="page_object_customize_show_hero_image"> <input type="checkbox" id="page_object_customize_show_hero_image" name="page_object_customize_show_hero_image" ');if(t.s(t.f("show_hero_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("checked")});c.pop()}t.b("> Show hero image ");t.b("\n"+i);t.b(' <i class="fa fa-question-circle cl-666 has_tip" data-tiptip="The large screenshot/still that appears at the top of the page in some cases"></i> </label> </li> </ul> </div> <h4>Sections</h4> <ul class="page_object_section_customize_list"> <li id="page_object_customize_li_show_reviews"> <label for="page_object_customize_show_reviews"> <input type="checkbox" id="page_object_customize_show_reviews" name="page_object_customize_show_reviews" ');if(t.s(t.f("show_reviews",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("checked")});c.pop()}t.b("> Show reviews ");t.b("\n"+i);t.b(' </label> </li> <li id="page_object_customize_li_show_suggestions"> <label for="page_object_customize_show_suggestions"> <input type="checkbox" id="page_object_customize_show_suggestions" name="page_object_customize_show_suggestions" ');if(t.s(t.f("show_suggestions",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("checked")});c.pop()}t.b("> Show suggestions ");t.b("\n"+i);t.b(' </label> </li> <li id="page_object_customize_li_show_synopsis"> <label for="page_object_customize_show_synopsis"> <input type="checkbox" id="page_object_customize_show_synopsis" name="page_object_customize_show_synopsis" ');if(t.s(t.f("show_synopsis",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("checked")});c.pop()}t.b("> Show synopsis ");t.b("\n"+i);t.b(' </label> </li> <li id="page_object_customize_li_show_comments"> <label for="page_object_customize_show_comments"> <input type="checkbox" id="page_object_customize_show_comments" name="page_object_customize_show_comments" ');if(t.s(t.f("show_comments",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("checked")});c.pop()}t.b("> Show comments ");t.b("\n"+i);t.b(' </label> </li> <li id="page_object_customize_li_show_lists"> <label for="page_object_customize_show_lists"> <input type="checkbox" id="page_object_customize_show_lists" name="page_object_customize_show_lists" ');if(t.s(t.f("show_lists",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("checked")});c.pop()}t.b("> Show lists ");t.b("\n"+i);t.b(' </label> </li> <li id="page_object_customize_li_show_catalog"> <label for="page_object_customize_show_catalog"> <input type="checkbox" id="page_object_customize_show_catalog" name="page_object_customize_show_catalog" ');if(t.s(t.f("show_catalog",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("checked")});c.pop()}t.b("> Show catalog ");t.b("\n"+i);t.b(' </label> </li> <li id="page_object_customize_li_show_media"> <label for="page_object_customize_show_media"> <input type="checkbox" id="page_object_customize_show_media" name="page_object_customize_show_media" ');if(t.s(t.f("show_media",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("checked")});c.pop()}t.b("> Show media content (videos, etc) ");t.b("\n"+i);t.b(' </label> </li> <li id="page_object_customize_li_show_discussion"> <label for="page_object_customize_show_discussion"> <input type="checkbox" id="page_object_customize_show_discussion" name="page_object_customize_show_discussion" ');if(t.s(t.f("show_discussion",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("checked")});c.pop()}t.b("> Show discussion ");t.b("\n"+i);t.b(' </label> </li> <li id="page_object_customize_li_show_extra_issues"> <label for="page_object_customize_show_extra_issues"> <input type="checkbox" id="page_object_customize_show_extra_issues" name="page_object_customize_show_extra_issues" ');if(t.s(t.f("show_extra_issues",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("checked")});c.pop()}t.b("> Show more releases by default ");t.b("\n"+i);t.b(' </label> </li> </ul> <div class="page_object_section_customize_submit"> <a onClick="RYMobjectPage.saveCustomize();" class="btn flat_btn">Save</a> </div> <div class="page_object_section_customize_extra">More can be customized in <a target="_blank" rel="nofollow noopener" href="/settings/display/">general display settings</a>.');t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"page.section.followers.singleitem":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<a id="follow_btn_');t.b(t.v(t.f("following_object",c,p,0)));t.b("_");t.b(t.v(t.f("following_id",c,p,0)));t.b("_");t.b(t.v(t.f("user_id",c,p,0)));t.b('" href="/user/');t.b(t.v(t.f("username",c,p,0)));t.b('"> <li class="has_tip" data-tiptip="');t.b(t.v(t.f("username",c,p,0)));t.b('"> ');if(t.s(t.f("user_img_url_150",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<div class="following_img" style="background-image:url(\'');t.b(t.v(t.f("user_img_url_150",c,p,0)));t.b("')\"></div>")});c.pop()}t.b("\n"+i);t.b(" ");if(!t.s(t.f("user_img_url_150",c,p,1),c,p,1)){t.b('<div class="following_no_img"></div>')}t.b("\n"+i);t.b(" </li>");t.b("\n"+i);t.b("</a>");t.b("\n");return t.fl()},partials:{},subs:{}}),"page.song.singleitem":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<li class="page_song"> <div class="page_song_catalog"></div> <div class="page_songlist_average"> ');t.b(t.v(t.f("s_duration_display",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="page_songlist_average"> ');t.b(t.v(t.d("rating_info.avg_rating.decimal_1",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="page_songlist_ratings"> ');t.b(t.v(t.d("rating_info.num_ratings_display",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="page_songlist_reviews"> ');t.b(t.v(t.d("rating_info.num_reviews_display",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="page_song_num">');t.b(t.v(t.f("position",c,p,0)));t.b('&nbsp;</div> <div class="page_song_img" ');if(t.s(t.f("image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("style=\"background:url('");t.b(t.v(t.d("image.url_150",c,p,0)));t.b("');\"")});c.pop()}t.b('></div> <div class="page_song_name"> <a class="song" href="/song/');t.b(t.v(t.f("url",c,p,0)));t.b('/">');t.b(t.v(t.f("title_display",c,p,0)));t.b('</a> <span class="page_song_release">');t.b(t.v(t.f("release_year",c,p,0)));t.b('</span> </div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</li>");t.b("\n");return t.fl()},partials:{},subs:{}}),"page.stats.genre_list.singleitem":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b(' <li id="genre_filter_');t.b(t.v(t.f("genre_id",c,p,0)));t.b("\" onClick=\"RYMstatsPage.filter('genre', '");t.b(t.v(t.f("url",c,p,0)));t.b('\');"> <div class="expandable_list_avg_rating">');t.b(t.v(t.f("avg_rating",c,p,0)));t.b('</div> <div class="expandable_list_count">');t.b(t.v(t.f("count",c,p,0)));t.b('</div> <div class="expandable_list_name">');t.b(t.v(t.f("name",c,p,0)));t.b('</div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</li>");t.b("\n");return t.fl()},partials:{},subs:{}}),poll:new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="poll logged_in bg-f8f8f8');t.b("\n"+i);if(t.s(t.f("logged_in",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" logged_in");t.b("\n"+i)});c.pop()}if(!t.s(t.f("logged_in",c,p,1),c,p,1)){t.b(" logged_out");t.b("\n"+i)}if(t.s(t.f("is_closed",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" voting_closed");t.b("\n"+i)});c.pop()}if(!t.s(t.f("is_closed",c,p,1),c,p,1)){t.b(" voting_open");t.b("\n"+i)}if(t.s(t.f("state_not_voted",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" state_not_voted");t.b("\n"+i)});c.pop()}if(t.s(t.f("state_voting",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" state_voting");t.b("\n"+i)});c.pop()}if(t.s(t.f("state_voted",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" state_voted");t.b("\n"+i)});c.pop()}if(t.s(t.f("state_not_voted_showing_votes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" state_not_voted_showing_votes");t.b("\n"+i)});c.pop()}if(t.s(t.f("multiple_items",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" multiple_items");t.b("\n"+i)});c.pop()}if(t.s(t.f("single_item",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" single_item");t.b("\n"+i)});c.pop()}if(t.s(t.f("can_see_results_before_voting",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" can_see_results_before_voting");t.b("\n"+i)});c.pop()}if(!t.s(t.f("can_see_results_before_voting",c,p,1),c,p,1)){t.b(" can_not_see_results_before_voting");t.b("\n"+i)}if(t.s(t.f("votes_are_public",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" votes_are_public");t.b("\n"+i)});c.pop()}if(t.s(t.f("votes_are_private",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" votes_are_private");t.b("\n"+i)});c.pop()}if(t.s(t.f("can_change_votes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" can_change_votes");t.b("\n"+i)});c.pop()}if(!t.s(t.f("can_change_votes",c,p,1),c,p,1)){t.b(" can_not_change_votes");t.b("\n"+i)}if(t.s(t.f("is_poll_admin",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" is_poll_admin");t.b("\n"+i)});c.pop()}t.b('" id="poll_');t.b(t.v(t.f("poll_id",c,p,0)));t.b('" > ');if(t.s(t.f("question",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="poll_question"><span class="poll_label">Poll:</span> ');t.b(t.t(t.f("question",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);t.b('   <div class="poll_instruction poll_instruction_a"> Click on an option to start voting. You can vote for up to <span class="poll_items_left_');t.b(t.v(t.f("poll_id",c,p,0)));t.b('">');t.b(t.v(t.f("max_num_items",c,p,0)));t.b("</span> items.");t.b("\n"+i);t.b(' </div>  <div class="poll_instruction poll_instruction_b"> Click on an option to vote. ');t.b("\n"+i);t.b(' </div>  <div class="poll_instruction poll_instruction_c"> You can vote for up to <span class="poll_items_left_');t.b(t.v(t.f("poll_id",c,p,0)));t.b('">');t.b(t.v(t.f("max_num_items",c,p,0)));t.b('</span> items. Click on "submit vote" when you\'re finished voting. ');t.b("\n"+i);t.b(' </div>  <div class="poll_instruction poll_instruction_d"> Click on "submit vote" to confirm your vote. ');t.b("\n"+i);t.b(' </div>  <div class="poll_instruction poll_instruction_e"> Log in to vote.');t.b("\n"+i);t.b(' </div>  <div class="poll_instruction see_voters"> <a id="poll_show_voters_');t.b(t.v(t.f("poll_id",c,p,0)));t.b('" onClick="poll_');t.b(t.v(t.f("poll_id",c,p,0)));t.b('.onClickShowVoters();">Show voters</a> </div> <div style="clear:both"></div> <ul class="poll_choices"> ');if(t.s(t.f("choices",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <li id="poll_choice_');t.b(t.v(t.f("poll_id",c,p,0)));t.b("_");t.b(t.v(t.f("choice_id",c,p,0)));t.b('" class="');if(t.s(t.f("my_vote",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("my_vote")});c.pop()}t.b('" onClick="poll_');t.b(t.v(t.f("poll_id",c,p,0)));t.b(".onClickChoice(");t.b(t.v(t.f("choice_id",c,p,0)));t.b(')"><div class="poll_result_color" style="width:');t.b(t.v(t.f("percentage",c,p,0)));t.b('%"></div> <span class="poll_vote_result_pct" >');t.b(t.v(t.f("percentage",c,p,0)));t.b('%</span> <span class="poll_vote_result_num">');if(t.s(t.f("num_points",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("num_points",c,p,0)))});c.pop()}t.b('</span> <span class="poll_vote_choice"> <span id="poll_my_vote_check_');t.b(t.v(t.f("poll_id",c,p,0)));t.b("_");t.b(t.v(t.f("choice_id",c,p,0)));t.b('" class="vote_check_mark ');t.b("\n"+i);if(!t.s(t.f("my_vote_points",c,p,1),c,p,1)){t.b(" ");if(t.s(t.f("my_vote",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("my_vote")});c.pop()}t.b("\n"+i)}t.b(' "><i class="fa fa-check-circle"></i> </span> ');t.b(t.t(t.f("name",c,p,0)));t.b("\n"+i);t.b(' <span id="poll_my_vote_points_');t.b(t.v(t.f("poll_id",c,p,0)));t.b("_");t.b(t.v(t.f("choice_id",c,p,0)));t.b('" class="my_vote_points"> ');if(t.s(t.f("my_vote_points",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("my_vote_points",c,p,0)))});c.pop()}t.b("\n"+i);t.b(' </span> </span> </li> <div class="voters voters_');t.b(t.v(t.f("poll_id",c,p,0)));t.b('"> ');if(t.s(t.f("voters",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);if(t.s(t.f("more_voters",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="load_more_voters" onClick="poll_');t.b(t.v(t.f("poll_id",c,p,0)));t.b(".onClickMoreVoters(");t.b(t.v(t.f("choice_id",c,p,0)));t.b(');"> ');t.b(t.v(t.f("num_more_voters",c,p,0)));t.b(" more...</span> ")});c.pop()}t.b("\n"+i);if(!t.s(t.f("more_voters",c,p,1),c,p,1)){t.b(' <span class="voter"><a class="user" href="/user/');t.b(t.v(t.f("username",c,p,0)));t.b('">');t.b(t.v(t.f("username",c,p,0)));t.b("</a>");if(t.s(t.f("voting_weighted",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" (");t.b(t.v(t.f("num_points",c,p,0)));t.b(")")});c.pop()}t.b("</span> ")}t.b("\n"+i)});c.pop()}t.b(" </div> ")});c.pop()}t.b("\n"+i);t.b(' </ul>  <div onClick="poll_');t.b(t.v(t.f("poll_id",c,p,0)));t.b('.onClickSubmitVote();" class="poll_submit"> Submit vote');t.b("\n"+i);t.b(' </div>  <div onClick="poll_');t.b(t.v(t.f("poll_id",c,p,0)));t.b('.onClickCancelVote();" class="poll_cancel"> Cancel');t.b("\n"+i);t.b(' </div> <div class="poll_small_links">  <div onClick="poll_');t.b(t.v(t.f("poll_id",c,p,0)));t.b('.onClickClosePoll();" class="poll_small_link poll_close"> Close poll');t.b("\n"+i);t.b(' </div>  <div onClick="poll_');t.b(t.v(t.f("poll_id",c,p,0)));t.b('.onClickResetVote();" class="poll_small_link poll_reset"> Reset vote');t.b("\n"+i);t.b(' </div>  <div onClick="poll_');t.b(t.v(t.f("poll_id",c,p,0)));t.b('.onClickAbstain();" class="poll_small_link poll_abstain"> Abstain ');t.b("\n"+i);t.b(' </div> <div onClick="poll_');t.b(t.v(t.f("poll_id",c,p,0)));t.b('.onClickSeeVotes();" class="poll_small_link poll_see_votes"> See votes');t.b("\n"+i);t.b(' </div>  <div onClick="poll_');t.b(t.v(t.f("poll_id",c,p,0)));t.b('.onClickAbstain();" class="poll_small_link poll_abstain_and_see"> Abstain and see votes');t.b("\n"+i);t.b(' </div> </div> <div style="clear:both;"></div> <div class="poll_rules"> Voting: ');t.b("\n"+i);if(t.s(t.f("voting_weighted",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <b class="has_tip" data-tiptip="You can vote for up to ');t.b(t.v(t.f("max_num_items",c,p,0)));t.b(" items. The first vote receives ");t.b(t.v(t.f("max_num_items",c,p,0)));t.b(" points, the next ");t.b(t.v(t.f("max_num_items_minus_one",c,p,0)));t.b(', etc. ">weighted, up to ');t.b(t.v(t.f("max_num_items",c,p,0)));t.b(" items</b>. ");t.b("\n"+i)});c.pop()}if(t.s(t.f("voting_single",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <b class="has_tip" data-tiptip="You can vote for one item.">single</b>. ');t.b("\n"+i)});c.pop()}if(t.s(t.f("voting_multiple",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <b class="has_tip" data-tiptip="You can vote for as many items as you want. Each vote is worth one point.">multiple</b>. ');t.b("\n"+i)});c.pop()}if(t.s(t.f("votes_are_public",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" Votes are <b>public</b>. ");t.b("\n"+i)});c.pop()}if(!t.s(t.f("votes_are_public",c,p,1),c,p,1)){t.b(" Votes are <b>private</b>. ");t.b("\n"+i)}if(t.s(t.f("is_closed",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" Voting is closed.");t.b("\n"+i)});c.pop()}if(!t.s(t.f("is_closed",c,p,1),c,p,1)){t.b(" Voting is currently open.");t.b("\n"+i);if(t.s(t.f("can_change_votes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" You can change your vote. ");t.b("\n"+i)});c.pop()}if(!t.s(t.f("can_change_votes",c,p,1),c,p,1)){t.b(" You cannot change your vote. ");t.b("\n"+i)}}t.b(" </div>");t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),test:new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.affinity":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="ui_element ui_affinity_slider" data-type="');t.b(t.v(t.f("type",c,p,0)));t.b('" data-assoc-id="');t.b(t.v(t.f("assoc_id",c,p,0)));t.b('"> <input type="hidden" id="ui_affinity_');t.b(t.v(t.f("type",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b('" value="');t.b(t.v(t.f("value",c,p,0)));t.b('" /> <div id="ui_affinity_close_btn_');t.b(t.v(t.f("type",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b('" class="ui_affinity_close_btn"><i class="fa fa-times-circle"></i></div> <label>');t.b(t.v(t.f("genre_name",c,p,0)));t.b('</label> <div class="ui_affinity_main"> <div id="ui_affinity_label_');t.b(t.v(t.f("type",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b('" class="ui_affinity_label"></div> <div class="ui_affinity_line"> <div class="ui_affinity_line_half"></div> <div id="ui_affinity_handle_frame_');t.b(t.v(t.f("type",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b('" class="ui_affinity_handle_frame"> <div id="ui_affinity_handle_');t.b(t.v(t.f("type",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b('" class="ui_affinity_handle" ></div> </div> </div> </div>');t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.catalog":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div data-catalog="');t.b(t.v(t.d("data.stringify",c,p,0)));t.b('" class="ui_catalog_btn_display ui_catalog_id_');t.b(t.v(t.f("catalog_id",c,p,0)));t.b(" ui_catalog_btn_");t.b(t.v(t.f("object",c,p,0)));t.b(" ");if(t.s(t.f("is_owner",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b(' " ');t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b(' id="');if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("catalog_id",c,p,0)))});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new")}t.b('"');t.b("\n"+i);t.b(' data-component="');t.b(t.v(t.f("component",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "');t.b("\n"+i);t.b(' > <div class="ui_catalog_btn_extended"> ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_item_info_new" > <span class="page_catalog_item_new_first">Rate / catalog</span> <span class="page_catalog_item_new_more">Rate / catalog another ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("issue")});c.pop()}if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("release")});c.pop()}t.b("</span> </div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.d("author.image_url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_user_image" style="background-image:url(\'');t.b(t.v(t.d("author.image_url_75",c,p,0)));t.b("')\"></div> ")});c.pop()}t.b("\n"+i);if(!t.s(t.d("author.image_url_75",c,p,1),c,p,1)){t.b(' <div class="page_catalog_user_no_image" style="background-position: ');t.b(t.v(t.d("author.no_img_template.x",c,p,0)));t.b("px ");t.b(t.v(t.d("author.no_img_template.y",c,p,0)));t.b("px; filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b("); -webkit-filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b(');"></div> ')}t.b("\n"+i)});c.pop()}if(t.s(t.f("object_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_object_image ');if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_tip delayed_background_img")});c.pop()}t.b('" ');if(t.s(t.f("url_300",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-tiptip=\"<img src='");t.b(t.v(t.f("url_300",c,p,0)));t.b("'>\"")});c.pop()}t.b(" ");if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-delayloadurl=\"url('");t.b(t.v(t.f("url_75",c,p,0)));t.b("')\"")});c.pop()}t.b("></div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_line"> <div class="page_catalog_item_info_top"> ');if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_catalog_item_author_link"> <a class="user" href="/user/');t.b(t.v(t.d("author.username",c,p,0)));t.b('">');t.b(t.v(t.d("author.username",c,p,0)));t.b("</a> </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("title_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_catalog_item_info_title">');t.b(t.v(t.f("title_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(' <span class="page_catalog_item_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> <div class="clearfix"></div> ');if(t.s(t.f("issue_info_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_issue_info">');t.b(t.v(t.f("issue_info_display",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("labels",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_label_info"> ');if(t.s(t.f("formats",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_format bg-ddd cl-777 ');if(t.s(t.f("format_overridden",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("format_overridden")});c.pop()}t.b('">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b(" ");if(t.s(t.f("name_short_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a class="label" href="/label/');t.b(t.v(t.f("label_url",c,p,0)));t.b('/">');t.b(t.v(t.f("name_short_display",c,p,0)));t.b("</a>");if(t.s(t.d("catalog_nos.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(":")});c.pop()}t.b(" ")});c.pop()}if(t.s(t.f("catalog_nos",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_catalog_no">');t.b(t.v(t.f("cat_name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_date"> <span class="page_catalog_item_info_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> </div> </div> <div class="ui_catalog_btn_rating ');if(t.s(t.d("rating_system_label.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("rating_label_is_long")});c.pop()}t.b(" ");if(t.s(t.d("rating_system_label_outof.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("outof_is_long")});c.pop()}t.b('"> <div class="ui_catalog_btn_rating_icon"> <div class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" w32 r");if(t.s(t.f("rating",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("rating",c,p,0)))});c.pop()}if(!t.s(t.f("rating",c,p,1),c,p,1)){t.b("0")}t.b('"><i></i><b></b> </div> </div> <div class="ui_catalog_btn_rating_text ');if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b("base_rating")}t.b('"> <span class="ui_catalog_btn_rating_text_has_rating ');t.b("\n"+i);t.b(' "> ');if(t.s(t.f("rating_system_label",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_system_label",c,p,0)));t.b("</span> ");if(t.s(t.f("rating_system_label_outof",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_outof">/');t.b(t.v(t.f("rating_system_label_outof",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i)});c.pop()}if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_base_num",c,p,0)));t.b("</span> ")}t.b("\n"+i);t.b(' </span> </div> </div> <div class="media_timeline_btn ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_count")});c.pop()}t.b(" ");t.b(t.v(t.f("play_status",c,p,0)));t.b('"> ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b(t.v(t.f("play_count",c,p,0)));t.b("\n"+i)});c.pop()}t.b(' </div> <div class="ui_catalog_btn_rest_frame ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b('" onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "> <div class="ui_catalog_btn_rest"> <div class="ui_catalog_btn_rest_top"> <div class="ui_catalog_btn_other_info"> ');if(t.s(t.f("personal_notes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_has_notes"><i class="fa fa-paperclip"></i></span> ')});c.pop()}t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_ownership ownership_');t.b(t.v(t.f("ownership",c,p,0)));t.b('"> <span class="ui_catalog_btn_ownership_in_collection"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">In collection</span> </span> <span class="ui_catalog_btn_ownership_on_wishlist"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Want to buy</span> </span> <span class="ui_catalog_btn_ownership_used_to_own"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Used to own</span> </span> <span class="ui_catalog_btn_ownership_not_owned"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">&nbsp;</span> </span> </span> </div> <div class="clearfix"></div> </div> <div class="ui_catalog_btn_rest_bottom"> ');if(t.s(t.d("tags.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_catalog_btn_tags"> <span class="ui_catalog_btn_tag_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_btn_taglist"> ');if(t.s(t.f("tags",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated">');t.b(t.v(t.d(".",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="clearfix"></div> </div> </div> </div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</div>");t.b("\n");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.catalog.timeline":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div onClick="RYMmediatimeline.load($(this));" id="ui_catalog_timeline_');t.b(t.v(t.d("metadata.object",c,p,0)));t.b("_");t.b(t.v(t.d("metadata.assoc_id",c,p,0)));t.b("_");t.b(t.v(t.d("metadata.sec_id",c,p,0)));t.b('" ');t.b("\n"+i);t.b(' class="ui_catalog_timeline ');if(t.s(t.d("counts.num_plays",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_plays")});c.pop()}t.b(" ");t.b(t.v(t.d("counts.latest_state",c,p,0)));t.b(" best_");t.b(t.v(t.d("counts.best_state",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-object="');t.b(t.v(t.d("metadata.object",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-assoc-id="');t.b(t.v(t.d("metadata.assoc_id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-sec-id="');t.b(t.v(t.d("metadata.sec_id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-state="');t.b(t.v(t.d("metadata.state",c,p,0)));t.b('"');t.b("\n"+i);t.b('> <span id="ui_catalog_timeline_plays_');t.b(t.v(t.d("metadata.object",c,p,0)));t.b("_");t.b(t.v(t.d("metadata.assoc_id",c,p,0)));t.b("_");t.b(t.v(t.d("metadata.sec_id",c,p,0)));t.b('" class="ui_catalog_timeline_label"><b>');if(t.s(t.d("counts.num_plays",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(t.v(t.d("counts.num_plays",c,p,0)))});c.pop()}if(!t.s(t.d("counts.num_plays",c,p,1),c,p,1)){t.b("0")}t.b('</b> <i class="fa fa-check-circle"></i> </span> <i class="ui_catalog_timeline_icon fa fa-play"></i>');t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.cataloger":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="ui_cataloger_dialog"> <div id="ui_catalog_dialog_overlay" class="ui_catalog_dialog_overlay"> <div id="ui_catalog_dialog_overlay_inner" class="ui_catalog_dialog_overlay_inner"></div> </div> <div id="ui_cataloger_format_frame"></div> <div id="ui_cataloger_issue_selector" class="ui_cataloger_issue_selector"> <div class="ui_cataloger_issue_selector_header"> <div class="ui_cataloger_issue_cancel btn btn_blue" onClick="RYMcataloger.onClickCancelIssueSelection();">Cancel ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("issue")});c.pop()}t.b(" ");if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("release")});c.pop()}t.b(' selection</div> </div> <div id="ui_cataloger_issue_selector_content" class="ui_cataloger_issue_selector_content"> </div> </div> ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_cataloger_dialog_section ui_cataloger_dialog_section_issue"> <div class="ui_cataloger_dialog_header">');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("Select issue")});c.pop()}t.b(" ");if(!t.s(t.f("is_new",c,p,1),c,p,1)){t.b("Change issue")}t.b('</div> <div id="ui_cataloger_dialog_selected_issue" class="ui_cataloger_dialog_selected_issue"> </div> </div> ')});c.pop()}t.b("\n"+i);if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="ui_cataloger_dialog_section ui_cataloger_dialog_section_issue"> <div class="ui_cataloger_dialog_header">');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("Select release")});c.pop()}t.b(" ");if(!t.s(t.f("is_new",c,p,1),c,p,1)){t.b("Change release")}t.b('</div> <div id="ui_cataloger_dialog_selected_issue" class="ui_cataloger_dialog_selected_issue"> </div> </div> ')});c.pop()}t.b("\n"+i);t.b(' <div class="ui_cataloger_dialog_section"> <div class="ui_cataloger_dialog_header ui_cataloger_dialog_header_ownership"> Ownership');t.b("\n"+i);t.b(' <div onClick="RYMcataloger.onClickOpenCustomFormat();" data-tiptip="Click to override format" class="has_tip ui_cataloger_format_override_btn ');if(t.s(t.f("format_overridden",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("format_overridden")});c.pop()}t.b('" style="float:right"> ');if(t.s(t.f("formats",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="comma_separated">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b(" ");if(!t.s(t.f("formats",c,p,1),c,p,1)){t.b("Format")}t.b("\n"+i);t.b(' </div> <div class="clearfix"></div></div> <div id="ui_cataloger_ownership" class="ui_cataloger_ownership ownership_');t.b(t.v(t.f("ownership",c,p,0)));t.b('"> <span onClick="RYMcataloger.onClickOwnership(\'not_owned\')" id="ui_cataloger_choose_ownership_not_owned" class="ui_cataloger_ownership_item ui_cataloger_choose_ownership_not_owned"> Not owned');t.b("\n"+i);t.b(" </span");t.b("\n"+i);t.b(' ><span onClick="RYMcataloger.onClickOwnership(\'in_collection\')" id="ui_cataloger_choose_ownership_in_collection" class="ui_cataloger_ownership_item ui_cataloger_choose_ownership_in_collection"> In collection');t.b("\n"+i);t.b(" </span");t.b("\n"+i);t.b(' ><span onClick="RYMcataloger.onClickOwnership(\'on_wishlist\')" id="ui_cataloger_choose_ownership_on_wishlist" class="ui_cataloger_ownership_item ui_cataloger_choose_ownership_on_wishlist"> Want to buy');t.b("\n"+i);t.b(" </span");t.b("\n"+i);t.b(' ><span onClick="RYMcataloger.onClickOwnership(\'used_to_own\')" id="ui_cataloger_choose_ownership_used_to_own" class="ui_cataloger_ownership_item ui_cataloger_choose_ownership_used_to_own"> Used to own');t.b("\n"+i);t.b(' </span> </div> </div> <div id="ui_cataloger_dialog_section_listening" class="ui_cataloger_dialog_section ui_cataloger_dialog_section_listening ');t.b(t.v(t.f("play_status",c,p,0)));t.b('"> <div class="ui_cataloger_dialog_header ui_cataloger_dialog_header_listening ');if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("object_game")});c.pop()}t.b('"> ');if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_cataloger_rating_completed" style="float:right;" onClick="RYMcataloger.onClickGameCompleted();"> <i class="fa fa-square-o"></i> <i class="fa fa-check-square"></i> Completed');t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);t.b(" ");if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("Listening status")});c.pop()}t.b(" ");if(t.s(t.f("object_song",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("Listening status")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" ");if(t.s(t.f("object_film",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("Viewing status")});c.pop()}t.b(" ");if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("Play status")});c.pop()}t.b("\n"+i);t.b(' <div class="clearfix"></div> </div> <div id="ui_cataloger_listening_status_not_yet_played" class="ui_cataloger_listening_status_not_yet_played ');t.b(t.v(t.f("play_status",c,p,0)));t.b('"><span');t.b("\n"+i);t.b(" onClick=\"RYMcataloger.onClickInitialPlay('not_played')\"");t.b("\n"+i);t.b(' class="ui_cataloger_listening_status_initial_item ui_cataloger_listening_status_initial_item_not_played"> Never ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("listened")});c.pop()}t.b(" ");if(t.s(t.f("object_song",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("listened")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" ");if(t.s(t.f("object_film",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("watched")});c.pop()}t.b(" ");if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("played")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" </span");t.b("\n"+i);t.b(" ><span onClick=\"RYMcataloger.onClickInitialPlay('want_to_play')\"");t.b("\n"+i);t.b(' class="ui_cataloger_listening_status_initial_item ui_cataloger_listening_status_initial_item_want_to_play"> Want to ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("listen")});c.pop()}t.b(" ");if(t.s(t.f("object_song",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("listen")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" ");if(t.s(t.f("object_film",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("watch")});c.pop()}t.b(" ");if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("play")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" </span");t.b("\n"+i);t.b(' ><span onClick="RYMcataloger.onClickInitialPlay(\'played\')" class="ui_cataloger_listening_status_initial_item ui_cataloger_listening_status_initial_item_listened"> ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("Listened")});c.pop()}t.b(" ");if(t.s(t.f("object_song",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("Listened")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" ");if(t.s(t.f("object_film",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("Watched")});c.pop()}t.b(" ");if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("Played")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" </span");t.b("\n"+i);t.b(' ></div> <div class="ui_cataloger_listening_status_listened"> <span class="ui_cataloger_listening_status_plays "> ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" <b>");t.b(t.v(t.f("play_count",c,p,0)));t.b("</b> play");if(!t.s(t.d("play_count.singular",c,p,1),c,p,1)){t.b("s")}t.b("\n"+i);t.b(' <div class="ui_cataloger_listening_status_plays_last">Most recently: <date class="timeago longform" title="');t.b(t.v(t.f("ts_last_played",c,p,0)));t.b('">');t.b(t.v(t.f("ts_last_played",c,p,0)));t.b("</date></div> ")});c.pop()}t.b("\n"+i);if(!t.s(t.f("play_count",c,p,1),c,p,1)){t.b(" <b>You've ");t.b("\n"+i);t.b(" ");if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("listened to this release")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" ");if(t.s(t.f("object_song",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("listened to this song")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" ");if(t.s(t.f("object_film",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("watched this film")});c.pop()}t.b("\n"+i);t.b(" ");if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("played this game")});c.pop()}t.b(" ");t.b("\n"+i);t.b(' </b> <div class="ui_cataloger_listening_status_plays_last">No tracked plays</date></div> ')}t.b("\n"+i);t.b(" </span");t.b("\n"+i);t.b(' ><span onClick="RYMcataloger.onClickResetPlays()" class="ui_cataloger_listening_status_item "> <a class="btn flat_btn small">Reset</a> </span');t.b("\n"+i);t.b(' ><span onClick="RYMcataloger.onClickEditPlays()" class="ui_cataloger_listening_status_item "> <a class="btn flat_btn small">Edit...</a> </span');t.b("\n"+i);t.b(' ><span onClick="RYMcataloger.onClickAddPlay()" class=" ui_cataloger_listening_status_item "> <a class="btn flat_btn small"><i class="fa fa-plus"></i> Add ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("Listen")});c.pop()}t.b(" ");if(t.s(t.f("object_song",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("Listen")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" ");if(t.s(t.f("object_film",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("Play")});c.pop()}t.b(" ");if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("Play")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" </a> </span");t.b("\n"+i);t.b(' > <div class="clearfix"></div> </div> <div class="ui_cataloger_dialog_help cl-333" > ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){});c.pop()}t.b(" ");t.b("\n"+i);if(t.s(t.f("object_song",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){});c.pop()}if(t.s(t.f("object_film",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' If you want to log multiple views of this film, you can come back and press the "Add play" button.');t.b("\n"+i)});c.pop()}if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' If you want to log additional plays, you can come back and press "add play" again. ');t.b("\n"+i)});c.pop()}t.b(' </div> </div> <div class="ui_cataloger_dialog_section ui_cataloger_dialog_section_rating object_');t.b(t.v(t.f("object",c,p,0)));t.b('"> <div class="ui_cataloger_dialog_rating_top"> <div class="ui_cataloger_dialog_rating_item item_zero" style="float:right;" onClick="RYMcataloger.onClickRating(null, null);" > <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w24 r0"><i></i></span> <span class="ui_cataloger_dialog_rating_item_zero_text">Clear rating</span> <div class="clearfix"></div> </div> <div class="ui_cataloger_dialog_rating_item item_zero has_tip" data-tiptip="Bump the date cataloged to today\'s date" style="float:right;" onClick="RYMcataloger.onClickBump(');t.b(t.v(t.f("catalog_id",c,p,0)));t.b(');" > <div class="ui_cataloger_rating_bump"> <i class="fa fa-refresh"></i> Bump ');t.b("\n"+i);t.b(' </div> </div> <div class="ui_cataloger_dialog_header">Rating');t.b("\n"+i);t.b('<p id="ui_cataloger_catalog_date" class="ui_cataloger_catalog_date">');if(t.s(t.f("ts",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<date class="timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b("</date>")});c.pop()}t.b(" ");if(!t.s(t.f("ts",c,p,1),c,p,1)){t.b("Never cataloged")}t.b('</p> </div> <div class="clearfix"></div> </div> <div class="ui_cataloger_dialog_rating_sections"> <div class="ui_cataloger_dialog_half_section"> <div class="ui_cataloger_dialog_rating_item"> <div class="ui_cataloger_dialog_rating_base" id="ui_cataloger_dialog_rating_base_r1" onClick="RYMcataloger.onClickRating(1, null);"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r1"><i></i></span> <span class="ui_cataloger_dialog_base_rating_text">0.5</span> <div class="ui_cataloger_dialog_half_clearfix"></div> </div> ');if(t.s(t.d("rating_system.r_1",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_cataloger_dialog_rating_custom ui_cataloger_dialog_rating_custom_r1" id="ui_cataloger_dialog_rating_custom_r1_');t.b(t.v(t.f("index",c,p,0)));t.b('" onClick="RYMcataloger.onClickRating(1, ');t.b(t.v(t.f("index",c,p,0)));t.b(');"> <div class="ui_cataloger_dialog_rating_subitem"> ');t.b(t.v(t.f("label",c,p,0)));t.b("\n"+i);t.b(" </div> </div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="ui_cataloger_dialog_rating_item"> <div class="ui_cataloger_dialog_rating_base" id="ui_cataloger_dialog_rating_base_r2" onClick="RYMcataloger.onClickRating(2, null);"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r2"><i></i></span> <span class="ui_cataloger_dialog_base_rating_text">1.0</span> <div class="ui_cataloger_dialog_half_clearfix"></div> </div> ');if(t.s(t.d("rating_system.r_2",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_cataloger_dialog_rating_custom ui_cataloger_dialog_rating_custom_r2" id="ui_cataloger_dialog_rating_custom_r2_');t.b(t.v(t.f("index",c,p,0)));t.b('" onClick="RYMcataloger.onClickRating(2, ');t.b(t.v(t.f("index",c,p,0)));t.b(');"> <div class="ui_cataloger_dialog_rating_subitem"> ');t.b(t.v(t.f("label",c,p,0)));t.b("\n"+i);t.b(" </div> </div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="ui_cataloger_dialog_rating_item"> <div class="ui_cataloger_dialog_rating_base" id="ui_cataloger_dialog_rating_base_r3" onClick="RYMcataloger.onClickRating(3, null);"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r3"><i></i></span> <span class="ui_cataloger_dialog_base_rating_text">1.5</span> <div class="ui_cataloger_dialog_half_clearfix"></div> </div> ');if(t.s(t.d("rating_system.r_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_cataloger_dialog_rating_custom ui_cataloger_dialog_rating_custom_r3" id="ui_cataloger_dialog_rating_custom_r3_');t.b(t.v(t.f("index",c,p,0)));t.b('" onClick="RYMcataloger.onClickRating(3, ');t.b(t.v(t.f("index",c,p,0)));t.b(');"> <div class="ui_cataloger_dialog_rating_subitem"> ');t.b(t.v(t.f("label",c,p,0)));t.b("\n"+i);t.b(" </div> </div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="ui_cataloger_dialog_rating_item"> <div class="ui_cataloger_dialog_rating_base" id="ui_cataloger_dialog_rating_base_r4" onClick="RYMcataloger.onClickRating(4, null);"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r4"><i></i></span> <span class="ui_cataloger_dialog_base_rating_text">2.0</span> <div class="ui_cataloger_dialog_half_clearfix"></div> </div> ');if(t.s(t.d("rating_system.r_4",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_cataloger_dialog_rating_custom ui_cataloger_dialog_rating_custom_r4" id="ui_cataloger_dialog_rating_custom_r4_');t.b(t.v(t.f("index",c,p,0)));t.b('" onClick="RYMcataloger.onClickRating(4, ');t.b(t.v(t.f("index",c,p,0)));t.b(');"> <div class="ui_cataloger_dialog_rating_subitem"> ');t.b(t.v(t.f("label",c,p,0)));t.b("\n"+i);t.b(" </div> </div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="ui_cataloger_dialog_rating_item"> <div class="ui_cataloger_dialog_rating_base" id="ui_cataloger_dialog_rating_base_r5" onClick="RYMcataloger.onClickRating(5, null);"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r5"><i></i></span> <span class="ui_cataloger_dialog_base_rating_text">2.5</span> <div class="ui_cataloger_dialog_half_clearfix"></div> </div> ');if(t.s(t.d("rating_system.r_5",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_cataloger_dialog_rating_custom ui_cataloger_dialog_rating_custom_r5" id="ui_cataloger_dialog_rating_custom_r5_');t.b(t.v(t.f("index",c,p,0)));t.b('" onClick="RYMcataloger.onClickRating(5, ');t.b(t.v(t.f("index",c,p,0)));t.b(');"> <div class="ui_cataloger_dialog_rating_subitem"> ');t.b(t.v(t.f("label",c,p,0)));t.b("\n"+i);t.b(" </div> </div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="ui_cataloger_dialog_half_clearfix"></div> </div> <div class="ui_cataloger_dialog_half_section"> <div class="ui_cataloger_dialog_rating_item"> <div class="ui_cataloger_dialog_rating_base " id="ui_cataloger_dialog_rating_base_r6" onClick="RYMcataloger.onClickRating(6, null);"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r6"><i></i></span> <span class="ui_cataloger_dialog_base_rating_text">3.0</span> <div class="ui_cataloger_dialog_half_clearfix"></div> </div> ');if(t.s(t.d("rating_system.r_6",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_cataloger_dialog_rating_custom ui_cataloger_dialog_rating_custom_r6" id="ui_cataloger_dialog_rating_custom_r6_');t.b(t.v(t.f("index",c,p,0)));t.b('" onClick="RYMcataloger.onClickRating(6, ');t.b(t.v(t.f("index",c,p,0)));t.b(');"> <div class="ui_cataloger_dialog_rating_subitem"> ');t.b(t.v(t.f("label",c,p,0)));t.b("\n"+i);t.b(" </div> </div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="ui_cataloger_dialog_rating_item"> <div class="ui_cataloger_dialog_rating_base" id="ui_cataloger_dialog_rating_base_r7" onClick="RYMcataloger.onClickRating(7, null);"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r7"><i></i></span> <span class="ui_cataloger_dialog_base_rating_text">3.5</span> <div class="ui_cataloger_dialog_half_clearfix"></div> </div> ');if(t.s(t.d("rating_system.r_7",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_cataloger_dialog_rating_custom ui_cataloger_dialog_rating_custom_r7" id="ui_cataloger_dialog_rating_custom_r7_');t.b(t.v(t.f("index",c,p,0)));t.b('" onClick="RYMcataloger.onClickRating(7, ');t.b(t.v(t.f("index",c,p,0)));t.b(');"> <div class="ui_cataloger_dialog_rating_subitem"> ');t.b(t.v(t.f("label",c,p,0)));t.b("\n"+i);t.b(" </div> </div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="ui_cataloger_dialog_rating_item"> <div class="ui_cataloger_dialog_rating_base" id="ui_cataloger_dialog_rating_base_r8" onClick="RYMcataloger.onClickRating(8, null);"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r8"><i></i></span> <span class="ui_cataloger_dialog_base_rating_text">4.0</span> <div class="ui_cataloger_dialog_half_clearfix"></div> </div> ');if(t.s(t.d("rating_system.r_8",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_cataloger_dialog_rating_custom ui_cataloger_dialog_rating_custom_r8" id="ui_cataloger_dialog_rating_custom_r8_');t.b(t.v(t.f("index",c,p,0)));t.b('" onClick="RYMcataloger.onClickRating(8, ');t.b(t.v(t.f("index",c,p,0)));t.b(');"> <div class="ui_cataloger_dialog_rating_subitem"> ');t.b(t.v(t.f("label",c,p,0)));t.b("\n"+i);t.b(" </div> </div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="ui_cataloger_dialog_rating_item"> <div class="ui_cataloger_dialog_rating_base" id="ui_cataloger_dialog_rating_base_r9" onClick="RYMcataloger.onClickRating(9, null);"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r9"><i></i></span> <span class="ui_cataloger_dialog_base_rating_text">4.5</span> <div class="ui_cataloger_dialog_half_clearfix"></div> </div> ');if(t.s(t.d("rating_system.r_9",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_cataloger_dialog_rating_custom ui_cataloger_dialog_rating_custom_r9" id="ui_cataloger_dialog_rating_custom_r9_');t.b(t.v(t.f("index",c,p,0)));t.b('" onClick="RYMcataloger.onClickRating(9, ');t.b(t.v(t.f("index",c,p,0)));t.b(');"> <div class="ui_cataloger_dialog_rating_subitem"> ');t.b(t.v(t.f("label",c,p,0)));t.b("\n"+i);t.b(" </div> </div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="ui_cataloger_dialog_rating_item"> <div class="ui_cataloger_dialog_rating_base" id="ui_cataloger_dialog_rating_base_r10" onClick="RYMcataloger.onClickRating(10, null);"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r10"><i></i></span> <span class="ui_cataloger_dialog_base_rating_text">5.0</span> <div class="ui_cataloger_dialog_half_clearfix"></div> </div> ');if(t.s(t.d("rating_system.r_10",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_cataloger_dialog_rating_custom ui_cataloger_dialog_rating_custom_r10" id="ui_cataloger_dialog_rating_custom_r10_');t.b(t.v(t.f("index",c,p,0)));t.b('" onClick="RYMcataloger.onClickRating(10, ');t.b(t.v(t.f("index",c,p,0)));t.b(');"> <div class="ui_cataloger_dialog_rating_subitem"> ');t.b(t.v(t.f("label",c,p,0)));t.b("\n"+i);t.b(" </div> </div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="ui_cataloger_dialog_half_clearfix"></div> </div> <div class="clearfix"></div> </div> <div class="clearfix"></div> </div> <div class="ui_cataloger_dialog_section ui_cataloger_dialog_section_tags"> <div class="ui_cataloger_dialog_header">Tags</div> ');if(t.s(t.f("tags_ui",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b('<div id="ui_picker_frame_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_picker_frame"> <input type="hidden" ');t.b("\n"+i);t.b(' id="');t.b(t.v(t.f("id",c,p,0)));t.b('" ');t.b("\n"+i);t.b(' name="');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' class="ui_picker"');t.b("\n"+i);t.b(' data-initialized="false"');t.b("\n"+i);t.b(' data-picker-type="');t.b(t.v(t.f("picker_type",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-onchange="');t.b(t.v(t.f("onchange",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-object="');t.b(t.v(t.f("object",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-assoc-id="');t.b(t.v(t.f("assoc_id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-sec-id="');t.b(t.v(t.f("sec_id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-status="not_loaded"');t.b("\n"+i);t.b(' data-callback="');t.b(t.v(t.f("callback",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-save-action="');t.b(t.v(t.f("save_action",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-selection-mode="');t.b(t.v(t.f("selection_mode",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-show-all-results="');t.b(t.v(t.f("show_all_results",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-value-mode="');t.b(t.v(t.f("value_mode",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-allow-freeform="');t.b(t.v(t.f("allow_freeform",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-bracketed-aka="');t.b(t.v(t.f("bracketed_aka",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-filter-by-id="');t.b(t.v(t.f("filter_by_id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' value="');t.b(t.v(t.f("value",c,p,0)));t.b('"');t.b("\n"+i);t.b(' /> <div id="ui_picker_items_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_picker_items"> </div> <div id="ui_picker_input_frame_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_picker_input_frame"> <input id="ui_picker_input_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_picker_input" autocomplete="off" /> <div id="ui_picker_input_clear_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_picker_input_clear" onClick="RYMpicker.clear($(\'#');t.b(t.v(t.f("id",c,p,0)));t.b('\'));"><i class="fa fa-times-circle"></i></div> </div> <div style="position:relative;width:100%"> <div class="ui_picker_list" id="ui_picker_list_');t.b(t.v(t.f("id",c,p,0)));t.b('"> </div> </div>');t.b("\n"+i);t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div id="ui_cataloger_dialog_section_notes" class="ui_cataloger_dialog_section ui_cataloger_dialog_section_notes"> <div class="ui_cataloger_dialog_header"> <div class="ui_cataloger_notes_save btn flat_btn btn_small" onClick="RYMcataloger.onSaveNotes()"> <span class="ui_cataloger_notes_save_text_save">Save notes</span> </div> <span class="ui_cataloger_notes_save_text_saved">Saved!</span> <span class="ui_cataloger_notes_header_inner">Private notes</span> <div class="clearfix"></div> </div> <textarea id="ui_cataloger_notes" style="width:100%;height:4em;" onKeyUp="RYMcataloger.onNotesChanged();">');t.b(t.v(t.f("personal_notes",c,p,0)));t.b('</textarea> <p class="ui_cataloger_notes_tip">Click "save notes" when you are finished</p> </div>');t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.cataloger.format":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div id="ui_cataloger_format" class="ui_cataloger_format"> <div class="ui_cataloger_format_disclaimer"> This feature allows you to manually override the format of your cataloged item. We recommend that you only use this feature to indicate that you own digital copies of physical releases. Otherwise, it\'s best to simply change the issue to the one that matches your actual copy.');t.b("\n"+i);t.b(' </div> <div class="ui_cataloger_format_category"> <div class="ui_cataloger_format_header">No custom format</div> <div class="ui_cataloger_format_formats"> <a onClick="RYMcataloger.onClickCustomFormat(0);" class="btn flat_btn small_btn">Use format from cataloged issue (recommended)</a> </div>');t.b("\n"+i);t.b("</div> ");if(t.s(t.f("categories",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_cataloger_format_category"> <div class="ui_cataloger_format_header">');t.b(t.v(t.f("category",c,p,0)));t.b('</div> <div class="ui_cataloger_format_formats"> ');if(t.s(t.f("items",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <a onClick="RYMcataloger.onClickCustomFormat(');t.b(t.v(t.f("format_id",c,p,0)));t.b(');" class="btn flat_btn small_btn">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</a> ")});c.pop()}t.b("\n"+i);t.b(" </div> </div> ")});c.pop()}t.b("\n"+i);t.b(' <div onClick="RYMcataloger.onClickCancelCustomFormat();" class="ui_cataloger_format_cancel">Cancel format override</div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.cataloger.issue_selector.item":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="ui_cataloger_issue_selector_item ');if(t.s(t.f("current_in_list",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("selected")});c.pop()}t.b(" ");if(t.s(t.f("disabled",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("disabled")});c.pop()}t.b('"> <div class="ui_cataloger_issue_item_overlay has_tip" data-tiptip="You cannot switch this catalog entry to this issue because you\'ve already cataloged it separately."></div> ');if(t.s(t.d("gallery_data.placements.main_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_cataloger_issue_selector_img has_tip" data-tiptip="<img src=\'https:');t.b(t.v(t.f("url_300",c,p,0)));t.b("' />\" style=\"background-image:url('https:");t.b(t.v(t.f("url_150",c,p,0)));t.b("'); \"> </div> ")});c.pop()}t.b("\n"+i);if(!t.s(t.d("gallery_data.placements.main_image",c,p,1),c,p,1)){t.b(' <div class="ui_cataloger_issue_selector_img"></div> ')}t.b("\n"+i);t.b(" ");t.b("\n"+i);if(t.s(t.f("selected_item_ui",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="ui_cataloger_issue_selector_rest" onClick="RYMcataloger.onClickToggleIssue()"> ')});c.pop()}t.b("\n"+i);if(!t.s(t.f("selected_item_ui",c,p,1),c,p,1)){if(t.s(t.f("current_in_list",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="ui_cataloger_issue_selector_rest" onClick="RYMcataloger.onClickToggleIssue()"> ')});c.pop()}t.b("\n"+i);if(!t.s(t.f("current_in_list",c,p,1),c,p,1)){t.b(' <div class="ui_cataloger_issue_selector_rest" onClick="RYMcataloger.onClickIssueSelectorItem(');t.b(t.v(t.f("issue_id",c,p,0)));t.b(')"> ')}t.b("\n"+i)}if(t.s(t.f("selected_item_ui",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="ui_release_issue_change"><i class="fa fa-caret-down"></i></div> ')});c.pop()}t.b("\n"+i);t.b(' <div class="ui_release_issue_main_info"> <div class="ui_release_issue_main_info_top"> <div class="ui_release_issue_title" title="[Release');t.b(t.v(t.f("issue_id",c,p,0)));t.b(']"> ');if(t.s(t.f("link",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" <span ");if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="object_loc_original_text"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}t.b("</span> ")});c.pop()}t.b(" ");t.b("\n"+i);if(!t.s(t.f("link",c,p,1),c,p,1)){t.b(' <span class="');t.b(t.v(t.f("object",c,p,0)));t.b('">');t.b(t.v(t.f("title_display",c,p,0)));t.b(" ");if(t.s(t.f("edition_name_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="subtext">');t.b(t.v(t.f("edition_name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("</span> ")}t.b("\n"+i);t.b(" </div> </div> ");if(t.s(t.d("attributes.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_release_issue_main_info_middle"> <div class="ui_release_issue_attributes"> ');if(t.s(t.f("attributes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated">');t.b(t.v(t.d(".",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </div> </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="ui_release_issue_main_info_bottom"> <div class="ui_release_main_info_year"> ');t.b(t.v(t.f("release_year_display",c,p,0)));t.b("\n"+i);t.b(" </div> ");if(t.s(t.d("formats.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_release_main_info_formats"> ');if(t.s(t.f("formats",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="collection_format bg-ddd cl-777">');t.b(t.v(t.d(".",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);if(t.s(t.d("countries.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="ui_release_main_info_countries"> ');if(t.s(t.f("countries",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated">');t.b(t.v(t.d(".",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="ui_release_label_info"> ');if(t.s(t.f("labels",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated"> ');if(t.s(t.f("name_short_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("<b>");t.b(t.v(t.f("name_short_display",c,p,0)));t.b("</b>");if(t.s(t.d("catalog_nos.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(":")});c.pop()}t.b(" ")});c.pop()}if(t.s(t.f("catalog_nos",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_catalog_no">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("identifier_text",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="ui_release_label_identifier_text"> ');t.b(t.v(t.f("identifier_text",c,p,0)));t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);t.b(' </div> </div> </div> </div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.chart.ratingdist":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="ui_chart_ratingdist object_');t.b(t.v(t.f("object",c,p,0)));t.b(" ");if(t.s(t.f("has_rating_labels",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" has_rating_labels ")});c.pop()}t.b('"> <div class="ui_dist_icons"> <a href="/collection/');t.b(t.v(t.f("username",c,p,0)));t.b("/");t.b(t.v(t.f("object",c,p,0)));t.b('/ratings,f.r.i:10/" class="ui_dist_icon"><span class="scale w24 scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" ");t.b(t.v(t.f("site",c,p,0)));t.b(' r10"><i></i></span></a> <a href="/collection/');t.b(t.v(t.f("username",c,p,0)));t.b("/");t.b(t.v(t.f("object",c,p,0)));t.b('/ratings,f.r.i:9/" class="ui_dist_icon"><span class="scale w24 scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" ");t.b(t.v(t.f("site",c,p,0)));t.b(' r9"><i></i></span></a> <a href="/collection/');t.b(t.v(t.f("username",c,p,0)));t.b("/");t.b(t.v(t.f("object",c,p,0)));t.b('/ratings,f.r.i:8/" class="ui_dist_icon"><span class="scale w24 scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" ");t.b(t.v(t.f("site",c,p,0)));t.b(' r8"><i></i></span></a> <a href="/collection/');t.b(t.v(t.f("username",c,p,0)));t.b("/");t.b(t.v(t.f("object",c,p,0)));t.b('/ratings,f.r.i:7/" class="ui_dist_icon"><span class="scale w24 scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" ");t.b(t.v(t.f("site",c,p,0)));t.b(' r7"><i></i></span></a> <a href="/collection/');t.b(t.v(t.f("username",c,p,0)));t.b("/");t.b(t.v(t.f("object",c,p,0)));t.b('/ratings,f.r.i:6/" class="ui_dist_icon"><span class="scale w24 scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" ");t.b(t.v(t.f("site",c,p,0)));t.b(' r6"><i></i></span></a> <a href="/collection/');t.b(t.v(t.f("username",c,p,0)));t.b("/");t.b(t.v(t.f("object",c,p,0)));t.b('/ratings,f.r.i:5/" class="ui_dist_icon"><span class="scale w24 scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" ");t.b(t.v(t.f("site",c,p,0)));t.b(' r5"><i></i></span></a> <a href="/collection/');t.b(t.v(t.f("username",c,p,0)));t.b("/");t.b(t.v(t.f("object",c,p,0)));t.b('/ratings,f.r.i:4/" class="ui_dist_icon"><span class="scale w24 scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" ");t.b(t.v(t.f("site",c,p,0)));t.b(' r4"><i></i></span></a> <a href="/collection/');t.b(t.v(t.f("username",c,p,0)));t.b("/");t.b(t.v(t.f("object",c,p,0)));t.b('/ratings,f.r.i:3/" class="ui_dist_icon"><span class="scale w24 scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" ");t.b(t.v(t.f("site",c,p,0)));t.b(' r3"><i></i></span></a> <a href="/collection/');t.b(t.v(t.f("username",c,p,0)));t.b("/");t.b(t.v(t.f("object",c,p,0)));t.b('/ratings,f.r.i:2/" class="ui_dist_icon"><span class="scale w24 scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" ");t.b(t.v(t.f("site",c,p,0)));t.b(' r2"><i></i></span></a> <a href="/collection/');t.b(t.v(t.f("username",c,p,0)));t.b("/");t.b(t.v(t.f("object",c,p,0)));t.b('/ratings,f.r.i:1/" class="ui_dist_icon"><span class="scale w24 scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" ");t.b(t.v(t.f("site",c,p,0)));t.b(' r1"><i></i></span></a> </div> <div class="ui_dist_rating_lines"> ');if(t.s(t.f("items",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_chart_ratingdist_line"> <div class="ui_chart_ratingdist_ratings"> ');if(t.s(t.f("label_items",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);if(t.s(t.f("rating_label_index",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <a href="/collection/');t.b(t.v(t.f("username",c,p,0)));t.b("/");t.b(t.v(t.f("object",c,p,0)));t.b("/ratings,f.rs.i:");t.b(t.v(t.f("custom_rating_index",c,p,0)));t.b('/" class="ui_chart_ratingdist_rating r');t.b(t.v(t.f("rating_label_index",c,p,0)));t.b(' has_tip" data-tiptip="');t.b(t.v(t.f("rating_label",c,p,0)));t.b(" [");t.b(t.v(t.f("count",c,p,0)));t.b(']" style="width:');t.b(t.v(t.f("pct",c,p,0)));t.b('%"></a> ')});c.pop()}t.b("\n"+i);if(!t.s(t.f("rating_label_index",c,p,1),c,p,1)){t.b(' <a href="/collection/');t.b(t.v(t.f("username",c,p,0)));t.b("/");t.b(t.v(t.f("object",c,p,0)));t.b("/ratings,f.r.i:");t.b(t.v(t.f("rating",c,p,0)));t.b('/" class="ui_chart_ratingdist_rating r');t.b(t.v(t.f("rating_label_index",c,p,0)));t.b(' has_tip" data-tiptip="');t.b(t.v(t.f("rating_label",c,p,0)));t.b(" [");t.b(t.v(t.f("count",c,p,0)));t.b(']" style="width:');t.b(t.v(t.f("pct",c,p,0)));t.b('%"></a> ')}t.b("\n"+i)});c.pop()}t.b(' </div> <div class="clearfix"></div> ');if(t.s(t.f("rating_label_desc",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_chart_ratingdist_label cl-555"> ');t.b(t.v(t.f("rating_label_desc",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="clearfix"></div> ')});c.pop()}t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="ui_chart_ratingdist_count">');t.b(t.v(t.d("max_row.comma",c,p,0)));t.b('</div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.collective_voting.item":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="collective_voting_vote ');if(t.s(t.f("voted_yes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("header_yes")});c.pop()}if(!t.s(t.f("voted_yes",c,p,1),c,p,1)){t.b("header_no")}t.b('" id="collective_voting_vote_');t.b(t.v(t.f("object_type",c,p,0)));t.b("_");t.b(t.v(t.f("object_assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("vote_type",c,p,0)));t.b("_");t.b(t.v(t.f("vote_assoc_id",c,p,0)));t.b('"> <div class="collective_voting_vote_header"> <div class="collective_vote_expand" onClick="$(\'#collective_voting_voters_');t.b(t.v(t.f("object_type",c,p,0)));t.b("_");t.b(t.v(t.f("object_assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("vote_type",c,p,0)));t.b("_");t.b(t.v(t.f("vote_assoc_id",c,p,0)));t.b('\').slideToggle(50)"><i class="fa fa-caret-down"></i></div> <div class="collective_voting_action_bar"> <div class="collective_vote_action collective_vote_agree ');if(t.s(t.f("user_voted_yes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("voted_yes")});c.pop()}t.b('" title="Vote up" ');t.b("\n"+i);if(t.s(t.f("user_voted_yes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" onClick=\"RYMcollectiveVoting.onClickUnvote('");t.b(t.v(t.f("object_type",c,p,0)));t.b("', ");t.b(t.v(t.f("object_assoc_id",c,p,0)));t.b(", '");t.b(t.v(t.f("vote_type",c,p,0)));t.b("', ");t.b(t.v(t.f("vote_assoc_id",c,p,0)));t.b(');"');t.b("\n"+i)});c.pop()}if(!t.s(t.f("user_voted_yes",c,p,1),c,p,1)){t.b(" onClick=\"RYMcollectiveVoting.onClickVote('");t.b(t.v(t.f("object_type",c,p,0)));t.b("', ");t.b(t.v(t.f("object_assoc_id",c,p,0)));t.b(", '");t.b(t.v(t.f("vote_type",c,p,0)));t.b("', ");t.b(t.v(t.f("vote_assoc_id",c,p,0)));t.b(', 1);"');t.b("\n"+i)}t.b(' ><i class="fa fa-plus-square"></i></div> <div class="collective_vote_action collective_vote_disagree ');if(t.s(t.f("user_voted_no",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("voted_no")});c.pop()}t.b('" title="Vote down"');t.b("\n"+i);if(t.s(t.f("user_voted_no",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" onClick=\"RYMcollectiveVoting.onClickUnvote('");t.b(t.v(t.f("object_type",c,p,0)));t.b("', ");t.b(t.v(t.f("object_assoc_id",c,p,0)));t.b(", '");t.b(t.v(t.f("vote_type",c,p,0)));t.b("', ");t.b(t.v(t.f("vote_assoc_id",c,p,0)));t.b(');"');t.b("\n"+i)});c.pop()}if(!t.s(t.f("user_voted_no",c,p,1),c,p,1)){t.b(" onClick=\"RYMcollectiveVoting.onClickVote('");t.b(t.v(t.f("object_type",c,p,0)));t.b("', ");t.b(t.v(t.f("object_assoc_id",c,p,0)));t.b(", '");t.b(t.v(t.f("vote_type",c,p,0)));t.b("', ");t.b(t.v(t.f("vote_assoc_id",c,p,0)));t.b(', -1);"');t.b("\n"+i)}t.b(' ><i class="fa fa-minus-square"></i></div> <div class="collective_vote_action collective_vote_report" title="Report abuse"><i class="fa fa-warning"');t.b("\n"+i);t.b(" onClick=\"RYMcollectiveVoting.onClickReport('");t.b(t.v(t.f("object_type",c,p,0)));t.b("', ");t.b(t.v(t.f("object_assoc_id",c,p,0)));t.b(", '");t.b(t.v(t.f("vote_type",c,p,0)));t.b("', ");t.b(t.v(t.f("vote_assoc_id",c,p,0)));t.b(');"></i></div> </div> <div class="collective_voting_vote_header_name"> <div class="collective_voting_vote_assoc_name"> ');if(t.s(t.f("voted_yes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<i class="fa fa-check-circle"></i>')});c.pop()}t.b("\n"+i);t.b(" ");if(!t.s(t.f("voted_yes",c,p,1),c,p,1)){t.b('<i class="fa fa-check-circle" style="visibility:hidden"></i>')}t.b("\n"+i);t.b(" ");if(t.s(t.f("vote_assoc_name",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(t.t(t.f("vote_assoc_name",c,p,0)))});c.pop()}t.b(" ");t.b("\n"+i);t.b(' <div class="collective_voting_collective_item_score"> <span class="collective_voting_collective_item_score_plus" id="collective_voting_vote_');t.b(t.v(t.f("object_type",c,p,0)));t.b("_");t.b(t.v(t.f("object_assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("vote_type",c,p,0)));t.b("_");t.b(t.v(t.f("vote_assoc_id",c,p,0)));t.b('_score_yes">');if(t.s(t.f("count_yes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("+");t.b(t.v(t.f("count_yes",c,p,0)))});c.pop()}t.b("</span>");if(t.s(t.f("count_yes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.f("count_no",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("/")});c.pop()}});c.pop()}t.b("<span ");t.b("\n"+i);t.b(' id="collective_voting_vote_');t.b(t.v(t.f("object_type",c,p,0)));t.b("_");t.b(t.v(t.f("object_assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("vote_type",c,p,0)));t.b("_");t.b(t.v(t.f("vote_assoc_id",c,p,0)));t.b('_score_no" class="collective_voting_collective_item_score_minus">');if(t.s(t.f("count_no",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("-");t.b(t.v(t.f("count_no",c,p,0)))});c.pop()}t.b('</span> </div></div>  </div> </div> <div class="collective_voting_voters" id="collective_voting_voters_');t.b(t.v(t.f("object_type",c,p,0)));t.b("_");t.b(t.v(t.f("object_assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("vote_type",c,p,0)));t.b("_");t.b(t.v(t.f("vote_assoc_id",c,p,0)));t.b('" > <div class="collective_voting_voters_yes"> <div class="collective_voting_voters_header">Voted yes</div> <ul class="collective_voting_voters_list"> ');if(t.s(t.f("yes_voters",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");t.b("\n"+i);t.b(' <li class="has_tip" data-tiptip="');t.b(t.v(t.f("ts",c,p,0)));t.b('"><a class="user">');t.b(t.v(t.f("username",c,p,0)));t.b("</a></li> ")});c.pop()}t.b("\n"+i);t.b(' </ul> </div> <div class="collective_voting_voters_no"> <div class="collective_voting_voters_header">Voted no</div> <ul class="collective_voting_voters_list"> ');if(t.s(t.f("no_voters",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");t.b("\n"+i);t.b(' <li class="has_tip" data-tiptip="');t.b(t.v(t.f("ts",c,p,0)));t.b('"><a class="user">');t.b(t.v(t.f("username",c,p,0)));t.b("</a></li> ")});c.pop()}t.b("\n"+i);t.b(" </ul> </div> </div>");t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.com_content.voting":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div id="content_voting_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" ');t.b("\n"+i);t.b(' class="content_voting"');t.b("\n"+i);t.b(' data-content-type="');t.b(t.v(t.f("content_type",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-content-promoted="');t.b(t.v(t.f("content_promoted",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-content-level="');t.b(t.v(t.f("content_level",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-content-reasons="');t.b(t.v(t.f("content_reasons",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-user-polarity="');t.b(t.v(t.f("user_polarity",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-user-reasons="');t.b(t.v(t.f("user_reasons",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-user-promoted="');t.b(t.v(t.f("user_promoted",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-user-bookmarked="');t.b(t.v(t.f("user_bookmarked",c,p,0)));t.b('"');t.b("\n"+i);t.b(' ><span id="content_voting_score_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="content_voting_score"></span');t.b("\n"+i);t.b(' ><span id="content_vote_down_btn_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" data-tiptip="Flag this content" class=" has_tip content_voting_btn" onClick="content_vote_');t.b(t.v(t.f("content_id",c,p,0)));t.b('.openVoteDown(this,event)"> <i class="fa fa-warning"></i> </span');t.b("\n"+i);t.b(' ><span id="content_vote_up_btn_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" data-tiptip="Nominate this content to be featured" class="has_tip content_voting_btn" onClick="content_vote_');t.b(t.v(t.f("content_id",c,p,0)));t.b('.onClickVoteUp(this,event)"> <i class="fa fa-certificate"></i> </span');t.b("\n"+i);t.b(' ><span id="content_bookmark_btn_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" data-tiptip="Bookmark this content" class="has_tip content_voting_btn" onClick="content_vote_');t.b(t.v(t.f("content_id",c,p,0)));t.b('.onClickBookmark(this,event)"> <i class="fa fa-bookmark"></i> </span>');t.b("\n"+i);t.b("</div>");t.b("\n"+i);t.b("<script> rymInitPush ( function() { content_vote_");t.b(t.v(t.f("content_id",c,p,0)));t.b(" = new RYMcontentVote(");t.b(t.v(t.f("content_id",c,p,0)));t.b(");});");t.b("\n"+i);t.b("<\/script>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.content.feature":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div id="voting_feature_dlg_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="voting_dlg"> <div id="voting_feature_explanation" class="voting_feature_explanation"> You are nominating this content to be featured on the site. ');t.b("\n"+i);t.b(" Featured content <b>must</b> adhere to all of the following: ");t.b("\n"+i);t.b(' <ul> <li>Fully compliant with the <a href="">Community rules</a></li> <li>Properly formatted with few spelling/grammatical errors</li> <li>Able to stand the test of time; doesn\'t refer to things that change constantly (like chart position/average rating)</li> <li>Does not contain "low-effort" attempts at humor (cheap jokes, memes, tropes, quotes, one-liners, etc)</li> <li>Not a rant, tirade or otherwise mostly negative piece of writing</li> <li>Is on-topic and appropriate to the purpose of the section where it\'s posted</li> <li>Is useful to all visitors, including non-members (no in-jokes, content centered around a small group, etc)</li> </ul> </div> <div class="voting_dlg_privacy"> <b>Note:</b> Feature nominations and bookmarked items are publicly visible; flags are private. More info <a href="">here</a> </div> <div onClick="content_vote_');t.b(t.v(t.f("content_id",c,p,0)));t.b('.dismissAndSave();" class="voting_dlg_close"> Submit');t.b("\n"+i);t.b(" </div>");t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.content.voting":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div id="voting_down_dlg_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="voting_dlg"> <div id="voting_down_subcategories" class="voting_dlg_expanded"> <div class="voting_dlg_sub_why"> Why?');t.b("\n"+i);t.b(' </div> <div class="voting_dlg_sub_category" onClick="$(\'#voting_dlg_community_rules_expanded\').slideToggle(100)"> <i class="fa fa-warning"></i> Breaks community rules');t.b("\n"+i);t.b(' </div> <div id="voting_dlg_community_rules_expanded" class="voting_dlg_sub_expanded"> <div class="voting_dlg_sub_sub_why"> Which rule or rules?');t.b("\n"+i);t.b(" </div> ");if(t.s(t.f("community",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");t.b("\n"+i);if(t.s(t.f("visible",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div onClick="content_vote_');t.b(t.v(t.f("content_id",c,p,0)));t.b(".onClickVoteDownReason(event, '");t.b(t.v(t.f("id",c,p,0)));t.b('\');" id="voting_community_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="voting_dlg_sub_sub_category ');if(t.s(t.f("selected",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("selected")});c.pop()}t.b('"> <span class="voting_reason_check_unselected"> <i class="fa fa-square-o"></i> </span> <span class="voting_reason_check_selected"> <i class="fa fa-check-square-o"></i> </span> ');t.b(t.v(t.f("label",c,p,0)));t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i)});c.pop()}t.b(" </div> ");if(t.s(t.f("show_review_publishing",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="voting_dlg_sub_category" onClick="$(\'#voting_dlg_review_rules_expanded\').slideToggle(100)"> <i class="fa fa-warning"></i> Breaks review publishing rules');t.b("\n"+i);t.b(' </div> <div id="voting_dlg_review_rules_expanded" class="voting_dlg_sub_expanded"> <div class="voting_dlg_sub_sub_why"> Which rule or rules?');t.b("\n"+i);t.b(" </div> ");if(t.s(t.f("review_guidelines",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");t.b("\n"+i);t.b(' <div onClick="content_vote_');t.b(t.v(t.f("content_id",c,p,0)));t.b(".onClickVoteDownReason(event, '");t.b(t.v(t.f("id",c,p,0)));t.b('\');" id="voting_community_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="voting_dlg_sub_sub_category ');if(t.s(t.f("selected",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("selected")});c.pop()}t.b('"> <span class="voting_reason_check_unselected"> <i class="fa fa-square-o"></i> </span> <span class="voting_reason_check_selected"> <i class="fa fa-check-square-o"></i> </span> ');t.b(t.v(t.f("label",c,p,0)));t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);t.b(' <div onClick="content_vote_');t.b(t.v(t.f("content_id",c,p,0)));t.b('.onClickVoteDownPostingError(event);" class="voting_dlg_sub_category"> <i class="fa fa-eject"></i> Double-post, empty post, wrong thread, etc.');t.b("\n"+i);t.b(' </div> </div> <div class="voting_dlg_privacy"> <b>Note:</b> Feature nominations and bookmarked items are publicly visible; flags are private. More info <a href="">here</a> </div> <div onClick="content_vote_');t.b(t.v(t.f("content_id",c,p,0)));t.b('.dismissAndSave();" class="voting_dlg_close"> Close');t.b("\n"+i);t.b(" </div>");t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.cropper":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="ui_cropper invert_0" id="ui_cropper">');t.b("\n"+i);t.b('<div class="ui_cropper_inner"> <div class="ui_cropper_toolbar_top" id="ui_cropper_toolbar_top"> <div style="float:left"> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_top_minus" onClick="RYMcropper.adjust(0,1,0,0);" >Top -</div> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_top_plus" onClick="RYMcropper.adjust(0,-1,0,0);">Top +</div> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_top_zero" onClick="RYMcropper.reset(0,1,0,0);" >Top 0</div> </div> <div style="float:right"> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_zero_all" onClick="RYMcropper.reset(1,1,1,1);">Zero all</div> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_bkg" onClick="RYMcropper.toggleInvert();" >Bkg</div> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_toggle_arrows" onClick="RYMcropper.toggleArrows();">Toggle <i class="fa fa-arrows"></i></i></div> </div> </div> <div class="ui_cropper_toolbar_top_2"> <div style="float:right"> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_right_minus" onClick="RYMcropper.adjust(0,0,1,0);" >Right -</div> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_right_plus" onClick="RYMcropper.adjust(0,0,-1,0);">Right +</div> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_right_zero" onClick="RYMcropper.reset(0,0,1,0);" >Right 0</div> </div> <div style="float:left"> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_left_minus" onClick="RYMcropper.adjust(1,0,0,0);" >Left -</div> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_left_plus" onClick="RYMcropper.adjust(-1,0,0,0);">Left +</div> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_left_zero" onClick="RYMcropper.reset(1,0,0,0);" >Left 0</div> </div> </div> <div class="ui_cropper_image_frame invert_2" id="ui_cropper_image_frame"> <div class="ui_cropper_image_inner" id="ui_cropper_image_inner"> <div class="ui_cropper_image" id="ui_cropper_image"> <div class="ui_cropper_image_adj ui_cropper_image_topleft" id="ui_cropper_image_topleft" data-dir="topleft"> <img src="https://e.snmc.io/3.0/img/ui.cropper/arrow.png" /> </div> <div class="ui_cropper_image_adj ui_cropper_image_top" id="ui_cropper_image_top" data-dir="top"> <img src="https://e.snmc.io/3.0/img/ui.cropper/arrow.png" /> </div> <div class="ui_cropper_image_adj ui_cropper_image_topright" id="ui_cropper_image_topright" data-dir="topright"> <img src="https://e.snmc.io/3.0/img/ui.cropper/arrow.png" /> </div> <div class="ui_cropper_image_adj ui_cropper_image_left" id="ui_cropper_image_left" data-dir="left"> <img src="https://e.snmc.io/3.0/img/ui.cropper/arrow.png" /> </div> <div class="ui_cropper_image_adj ui_cropper_image_center" id="ui_cropper_image_center" data-dir="center"> </div> <div class="ui_cropper_image_adj ui_cropper_image_right" id="ui_cropper_image_right" data-dir="right"> <img src="https://e.snmc.io/3.0/img/ui.cropper/arrow.png" /> </div> <div class="ui_cropper_image_adj ui_cropper_image_bottomleft" id="ui_cropper_image_bottomleft" data-dir="bottomleft"> <img src="https://e.snmc.io/3.0/img/ui.cropper/arrow.png" /> </div> <div class="ui_cropper_image_adj ui_cropper_image_bottom" id="ui_cropper_image_bottom" data-dir="bottom"> <img src="https://e.snmc.io/3.0/img/ui.cropper/arrow.png" /> </div> <div class="ui_cropper_image_adj ui_cropper_image_bottomright" id="ui_cropper_image_bottomright" data-dir="bottomright"> <img src="https://e.snmc.io/3.0/img/ui.cropper/arrow.png" /> </div> </div> </div> </div> <div class="ui_cropper_toolbar_bottom_2"> <span class="ui_cropper_size_info"> New Size: <span id="ui_cropper_image_new_size_width">767</span>x<span id="ui_cropper_image_new_size_height">767</span> (from <span id="ui_cropper_image_orig_size_width">767</span>x<span id="ui_cropper_image_orig_size_height">767</span>)');t.b("\n"+i);t.b(' </span> <div style="float:right"> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_bot_cancel" onClick="RYMcropper.close();" >Cancel</div> <div class="ui_cropper_toolbar_top_btn done" id="ui_cropper_toolbar_btn_bot_done" onClick="RYMcropper.submit();" >Crop image</div> </div> </div> <div class="ui_cropper_toolbar_bottom"> <div style="float:left"> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_bot_minus" onClick="RYMcropper.adjust(0,0,0,1);" >Bot. -</div> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_bot_plus" onClick="RYMcropper.adjust(0,0,0,-1);">Bot. +</div> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_bot_zero" onClick="RYMcropper.reset(0,0,0,1);" >Bot. 0</div> </div> <div style="float:right"> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_zoom_plus" onClick="RYMcropper.zoomIn();">Zoom +</div> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_zoom_minus" onClick="RYMcropper.zoomOut();">Zoom -</div> <div class="ui_cropper_toolbar_top_btn" id="ui_cropper_toolbar_btn_zoom_zero" onClick="RYMcropper.resetZoom();">Zoom 0</div> </div> </div>');t.b("\n"+i);t.b("</div>");t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.fragment.chooser":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div id="ui_chooser_list" ');t.b("\n"+i);t.b(' class="ui_chooser_list" ');t.b("\n"+i);t.b(' onMouseOver="RYMchooserList.onMouseOver()"');t.b("\n"+i);t.b(' onMouseOut="RYMchooserList.onMouseOut()"');t.b("\n"+i);t.b(' > <div class="ui_chooser_list_options"> <div id="ui_chooser_scope"> <a href="#">film</a> <a href="#">music</a> </div> <div id="ui_chooser_filters"> <div id="ui_chooser_filter_music"> <a id="ui_chooser_filter_music_all" href="#">');if(t.s(t.f("i18n",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui.chooser.filter.music.all::all")});c.pop()}t.b('</a> <a class="selected" id="ui_chooser_filter_music_artist" href="#">');if(t.s(t.f("i18n",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui.chooser.filter.music.artist::artist")});c.pop()}t.b('</a> <a id="ui_chooser_filter_music_release" href="#">');if(t.s(t.f("i18n",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui.chooser.filter.music.release::release")});c.pop()}t.b('</a> <a id="ui_chooser_filter_music_song" href="#">');if(t.s(t.f("i18n",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui.chooser.filter.music.song::song")});c.pop()}t.b('</a> <a id="ui_chooser_filter_music_genre" href="#">');if(t.s(t.f("i18n",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui.chooser.filter.music.genre::genre")});c.pop()}t.b('</a> </div> <div id="ui_chooser_filter_film"> <a id="ui_chooser_filter_film_all" href="#">');if(t.s(t.f("i18n",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui.chooser.filter.film.all::all")});c.pop()}t.b('</a> <a class="selected" id="ui_chooser_filter_film_person" href="#">');if(t.s(t.f("i18n",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui.chooser.filter.film.person::person")});c.pop()}t.b('</a> <a id="ui_chooser_filter_film_title" href="#">');if(t.s(t.f("i18n",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui.chooser.filter.film.title::title")});c.pop()}t.b('</a> <a id="ui_chooser_filter_film_genre" href="#">');if(t.s(t.f("i18n",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui.chooser.filter.film.genre::genre")});c.pop()}t.b('</a> <a id="ui_chooser_filter_film_company" href="#">');if(t.s(t.f("i18n",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui.chooser.filter.film.person::company")});c.pop()}t.b('</a> </div> </div> </div> <div id="ui_chooser_results"> </div> <div id="ui_chooser_noresults_container"> <div id="ui_chooser_noresults">No results</div> <div id="ui_chooser_noresults_debug"></div> </div> </div> <div id="aka_list" onMouseOver="$(this).data(\'mouseover\', true)" onMouseOut="$(this).data(\'mouseover\',false)"> </div> ');t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.fullname":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="ui_fullname_frame" id="ui_fullname_frame_');t.b(t.v(t.f("id",c,p,0)));t.b('"> <input id="');t.b(t.v(t.f("id",c,p,0)));t.b('" name="');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_fullname" data-id="');t.b(t.v(t.f("id",c,p,0)));t.b("\" value='");t.b(t.v(t.f("value",c,p,0)));t.b('\' /> <div class="ui_fullname_input_frame_frame"> <div class="ui_fullname_input_frame"> <input id="ui_fullname_input_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-id="');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_fullname_input" value="" /> </div> <div id="ui_fullname_overlay_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-id="');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_fullname_overlay">&nbsp;</div> </div> <div class="ui_fullname_input_choose_separator"> <div class="ui_fullname_sort_choices" id="ui_fullname_sort_choices_');t.b(t.v(t.f("id",c,p,0)));t.b('"> </div> <div class="ui_fullname_input_help">Select the first <a id="ui_fullname_sort_toggle_');t.b(t.v(t.f("id",c,p,0)));t.b('" onClick="RYMfullname.toggleSortMode(\'');t.b(t.v(t.f("id",c,p,0)));t.b("')\">word</a> under which this name should be sorted.</div> </div>");t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.fuzzydate":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="ui_element ui_date"> <div class="ui_date_input" id="');t.b(t.v(t.f("id",c,p,0)));t.b('_frame"> <div class="ui_date_icon" id="');t.b(t.v(t.f("id",c,p,0)));t.b('_icon"> <i class="icon-calendar"></i> </div> <input ');t.b("\n"+i);t.b(' id="');t.b(t.v(t.f("id",c,p,0)));t.b('_text" name="');t.b(t.v(t.f("id",c,p,0)));t.b('_text"');t.b("\n"+i);t.b(' class="ui_date_text"');t.b("\n"+i);t.b(' data-mainid="');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b(' onFocus = "return uiObj(this).onFocus(event); " ');t.b("\n"+i);t.b(' onBlur = "return uiObj(this).onBlur(event); " ');t.b("\n"+i);t.b(' onChange = "return uiObj(this).onChange(event); " ');t.b("\n"+i);t.b(' onKeyUp = "return uiObj(this).onKeyUp(event); " ');t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b(' placeholder="');t.b(t.v(t.f("placeholder",c,p,0)));t.b('" ');t.b("\n"+i);t.b(' value="');t.b(t.v(t.f("value_display",c,p,0)));t.b('" ');t.b("\n"+i);t.b(' /> </div> <input type="hidden" ');t.b("\n"+i);t.b(' data-custom-action="console.log(1);"');t.b("\n"+i);t.b(' name="');t.b(t.v(t.f("id",c,p,0)));t.b('" id="');t.b(t.v(t.f("id",c,p,0)));t.b('" value="');t.b(t.v(t.f("value",c,p,0)));t.b("\" /><script> document.getElementById('");t.b(t.v(t.f("id",c,p,0)));t.b("').dataset['data_format'] = '");t.b(t.v(t.f("data_format",c,p,0)));t.b("';<\/script> <div id=\"");t.b(t.v(t.f("id",c,p,0)));t.b('_error" class="ui_errorlabel" style="display:none;"></div> <div id="');t.b(t.v(t.f("id",c,p,0)));t.b('_success" class="ui_successlabel" style="display:none;"></div> <div id="');t.b(t.v(t.f("id",c,p,0)));t.b('_info" class="ui_infolabel" style="display:none;"></div>');t.b("\n"+i);t.b("</div>");t.b("\n"+i);t.b("<script> rymInitPush( function() {");t.b("\n"+i);t.b(" var obj = new RYMdate('");t.b(t.v(t.f("id",c,p,0)));t.b("', '');");t.b("\n"+i);t.b(" RYMUI.addElement('date', obj);");t.b("\n"+i);t.b(" $('#");t.b(t.v(t.f("id",c,p,0)));t.b("').data('obj', obj);");t.b("\n"+i);t.b(" obj.init();");t.b("\n"+i);t.b(" });");t.b("\n"+i);t.b("<\/script> ");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.gallery":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b(' <div onClick="RYMgalleryPage.toggle();" id="ui_gallery_header_close_toolbar" class="ui_gallery_header_close_toolbar"> Close <i class="fa fa-times"></i> </div> ');if(t.s(t.f("galleries",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div id="ui_gallery_');t.b(t.v(t.d("metadata.schema",c,p,0)));t.b("_");t.b(t.v(t.d("metadata.assoc_id",c,p,0)));t.b('" class="ui_gallery has_placement edit_mode_');t.b(t.v(t.d("metadata.edit_mode",c,p,0)));t.b(' " > <div id="ui_gallery_header_');t.b(t.v(t.d("metadata.schema",c,p,0)));t.b("_");t.b(t.v(t.d("metadata.assoc_id",c,p,0)));t.b('" class="ui_gallery_header"> <div class="ui_gallery_header_toolbar"> ');if(t.s(t.d("metadata.can_edit",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" <a onClick=\"$('#ui_gallery_");t.b(t.v(t.d("metadata.schema",c,p,0)));t.b("_");t.b(t.v(t.d("metadata.assoc_id",c,p,0)));t.b("').toggleClass('mode_edit');\" class=\"btn flat_btn\">Edit</a> <a onClick=\"RYMgalleryPage.onClickUpload('");t.b(t.v(t.d("metadata.schema",c,p,0)));t.b("', ");t.b(t.v(t.d("metadata.assoc_id",c,p,0)));t.b(');" class="btn flat_btn">Upload new image</a> ')});c.pop()}t.b("\n"+i);t.b(' </div> <div class="ui_gallery_header_title">');t.b(t.v(t.d("metadata.schema_display",c,p,0)));t.b('</div> </div> <div id="ui_gallery_images_');t.b(t.v(t.d("metadata.schema",c,p,0)));t.b("_");t.b(t.v(t.d("metadata.assoc_id",c,p,0)));t.b('" class="ui_gallery_images"> </div> </div> ')});c.pop()}t.b("\n");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.gallery.item":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div id="ui_gallery_image_frame_');t.b(t.v(t.f("schema",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("lnk_id",c,p,0)));t.b('" class="ui_gallery_image_frame" style="top:');t.b(t.v(t.f("renderedTop",c,p,0)));t.b("px;left:");t.b(t.v(t.f("renderedLeft",c,p,0)));t.b("px;height:");t.b(t.v(t.f("renderedHeight",c,p,0)));t.b("px;width:");t.b(t.v(t.f("renderedWidth",c,p,0)));t.b('px;"> <div id="ui_gallery_image_frame_inner_');t.b(t.v(t.f("schema",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("lnk_id",c,p,0)));t.b('" class="ui_gallery_image_frame_inner"> <div onClick="RYMgalleryPage.openPlacement(event, \'');t.b(t.v(t.f("schema",c,p,0)));t.b("', ");t.b(t.v(t.f("assoc_id",c,p,0)));t.b(", ");t.b(t.v(t.f("lnk_id",c,p,0)));t.b(');" class="ui_gallery_image_frame_place"> <i class="fa fa-object-ungroup"></i> <span class="ui_gallery_image_edit_text ui_gallery_image_frame_place_text_set">Set placement...</span> <span class="ui_gallery_image_edit_text ui_gallery_image_frame_place_text_vote">Vote for placement...</span> </div> <div class="ui_gallery_image_frame_delete" onClick="RYMgalleryPage.onClickDelete(event, \'');t.b(t.v(t.f("schema",c,p,0)));t.b("', ");t.b(t.v(t.f("assoc_id",c,p,0)));t.b(", ");t.b(t.v(t.f("lnk_id",c,p,0)));t.b(');"> <div class="ui_gallery_image_frame_delete_delete"> <i class="fa fa-times-circle"></i> <span class="ui_gallery_image_edit_text ui_gallery_image_frame_delete_text_delete">Delete</span> </div> <div class="ui_gallery_image_frame_delete_request_deletion"> <i class="fa fa-times-circle"></i> <span class="ui_gallery_image_edit_text ui_gallery_image_frame_delete_request_deletion_text">Request deletion</span> </div> <div class="ui_gallery_image_frame_delete_confirm"> <span onClick="RYMgalleryPage.onClickDeleteConfirm(event, \'');t.b(t.v(t.f("schema",c,p,0)));t.b("', ");t.b(t.v(t.f("assoc_id",c,p,0)));t.b(", ");t.b(t.v(t.f("lnk_id",c,p,0)));t.b(');" class="ui_gallery_image_edit_text ui_gallery_image_frame_delete_text_confirm">Confirm</span> <span onClick="RYMgalleryPage.onClickDeleteCancel(event, \'');t.b(t.v(t.f("schema",c,p,0)));t.b("', ");t.b(t.v(t.f("assoc_id",c,p,0)));t.b(", ");t.b(t.v(t.f("lnk_id",c,p,0)));t.b(');" class="ui_gallery_image_edit_text ui_gallery_image_frame_delete_text_cancel">Cancel</span> </div> </div> <div onClick="RYMimageBrowser.load(\'');t.b(t.v(t.f("schema",c,p,0)));t.b("', ");t.b(t.v(t.f("assoc_id",c,p,0)));t.b(", ");t.b(t.v(t.f("image_id",c,p,0)));t.b(');" class="delayed_background_img ui_gallery_image" data-delayloadurl="url(\'');t.b(t.v(t.f("url_600",c,p,0)));t.b("')\" data-delayloadurl2x=\"url('");t.b(t.v(t.f("url_900",c,p,0)));t.b('\')" style=" height:');t.b(t.v(t.f("renderedHeight",c,p,0)));t.b("px;width:");t.b(t.v(t.f("renderedWidth",c,p,0)));t.b('px;" /> </div>');t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.image_placement":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="ui_image_placement_chooser placement_');t.b(t.v(t.f("placement",c,p,0)));t.b(" schema_");t.b(t.v(t.f("schema",c,p,0)));t.b('" id="ui_image_placement_chooser"> <div class="mini_profile"> <div class="mini_profile_inner"> <div class="mini_profile_hero"></div> <div class="mini_profile_main"></div> <div class="mini_profile_main_bg"></div> <div class="mini_profile_page"></div> </div> </div> ');if(t.s(t.d("metadata.edit_mode_owner",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_image_placement_chooser_options" id="ui_image_placement_chooser_options"> <div class="ui_image_placement_chooser_header">Set as default photo for: </div> <input type="hidden" id="image_placement_chooser_lnk_id" name="image_placement_chooser_lnk_id" value="');t.b(t.v(t.f("lnk_id",c,p,0)));t.b('" /> <label ');t.b("\n"+i);t.b(" onMouseOver=\"$('#ui_image_placement_chooser').addClass('hover_main');\"");t.b("\n"+i);t.b(" onMouseOut=\"$('#ui_image_placement_chooser').removeClass('hover_main');\"");t.b("\n"+i);t.b(' ><input id="image_placement_chooser_placement_main_image" name="image_placement_chooser_placement" onchange="RYMgalleryPage.onPlacementChange(event, \'');t.b(t.v(t.f("schema",c,p,0)));t.b("', ");t.b(t.v(t.f("assoc_id",c,p,0)));t.b(", ");t.b(t.v(t.f("lnk_id",c,p,0)));t.b(', \'main_image\');" value="main_image" type="radio" ');if(t.s(t.f("placement_main_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("checked")});c.pop()}t.b("> Main photo</label> <label");t.b("\n"+i);t.b(" onMouseOver=\"$('#ui_image_placement_chooser').addClass('hover_hero');\"");t.b("\n"+i);t.b(" onMouseOut=\"$('#ui_image_placement_chooser').removeClass('hover_hero');\"");t.b("\n"+i);t.b(' ><input id="image_placement_chooser_placement_hero_image" name="image_placement_chooser_placement" onchange="RYMgalleryPage.onPlacementChange(event, \'');t.b(t.v(t.f("schema",c,p,0)));t.b("', ");t.b(t.v(t.f("assoc_id",c,p,0)));t.b(", ");t.b(t.v(t.f("lnk_id",c,p,0)));t.b(', \'hero_image\');" value="hero_image" type="radio"');t.b("\n"+i);t.b(" ");if(t.s(t.f("placement_hero_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("checked")});c.pop()}t.b("> Hero image (top horizontal)</label> <label");t.b("\n"+i);t.b(" onMouseOver=\"$('#ui_image_placement_chooser').addClass('hover_background');\"");t.b("\n"+i);t.b(" onMouseOut=\"$('#ui_image_placement_chooser').removeClass('hover_background');\"");t.b("\n"+i);t.b(' ><input id="image_placement_chooser_placement_background_image" name="image_placement_chooser_placement" onchange="RYMgalleryPage.onPlacementChange(event, \'');t.b(t.v(t.f("schema",c,p,0)));t.b("', ");t.b(t.v(t.f("assoc_id",c,p,0)));t.b(", ");t.b(t.v(t.f("lnk_id",c,p,0)));t.b(', \'background_image\');" value="background_image" type="radio"');t.b("\n"+i);t.b(" ");if(t.s(t.f("placement_background_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("checked")});c.pop()}t.b("\n"+i);t.b(" > Background image (blurred)</label> <label");t.b("\n"+i);t.b(" onMouseOver=\"$('#ui_image_placement_chooser').addClass('hover_default');\"");t.b("\n"+i);t.b(" onMouseOut=\"$('#ui_image_placement_chooser').removeClass('hover_default');\"");t.b("\n"+i);t.b(' ><input id="image_placement_chooser_placement_default" name="image_placement_chooser_placement" onchange="RYMgalleryPage.onPlacementChange(event, \'');t.b(t.v(t.f("schema",c,p,0)));t.b("', ");t.b(t.v(t.f("assoc_id",c,p,0)));t.b(", ");t.b(t.v(t.f("lnk_id",c,p,0)));t.b(', \'default\');" value="default" type="radio"');t.b("\n"+i);t.b(" ");if(t.s(t.f("placement_default",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("checked")});c.pop()}t.b("\n"+i);t.b(' > None </label> <div class="ui_image_placement_chooser_header">Apply to:</div> <label><input id="image_placement_chooser_site_current" name="image_placement_chooser_site" value="current" type="radio" checked> ');t.b(t.v(t.d("site.cap_first_word",c,p,0)));t.b(' only</label> <label><input id="image_placement_chooser_site_all" name="image_placement_chooser_site" value="all" type="radio"> All sites</label> <a onClick="RYMgalleryPage.onClickSavePlacement(event, ');t.b(t.v(t.f("lnk_id",c,p,0)));t.b(');" class="btn flat_btn ui_image_placement_chooser_save">Save</a> </div> ')});c.pop()}t.b(" ");t.b("\n"+i);if(!t.s(t.d("metadata.edit_mode_owner",c,p,1),c,p,1)){t.b(' <div class="ui_image_placement_chooser_options" id="ui_image_placement_chooser_options"> <div class="ui_image_placement_chooser_header">Vote as default photo for: </div> ');if(t.s(t.d("metadata.main_image_voting",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_image_type_voting_option"');t.b("\n"+i);t.b(" onMouseOver=\"$('#ui_image_placement_chooser').addClass('hover_main');\"");t.b("\n"+i);t.b(" onMouseOut=\"$('#ui_image_placement_chooser').removeClass('hover_main');\"");t.b("\n"+i);t.b(' > <div class="ui_image_placement_chooser_voting"> <a onClick="RYMgalleryPage.votePlacement(event, \'');t.b(t.v(t.f("schema",c,p,0)));t.b("', ");t.b(t.v(t.f("assoc_id",c,p,0)));t.b(", ");t.b(t.v(t.f("lnk_id",c,p,0)));t.b(", 'main', 1);\"ui_image_placement_chooser_vote_main_voting_");t.b(t.v(t.f("schema",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("lnk_id",c,p,0)));t.b('_pos" ');t.b("\n"+i);t.b(' class="btn flat_btn ');if(t.s(t.f("user_main_image_yes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("depressed")});c.pop()}t.b('"> + ');t.b(t.v(t.f("placement_votes_yes_main",c,p,0)));t.b("</a> <a onClick=\"RYMgalleryPage.votePlacement(event, '");t.b(t.v(t.f("schema",c,p,0)));t.b("', ");t.b(t.v(t.f("assoc_id",c,p,0)));t.b(", ");t.b(t.v(t.f("lnk_id",c,p,0)));t.b(", 'main', -1);\" id=\"ui_image_placement_chooser_vote_main_voting_");t.b(t.v(t.f("schema",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("lnk_id",c,p,0)));t.b('_neg" ');t.b("\n"+i);t.b(' class="btn flat_btn ');if(t.s(t.f("user_main_image_no",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("depressed")});c.pop()}t.b('"> - ');t.b(t.v(t.f("placement_votes_no_main",c,p,0)));t.b('</a> </div> <div class="ui_image_placement_chooser_label cl-444">Main photo </div> <div class="clearfix"></div> </div> ')});c.pop()}t.b("\n"+i);if(t.s(t.d("metadata.hero_image_voting",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="ui_image_type_voting_option"');t.b("\n"+i);t.b(" onMouseOver=\"$('#ui_image_placement_chooser').addClass('hover_hero');\"");t.b("\n"+i);t.b(" onMouseOut=\"$('#ui_image_placement_chooser').removeClass('hover_hero');\"");t.b("\n"+i);t.b(' > <div class="ui_image_placement_chooser_voting"> <a onClick="RYMgalleryPage.votePlacement(event, \'');t.b(t.v(t.f("schema",c,p,0)));t.b("', ");t.b(t.v(t.f("assoc_id",c,p,0)));t.b(", ");t.b(t.v(t.f("lnk_id",c,p,0)));t.b(", 'hero', 1);\"id=\"ui_image_placement_chooser_vote_hero_voting_");t.b(t.v(t.f("schema",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("lnk_id",c,p,0)));t.b('_pos" ');t.b("\n"+i);t.b(' class="btn flat_btn ');if(t.s(t.f("user_hero_image_yes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("depressed")});c.pop()}t.b('"> + ');t.b(t.v(t.f("placement_votes_yes_hero",c,p,0)));t.b("</a> <a onClick=\"RYMgalleryPage.votePlacement(event, '");t.b(t.v(t.f("schema",c,p,0)));t.b("', ");t.b(t.v(t.f("assoc_id",c,p,0)));t.b(", ");t.b(t.v(t.f("lnk_id",c,p,0)));t.b(", 'hero', -1);\"id=\"ui_image_placement_chooser_vote_hero_voting_");t.b(t.v(t.f("schema",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("lnk_id",c,p,0)));t.b('_neg" ');t.b("\n"+i);t.b(' class="btn flat_btn ');if(t.s(t.f("user_hero_image_no",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("depressed")});c.pop()}t.b('"> - ');t.b(t.v(t.f("placement_votes_no_hero",c,p,0)));t.b('</a> </div> <div class="ui_image_placement_chooser_label cl-444">Hero image (top horizontal)</div> <div class="clearfix"></div> </div> ')});c.pop()}t.b("\n"+i);if(t.s(t.d("metadata.background_image_voting",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="ui_image_type_voting_option"');t.b("\n"+i);t.b(" onMouseOver=\"$('#ui_image_placement_chooser').addClass('hover_background');\"");t.b("\n"+i);t.b(" onMouseOut=\"$('#ui_image_placement_chooser').removeClass('hover_background');\"");t.b("\n"+i);t.b(' > <div class="ui_image_placement_chooser_voting"> <a onClick="RYMgalleryPage.votePlacement(event, \'');t.b(t.v(t.f("schema",c,p,0)));t.b("', ");t.b(t.v(t.f("assoc_id",c,p,0)));t.b(", ");t.b(t.v(t.f("lnk_id",c,p,0)));t.b(", 'background', 1);\" id=\"ui_image_placement_chooser_vote_background_voting_");t.b(t.v(t.f("schema",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("lnk_id",c,p,0)));t.b('_pos" ');t.b("\n"+i);t.b(' class="btn flat_btn ');if(t.s(t.f("user_background_image_yes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("depressed")});c.pop()}t.b('"> + ');t.b(t.v(t.f("placement_votes_yes_background",c,p,0)));t.b("</a> <a onClick=\"RYMgalleryPage.votePlacement(event, '");t.b(t.v(t.f("schema",c,p,0)));t.b("', ");t.b(t.v(t.f("assoc_id",c,p,0)));t.b(", ");t.b(t.v(t.f("lnk_id",c,p,0)));t.b(", 'background', -1);\"id=\"ui_image_placement_chooser_vote_background_voting_");t.b(t.v(t.f("schema",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("lnk_id",c,p,0)));t.b('_neg" ');t.b("\n"+i);t.b(' class="btn flat_btn ');if(t.s(t.f("user_background_image_no",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("depressed")});c.pop()}t.b('"> - ');t.b(t.v(t.f("placement_votes_no_background",c,p,0)));t.b('</a> </div> <div class="ui_image_placement_chooser_label cl-444">Background image</div> <div class="clearfix"></div> </div> ')});c.pop()}t.b("\n"+i);t.b(' <a class="btn flat_btn ui_image_placement_chooser_close" onClick="rym.closeModal()">Close</a> </div> ')}t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.login":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div id="login_outer_frame" class="login_outer_frame ');t.b("\n"+i);t.b(" ");if(t.s(t.f("mode_login",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("mode_login")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" ");if(t.s(t.f("captcha_required",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("captcha_required")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" ");if(t.s(t.f("mode_2fa_create",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("mode_2fa_create")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" ");if(t.s(t.f("mode_signup",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("mode_signup")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" ");if(t.s(t.f("login_signup_mode_banned",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("login_signup_mode_banned")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" ");if(t.s(t.f("login_signup_mode_existing",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("login_signup_mode_existing")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" ");if(t.s(t.f("two_factor_required",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("two_factor_required")});c.pop()}t.b(" ");t.b("\n"+i);t.b(" ");if(t.s(t.f("login_known",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("login_known")});c.pop()}t.b('"> <form method="post" action="/" onSubmit="RYMlogin.go();event.stopPropagation();return false;"> <div class="login_already"> <div class="login_already_text"> <span class="login_already_login" onClick="RYMlogin.goLogin();"> Already have an account? <b><u>Log in.</u></b> <i class="fa fa-sign-in"></i> </span> <span class="login_already_signup" onClick="RYMlogin.goSignup();"> Don\'t have an account? <b><u>Sign up!</u></b> </span> </div> </div> <div class="login_frame"> <div id="login_overlay" class="login_overlay"> <div id="login_overlay_content" class="login_overlay_content"></div> </div> <div class="login_modal"> <div class="login_modal_title" id="login_modal_title"></div> <div class="login_modal_body" id="login_modal_body"></div> </div> <div class="login_recover_password_intro"> <p>Forgot your password?</p> <span class="subtext">Enter your username or email address and we\'ll send you a mail containing a link to change your password.</span> </div> <div class="login_signup_intro"> <div class="login_signup_intro_inner"> <p>Join ');t.b(t.v(t.f("site_name",c,p,0)));t.b(' today. <br /><b>Membership is free</b>.</p> <ul style="display:none"> <li>Rate/catalog your music collection</li> <li>Customize how you view the site</li> <li>See fewer ads</li> <li>Get notifications about new music</li> <li>Create and publish lists</li> <li>And much more!</li> </ul> </div> <div class="login_signup_intro_banned"> <p><b>Note</b>: It is against the Terms of Service to create a new account if your existing account is banned. Doing so will lead to any/all accounts being suspended and/or deleted without notice. If you want to continue using the site, you <b>must</b> address the cause/reasons for the original ban, using your original account.</p> </div> <div class="login_signup_intro_existing"> <p><b>Note</b>: It is generally against the Terms of Service to maintain multiple accounts; please read the FAQ before doing so to avoid being banned.</p> </div> <div class="login_signup_intro_existing"> <p><b>Note</b>: You cannot sign up using this form. If you already have an account on rateyourmusic.com, you can use that username and password to access this site. Otherwise, please create an account on <a href="https://rateyourmusic.com">RYM</a> now and we\'ll announce when you can use this form.</p> </div> </div> <div id="login_intro" class="login_intro" style="background-image:url(\'');t.b(t.v(t.d("userinfo.image_url_300",c,p,0)));t.b('\')"> <div class="login_intro_known" > <div id="login_intro_username" class="login_username">@');t.b(t.v(t.d("userinfo.username",c,p,0)));t.b('</div> <div id="login_intro_name" class="login_realname">');t.b(t.v(t.d("userinfo.realname",c,p,0)));t.b('</div> </div> <div class="login_intro_not_known" style="background:url(\'https://e.snmc.io/3.0/img/');t.b(t.v(t.f("site",c,p,0)));t.b("-bg.png')\"> Login to <b>");t.b(t.v(t.f("site_name",c,p,0)));t.b('</b> </div> </div> <div class="login_signup_social"> <p class="login_social_signup subtext" style="text-align:center"> Sign up with: </p> <p class="login_social_login subtext" style="text-align:center"> Log in with: </p> <span onclick="RYMlogin.twitterConnect();" style="float:left" class="twitter_login_button btn btn_small"><i class="fa fa-twitter"></i> Twitter</span> <span onclick="RYMlogin.facebookConnect();" style="float:right" class="facebook_login_button btn btn_small"><i class="fa fa-facebook"></i> Facebook</span> <div class="clearfix"></div> </div> <div class="login_details"> <p class="login_email_signup subtext" style="text-align:center"> Or sign up with email:</p> <p class="login_email_login subtext" style="text-align:center"> Or login with username/password:</p> <div class="login_email_signup_complete"> <h4>Complete signup</h4>Before you can use all the functionality of ');t.b(t.v(t.f("site_name",c,p,0)));t.b(", you'll need to complete your registration by entering the following info:");t.b("\n"+i);t.b(' </div> <label class="login_signup_email_label" for="login_signup_email" > Email address <span class="login_email_reset_text">or username</span> <input id="login_signup_email" type="email" placeholder="required"> </label> <div class="login_email_error login_error" id="login_email_error"> </div> <div class="login_email_success login_success" id="login_email_success"> You should receive an email in the next few minutes with instructions for resetting your password. Make sure to check your spam folder if you don\'t see it.');t.b("\n"+i);t.b(' </div> <div class="clearfix"></div> <label class="login_signup_username_label" for="login_signup_username"> <span class="login_signup_username_text_signup">Choose a username</span> <span class="login_signup_username_text_login">Username</span> <input id="login_username" onChange="RYMlogin.onChangeUsernameInput()" placeholder="3-24 characters" value="');t.b(t.v(t.d("userinfo.username",c,p,0)));t.b('"> </label> <div class="login_username_error login_error" id="login_username_error"> </div> <div class="clearfix"></div> <label class="login_signup_password_label" for="login_password"> <span class="login_signup_password_text_signup">Choose a password</span> <span class="login_signup_password_text_login">Password</span> <input type="password" id="login_password" placeholder="min. 6 characters"> </label> <div class="login_password_error login_error" id="login_password_error"> </div> <div class="clearfix"></div> <label class="login_signup_undelete_label" for="login_undelete"> <p style="color:crimson">You have requested deletion of your account. If you login, your account will return to active status and you will not be able to request deletion again for 30 days.</p> <input type="checkbox" id="login_undelete" value="true"> Cancel deletion request.');t.b("\n"+i);t.b(' </label> <div class="login_password_error login_error" id="login_password_error"> </div> <div class="clearfix"></div> </div> <div class="login_2fa_create" > <div class="login_qr_code"> <img src="https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl=otpauth%3A//totp/');t.b(t.v(t.d("userinfo.username",c,p,0)));t.b("%40sonemic/cinemos/glitchwave%3Fsecret%3D");t.b(t.v(t.d("userinfo.two_factor_key",c,p,0)));t.b('" style="width:11.71875em;height:11.71875em;"> </div> <div style="width:auto;margin:0 auto;text-align:center;"> <p>Scan the QR code</p> <p class="subtext">Or manually enter the code <b>');t.b(t.v(t.d("userinfo.two_factor_key",c,p,0)));t.b('</b> into your 2-factor authentication app. </p> <p class="subtext">Next, enter the six-digit code that appears in your app.</p> <input id="login_two_factor_create_token" style="width:100%;margin-top:0.5em;margin-bottom:0.5em;font-size:1.2em;" placeholder="Enter 6-digit code"> </div> <div class="login_two_factor_create_error login_error" id="login_two_factor_create_error"> </div> </div> <div class="login_2fa"> <div style="text-align:center;margin-bottom:1em;"> <img src="https://e.snmc.io/3.0/img/ui.login/googleauth.png" style="width:4em;height:4em;"> </div> <div style="width:auto;margin:0 auto;text-align:center;"> <p>Enter a verification code</p> <p class="subtext">Enter the six-digit code from your authenticator.</p> <input id="login_two_factor_token" style="width:100%;" placeholder="Enter 6-digit code"> </div> <div class="login_two_factor_error login_error" id="login_two_factor_error"> </div> </div> <div class="login_captcha" id="login_captcha"> <div id="recaptcha_frame" class="captcha_frame" > <a onClick="RYMlogin.onClickCaptcha();" class="btn flat_btn"> <i class="fa fa-square-o"></i> <i class="fa fa-check-square-o"></i> <i class="fa fa-spinner fa-spin"></i> <span class="captcha_frame_robot">I am not a robot.</span> <span class="captcha_frame_robot_loading">In progress...</span> <span class="captcha_frame_robot_confirmed">You are not a robot.</span> </a> </div> <div class="login_captcha_error login_error" id="login_captcha_error"> </div> </div> <div class="login_terms_accepted_frame" id="login_terms_accepted_frame"> <label for="login_terms_accepted"> <input type="checkbox" id="login_terms_accepted" name="login_terms_accepted"> I am over 13 and accept the ');t.b("\n"+i);t.b(' <a target="_blank" rel="nofollow noopener" href="/terms-of-service/">Terms of Service</a> and <a target="_blank" rel="nofollow noopener" href="/privacy">Privacy Policy</a>.');t.b("\n"+i);t.b(' </label> </div> <div class="login_buttons" id="login_buttons"> <button type="submit" class="btn blue_btn"> <span class="login_button_signup">Sign up</span> <span class="login_button_login">Log in</span> <span class="login_button_reset_password">Reset password</span> <span class="login_button_enable_2fa">Enable 2FA</span> <span class="login_button_close">Close</span> <span class="login_button_signup_complete">Complete registration</span> </button> </div> <div class="login_general_error login_error" id="login_general_error"> </div> <div class="login_help" id="login_help"> <div class="login_help_goback"><a onClick="RYMlogin.goLogin()">Go back</a></div> <div class="login_help_recover"><a onClick="RYMlogin.goReset()">Forgot password?</a></div> <div class="login_help_register"><a onClick="RYMlogin.goSignup()">Register new account</a></div> <div class="clearfix"></div> </div> </div> </form>');t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.media_timeline":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div id="timeline_frame" class="timeline_frame ');t.b("\n"+i);t.b(" ");if(t.s(t.d("metadata.has_end",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_end")});c.pop()}t.b("\n"+i);t.b(" ");if(t.s(t.d("metadata.has_completed",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_completed")});c.pop()}t.b("\n"+i);t.b(" ");if(!t.s(t.d("items.length",c,p,1),c,p,1)){t.b("no_entries")}t.b(" ");if(t.s(t.d("items.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_entries")});c.pop()}t.b('" > <div class="timeline_container"> <div id="timeline_container_loading" class="timeline_container_loading"> </div> <div class="timeline_list_frame"> <ul class="timeline_list"> <li class="timeline_list_header"> ');if(t.s(t.d("metadata.has_end",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="timeline_list_header_start">Start</span> <span class="timeline_list_header_end">End</span> ')});c.pop()}t.b("\n"+i);if(!t.s(t.d("metadata.has_end",c,p,1),c,p,1)){t.b(' <span class="timeline_list_header_start">Time/date</span> ')}t.b("\n"+i);if(t.s(t.d("metadata.has_completed",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="timeline_list_header_completed">Completed</span> ')});c.pop()}t.b("\n"+i);t.b(' </li> <li id="timeline_list_intro" class="timeline_list_intro"> <p class="timeline_intro">The <b>timeline</b> feature is used to track when you\'ve played and/or completed a game.</p> <p class="timeline_none">Your timeline for this game is empty. ');t.b("\n"+i);t.b(' Click "Add Play" to add this item to your timeline.</p> </li> <li id="timeline_time_example" class="timeline_time_example"> <div class="timeline_time_example_text"> Example of time format: <span class="timeline_time_tz_example">21 Mar 2016 13:03 </span> <br /> Times are in your current time zone (<span class="timeline_time_tz_name">CEST</span>). </div> </li> <div id="timeline_list_items"> ');if(t.s(t.f("items",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b('<li id="timeline_list_item_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-id="');t.b(t.v(t.f("id",c,p,0)));t.b('" class="timeline_list_item"> <div class="timeline_loading_cover" style="" ></div> <i id="timeline_list_delete_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-id="');t.b(t.v(t.f("id",c,p,0)));t.b('" class="timeline_list_delete fa fa-times-circle"></i> <div class="timeline_list_start"> <div class="timelist_list_start_date"> <input class="timeline_date" id="timeline_list_start_date_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-id="');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tstype="start" type="text" data-ts="');t.b(t.v(t.f("ts",c,p,0)));t.b('" /> </div></div> ');if(t.s(t.d("metadata.has_end",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="timeline_list_end"> <div class="timelist_list_end_date"> <input class="timeline_date" id="timeline_list_end_date_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-id="');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tstype="end" type="text" data-ts="');t.b(t.v(t.f("ts_end",c,p,0)));t.b('" /> </div> </div> ')});c.pop()}t.b("\n"+i);if(t.s(t.d("metadata.has_completed",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div id="timeline_list_state_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-id="');t.b(t.v(t.f("id",c,p,0)));t.b('" class="timeline_list_state state_');t.b(t.v(t.f("state",c,p,0)));t.b('"> <i class="timeline_list_completed fa fa-check-circle"></i> <i class="timeline_list_active fa fa-check-circle"></i> <i class="timeline_list_stopped fa fa-stop"></i> </div> ')});c.pop()}t.b("\n"+i);t.b(' <div class="clearfix"></div>');t.b("\n"+i);t.b("</li> ")});c.pop()}t.b("\n"+i);t.b(' </div> </ul> </div> <div id="timeline_log_error" class="timeline_log_error" style="display:none"> Error');t.b("\n"+i);t.b(' </div> <div class="timeline_log_help">Click on a date to edit it.');t.b("\n"+i);t.b(' <br />Click <i class="fa fa-times-circle"></i> to delete, <i class="fa fa-check-circle" style="color:#383"></i> to toggle completed.');t.b("\n"+i);t.b(" </div> ");if(t.s(t.f("filter",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="timeline_log_buttons"> <a class="btn btn_large" onClick="RYMmediatimeline.onClickAdd(\'');t.b(t.v(t.f("object",c,p,0)));t.b("', '");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("', '");t.b(t.v(t.f("sec_id",c,p,0)));t.b('\');"><i class="fa fa-play"></i> Add play</a> </div> ')});c.pop()}t.b("\n"+i);t.b(" </div>");t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.media_timeline.singleitem":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<li id="timeline_list_item_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-id="');t.b(t.v(t.f("id",c,p,0)));t.b('" class="timeline_list_item"> <div class="timeline_loading_cover" style="" ></div> <i id="timeline_list_delete_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-id="');t.b(t.v(t.f("id",c,p,0)));t.b('" class="timeline_list_delete fa fa-times-circle"></i> <div class="timeline_list_start"> <div class="timelist_list_start_date"> <input class="timeline_date" id="timeline_list_start_date_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-id="');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tstype="start" type="text" data-ts="');t.b(t.v(t.f("ts",c,p,0)));t.b('" /> </div></div> ');if(t.s(t.d("metadata.has_end",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="timeline_list_end"> <div class="timelist_list_end_date"> <input class="timeline_date" id="timeline_list_end_date_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-id="');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tstype="end" type="text" data-ts="');t.b(t.v(t.f("ts_end",c,p,0)));t.b('" /> </div> </div> ')});c.pop()}t.b("\n"+i);if(t.s(t.d("metadata.has_completed",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div id="timeline_list_state_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-id="');t.b(t.v(t.f("id",c,p,0)));t.b('" class="timeline_list_state state_');t.b(t.v(t.f("state",c,p,0)));t.b('"> <i class="timeline_list_completed fa fa-check-circle"></i> <i class="timeline_list_active fa fa-check-circle"></i> <i class="timeline_list_stopped fa fa-stop"></i> </div> ')});c.pop()}t.b("\n"+i);t.b(' <div class="clearfix"></div>');t.b("\n"+i);t.b("</li>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.modal":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="modal_outer_frame modal_outer_frame_');t.b(t.v(t.f("frame_class",c,p,0)));t.b('" > <div id="modal_frame" class="modal_frame modal_frame_');t.b(t.v(t.f("frame_class",c,p,0)));t.b('"> ');if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("<h3>");t.b(t.v(t.f("title",c,p,0)));t.b("</h3>")});c.pop()}t.b("\n"+i);t.b(' <div class="modal_body"> ');t.b(t.t(t.f("body",c,p,0)));t.b("\n"+i);t.b(" </div> </div>");t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.multiobject.singleitem":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="ui_multiobject_obj_frame" id="ui_multiobject_obj_frame_');t.b(t.v(t.f("id",c,p,0)));t.b("_");t.b(t.v(t.f("item_id",c,p,0)));t.b('"> <div class="ui_multiobject_close" onClick="RYMmultiObject.onClickClose(\'');t.b(t.v(t.f("id",c,p,0)));t.b("', '");t.b(t.v(t.f("item_id",c,p,0)));t.b('\');"><i class="fa fa-times-circle"></i></div> <div id="ui_multiobject_chosen_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_multiobject_chosen">');t.b(t.v(t.f("text",c,p,0)));t.b("</div>");t.b("\n"+i);t.b("</div>");t.b("\n"+i);t.b('<div class="clearfix"></div>');t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.nav":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b("<nav");t.b("\n"+i);t.b(' id="nav_');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-mainid="');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' class="ui_nav nav_collection nav_component_');t.b(t.v(t.f("sync_id",c,p,0)));t.b(' "');t.b("\n"+i);t.b(' data-rpp="');t.b(t.v(t.f("rpp",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-page="');t.b(t.v(t.f("page",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-num-items="');t.b(t.v(t.f("num_items",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-num-pages="');t.b(t.v(t.f("num_pages",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-nocount="');t.b(t.v(t.f("nocount",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-current-page-items="');t.b(t.v(t.f("current_page_items",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-initialized="false"');t.b("\n"+i);t.b(' data-callback-component="');t.b(t.v(t.f("callback_component",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-object="');t.b(t.v(t.f("object",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-callback-data="');t.b(t.v(t.d("callback_data.stringify",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-sync-id="');t.b(t.v(t.f("sync_id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-url-prefix="');t.b(t.v(t.f("url_prefix",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-url-suffix="');t.b(t.v(t.f("url_suffix",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-always-end-with-slash="');t.b(t.v(t.f("always_end_with_slash",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-prerendered="false"');t.b("\n"+i);t.b('> <a class="nav_prev nav_btn" id="nav_prev_');t.b(t.v(t.f("id",c,p,0)));t.b('"><i class="fa fa-caret-left"></i></a> <span class="nav_page" id="nav_page_');t.b(t.v(t.f("id",c,p,0)));t.b('"> ');if(t.s(t.f("nocount",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' p. <span class="nav_page_current" id="nav_page_current_');t.b(t.v(t.f("id",c,p,0)));t.b('">');t.b(t.v(t.f("page",c,p,0)));t.b("</span");t.b("\n"+i);t.b(" > ")});c.pop()}t.b(" ");t.b("\n"+i);if(!t.s(t.f("nocount",c,p,1),c,p,1)){t.b(' <span class="nav_page_current" id="nav_page_current_');t.b(t.v(t.f("id",c,p,0)));t.b('">');t.b(t.v(t.f("page",c,p,0)));t.b("</span");t.b("\n"+i);t.b(' ><span class="nav_page_slash" id="nav_page_slash_');t.b(t.v(t.f("id",c,p,0)));t.b('">/</span');t.b("\n"+i);t.b(' ><span class="nav_page_total" id="nav_page_num_pages_');t.b(t.v(t.f("id",c,p,0)));t.b('">');t.b(t.v(t.f("num_pages",c,p,0)));t.b("</span> ")}t.b(" ");t.b("\n"+i);t.b(' </span> <span id="nav_popup_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="nav_popup" style="display:none"> </span> <a class="nav_next nav_btn ');if(t.s(t.f("next_disabled",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("disabled")});c.pop()}t.b('" id="nav_next_');t.b(t.v(t.f("id",c,p,0)));t.b('">');if(t.s(t.f("nocount",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("Next")});c.pop()}t.b(' <i class="fa fa-caret-right"></i></a>');t.b("\n"+i);t.b("</nav>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.nav.pagelist":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="expandable_box" id="expandable_box_genres"> <div class="expandable_box_content"> <ul id="expandable_list_pages_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="expandable_list no_crop" style="border:none;"> ');if(t.s(t.f("pages",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <li data-mainid="');t.b(t.v(t.f("id",c,p,0)));t.b('" onClick="RYMnav.onClickPageNum($(this), ');t.b(t.v(t.f("page",c,p,0)));t.b(');"> <div class="expandable_list_name">');t.b(t.v(t.f("name",c,p,0)));t.b('</div> <div class="clearfix"></div> </li> ')});c.pop()}t.b("\n"+i);if(t.s(t.f("sections",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <li id="expandable_list_item_');t.b(t.v(t.f("id",c,p,0)));t.b("_");t.b(t.v(t.f("section_id",c,p,0)));t.b('" data-mainid="');t.b(t.v(t.f("id",c,p,0)));t.b('" id="expandable_list_pages_');t.b(t.v(t.f("id",c,p,0)));t.b("_");t.b(t.v(t.f("section_id",c,p,0)));t.b('" onClick="$(\'#expandable_list_btn_');t.b(t.v(t.f("id",c,p,0)));t.b("_");t.b(t.v(t.f("section_id",c,p,0)));t.b("').toggleClass('expanded');$('#expandable_section_");t.b(t.v(t.f("section_id",c,p,0)));t.b('\').toggle()"> <div class="expandable_list_btn" id="expandable_list_btn_');t.b(t.v(t.f("id",c,p,0)));t.b("_");t.b(t.v(t.f("section_id",c,p,0)));t.b('" ><i class="fa fa-caret-down"></i><i class="fa fa-caret-right"></i></div> <div class="expandable_list_name">');t.b(t.v(t.f("name",c,p,0)));t.b('</div> <ul id="expandable_section_');t.b(t.v(t.f("section_id",c,p,0)));t.b('" class="expandable_list no_crop" style="display:none"> ');if(t.s(t.f("pages",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <li id="expandable_list_item_');t.b(t.v(t.f("id",c,p,0)));t.b("_");t.b(t.v(t.f("page",c,p,0)));t.b('" data-mainid="');t.b(t.v(t.f("id",c,p,0)));t.b('" onClick="RYMnav.onClickPageNum($(this), ');t.b(t.v(t.f("page",c,p,0)));t.b(');"> <div class="expandable_list_name">');t.b(t.v(t.f("name",c,p,0)));t.b('</div> <div class="clearfix"></div> </li> ')});c.pop()}t.b("\n"+i);t.b(" </ul> </li> ")});c.pop()}t.b("\n"+i);t.b(" </ul> </div>");t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.picker":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div id="ui_picker_frame_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_picker_frame"> <input type="hidden" ');t.b("\n"+i);t.b(' id="');t.b(t.v(t.f("id",c,p,0)));t.b('" ');t.b("\n"+i);t.b(' name="');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' class="ui_picker"');t.b("\n"+i);t.b(' data-initialized="false"');t.b("\n"+i);t.b(' data-picker-type="');t.b(t.v(t.f("picker_type",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-onchange="');t.b(t.v(t.f("onchange",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-object="');t.b(t.v(t.f("object",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-assoc-id="');t.b(t.v(t.f("assoc_id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-sec-id="');t.b(t.v(t.f("sec_id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-status="not_loaded"');t.b("\n"+i);t.b(' data-callback="');t.b(t.v(t.f("callback",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-save-action="');t.b(t.v(t.f("save_action",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-selection-mode="');t.b(t.v(t.f("selection_mode",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-show-all-results="');t.b(t.v(t.f("show_all_results",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-value-mode="');t.b(t.v(t.f("value_mode",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-allow-freeform="');t.b(t.v(t.f("allow_freeform",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-bracketed-aka="');t.b(t.v(t.f("bracketed_aka",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-filter-by-id="');t.b(t.v(t.f("filter_by_id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' value="');t.b(t.v(t.f("value",c,p,0)));t.b('"');t.b("\n"+i);t.b(' /> <div id="ui_picker_items_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_picker_items"> </div> <div id="ui_picker_input_frame_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_picker_input_frame"> <input id="ui_picker_input_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_picker_input" autocomplete="off" /> <div id="ui_picker_input_clear_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_picker_input_clear" onClick="RYMpicker.clear($(\'#');t.b(t.v(t.f("id",c,p,0)));t.b('\'));"><i class="fa fa-times-circle"></i></div> </div> <div style="position:relative;width:100%"> <div class="ui_picker_list" id="ui_picker_list_');t.b(t.v(t.f("id",c,p,0)));t.b('"> </div> </div>');t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.picker.item":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="ui_picker_item" id="');t.b(t.v(t.f("main_id",c,p,0)));t.b("_");t.b(t.v(t.f("id",c,p,0)));t.b('" data-value="');t.b(t.v(t.f("id",c,p,0)));t.b('"> <div class="ui_picker_delete" id="ui_picker_delete_');t.b(t.v(t.f("main_id",c,p,0)));t.b("_");t.b(t.v(t.f("id",c,p,0)));t.b('"><div class="fa fa-times-circle"></div></div> ');if(t.s(t.f("flag",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="flag flag-');t.b(t.v(t.f("flag",c,p,0)));t.b('"></div> ')});c.pop()}t.b("\n"+i);t.b(' <div class="ui_picker_name">');t.b(t.v(t.f("name",c,p,0)));if(t.s(t.f("aka",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="ui_picker_aka">');t.b(t.v(t.f("aka",c,p,0)));t.b("</span>")});c.pop()}t.b("</div>");t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.picker.listitem":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="ui_picker_list_item" id="ui_picker_list_item_');t.b(t.v(t.f("item_id",c,p,0)));t.b('" data-value="');t.b(t.v(t.f("id",c,p,0)));t.b('"> ');if(t.s(t.f("flag",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="flag flag-');t.b(t.v(t.f("flag",c,p,0)));t.b('"></div> ')});c.pop()}t.b("\n"+i);t.b(' <div class="ui_picker_list_name">');t.b(t.v(t.f("name",c,p,0)));t.b(" ");if(t.s(t.f("aka",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="relevant_aka">');t.b(t.v(t.f("aka",c,p,0)));t.b("</span>")});c.pop()}t.b(" </div>");t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.playlist":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="ui_playlist" id="ui_playlist_');t.b(t.v(t.f("playlist_id",c,p,0)));t.b('"> <div class="ui_playlist_container"> <div class="ui_playlist_container_inner"> ');if(t.s(t.f("has_few_songs",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" <div class=\"ui_playlist_container_begin cl-crimson\"> We couldn't find enough songs to make a diverse playlist. This feature is still in beta; it will take some time before it is fully functional. Try again with broader criteria, or help us improve the database by adding/voting on relevant genres, descriptors, and other info for songs. We've included what songs we could find below in case it's useful.");t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);if(!t.s(t.f("has_few_songs",c,p,1),c,p,1)){t.b(' <div class="ui_playlist_container_begin cl-666"> This feature is in beta and will improve as we gather more song ratings and as the Sonemic song database becomes more complete.');t.b("\n"+i);t.b(" </div> ")}t.b("\n"+i);t.b(' <ul class="page_fragment_tracks" id="ui_playlist_tracks_');t.b(t.v(t.f("playlist_id",c,p,0)));t.b('"> ');if(t.s(t.f("tracks",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b('<li class="page_fragment_track_track " ');t.b("\n"+i);if(t.s(t.f("index",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' id="page_fragment_track_index_');t.b(t.v(t.f("index",c,p,0)));t.b('" ');t.b("\n"+i);t.b(' data-song-id="');t.b(t.v(t.f("song_id",c,p,0)));t.b('" ');t.b("\n"+i);t.b(' data-duration="');t.b(t.v(t.f("duration",c,p,0)));t.b('" ');t.b("\n"+i)});c.pop()}t.b("> ");if(t.s(t.f("song_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_fragment_track_data_catalog"> ');if(t.s(t.f("catalog",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b('<div data-catalog="');t.b(t.v(t.d("data.stringify",c,p,0)));t.b('" class="ui_catalog_btn_display ui_catalog_id_');t.b(t.v(t.f("catalog_id",c,p,0)));t.b(" ui_catalog_btn_");t.b(t.v(t.f("object",c,p,0)));t.b(" ");if(t.s(t.f("is_owner",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b(' " ');t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b(' id="');if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("catalog_id",c,p,0)))});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new")}t.b('"');t.b("\n"+i);t.b(' data-component="');t.b(t.v(t.f("component",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "');t.b("\n"+i);t.b(' > <div class="ui_catalog_btn_extended"> ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_item_info_new" > <span class="page_catalog_item_new_first">Rate / catalog</span> <span class="page_catalog_item_new_more">Rate / catalog another ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("issue")});c.pop()}if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("release")});c.pop()}t.b("</span> </div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.d("author.image_url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_user_image" style="background-image:url(\'');t.b(t.v(t.d("author.image_url_75",c,p,0)));t.b("')\"></div> ")});c.pop()}t.b("\n"+i);if(!t.s(t.d("author.image_url_75",c,p,1),c,p,1)){t.b(' <div class="page_catalog_user_no_image" style="background-position: ');t.b(t.v(t.d("author.no_img_template.x",c,p,0)));t.b("px ");t.b(t.v(t.d("author.no_img_template.y",c,p,0)));t.b("px; filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b("); -webkit-filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b(');"></div> ')}t.b("\n"+i)});c.pop()}if(t.s(t.f("object_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_object_image ');if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_tip delayed_background_img")});c.pop()}t.b('" ');if(t.s(t.f("url_300",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-tiptip=\"<img src='");t.b(t.v(t.f("url_300",c,p,0)));t.b("'>\"")});c.pop()}t.b(" ");if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-delayloadurl=\"url('");t.b(t.v(t.f("url_75",c,p,0)));t.b("')\"")});c.pop()}t.b("></div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_line"> <div class="page_catalog_item_info_top"> ');if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_catalog_item_author_link"> <a class="user" href="/user/');t.b(t.v(t.d("author.username",c,p,0)));t.b('">');t.b(t.v(t.d("author.username",c,p,0)));t.b("</a> </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("title_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_catalog_item_info_title">');t.b(t.v(t.f("title_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(' <span class="page_catalog_item_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> <div class="clearfix"></div> ');if(t.s(t.f("issue_info_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_issue_info">');t.b(t.v(t.f("issue_info_display",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("labels",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_label_info"> ');if(t.s(t.f("formats",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_format bg-ddd cl-777 ');if(t.s(t.f("format_overridden",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("format_overridden")});c.pop()}t.b('">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b(" ");if(t.s(t.f("name_short_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a class="label" href="/label/');t.b(t.v(t.f("label_url",c,p,0)));t.b('/">');t.b(t.v(t.f("name_short_display",c,p,0)));t.b("</a>");if(t.s(t.d("catalog_nos.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(":")});c.pop()}t.b(" ")});c.pop()}if(t.s(t.f("catalog_nos",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_catalog_no">');t.b(t.v(t.f("cat_name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_date"> <span class="page_catalog_item_info_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> </div> </div> <div class="ui_catalog_btn_rating ');if(t.s(t.d("rating_system_label.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("rating_label_is_long")});c.pop()}t.b(" ");if(t.s(t.d("rating_system_label_outof.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("outof_is_long")});c.pop()}t.b('"> <div class="ui_catalog_btn_rating_icon"> <div class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" w32 r");if(t.s(t.f("rating",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("rating",c,p,0)))});c.pop()}if(!t.s(t.f("rating",c,p,1),c,p,1)){t.b("0")}t.b('"><i></i><b></b> </div> </div> <div class="ui_catalog_btn_rating_text ');if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b("base_rating")}t.b('"> <span class="ui_catalog_btn_rating_text_has_rating ');t.b("\n"+i);t.b(' "> ');if(t.s(t.f("rating_system_label",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_system_label",c,p,0)));t.b("</span> ");if(t.s(t.f("rating_system_label_outof",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_outof">/');t.b(t.v(t.f("rating_system_label_outof",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i)});c.pop()}if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_base_num",c,p,0)));t.b("</span> ")}t.b("\n"+i);t.b(' </span> </div> </div> <div class="media_timeline_btn ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_count")});c.pop()}t.b(" ");t.b(t.v(t.f("play_status",c,p,0)));t.b('"> ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b(t.v(t.f("play_count",c,p,0)));t.b("\n"+i)});c.pop()}t.b(' </div> <div class="ui_catalog_btn_rest_frame ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b('" onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "> <div class="ui_catalog_btn_rest"> <div class="ui_catalog_btn_rest_top"> <div class="ui_catalog_btn_other_info"> ');if(t.s(t.f("personal_notes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_has_notes"><i class="fa fa-paperclip"></i></span> ')});c.pop()}t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_ownership ownership_');t.b(t.v(t.f("ownership",c,p,0)));t.b('"> <span class="ui_catalog_btn_ownership_in_collection"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">In collection</span> </span> <span class="ui_catalog_btn_ownership_on_wishlist"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Want to buy</span> </span> <span class="ui_catalog_btn_ownership_used_to_own"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Used to own</span> </span> <span class="ui_catalog_btn_ownership_not_owned"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">&nbsp;</span> </span> </span> </div> <div class="clearfix"></div> </div> <div class="ui_catalog_btn_rest_bottom"> ');if(t.s(t.d("tags.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_catalog_btn_tags"> <span class="ui_catalog_btn_tag_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_btn_taglist"> ');if(t.s(t.f("tags",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated">');t.b(t.v(t.d(".",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="clearfix"></div> </div> </div> </div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_fragment_track_rating_info"> <div class="page_fragment_track_avg_rating ');if(t.s(t.d("rating_info.enough_info",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_enough_info")});c.pop()}t.b(" level_");t.b(t.v(t.d("rating_info.indicator",c,p,0)));t.b('"> ');t.b(t.v(t.d("rating_info.avg_rating.decimal_2",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="page_fragment_track_num_listens"> ');t.b(t.v(t.d("rating_info.num_plays.abbreviated_num",c,p,0)));t.b(" ");t.b("\n"+i);t.b(' </div> <div class="page_fragment_track_num_ratings"> ');t.b(t.v(t.d("rating_info.num_ratings.abbreviated_num.comma",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="page_fragment_track_num_reviews"> ');t.b(t.v(t.d("rating_info.num_reviews.abbreviated_num",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="clearfix"></div> </div> </div> ')});c.pop()}t.b("\n"+i);if(t.s(t.f("has_playlist_delete",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_fragment_track_playlist_delete" onClick="RYMplaylist.removeItem(');t.b(t.v(t.f("index",c,p,0)));t.b(');"><i class="fa fa-minus-circle"></i></div> ')});c.pop()}t.b("\n"+i);t.b(' <div class="page_fragment_track_num_frame"> <div class="page_fragment_track_num">');t.b(t.v(t.f("num",c,p,0)));t.b("</div> ");if(t.s(t.f("sample_data",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_fragment_track_play" onClick="RYMmediaPage.playPreview(\'');t.b(t.v(t.f("preview_url",c,p,0)));t.b("', '");t.b(t.v(t.f("title_rendered",c,p,0)));t.b('\');"><i class="fa fa-caret-right"></i></div> ')});c.pop()}t.b("\n"+i);t.b(' </div> <div class="page_fragment_track_main one_line"> <div class="page_fragment_track_title cl-song ');if(t.s(t.f("is_recommended",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("recommended")});c.pop()}t.b('"> <span class="page_fragment_track_num_small">');t.b(t.v(t.f("num",c,p,0)));t.b("</span> ");if(t.s(t.f("song_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);if(t.s(t.f("for_app",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="song">');t.b(t.t(t.f("title_rendered",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);if(!t.s(t.f("for_app",c,p,1),c,p,1)){t.b(' <a title="[Song');t.b(t.v(t.f("song_id",c,p,0)));t.b(']" ');if(t.s(t.f("index",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' target="_blank" rel="noopener"')});c.pop()}t.b(' class="song" href="/song/');t.b(t.v(t.f("url",c,p,0)));t.b('/">');t.b(t.t(t.f("title_rendered",c,p,0)));t.b("</a> ")}t.b("\n"+i)});c.pop()}if(!t.s(t.f("song_id",c,p,1),c,p,1)){t.b(' <span class="page_release_tracklist_text">');t.b(t.t(t.f("title_rendered",c,p,0)));t.b("</span> ")}t.b("\n"+i);t.b(' <span class="page_fragment_track_title_extra"> ');if(t.s(t.f("artist_name",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="subtext">');t.b(t.v(t.f("artist_name",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b(' <span class="page_fragment_track_duration cl-666">');t.b(t.v(t.d("duration.duration_mmss",c,p,0)));t.b('</span> </span> </div> <div class="page_fragment_track_credits"> ');if(t.s(t.f("credits",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_fragment_track_credit cl-444 ');if(t.s(t.f("guest_info",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.f("is_featured",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" featured ")});c.pop()}if(t.s(t.f("is_guest",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" guest ")});c.pop()}t.b(" ")});c.pop()}t.b('"> ');if(t.s(t.f("guest_info",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);if(t.s(t.f("is_featured",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" <b>feat.</b> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("is_guest",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" <b>with</b> ")});c.pop()}t.b("\n"+i)});c.pop()}if(t.s(t.f("artist",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.d("artist.url",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");if(t.s(t.f("url",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a href="');t.b(t.v(t.f("url",c,p,0)));t.b('" ');if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));t.b("</a>");if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b('<span class="object_loc_original_text cl-888"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}});c.pop()}if(!t.s(t.f("url",c,p,1),c,p,1)){t.b("<span ");if(t.s(t.f("class",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' class="');t.b(t.v(t.f("class",c,p,0)));t.b('" ')});c.pop()}t.b(" ");if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' title="');t.b(t.v(t.f("title",c,p,0)));t.b('" ')});c.pop()}t.b(" >");t.b(t.v(t.f("name_display",c,p,0)));if(t.s(t.f("name_display_original",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="object_loc_original_text"> [');t.b(t.v(t.f("name_display_original",c,p,0)));t.b("]</span>")});c.pop()}t.b("</span>")}t.b("\n"+i)});c.pop()}if(!t.s(t.d("artist.url",c,p,1),c,p,1)){t.b(' <span class="page_fragment_track_credit_artist_name">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")}t.b("\n"+i)});c.pop()}if(t.s(t.d("roles.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_fragment_track_credit_roles"> ');if(t.s(t.f("roles",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_fragment_track_credit_role comma_separated cl-666">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> ")});c.pop()}t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="page_fragment_track_genre_date"> <span class="page_fragment_track_date">');t.b(t.v(t.f("release_year",c,p,0)));t.b('</span> <span class="page_fragment_track_genres"> </span> </div> </div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</li> ")});c.pop()}t.b("\n"+i);t.b(" </ul> ");if(t.s(t.d("tracks.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_playlist_container_end cl-999"> You can add more songs to this playlist after saving it.');t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="ui_playlist_container_overlay"></div> </div> <div class="ui_playlist_main bg-f8f8f8"> <div class="ui_playlist_labels"> <div class="ui_playlist_duration ');if(!t.s(t.f("can_set_name",c,p,1),c,p,1)){t.b("for_app ")}t.b('" id="ui_playlist_duration_');t.b(t.v(t.f("playlist_id",c,p,0)));t.b('"> <span id="ui_playlist_count_value_');t.b(t.v(t.f("playlist_id",c,p,0)));t.b('">');t.b(t.v(t.d("tracks.length",c,p,0)));t.b(" track");if(!t.s(t.d("tracks.length.singular",c,p,1),c,p,1)){t.b("s")}t.b('</span> &bull; <span id="ui_playlist_duration_value_');t.b(t.v(t.f("playlist_id",c,p,0)));t.b('">');t.b(t.v(t.d("total_duration.duration_hhmmss",c,p,0)));t.b("</span> </div> ");if(t.s(t.f("can_set_name",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_playlist_label_name"> Name');t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="ui_playlist_bottom_unsaved"> <div class="ui_playlist_buttons ');if(!t.s(t.f("can_set_name",c,p,1),c,p,1)){t.b("for_app ")}t.b('"> ');if(t.s(t.f("can_set_name",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <a onClick="RYMplaylist.updatePlaylistName();" class="btn flat_btn">Suggest Name</a> ')});c.pop()}t.b("\n"+i);if(t.s(t.f("has_spotify",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.f("can_set_name",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <a onClick="RYMplaylist.save();" class="btn flat_btn"><i class="fa fa-spotify"></i> Save </a> ')});c.pop()}t.b("\n"+i);if(!t.s(t.f("can_set_name",c,p,1),c,p,1)){t.b(' <a onClick="RYMplaylist.save();" class="btn flat_btn for_app"><i class="fa fa-spotify"></i> Open in Spotify </a> ')}t.b("\n"+i)});c.pop()}if(!t.s(t.f("has_spotify",c,p,1),c,p,1)){t.b(' <a data-tiptip="Connect your account to Spotify in Settings to use this feature" class="has_tip btn flat_btn disabled"><i class="fa fa-spotify"></i> Save </a> ')}t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b(' </div> <div class="ui_playlist_name_container"> <div class="ui_playlist_name" ');if(!t.s(t.f("can_set_name",c,p,1),c,p,1)){t.b(' style="display:none" ')}t.b(' > <input id="ui_playlist_name_');t.b(t.v(t.f("playlist_id",c,p,0)));t.b('" value="');t.b(t.v(t.f("playlist_name",c,p,0)));t.b('" style="width:100%" /> </div> </div> <div class="clearfix"></div> </div> <div class="ui_playlist_bottom_saved"> <div class="ui_playlist_buttons"> <a class="btn flat_btn">View playlist</a> ');if(t.s(t.f("has_spotify",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <a class="btn flat_btn"><i class="fa fa-spotify"></i> Save</a> ')});c.pop()}t.b("\n"+i);if(!t.s(t.f("has_spotify",c,p,1),c,p,1)){t.b(' <a data-tiptip="Connect your account to Spotify in Settings to use this feature" class="btn flat_btn disabled"><i class="fa fa-spotify"></i> Save </a> ')}t.b("\n"+i);t.b(' </div> <div class="ui_playlist_name_container"> Your playlist has been saved!');t.b("\n"+i);t.b(' </div> <div class="clearfix"></div> </div> </div>');t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.rating":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("\n"+i);t.b('<div class="ui_rating_system_frame" id="ui_rating_system_frame"> <div class="ui_rating_system ');if(t.s(t.f("edit_mode",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("edit_mode")});c.pop()}t.b('"> <div class="ui_rating_system_btn"> </div> <div class="ui_rating_system_items"> <div class="ui_rating_system_item"> <div class="ui_rating_system_base_item"> <div id="ui_rating_system_base_item_r10" class="ui_rating_system_base_item_main"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r10"><i></i><b></b></span> <span class="ui_rating_system_rating">5.0</span> </div> <div class="clearfix"></div> </div> ');if(t.s(t.f("edit_mode",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <input id="ui_rating_system_edit_r10_1" maxlength="5" class="ui_rating_system_custom_field" placeholder="(lowest)" /> <input id="ui_rating_system_edit_r10_2" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r10_3" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r10_4" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r10_5" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r10_6" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r10_7" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r10_8" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r10_9" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r10_10" maxlength="5" class="ui_rating_system_custom_field" placeholder="(highest)" /> ')});c.pop()}t.b("\n"+i);t.b(' <div id="ui_rating_system_custom_items_r_10" class="ui_rating_system_custom_items"> ');if(t.s(t.f("r_10",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_rating_system_custom_item">');t.b(t.v(t.d(".",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' </div> </div> <div class="ui_rating_system_item"> <div class="ui_rating_system_base_item"> <div id="ui_rating_system_base_item_r9" class="ui_rating_system_base_item_main"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r9"><i></i><b></b></span> <span class="ui_rating_system_rating">4.5</span> </div> <div class="clearfix"></div> </div> ');if(t.s(t.f("edit_mode",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <input id="ui_rating_system_edit_r9_1" maxlength="5" class="ui_rating_system_custom_field" placeholder="(lowest)" /> <input id="ui_rating_system_edit_r9_2" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r9_3" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r9_4" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r9_5" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r9_6" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r9_7" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r9_8" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r9_9" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r9_10" maxlength="5" class="ui_rating_system_custom_field" placeholder="(highest)" /> ')});c.pop()}t.b(" ");t.b("\n"+i);t.b(' <div id="ui_rating_system_custom_items_r_9" class="ui_rating_system_custom_items"> ');if(t.s(t.f("r_9",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_rating_system_custom_item">');t.b(t.v(t.d(".",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' </div> </div> <div class="ui_rating_system_item"> <div class="ui_rating_system_base_item"> <div id="ui_rating_system_base_item_r8" class="ui_rating_system_base_item_main"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r8"><i></i><b></b></span> <span class="ui_rating_system_rating">4.0</span> </div> <div class="clearfix"></div> </div> ');if(t.s(t.f("edit_mode",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <input id="ui_rating_system_edit_r8_1" maxlength="5" class="ui_rating_system_custom_field" placeholder="(lowest)" /> <input id="ui_rating_system_edit_r8_2" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r8_3" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r8_4" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r8_5" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r8_6" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r8_7" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r8_8" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r8_9" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r8_10" maxlength="5" class="ui_rating_system_custom_field" placeholder="(highest)" /> ')});c.pop()}t.b("\n"+i);t.b(' <div id="ui_rating_system_custom_items_r_8" class="ui_rating_system_custom_items"> ');if(t.s(t.f("r_8",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_rating_system_custom_item">');t.b(t.v(t.d(".",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' </div> </div> <div class="ui_rating_system_item"> <div class="ui_rating_system_base_item"> <div id="ui_rating_system_base_item_r7" class="ui_rating_system_base_item_main"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r7"><i></i><b></b></span> <span class="ui_rating_system_rating">3.5</span> </div> <div class="clearfix"></div> </div> ');if(t.s(t.f("edit_mode",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <input id="ui_rating_system_edit_r7_1" maxlength="5" class="ui_rating_system_custom_field" placeholder="(lowest)" /> <input id="ui_rating_system_edit_r7_2" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r7_3" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r7_4" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r7_5" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r7_6" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r7_7" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r7_8" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r7_9" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r7_10" maxlength="5" class="ui_rating_system_custom_field" placeholder="(highest)" /> ')});c.pop()}t.b("\n"+i);t.b(' <div id="ui_rating_system_custom_items_r_7" class="ui_rating_system_custom_items"> ');if(t.s(t.f("r_7",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_rating_system_custom_item">');t.b(t.v(t.d(".",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' </div> </div> <div class="ui_rating_system_item"> <div class="ui_rating_system_base_item"> <div id="ui_rating_system_base_item_r6" class="ui_rating_system_base_item_main"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r6"><i></i><b></b></span> <span class="ui_rating_system_rating">3.0</span> </div> <div class="clearfix"></div> </div> ');if(t.s(t.f("edit_mode",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <input id="ui_rating_system_edit_r6_1" maxlength="5" class="ui_rating_system_custom_field" placeholder="(lowest)" /> <input id="ui_rating_system_edit_r6_2" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r6_3" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r6_4" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r6_5" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r6_6" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r6_7" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r6_8" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r6_9" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r6_10" maxlength="5" class="ui_rating_system_custom_field" placeholder="(highest)" /> ')});c.pop()}t.b("\n"+i);t.b(' <div id="ui_rating_system_custom_items_r_6" class="ui_rating_system_custom_items"> ');if(t.s(t.f("r_6",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_rating_system_custom_item">');t.b(t.v(t.d(".",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' </div> </div> <div class="ui_rating_system_item"> <div class="ui_rating_system_base_item"> <div id="ui_rating_system_base_item_r5" class="ui_rating_system_base_item_main"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r5"><i></i><b></b></span> <span class="ui_rating_system_rating">2.5</span> </div> <div class="clearfix"></div> </div> ');if(t.s(t.f("edit_mode",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <input id="ui_rating_system_edit_r5_1" maxlength="5" class="ui_rating_system_custom_field" placeholder="(lowest)" /> <input id="ui_rating_system_edit_r5_2" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r5_3" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r5_4" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r5_5" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r5_6" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r5_7" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r5_8" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r5_9" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r5_10" maxlength="5" class="ui_rating_system_custom_field" placeholder="(highest)" /> ')});c.pop()}t.b("\n"+i);t.b(' <div id="ui_rating_system_custom_items_r_5" class="ui_rating_system_custom_items"> ');if(t.s(t.f("r_5",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_rating_system_custom_item">');t.b(t.v(t.d(".",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' </div> </div> <div class="ui_rating_system_item"> <div class="ui_rating_system_base_item"> <div id="ui_rating_system_base_item_r4" class="ui_rating_system_base_item_main"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r4"><i></i><b></b></span> <span class="ui_rating_system_rating">2.0</span> </div> <div class="clearfix"></div> </div> ');if(t.s(t.f("edit_mode",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <input id="ui_rating_system_edit_r4_1" maxlength="5" class="ui_rating_system_custom_field" placeholder="(lowest)" /> <input id="ui_rating_system_edit_r4_2" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r4_3" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r4_4" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r4_5" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r4_6" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r4_7" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r4_8" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r4_9" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r4_10" maxlength="5" class="ui_rating_system_custom_field" placeholder="(highest)" /> ')});c.pop()}t.b("\n"+i);t.b(' <div id="ui_rating_system_custom_items_r_4" class="ui_rating_system_custom_items"> ');if(t.s(t.f("r_4",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_rating_system_custom_item">');t.b(t.v(t.d(".",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' </div> </div> <div class="ui_rating_system_item"> <div class="ui_rating_system_base_item"> <div id="ui_rating_system_base_item_r3" class="ui_rating_system_base_item_main"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r3"><i></i><b></b></span> <span class="ui_rating_system_rating">1.5</span> </div> <div class="clearfix"></div> </div> ');if(t.s(t.f("edit_mode",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <input id="ui_rating_system_edit_r3_1" maxlength="5" class="ui_rating_system_custom_field" placeholder="(lowest)" /> <input id="ui_rating_system_edit_r3_2" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r3_3" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r3_4" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r3_5" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r3_6" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r3_7" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r3_8" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r3_9" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r3_10" maxlength="5" class="ui_rating_system_custom_field" placeholder="(highest)" /> ')});c.pop()}t.b("\n"+i);t.b(' <div id="ui_rating_system_custom_items_r_3" class="ui_rating_system_custom_items"> ');if(t.s(t.f("r_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_rating_system_custom_item">');t.b(t.v(t.d(".",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' </div> </div> <div class="ui_rating_system_item"> <div class="ui_rating_system_base_item"> <div id="ui_rating_system_base_item_r2" class="ui_rating_system_base_item_main"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r2"><i></i><b></b></span> <span class="ui_rating_system_rating">1.0</span> </div> <div class="clearfix"></div> </div> ');if(t.s(t.f("edit_mode",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <input id="ui_rating_system_edit_r2_1" maxlength="5" class="ui_rating_system_custom_field" placeholder="(lowest)" /> <input id="ui_rating_system_edit_r2_2" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r2_3" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r2_4" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r2_5" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r2_6" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r2_7" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r2_8" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r2_9" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r2_10" maxlength="5" class="ui_rating_system_custom_field" placeholder="(highest)" /> ')});c.pop()}t.b("\n"+i);t.b(' <div id="ui_rating_system_custom_items_r_2" class="ui_rating_system_custom_items"> ');if(t.s(t.f("r_2",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_rating_system_custom_item">');t.b(t.v(t.d(".",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' </div> </div> <div class="ui_rating_system_item"> <div class="ui_rating_system_base_item"> <div id="ui_rating_system_base_item_r1" class="ui_rating_system_base_item_main"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r1"><i></i><b></b></span> <span class="ui_rating_system_rating">0.5</span> </div> <div class="clearfix"></div> </div> ');if(t.s(t.f("edit_mode",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <input id="ui_rating_system_edit_r1_1" maxlength="5" class="ui_rating_system_custom_field" placeholder="(lowest)" /> <input id="ui_rating_system_edit_r1_2" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r1_3" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r1_4" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r1_5" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r1_6" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r1_7" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r1_8" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r1_9" maxlength="5" class="ui_rating_system_custom_field" /> <input id="ui_rating_system_edit_r1_10" maxlength="5" class="ui_rating_system_custom_field" placeholder="(highest)" /> ')});c.pop()}t.b("\n"+i);t.b(' <div id="ui_rating_system_custom_items_r_1" class="ui_rating_system_custom_items"> ');if(t.s(t.f("r_1",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_rating_system_custom_item">');t.b(t.v(t.d(".",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' </div> </div> </div> <div class="ui_rating_system_item zero_rating"> <div id="ui_rating_system_base_item_r0" class="ui_rating_system_base_item"> <div class="ui_rating_system_base_item_main"> <span class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(' w32 r0"><i></i><b></b></span> <span class="ui_rating_system_rating">Not rated</span> </div> <div class="clearfix"></div> </div> </div> </div>');t.b("\n"+i);t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}}),"ui.review":new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b(' <div class="ui_review ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_new")});c.pop()}t.b(" show_all ");t.b("\n"+i);if(!t.s(t.f("is_preview",c,p,1),c,p,1)){if(!t.s(t.f("can_edit",c,p,1),c,p,1)){t.b(" page_section_dynamic_fade height_mobile_20em");t.b("\n"+i)}}if(t.s(t.f("edit_mode",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("edit_mode")});c.pop()}t.b(' " id="ui_review_');t.b(t.v(t.f("review_id",c,p,0)));t.b('">');t.b("\n"+i);t.b('<input type="hidden" id="ui_review_object_');t.b(t.v(t.f("review_id",c,p,0)));t.b('" value="');t.b(t.v(t.f("object",c,p,0)));t.b('" />');t.b("\n"+i);t.b('<input type="hidden" id="ui_review_assoc_id_');t.b(t.v(t.f("review_id",c,p,0)));t.b('" value="');t.b(t.v(t.f("assoc_id",c,p,0)));t.b('" />');t.b("\n"+i);t.b('<input type="hidden" id="ui_review_sec_id_');t.b(t.v(t.f("review_id",c,p,0)));t.b('" value="');t.b(t.v(t.f("sec_id",c,p,0)));t.b('" /> ');if(t.s(t.f("object_data",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_review_object">');t.b("\n"+i);if(t.s(t.f("image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="ui_review_object_image" style="background-image:url(\'');t.b(t.v(t.d("image.url_150",c,p,0)));t.b("');\"></div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="ui_review_object_info"> <div> <div class="ui_review_object_label"> Review:');t.b("\n"+i);t.b(' </div> <div class="ui_review_object_label_title"> <a class="');t.b(t.v(t.d("title.class",c,p,0)));t.b('" href="');t.b(t.v(t.d("title.url",c,p,0)));t.b('">');t.b(t.t(t.d("title.name",c,p,0)));t.b('</a> </div> </div> <div class="ui_review_object_label_supplementary"> ');t.b(t.t(t.f("supplementary_info_rendered",c,p,0)));t.b("\n"+i);t.b(' </div> </div> <div class="clearfix"></div> </div> ')});c.pop()}t.b("\n"+i);if(!t.s(t.f("preview",c,p,1),c,p,1)){t.b(' <div class="ui_review_title_edit"> <div class="ui_review_edit_label">Title</div> <input onFocus="RYMobjectPage.highlightReviewDocSection(\'title\');" id="ui_review_title_');t.b(t.v(t.f("review_id",c,p,0)));t.b('"class="ui_review_title_edit_input" placeholder="Title" value="');t.b(t.t(t.f("title",c,p,0)));t.b('" /> </div>');t.b("\n"+i)}t.b(' <div class="ui_review_user_info"> ');if(t.s(t.d("author.image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_review_user_image" style="background-image:url(\'');t.b(t.v(t.d("author.image.url_150",c,p,0)));t.b("')\"></div> ")});c.pop()}t.b("\n"+i);if(!t.s(t.d("author.image",c,p,1),c,p,1)){t.b(' <div class="ui_review_user_no_image" style="background-position: ');t.b(t.v(t.d("author.noimg.x",c,p,0)));t.b("px ");t.b(t.v(t.d("author.noimg.y",c,p,0)));t.b("px; filter:saturate(");t.b(t.v(t.d("author.noimg.sat",c,p,0)));t.b("); -webkit-filter:saturate(");t.b(t.v(t.d("author.noimg.sat",c,p,0)));t.b(');"></div> ')}t.b("\n"+i);t.b(' <div class="ui_review_user_info_line"> <a class="user" href="/user/');t.b(t.v(t.d("author.username",c,p,0)));t.b('">');t.b(t.v(t.d("author.username",c,p,0)));t.b('</a> <a class="ui_review_user_info_date timeago longform" href="/');t.b(t.v(t.f("object",c,p,0)));t.b("/");t.b(t.v(t.f("object_url",c,p,0)));t.b("/review/");t.b(t.v(t.d("author.username",c,p,0)));t.b("/");t.b(t.v(t.f("review_id",c,p,0)));t.b('/" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b(" ");t.b(t.v(t.f("language",c,p,0)));t.b('</a></div> <div class="clearfix"></div> </div> <div class="ui_review_title_rating_line"> ');if(t.s(t.f("title",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_review_title">');t.b(t.t(t.f("title",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="clearfix"></div> <div class="ui_review_expanded"> <div onClick="$(\'#ui_review_');t.b(t.v(t.f("review_id",c,p,0)));t.b('\').addClass(\'show_all\')" class="ui_review_overlay"></div> <div class="ui_review_body">');t.b(t.t(t.f("body_rendered",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="ui_review_body_edit"> <div class="ui_review_edit_label">Body</div> ');if(t.s(t.f("body",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b('<div class="ui_textarea" id="ui_textarea_frame_');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-has-bold="false"');t.b("\n"+i);t.b(' data-id="');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' > <div class="ui_textarea_toolbar" id="ui_textarea_toolbar_');t.b(t.v(t.f("id",c,p,0)));t.b('"> <div class="ui_textarea_formatting"> <div id="ui_textarea_tool_bold_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tiptip="Bold" class="has_tip ui_textarea_formatting_btn"><i class="fa fa-bold"></i></div> <div id="ui_textarea_tool_italic_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tiptip="Italic" class="has_tip ui_textarea_formatting_btn"><i class="fa fa-italic"></i></div> <div id="ui_textarea_tool_image_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tiptip="Upload/embed image" class="has_tip ui_textarea_formatting_btn"><i class="fa fa-image"></i></div> <div id="ui_textarea_tool_embed_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tiptip="Embed videos or music" class="has_tip ui_textarea_formatting_btn"><i class="fa fa-video-camera"></i></div> <div id="ui_textarea_tool_link_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tiptip="Insert link" class="has_tip ui_textarea_formatting_btn"><i class="fa fa-link"></i></div> <div id="ui_textarea_tool_tips_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tiptip="Tips on formatting text" class="has_tip ui_textarea_formatting_tips">tips</div> </div> <div class="ui_chooser_frame" id="ui_chooser_frame_textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('"> <div class="ui_chooser" id="ui_chooser_textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-id="textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-allowed-types = "all"');t.b("\n"+i);t.b(' data-select-first-result = "true"');t.b("\n"+i);t.b(' data-select-action = "insertShortcut"');t.b("\n"+i);t.b(' data-target = "');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' > <i class="fa fa-search"></i> <div class="ui_chooser_input_frame"> <input id="ui_chooser_input_textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-id="textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('" placeholder="search music..."> </div> <div class="ui_chooser_type" id="ui_chooser_type_textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('"> <span class="ui_chooser_type_text" id="ui_chooser_type_text_textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('"></span> <i class="fa fa-caret-down"></i> <select onFocus="" data-id="textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('" id="ui_chooser_select_textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('"> </select> </div> </div> </div> <div id="ui_textarea_help_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_textarea_help"> <b>Formatting</b><br /> [b]text[/b] - <b>bold</b> <br /> [i]text[/i] - <i>italic</i> <br /> [s]strikethrough[/s] - <s>strikethrough</s> <br /> [tt]text[/tt] - <tt>fixed-width type</tt> <br /> [color red]text[/color] - <span style="color:red">colored text</span> (<a target="_blank" rel="nofollow noopener" href="https://en.wikipedia.org/wiki/Web_colors#X11_color_names">full list</a>) <br /> [spoiler]text[/spoiler] - <span class="spoiler"> Text hidden with spoiler cover </span> <br /> [https://www.example.com/page/,Link to another site] - <a>Link to another site</a><br /> <br /> <b>Linking</b> <br /> When you mention an album, artist, film, game, label, etc - it\'s recommended to link to the item the first time you mention it. Doing so will make it easier to search for your post and give it more visibility. To link an item, use the search box above, or find the shortcut that appears on the page that you want to link. You can customize the link name of shortcuts by using the format [Artist12345,Custom Name].');t.b("\n"+i);t.b(' </div> <div id="ui_textarea_image_');t.b(t.v(t.f("id",c,p,0)));t.b("\" class=\"ui_textarea_image\"> <div class=\"ui_textarea_image_buttons\"> <a onclick=\"rym.request.post('UploaderLaunch', {schema:'discussion_image', assoc_id:-1, callback_page:'textarea', callback_id:'");t.b(t.v(t.f("id",c,p,0)));t.b('\'}, null, \'script\');" class="ui_textarea_image_btn selected">Upload image</a> <a class="ui_textarea_image_btn">Embed existing image</a> </div> </div> <div id="ui_textarea_link_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_textarea_link"> <label> URL/address of page<br /> <input id="ui_textarea_link_url_');t.b(t.v(t.f("id",c,p,0)));t.b('" placeholder="Example: https://www.example.com/page/" class="ui_textarea_link_input"> </label> <br /> <label> Name your link<br /> <input id="ui_textarea_link_name_');t.b(t.v(t.f("id",c,p,0)));t.b('" placeholder="" class="ui_textarea_link_input"> </label> <br /> <a id="ui_textarea_link_insert_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_textarea_link_insert">Insert Link</a> <br /> <div id="ui_textarea_link_error_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_textarea_embed_error error"></div> </div> <div id="ui_textarea_embed_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_textarea_embed"> <div class="ui_textarea_embed_instructions"> Paste the address (or embed code) below and click "embed". ');t.b("\n"+i);t.b(" <br /> <b>Supported</b>: ");t.b("\n"+i);t.b(' <a target="_blank" rel="noopener nofollow" href="https://www.youtube.com/">YouTube</a>, ');t.b("\n"+i);t.b(' <a target="_blank" rel="noopener nofollow" href="https://soundcloud.com/">Soundcloud</a>, ');t.b("\n"+i);t.b(' <a target="_blank" rel="noopener nofollow" href="https://bandcamp.com/">Bandcamp</a>, ');t.b("\n"+i);t.b(' <a target="_blank" rel="noopener nofollow" href="https://vimeo.com/">Vimeo</a>, ');t.b("\n"+i);t.b(' <a target="_blank" rel="noopener nofollow" href="https://www.dailymotion.com/">Dailymotion</a> </div> <label class="ui_textarea_embed_label" for="ui_textarea_embed_');t.b(t.v(t.f("id",c,p,0)));t.b('"> <input class="ui_textarea_embed_input" placeholder="Ex. https://youtube.com/watch?v=WKVYO-alU4" id="ui_textarea_embed_input_');t.b(t.v(t.f("id",c,p,0)));t.b('" /> </label> <a id="ui_textarea_embed_insert_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_textarea_embed_input_link"> Embed</a> <div id="ui_textarea_embed_error_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_textarea_embed_error error"></div> </div> <div class="clearfix"></div> </div> <textarea ');t.b("\n"+i);t.b(' placeholder="');t.b(t.v(t.f("placeholder",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onFocus="');t.b(t.t(t.f("event_focus",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onKeyUp="');t.b(t.t(t.f("event_keyup",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onKeyDown="');t.b(t.t(t.f("event_keydown",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onChange="');t.b(t.t(t.f("event_change",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onInput="');t.b(t.t(t.f("event_input",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onBlur="');t.b(t.v(t.f("event_blur",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-autoresize="');t.b(t.v(t.f("autoresize",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-initial-compose-height ="');t.b(t.v(t.f("initial_compose_height",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-max-compose-height ="');t.b(t.v(t.f("max_compose_height",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-id ="');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' name="');t.b(t.v(t.f("name",c,p,0)));t.b('"');t.b("\n"+i);t.b(' id="');t.b(t.v(t.f("id",c,p,0)));t.b('">');t.b(t.t(t.f("value",c,p,0)));t.b("</textarea>");t.b("\n"+i);t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' </div> <div class="ui_review_catalog"> ');if(t.s(t.f("catalog",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" ");t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b('<div data-catalog="');t.b(t.v(t.d("data.stringify",c,p,0)));t.b('" class="ui_catalog_btn_display ui_catalog_id_');t.b(t.v(t.f("catalog_id",c,p,0)));t.b(" ui_catalog_btn_");t.b(t.v(t.f("object",c,p,0)));t.b(" ");if(t.s(t.f("is_owner",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b(' " ');t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b(' id="');if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("catalog_id",c,p,0)))});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b("ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new")}t.b('"');t.b("\n"+i);t.b(' data-component="');t.b(t.v(t.f("component",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "');t.b("\n"+i);t.b(' > <div class="ui_catalog_btn_extended"> ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_item_info_new" > <span class="page_catalog_item_new_first">Rate / catalog</span> <span class="page_catalog_item_new_more">Rate / catalog another ');if(t.s(t.f("object_release",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("issue")});c.pop()}if(t.s(t.f("object_game",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("release")});c.pop()}t.b("</span> </div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){if(t.s(t.d("author.image_url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_user_image" style="background-image:url(\'');t.b(t.v(t.d("author.image_url_75",c,p,0)));t.b("')\"></div> ")});c.pop()}t.b("\n"+i);if(!t.s(t.d("author.image_url_75",c,p,1),c,p,1)){t.b(' <div class="page_catalog_user_no_image" style="background-position: ');t.b(t.v(t.d("author.no_img_template.x",c,p,0)));t.b("px ");t.b(t.v(t.d("author.no_img_template.y",c,p,0)));t.b("px; filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b("); -webkit-filter:saturate(");t.b(t.v(t.d("author.no_img_template.sat",c,p,0)));t.b(');"></div> ')}t.b("\n"+i)});c.pop()}if(t.s(t.f("object_image",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_object_image ');if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_tip delayed_background_img")});c.pop()}t.b('" ');if(t.s(t.f("url_300",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-tiptip=\"<img src='");t.b(t.v(t.f("url_300",c,p,0)));t.b("'>\"")});c.pop()}t.b(" ");if(t.s(t.f("url_75",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("data-delayloadurl=\"url('");t.b(t.v(t.f("url_75",c,p,0)));t.b("')\"")});c.pop()}t.b("></div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_line"> <div class="page_catalog_item_info_top"> ');if(t.s(t.f("author",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="page_catalog_item_author_link"> <a class="user" href="/user/');t.b(t.v(t.d("author.username",c,p,0)));t.b('">');t.b(t.v(t.d("author.username",c,p,0)));t.b("</a> </span> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("title_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <span class="page_catalog_item_info_title">');t.b(t.v(t.f("title_display",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(' <span class="page_catalog_item_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> <div class="clearfix"></div> ');if(t.s(t.f("issue_info_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="page_catalog_issue_info">');t.b(t.v(t.f("issue_info_display",c,p,0)));t.b("</div> ")});c.pop()}t.b("\n"+i);if(t.s(t.f("labels",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(' <div class="page_catalog_item_label_info"> ');if(t.s(t.f("formats",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_format bg-ddd cl-777 ');if(t.s(t.f("format_overridden",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("format_overridden")});c.pop()}t.b('">');t.b(t.v(t.f("name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b(" ");if(t.s(t.f("name_short_display",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<a class="label" href="/label/');t.b(t.v(t.f("label_url",c,p,0)));t.b('/">');t.b(t.v(t.f("name_short_display",c,p,0)));t.b("</a>");if(t.s(t.d("catalog_nos.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(":")});c.pop()}t.b(" ")});c.pop()}if(t.s(t.f("catalog_nos",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b('<span class="collection_catalog_no">');t.b(t.v(t.f("cat_name_display",c,p,0)));t.b("</span>")});c.pop()}t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="page_catalog_item_info_date"> <span class="page_catalog_item_info_date timeago longform" title="');t.b(t.v(t.f("ts",c,p,0)));t.b('">');t.b(t.v(t.f("ts",c,p,0)));t.b('</span> </div> </div> </div> <div class="ui_catalog_btn_rating ');if(t.s(t.d("rating_system_label.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("rating_label_is_long")});c.pop()}t.b(" ");if(t.s(t.d("rating_system_label_outof.has_expand_3",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("outof_is_long")});c.pop()}t.b('"> <div class="ui_catalog_btn_rating_icon"> <div class="scale scale_');t.b(t.v(t.f("object",c,p,0)));t.b(" w32 r");if(t.s(t.f("rating",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("rating",c,p,0)))});c.pop()}if(!t.s(t.f("rating",c,p,1),c,p,1)){t.b("0")}t.b('"><i></i><b></b> </div> </div> <div class="ui_catalog_btn_rating_text ');if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b("base_rating")}t.b('"> <span class="ui_catalog_btn_rating_text_has_rating ');t.b("\n"+i);t.b(' "> ');if(t.s(t.f("rating_system_label",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_system_label",c,p,0)));t.b("</span> ");if(t.s(t.f("rating_system_label_outof",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_rating_outof">/');t.b(t.v(t.f("rating_system_label_outof",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i)});c.pop()}if(!t.s(t.f("rating_system_label",c,p,1),c,p,1)){t.b(' <span class="ui_catalog_btn_rating_text_rating">');t.b(t.v(t.f("rating_base_num",c,p,0)));t.b("</span> ")}t.b("\n"+i);t.b(' </span> </div> </div> <div class="media_timeline_btn ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("has_count")});c.pop()}t.b(" ");t.b(t.v(t.f("play_status",c,p,0)));t.b('"> ');if(t.s(t.f("play_count",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b(t.v(t.f("play_count",c,p,0)));t.b("\n"+i)});c.pop()}t.b(' </div> <div class="ui_catalog_btn_rest_frame ');if(t.s(t.f("is_new",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("is_owner")});c.pop()}t.b('" onClick="');t.b("\n"+i);if(t.s(t.f("catalog_id",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b(" RYMcataloger.init('");t.b(t.v(t.f("component",c,p,0)));t.b("', ");t.b(t.v(t.f("catalog_id",c,p,0)));t.b(");");t.b("\n"+i)});c.pop()}if(!t.s(t.f("catalog_id",c,p,1),c,p,1)){t.b(" RYMcataloger.initNew('");t.b(t.v(t.f("component",c,p,0)));t.b("', 'ui_catalog_btn_display_");t.b(t.v(t.f("component",c,p,0)));t.b("_");t.b(t.v(t.f("object",c,p,0)));t.b("_");t.b(t.v(t.f("assoc_id",c,p,0)));t.b("_");t.b(t.v(t.f("sec_id",c,p,0)));t.b("_new');");t.b("\n"+i)}t.b(' "> <div class="ui_catalog_btn_rest"> <div class="ui_catalog_btn_rest_top"> <div class="ui_catalog_btn_other_info"> ');if(t.s(t.f("personal_notes",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_has_notes"><i class="fa fa-paperclip"></i></span> ')});c.pop()}t.b("\n"+i);t.b(' <span class="ui_catalog_btn_collection_ownership ownership_');t.b(t.v(t.f("ownership",c,p,0)));t.b('"> <span class="ui_catalog_btn_ownership_in_collection"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">In collection</span> </span> <span class="ui_catalog_btn_ownership_on_wishlist"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Want to buy</span> </span> <span class="ui_catalog_btn_ownership_used_to_own"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">Used to own</span> </span> <span class="ui_catalog_btn_ownership_not_owned"> <span class="ui_catalog_btn_ownership_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_ownership_label">&nbsp;</span> </span> </span> </div> <div class="clearfix"></div> </div> <div class="ui_catalog_btn_rest_bottom"> ');if(t.s(t.d("tags.length",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_catalog_btn_tags"> <span class="ui_catalog_btn_tag_icon"><i class="fa fa-circle"></i></span> <span class="ui_catalog_btn_taglist"> ');if(t.s(t.f("tags",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <span class="comma_separated">');t.b(t.v(t.d(".",c,p,0)));t.b("</span> ")});c.pop()}t.b("\n"+i);t.b(" </span> </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="clearfix"></div> </div> </div> </div> <div class="clearfix"></div>');t.b("\n"+i);t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="clearfix"></div> </div> <div class="ui_supplement"> <div class="ui_review_supplement_body"> ');t.b(t.t(t.f("supplement_rendered",c,p,0)));t.b("\n"+i);t.b(' </div> <div class="ui_review_supplement_edit"> <div class="ui_review_edit_label">Supplement</div> ');if(t.s(t.f("supplement",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b('<div class="ui_textarea" id="ui_textarea_frame_');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-has-bold="false"');t.b("\n"+i);t.b(' data-id="');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' > <div class="ui_textarea_toolbar" id="ui_textarea_toolbar_');t.b(t.v(t.f("id",c,p,0)));t.b('"> <div class="ui_textarea_formatting"> <div id="ui_textarea_tool_bold_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tiptip="Bold" class="has_tip ui_textarea_formatting_btn"><i class="fa fa-bold"></i></div> <div id="ui_textarea_tool_italic_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tiptip="Italic" class="has_tip ui_textarea_formatting_btn"><i class="fa fa-italic"></i></div> <div id="ui_textarea_tool_image_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tiptip="Upload/embed image" class="has_tip ui_textarea_formatting_btn"><i class="fa fa-image"></i></div> <div id="ui_textarea_tool_embed_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tiptip="Embed videos or music" class="has_tip ui_textarea_formatting_btn"><i class="fa fa-video-camera"></i></div> <div id="ui_textarea_tool_link_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tiptip="Insert link" class="has_tip ui_textarea_formatting_btn"><i class="fa fa-link"></i></div> <div id="ui_textarea_tool_tips_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-tiptip="Tips on formatting text" class="has_tip ui_textarea_formatting_tips">tips</div> </div> <div class="ui_chooser_frame" id="ui_chooser_frame_textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('"> <div class="ui_chooser" id="ui_chooser_textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-id="textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-allowed-types = "all"');t.b("\n"+i);t.b(' data-select-first-result = "true"');t.b("\n"+i);t.b(' data-select-action = "insertShortcut"');t.b("\n"+i);t.b(' data-target = "');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' > <i class="fa fa-search"></i> <div class="ui_chooser_input_frame"> <input id="ui_chooser_input_textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('" data-id="textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('" placeholder="search music..."> </div> <div class="ui_chooser_type" id="ui_chooser_type_textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('"> <span class="ui_chooser_type_text" id="ui_chooser_type_text_textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('"></span> <i class="fa fa-caret-down"></i> <select onFocus="" data-id="textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('" id="ui_chooser_select_textarea_');t.b(t.v(t.f("id",c,p,0)));t.b('"> </select> </div> </div> </div> <div id="ui_textarea_help_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_textarea_help"> <b>Formatting</b><br /> [b]text[/b] - <b>bold</b> <br /> [i]text[/i] - <i>italic</i> <br /> [s]strikethrough[/s] - <s>strikethrough</s> <br /> [tt]text[/tt] - <tt>fixed-width type</tt> <br /> [color red]text[/color] - <span style="color:red">colored text</span> (<a target="_blank" rel="nofollow noopener" href="https://en.wikipedia.org/wiki/Web_colors#X11_color_names">full list</a>) <br /> [spoiler]text[/spoiler] - <span class="spoiler"> Text hidden with spoiler cover </span> <br /> [https://www.example.com/page/,Link to another site] - <a>Link to another site</a><br /> <br /> <b>Linking</b> <br /> When you mention an album, artist, film, game, label, etc - it\'s recommended to link to the item the first time you mention it. Doing so will make it easier to search for your post and give it more visibility. To link an item, use the search box above, or find the shortcut that appears on the page that you want to link. You can customize the link name of shortcuts by using the format [Artist12345,Custom Name].');t.b("\n"+i);t.b(' </div> <div id="ui_textarea_image_');t.b(t.v(t.f("id",c,p,0)));t.b("\" class=\"ui_textarea_image\"> <div class=\"ui_textarea_image_buttons\"> <a onclick=\"rym.request.post('UploaderLaunch', {schema:'discussion_image', assoc_id:-1, callback_page:'textarea', callback_id:'");t.b(t.v(t.f("id",c,p,0)));t.b('\'}, null, \'script\');" class="ui_textarea_image_btn selected">Upload image</a> <a class="ui_textarea_image_btn">Embed existing image</a> </div> </div> <div id="ui_textarea_link_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_textarea_link"> <label> URL/address of page<br /> <input id="ui_textarea_link_url_');t.b(t.v(t.f("id",c,p,0)));t.b('" placeholder="Example: https://www.example.com/page/" class="ui_textarea_link_input"> </label> <br /> <label> Name your link<br /> <input id="ui_textarea_link_name_');t.b(t.v(t.f("id",c,p,0)));t.b('" placeholder="" class="ui_textarea_link_input"> </label> <br /> <a id="ui_textarea_link_insert_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_textarea_link_insert">Insert Link</a> <br /> <div id="ui_textarea_link_error_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_textarea_embed_error error"></div> </div> <div id="ui_textarea_embed_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_textarea_embed"> <div class="ui_textarea_embed_instructions"> Paste the address (or embed code) below and click "embed". ');t.b("\n"+i);t.b(" <br /> <b>Supported</b>: ");t.b("\n"+i);t.b(' <a target="_blank" rel="noopener nofollow" href="https://www.youtube.com/">YouTube</a>, ');t.b("\n"+i);t.b(' <a target="_blank" rel="noopener nofollow" href="https://soundcloud.com/">Soundcloud</a>, ');t.b("\n"+i);t.b(' <a target="_blank" rel="noopener nofollow" href="https://bandcamp.com/">Bandcamp</a>, ');t.b("\n"+i);t.b(' <a target="_blank" rel="noopener nofollow" href="https://vimeo.com/">Vimeo</a>, ');t.b("\n"+i);t.b(' <a target="_blank" rel="noopener nofollow" href="https://www.dailymotion.com/">Dailymotion</a> </div> <label class="ui_textarea_embed_label" for="ui_textarea_embed_');t.b(t.v(t.f("id",c,p,0)));t.b('"> <input class="ui_textarea_embed_input" placeholder="Ex. https://youtube.com/watch?v=WKVYO-alU4" id="ui_textarea_embed_input_');t.b(t.v(t.f("id",c,p,0)));t.b('" /> </label> <a id="ui_textarea_embed_insert_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_textarea_embed_input_link"> Embed</a> <div id="ui_textarea_embed_error_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_textarea_embed_error error"></div> </div> <div class="clearfix"></div> </div> <textarea ');t.b("\n"+i);t.b(' placeholder="');t.b(t.v(t.f("placeholder",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onFocus="');t.b(t.t(t.f("event_focus",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onKeyUp="');t.b(t.t(t.f("event_keyup",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onKeyDown="');t.b(t.t(t.f("event_keydown",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onChange="');t.b(t.t(t.f("event_change",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onInput="');t.b(t.t(t.f("event_input",c,p,0)));t.b('"');t.b("\n"+i);t.b(' onBlur="');t.b(t.v(t.f("event_blur",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-autoresize="');t.b(t.v(t.f("autoresize",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-initial-compose-height ="');t.b(t.v(t.f("initial_compose_height",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-max-compose-height ="');t.b(t.v(t.f("max_compose_height",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-id ="');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' name="');t.b(t.v(t.f("name",c,p,0)));t.b('"');t.b("\n"+i);t.b(' id="');t.b(t.v(t.f("id",c,p,0)));t.b('">');t.b(t.t(t.f("value",c,p,0)));t.b("</textarea>");t.b("\n"+i);t.b("</div> ")});c.pop()}t.b("\n"+i);t.b("  </div> ");if(t.s(t.f("supplement_rendered",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_supplement_header" onClick="$(\'#ui_review_');t.b(t.v(t.f("review_id",c,p,0)));t.b('\').toggleClass(\'show_supplement\');"> <div class="ui_supplement_show_more">Show more <i class="fa fa-caret-down"></i></div> <div class="ui_supplement_show_less">Show less <i class="fa fa-caret-up"></i></div> </div> ')});c.pop()}t.b("\n"+i);t.b(" </div> ");if(t.s(t.f("attribution",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_review_attribution"> <b>Attribution:</b> ');t.b(t.t(t.f("attribution_rendered",c,p,0)));t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="ui_review_attribution_edit"> <div class="ui_review_edit_label">Attribution</div> <input onFocus="RYMobjectPage.highlightReviewDocSection(\'attribution\');" id="ui_review_attribution_');t.b(t.v(t.f("review_id",c,p,0)));t.b('" class="ui_review_attribution_edit_input" placeholder="https://www.example.com" value="');t.b(t.t(t.f("attribution",c,p,0)));t.b('" /> </div> <div class="ui_review_publish_language"> ');if(t.s(t.f("can_edit",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_review_language_edit"> <div class="ui_review_edit_label">Language</div> <div class="ui_review_language_item"> ');if(t.s(t.f("language_ui",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b('<div id="ui_picker_frame_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_picker_frame"> <input type="hidden" ');t.b("\n"+i);t.b(' id="');t.b(t.v(t.f("id",c,p,0)));t.b('" ');t.b("\n"+i);t.b(' name="');t.b(t.v(t.f("id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' class="ui_picker"');t.b("\n"+i);t.b(' data-initialized="false"');t.b("\n"+i);t.b(' data-picker-type="');t.b(t.v(t.f("picker_type",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-onchange="');t.b(t.v(t.f("onchange",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-object="');t.b(t.v(t.f("object",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-assoc-id="');t.b(t.v(t.f("assoc_id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-sec-id="');t.b(t.v(t.f("sec_id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-status="not_loaded"');t.b("\n"+i);t.b(' data-callback="');t.b(t.v(t.f("callback",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-save-action="');t.b(t.v(t.f("save_action",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-selection-mode="');t.b(t.v(t.f("selection_mode",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-show-all-results="');t.b(t.v(t.f("show_all_results",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-value-mode="');t.b(t.v(t.f("value_mode",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-allow-freeform="');t.b(t.v(t.f("allow_freeform",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-bracketed-aka="');t.b(t.v(t.f("bracketed_aka",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-filter-by-id="');t.b(t.v(t.f("filter_by_id",c,p,0)));t.b('"');t.b("\n"+i);t.b(' value="');t.b(t.v(t.f("value",c,p,0)));t.b('"');t.b("\n"+i);t.b(' /> <div id="ui_picker_items_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_picker_items"> </div> <div id="ui_picker_input_frame_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_picker_input_frame"> <input id="ui_picker_input_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_picker_input" autocomplete="off" /> <div id="ui_picker_input_clear_');t.b(t.v(t.f("id",c,p,0)));t.b('" class="ui_picker_input_clear" onClick="RYMpicker.clear($(\'#');t.b(t.v(t.f("id",c,p,0)));t.b('\'));"><i class="fa fa-times-circle"></i></div> </div> <div style="position:relative;width:100%"> <div class="ui_picker_list" id="ui_picker_list_');t.b(t.v(t.f("id",c,p,0)));t.b('"> </div> </div>');t.b("\n"+i);t.b("</div> ")});c.pop()}t.b("\n"+i);t.b(" </div> </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="ui_review_publish_edit"> <div class="ui_review_edit_label">Requested publishing level</div> <div id="ui_review_publishing_edit_');t.b(t.v(t.f("review_id",c,p,0)));t.b('" class="ui_review_publishing_edit ui_review_publishing_edit_');t.b(t.v(t.d("content.visibility",c,p,0)));t.b('"> <input type="hidden" id="ui_review_publish_');t.b(t.v(t.f("review_id",c,p,0)));t.b('" name="ui_review_publish_');t.b(t.v(t.f("review_id",c,p,0)));t.b('" value="');t.b(t.v(t.d("content.visibility",c,p,0)));t.b('" /> <div onClick="RYMreview.selectPublishLevel(\'');t.b(t.v(t.f("review_id",c,p,0)));t.b("', 'draft');\" class=\"ui_review_publishing_edit_item ui_review_publishing_edit_item_draft\"> Draft");t.b("\n"+i);t.b(" </div> <div onClick=\"RYMreview.selectPublishLevel('");t.b(t.v(t.f("review_id",c,p,0)));t.b("', 'commentary');\" class=\"ui_review_publishing_edit_item ui_review_publishing_edit_item_commentary\"> Commentary");t.b("\n"+i);t.b(" </div> <div onClick=\"RYMreview.selectPublishLevel('");t.b(t.v(t.f("review_id",c,p,0)));t.b("', 'review');\" class=\"ui_review_publishing_edit_item ui_review_publishing_edit_item_review\"> Review");t.b("\n"+i);t.b(" </div> </div> </div> </div> ");if(!t.s(t.f("is_preview",c,p,1),c,p,1)){t.b("\n"+i);t.b(' <div class="ui_review_bottom_info"> ');if(t.s(t.f("content",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(" ");t.b("\n"+i);t.b('<div id="content_voting_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" ');t.b("\n"+i);t.b(' class="content_voting"');t.b("\n"+i);t.b(' data-content-type="');t.b(t.v(t.f("content_type",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-content-promoted="');t.b(t.v(t.f("content_promoted",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-content-level="');t.b(t.v(t.f("content_level",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-content-reasons="');t.b(t.v(t.f("content_reasons",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-user-polarity="');t.b(t.v(t.f("user_polarity",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-user-reasons="');t.b(t.v(t.f("user_reasons",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-user-promoted="');t.b(t.v(t.f("user_promoted",c,p,0)));t.b('"');t.b("\n"+i);t.b(' data-user-bookmarked="');t.b(t.v(t.f("user_bookmarked",c,p,0)));t.b('"');t.b("\n"+i);t.b(' ><span id="content_voting_score_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" class="content_voting_score"></span');t.b("\n"+i);t.b(' ><span id="content_vote_down_btn_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" data-tiptip="Flag this content" class=" has_tip content_voting_btn" onClick="content_vote_');t.b(t.v(t.f("content_id",c,p,0)));t.b('.openVoteDown(this,event)"> <i class="fa fa-warning"></i> </span');t.b("\n"+i);t.b(' ><span id="content_vote_up_btn_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" data-tiptip="Nominate this content to be featured" class="has_tip content_voting_btn" onClick="content_vote_');t.b(t.v(t.f("content_id",c,p,0)));t.b('.onClickVoteUp(this,event)"> <i class="fa fa-certificate"></i> </span');t.b("\n"+i);t.b(' ><span id="content_bookmark_btn_');t.b(t.v(t.f("content_id",c,p,0)));t.b('" data-tiptip="Bookmark this content" class="has_tip content_voting_btn" onClick="content_vote_');t.b(t.v(t.f("content_id",c,p,0)));t.b('.onClickBookmark(this,event)"> <i class="fa fa-bookmark"></i> </span>');t.b("\n"+i);t.b("</div>");t.b("\n"+i);t.b("<script> rymInitPush ( function() { content_vote_");t.b(t.v(t.f("content_id",c,p,0)));t.b(" = new RYMcontentVote(");t.b(t.v(t.f("content_id",c,p,0)));t.b(");});");t.b("\n"+i);t.b("<\/script> ")});c.pop()}t.b("\n"+i);t.b(' <div class="ui_review_bottom_shortcut"> <input class="rym_shortcut" value="[Review');t.b(t.v(t.f("review_id",c,p,0)));t.b(']" /> </div> ');if(t.s(t.f("release_data",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_review_release_details ');if(t.s(t.d("release_data.switchable",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("switchable")});c.pop()}t.b(' "> ');t.b(t.v(t.d("release_data.label",c,p,0)));t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="ui_review_bottom_publish">');t.b(t.v(t.d("content.visibility",c,p,0)));t.b("</div> ");if(t.s(t.f("language",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_review_release_language_disp"> ');t.b(t.v(t.f("language",c,p,0)));t.b("\n"+i);t.b(" </div> ")});c.pop()}t.b("\n"+i);t.b(' <div class="clearfix"></div> </div> ');if(t.s(t.f("can_edit",c,p,1),c,p,0)){t.rs(c,p,function(c,p,t){t.b("\n"+i);t.b(' <div class="ui_review_editing"> <div onClick="RYMreview.delete(');t.b(t.v(t.f("review_id",c,p,0)));t.b(');" class="ui_review_release_delete"> Delete');t.b("\n"+i);t.b(' </div> <div class="ui_review_release_edit" onClick="$(\'#ui_review_');t.b(t.v(t.f("review_id",c,p,0)));t.b("').toggleClass('edit_mode');\"> Edit ");t.b("\n"+i);t.b(' </div> <div class="ui_review_release_language"> <div class="ui_review_release_language_main_choice" id="ui_review_language_');t.b(t.v(t.f("review_id",c,p,0)));t.b('"> ');t.b(t.t(t.d("language.name",c,p,0)));t.b('  </div> <div class="ui_review_release_language_choices"> <a href="https://sonemic.com/settings/display/" target="_blank">Edit...</a> </div> </div> <div class="ui_review_edit_buttons"> <div onClick="RYMreview.save(\'');t.b(t.v(t.f("review_id",c,p,0)));t.b('\');" id="ui_review_save_btn_');t.b(t.v(t.f("review_id",c,p,0)));t.b('" class="ui_review_object_save_edit enabled"> Save');t.b("\n"+i);t.b(" </div> <div onClick=\"RYMreview.preview('");t.b(t.v(t.f("review_id",c,p,0)));t.b('\');" id="ui_review_preview_btn_');t.b(t.v(t.f("review_id",c,p,0)));t.b('" class="ui_review_object_save_edit enabled"> Preview');t.b("\n"+i);t.b(" </div> <div onClick=\"$('#ui_review_");t.b(t.v(t.f("review_id",c,p,0)));t.b("').toggleClass('edit_mode')\" id=\"ui_review_cancel_btn_");t.b(t.v(t.f("review_id",c,p,0)));t.b('" class="ui_review_object_save_edit enabled"> Cancel');t.b("\n"+i);t.b(' </div> </div> <div class="clearfix"></div> </div> ')});c.pop()}t.b("\n"+i);t.b(" </div> ")}t.b("\n"+i);if(!t.s(t.f("is_preview",c,p,1),c,p,1)){if(!t.s(t.f("can_edit",c,p,1),c,p,1)){t.b(' <div class="page_section_dynamic_fade_cover"></div> <div class="page_section_dynamic_fade_expand_button bg-f8f8f8 cl-333"> <span class="expand_text">Expand review</span> <span class="hide_text">Hide</span> </div>');t.b("\n"+i)}}t.b("</div>");t.b("\n");return t.fl()},partials:{},subs:{}})};var RYMcomments=function(profile_name,assoc_id,vote_action,first_reference_id,last_reference_id){this.profile_name=profile_name;this.assoc_id=assoc_id;this.vote_action=vote_action;this.last_vote_action=vote_action;this.first_reference_id=first_reference_id;this.last_reference_id=last_reference_id;this.new_comments=0;this.loadAjaxRequest=null;RYMstream.register("","comments_"+profile_name+"_"+assoc_id)};RYMcomments.prototype.onFocusTextarea=function(event){};RYMcomments.prototype.onBlurTextarea=function(event){$("#comment_help_"+this.profile_name+"_"+this.assoc_id).hide()};RYMcomments.prototype.open=function(){$("#comments_"+this.profile_name+"_"+this.assoc_id).removeClass("view").addClass("edit");$("#comments_textarea_"+this.profile_name+"_"+this.assoc_id).focus()};RYMcomments.prototype.cancel=function(){$("#comments_inner_"+this.profile_name+"_"+this.assoc_id).appendTo("#comments_frame_"+this.profile_name+"_"+this.assoc_id);$("#comments_"+this.profile_name+"_"+this.assoc_id).removeClass("edit").addClass("view")};RYMcomments.prototype._postCallbackError=function(error){$("#comments_error_msg"+this.profile_name+"_"+this.assoc_id).html(error);$("#comments_error_"+this.profile_name+"_"+this.assoc_id).html(error).hide().fadeIn(150);$("#comments_post_loading_"+this.profile_name+"_"+this.assoc_id).hide()};RYMcomments.prototype.setVote=function(vote){$("#comments_vote_"+this.profile_name+"_"+this.assoc_id).val(vote);$("#comments_voting_"+this.profile_name+"_"+this.assoc_id)[0].className="comments_voting vote_"+vote;this.vote_action=vote;this.validatePostBtn()};RYMcomments.prototype._postCallback=function(user_id,newComment,reference_id,thread_id){$(".vote_user_"+user_id).removeClass("vote_y vote_n vote_h");$(".vote_user_"+user_id+" .comment_vote_text").hide();$("#comments_post_loading_"+this.profile_name+"_"+this.assoc_id).hide();var el;if(thread_id){$("#comments_load_next_thread_btn_"+thread_id).data("reference_id",reference_id)}else{this.last_reference_id=reference_id}if(thread_id){el=$("#comments_load_next_thread_btn_"+thread_id).before(newComment)[0]}else{var btnEl=$("#comments_load_next_btn_"+this.profile_name+"_"+this.assoc_id);btnEl.before(newComment);el=$("#comments_list_"+this.profile_name+"_"+this.assoc_id)[0]}$("#comments_"+this.profile_name+"_"+this.assoc_id).removeClass("edit").addClass("view");$("#comments_textarea_"+this.profile_name+"_"+this.assoc_id).val("");el.scrollTop=el.scrollHeight;$(".timeago").timeago()};RYMcomments.prototype.validatePostBtn=function(){var comment=$("#comments_textarea_"+this.profile_name+"_"+this.assoc_id).val();var btnEl=$("#comment_post_btn_"+this.profile_name+"_"+this.assoc_id);if(this.vote_action==this.last_vote_action&&comment.length==0){btnEl.addClass("disabled")}else{btnEl.removeClass("disabled")}};RYMcomments.prototype.post=function(){$("#comments_error_"+this.profile_name+"_"+this.assoc_id).hide();$("#comments_post_loading_"+this.profile_name+"_"+this.assoc_id).show();var comment=$("#comments_textarea_"+this.profile_name+"_"+this.assoc_id).val();var thread_id=$("#comments_thread_"+this.profile_name+"_"+this.assoc_id).val();rym.request.post("CommentsPost",{profile_name:this.profile_name,assoc_id:this.assoc_id,comment:comment,vote_action:this.vote_action,thread_id:thread_id})};RYMcomments.prototype._postFlagCallback=function(id){$("#comments_post_loading_"+this.profile_name+"_"+this.assoc_id).hide()};RYMcomments.prototype.flag=function(id){if(!confirm("Are you sure you want to report this comment as abusive?")){return}$("#comments_post_loading_"+this.profile_name+"_"+this.assoc_id).show();var comment=$("#comments_textarea_"+this.profile_name+"_"+this.assoc_id).val();rym.request.post("CommentsFlag",{profile_name:this.profile_name,assoc_id:this.assoc_id,id:id})};RYMcomments.prototype._postDeleteCallback=function(id){$("#comments_post_loading_"+this.profile_name+"_"+this.assoc_id).hide();var el=$("#comment_"+id).hide()};RYMcomments.prototype.deleteComment=function(id){if(!confirm("Are you sure you want to delete this comment?")){return}$("#comments_post_loading_"+this.profile_name+"_"+this.assoc_id).show();var comment=$("#comments_textarea_"+this.profile_name+"_"+this.assoc_id).val();rym.request.post("CommentsDelete",{profile_name:this.profile_name,assoc_id:this.assoc_id,id:id})};RYMcomments.prototype.reply=function(id,username){$("#comments_post_"+this.profile_name+"_"+this.assoc_id).show();var help=$("#comment_help_"+this.profile_name+"_"+this.assoc_id);var el=$("#comments_textarea_"+this.profile_name+"_"+this.assoc_id).focus();$("#comments_inner_"+this.profile_name+"_"+this.assoc_id).appendTo("#comment_reply_ui_"+id);$("#comments_thread_"+this.profile_name+"_"+this.assoc_id).val(id);this.open()};RYMcomments.prototype._loadPreviousCallback=function(rendered_comments,reference_id,num_before,num_after){this.first_reference_id=reference_id;var btnEl=$("#comments_load_prev_btn_"+this.profile_name+"_"+this.assoc_id);if(num_before>0){$("#comments_load_prev_num_"+this.profile_name+"_"+this.assoc_id).text(num_before);btnEl.removeClass("loading")}else{btnEl.removeClass("loading has_comments new_comments").addClass("no_comments")}btnEl.after(rendered_comments);$(".timeago").timeago()};RYMcomments.prototype.loadPrevious=function(){if(this.loadAjaxRequest){this.loadAjaxRequest.abort()}$("#comments_load_prev_btn_"+this.profile_name+"_"+this.assoc_id).addClass("loading");this.loadAjaxRequest=rym.request.post("CommentsLoadMore",{profile_name:this.profile_name,assoc_id:this.assoc_id,reference_id:this.first_reference_id,direction:"up"})};RYMcomments.prototype._loadNextCallback=function(rendered_comments,reference_id,num_before,num_after){this.last_reference_id=reference_id;var btnEl=$("#comments_load_next_btn_"+this.profile_name+"_"+this.assoc_id);if(num_after>0){$("#comments_load_next_num_"+this.profile_name+"_"+this.assoc_id).text(num_after);btnEl.removeClass("loading")}else{btnEl.removeClass("loading has_comments new_comments").addClass("no_comments")}this.new_comments=num_after;btnEl.before(rendered_comments);$(".timeago").timeago()};RYMcomments.prototype.loadNext=function(){if(this.loadAjaxRequest){this.loadAjaxRequest.abort()}$("#comments_load_next_btn_"+this.profile_name+"_"+this.assoc_id).addClass("loading");this.loadAjaxRequest=rym.request.post("CommentsLoadMore",{profile_name:this.profile_name,assoc_id:this.assoc_id,reference_id:this.last_reference_id,direction:"down"})};RYMcomments.prototype._loadPreviousThreadCallback=function(rendered_comments,thread_id,reference_id,num_before,num_after){$("#comments_load_prev_thread_btn_"+thread_id).data("reference_id",reference_id);var btnEl=$("#comments_load_prev_thread_btn_"+thread_id);if(num_before>0){$("#comments_load_prev_thread_num_"+thread_id).text(num_before);btnEl.removeClass("loading")}else{btnEl.removeClass("loading has_comments new_comments").addClass("no_comments")}btnEl.after(rendered_comments);$(".timeago").timeago()};RYMcomments.prototype.loadPreviousThread=function(thread_id){if(this.loadAjaxRequest){this.loadAjaxRequest.abort()}$("#comments_load_prev_thread_btn"+thread_id).addClass("loading");var first_reference_id=$("#comments_load_prev_thread_btn_"+thread_id).data("reference_id");this.loadAjaxRequest=rym.request.post("CommentsThreadLoadMore",{profile_name:this.profile_name,assoc_id:this.assoc_id,thread_id:thread_id,reference_id:first_reference_id,direction:"up"})};RYMcomments.prototype._loadNextThreadCallback=function(rendered_comments,thread_id,reference_id,num_before,num_after){$("#comments_load_next_thread_btn_"+thread_id).data("reference_id",reference_id);var btnEl=$("#comments_load_next_thread_btn_"+thread_id);if(num_after>0){$("#comments_load_next_thread_num_"+thread_id).text(num_before);btnEl.removeClass("loading")}else{btnEl.removeClass("loading has_comments new_comments").addClass("no_comments")}btnEl.before(rendered_comments);$(".timeago").timeago()};RYMcomments.prototype.loadNextThread=function(thread_id){if(this.loadAjaxRequest){this.loadAjaxRequest.abort()}$("#comments_load_next_thread_btn"+thread_id).addClass("loading");var last_reference_id=$("#comments_load_next_thread_btn_"+thread_id).data("reference_id");this.loadAjaxRequest=rym.request.post("CommentsThreadLoadMore",{profile_name:this.profile_name,assoc_id:this.assoc_id,thread_id:thread_id,reference_id:last_reference_id,direction:"down"})};RYMcomments.onNotificationSignal=function(event,data){if(rym.session.userid!=data.user_id){var obj=window["comments_"+data.profile_name+"_"+data.assoc_id];obj.new_comments++;if(data.thread_id){$("#comments_load_next_thread_num_"+data.thread_id).text(obj.new_comments);$("#comments_load_next_thread_btn_"+data.thread_id)[0].className="comment_load_more_btn new_comments"}else{$("#comments_load_next_num_"+data.profile_name+"_"+data.assoc_id).text(obj.new_comments);$("#comments_load_next_btn_"+data.profile_name+"_"+data.assoc_id)[0].className="comment_load_more_btn new_comments"}}};var RYMcontentAction={openActionUI:function(content_id,polarity,reasons){var el=$("#content_moderation_action_ui_"+content_id);el.html(RYMtemplate["community.mod_action"].render({content_id:content_id,reasons:reasons}));if(polarity=="pos"){$(".mod_action_neg").hide();$(".mod_action_pos").show()}else{$(".mod_action_pos").hide();$(".mod_action_neg").show()}},onChangeMainAction:function(content_id){var main_action=$("input[name=mod_action_main_"+content_id+"]:checked").val();if(main_action=="default"){$(".mod_action_neg").hide();$(".mod_action_pos").hide();$(".mod_action_neutral").show();$("#mod_action_user_no_action_"+content_id).click();$("#mod_action_upvoters_no_change_"+content_id).click()}},onChangeUserAction:function(content_id){var user_action=$("input[name=mod_action_user_"+content_id+"]:checked").val();$(".mod_action_user_msg_frame").hide();if(user_action=="warn"){$("#mod_action_user_warn_msg_frame_"+content_id).show()}if(user_action=="ban"){$("#mod_action_user_ban_msg_frame_"+content_id).show()}},submit:function(content_id){var main_action=$("input[name=mod_action_main_"+content_id+"]:checked").val();var user_action=$("input[name=mod_action_user_"+content_id+"]:checked").val();var upvoter_action=$("input[name=mod_action_upvoters_"+content_id+"]:checked").val();var flagger_action=$("input[name=mod_action_flaggers_"+content_id+"]:checked").val();var warn_message=$("#mod_action_user_warn_msg_"+content_id).val();var ban_message=$("#mod_action_user_ban_msg_"+content_id).val();var reasons=$("#mod_action_reasons_"+content_id).val();if(!main_action||!user_action||!upvoter_action||!flagger_action){rym.showGlobalError("Please fill out the form entirely.");return}rym.request.post("CommunityModAction",{content_id:content_id,main_action:main_action,user_action:user_action,upvoter_action:upvoter_action,flagger_action:flagger_action,reasons:reasons,warn_message:warn_message,ban_message:ban_message})},_submitCallback:function(content_id,action_html){$("#content_moderation_"+content_id).html(action_html)},cancel:function(content_id){var el=$("#content_moderation_action_ui_"+content_id);el.html("")},undoAction:function(action_id){if(confirm("Are you sure you want to undo this decision?  If you do so, any bans/warnings will be cancelled, and community moderation weight will be restored to all users who voted on this.")){rym.request.post("CommunityModUndoAction",{action_id:action_id})}},_undoActionCallback:function(action_id){}};function RYMcontentVote(content_id){var el=$("#content_voting_"+content_id);var cr=el.data("content-reasons");var ur=el.data("user-reasons");if(cr&&cr.length>0){cr=cr.split(",")}else{cr=[]}if(ur&&ur.length>0){ur=ur.split(",")}else{ur=[]}var content_type=el.data("content-type");var content_promoted=JSON.parse(el.data("content-promoted")||"false");var content_level=parseInt(el.data("content-level")||0);var content_reasons=cr;var user_polarity=parseInt(el.data("user-polarity")||0);var user_promoted=JSON.parse(el.data("user-promoted")||"false");var user_bookmarked=JSON.parse(el.data("user-bookmarked")||"false");var user_reasons=ur;this.content_type=content_type;this.content_id=content_id;this.user_data={polarity:user_polarity,reasons:user_reasons,promoted:user_promoted,bookmarked:user_bookmarked};this.content_data={promoted:content_promoted,level:content_level};this.template_data=JSON.parse(JSON.stringify(voting_choices));this._updateTemplateData();this._setupUI()}RYMcontentVote.prototype._setupUI=function(){if(this.user_data.bookmarked){this._getEl("content_bookmark_btn")[0].className="content_voting_btn active has_tip"}else{this._getEl("content_bookmark_btn")[0].className="content_voting_btn has_tip"}if(this.user_data.polarity>0){this._getEl("content_vote_up_btn")[0].className="content_voting_btn active has_tip"}else{this._getEl("content_vote_up_btn")[0].className="content_voting_btn has_tip"}if(this.user_data.polarity<0){if(this.content_data.promoted){this._getEl("content_vote_up_btn")[0].className="content_voting_btn  has_tip";this._getEl("content_vote_up_btn").html('<i class="fa fa-chevron-circle-up"></i>');this._getEl("content_vote_down_btn").html("").hide()}else{this._getEl("content_vote_up_btn")[0].className="content_voting_btn  has_tip";this._getEl("content_vote_up_btn").html('<i class="fa fa-certificate"></i>')}if(this.content_data.promoted){this._getEl("content_vote_down_btn").html("").hide()}else{this._getEl("content_vote_down_btn").show()[0].className="content_voting_btn active has_tip";if(!this.user_data.reasons||this.user_data.reasons.length==0){this._getEl("content_vote_down_btn").html('<i class="fa fa-warning has_tip"></i>').show()}else{if(this.user_data.reasons&&this.user_data.reasons[0]=="posting_error"){this._getEl("content_vote_down_btn").html('<i class="fa fa-warning yellow"></i>').show()}else{this._getEl("content_vote_down_btn").html('<i class="fa fa-warning red"></i>').show()}}}}else if(this.user_data.polarity>0){if(this.content_data.promoted){this._getEl("content_vote_up_btn")[0].className="content_voting_btn active has_tip";this._getEl("content_vote_up_btn").html('<i class="fa fa-chevron-circle-up"></i>');this._getEl("content_vote_down_btn").html("").hide()}else{this._getEl("content_vote_up_btn")[0].className="content_voting_btn active has_tip";this._getEl("content_vote_up_btn").html('<i class="fa fa-certificate"></i>')}}else{if(this.content_data.promoted){this._getEl("content_vote_down_btn").html("").hide();this._getEl("content_vote_up_btn")[0].className="content_voting_btn has_tip";this._getEl("content_vote_up_btn").html('<i class="fa fa-chevron-circle-up"></i>');this._getEl("content_vote_down_btn")[0].className="content_voting_btn has_tip";this._getEl("content_vote_down_btn").html("")}else{this._getEl("content_vote_up_btn")[0].className="content_voting_btn has_tip";this._getEl("content_vote_up_btn").html('<i class="fa fa-certificate"></i>');this._getEl("content_vote_down_btn")[0].className="content_voting_btn has_tip";this._getEl("content_vote_down_btn").show().html('<i class="fa fa-warning"></i>')}}this.setScore()};RYMcontentVote.prototype.setScore=function(){var el=this._getEl("content_voting_score");if(!this.content_data.promoted){el[0].innerText="";return}if(this.content_data.level==0){el[0].innerText=""}else{el[0].innerHTML=(this.content_data.level>0?'<i class="fa fa-certificate featured"></i> <span class="content_voting_score_score">+':"")+this.content_data.level+"</span>"}if(this.content_data.level>0){el[0].className="content_voting_score content_voting_score_pos"}else{el[0].className="content_voting_score content_voting_score_neg"}};RYMcontentVote.prototype.postVoteUpdate=function(){console.log("Posting: "+JSON.stringify(this.user_data));var reasons;if(this.user_data.reasons){reasons=this.user_data.reasons.join(",")}else{reasons=[]}if(this.user_data.polarity<0&&reasons.length==0){return}console.log("Posting: "+reasons);rym.request.post("CommunitySetContentVotingStatus",{content_type:this.content_type,content_id:this.content_id,polarity:this.user_data.polarity,reasons:reasons})};RYMcontentVote.prototype.postBookmarkUpdate=function(){console.log("Posting Bookmark update:"+this.user_data.bookmarked);rym.request.post("CommunitySetBookmarkStatus",{content_type:this.content_type,content_id:this.content_id,bookmarked:this.user_data.bookmarked})};RYMcontentVote.prototype._getEl=function(id_prefix){return $("#"+id_prefix+"_"+this.content_id)};RYMcontentVote.prototype.onClickVoteUp=function(event){if(!this.content_data.promoted){this.openFeature(event);return}if(this.user_data.polarity>0){this.user_data.polarity=0}else if(this.user_data.polarity<0){this.user_data.polarity=1;this.user_data.reasons=new Array}else{this.user_data.polarity=1}this.dismissAndSave()};function removeFromArrayByValue(arr){var what,a=arguments,L=a.length,ax;while(L>1&&arr.length){what=a[--L];while((ax=arr.indexOf(what))!==-1){arr.splice(ax,1)}}return arr}RYMcontentVote.prototype._updateReasonList=function(reason_id,is_selected){if(!this.user_data.reasons){this.user_data.reasons=new Array}if(is_selected){if(this.user_data.reasons&&-1==this.user_data.reasons.indexOf(reason_id)){this.user_data.reasons.push(reason_id)}}else{this.user_data.reasons=removeFromArrayByValue(this.user_data.reasons,reason_id)}if(!this.user_data.reasons||this.user_data.reasons.length==0){this.user_data.polarity=0}else{this.user_data.polarity=-1}this._updateTemplateData()};RYMcontentVote.prototype.onClickVoteDownPostingError=function(event){this.user_data.polarity=-1;this.user_data.reasons=new Array("posting_error");this.dismissAndSave()};RYMcontentVote.prototype.onClickVoteDownGeneral=function(event){this.user_data.reasons=new Array;this.user_data.polarity=-1;this.dismissAndSave()};RYMcontentVote.prototype.onClickVoteDownReason=function(event,reason_id){var is_selected=$("#voting_community_"+reason_id).toggleClass("selected").hasClass("selected");this._updateReasonList(reason_id,is_selected)};RYMcontentVote.prototype.onClickBookmark=function(event){if(this.user_data.bookmarked){this.user_data.bookmarked=false}else{this.user_data.bookmarked=true}this._setupUI();this._updateTemplateData();this.postBookmarkUpdate()};RYMcontentVote.prototype.onClickPromote=function(event){$("#voting_dlg_sub_promote").slideToggle(100)};RYMcontentVote.prototype.createUserDataObj=function(obj){return obj};RYMcontentVote.prototype._updateTemplateData=function(event){this.template_data.content_type=this.content_type;this.template_data.content_id=this.content_id;switch(this.content_type){case"discussion_post":{this.template_data.type_label="discussion_post";break}case"list":{this.template_data.type_label="list";break}case"image":{this.template_data.type_label="image";break}case"comment":{this.template_data.type_label="comment";break}case"discussion_thread":{this.template_data.type_label="thread";break}case"review":{this.template_data.type_label="review";break}}var community_cnt=0;var review_cnt=0;for(var k in this.template_data.community){var item=this.template_data.community[k];if(typeof item=="undefined"){alert(JSON.stringify(item))}if(-1!=item.types.indexOf(this.content_type)){item.visible=true}else{item.visible=false}if(this.user_data.reasons&&-1!=this.user_data.reasons.indexOf(item.id)){item.selected=true;community_cnt++}else{item.selected=false}}var review_items_visible=0;for(var k in this.template_data.review_guidelines){var item=this.template_data.review_guidelines[k];if(typeof item=="undefined"){alert(JSON.stringify(item))}if(-1!=item.types.indexOf(this.content_type)){item.visible=true;review_items_visible++}else{item.visible=false}if(this.user_data.reasons&&-1!=this.user_data.reasons.indexOf(item.id)){item.selected=true;review_cnt++}else{item.selected=false}}if(community_cnt>0){}if(review_items_visible>0){this.template_data.show_review_publishing=true}if(this.user_data.polarity>0){this.template_data.voted_up=true}if(this.user_data.polarity<0){this.template_data.voted_down=true}if(this.user_data.bookmarked){this.template_data.bookmarked=true}if(this.user_data.promoted){this.template_data.promoted=true}};RYMcontentVote.prototype.openFeature=function(el,event){if(this.user_data.polarity>0){this.user_data.reasons=new Array;this.user_data.polarity=0;this.dismissAndSave();return}this.user_data.polarity=1;var html=RYMtemplate["ui.content.feature"].render(this.template_data);var pageHeight=$(document).height()+"px";var voteObj=this;var votingFrameEl=$("#voting_ui_frame").html(html);var top=$(el).offset().top+20+"px";var left=$(el).offset().left-votingFrameEl.outerWidth()/.75/2+"px";$("#total_cover").css({width:"100%",height:pageHeight,top:0,left:0}).show().on("click",function(){voteObj.dismiss()});$("#voting_ui_frame").html(html).css({top:top,left:left}).show()};RYMcontentVote.prototype.openVoteDown=function(el,event){if(this.user_data.polarity<0){this.user_data.reasons=new Array;this.user_data.polarity=0;this.dismissAndSave();return}var html=RYMtemplate["ui.content.voting"].render(this.template_data);var pageHeight=$(document).height()+"px";var voteObj=this;var votingFrameEl=$("#voting_ui_frame").html(html);var top=$(el).offset().top+20+"px";var left=$(el).offset().left-votingFrameEl.outerWidth()/.75/2+"px";$("#total_cover").css({width:"100%",height:pageHeight,top:0,left:0}).show().on("click",function(){voteObj.dismissAndSave()});$("#voting_ui_frame").html(html).css({top:top,left:left}).show()};RYMcontentVote.prototype.dismiss=function(el,event){$("#total_cover").hide();$("#voting_ui_frame").hide();$("#total_cover").off("click")};RYMcontentVote.prototype.dismissAndSave=function(el,event){$("#total_cover").hide();$("#voting_ui_frame").hide();$("#total_cover").off("click");this._setupUI();this._updateTemplateData();this.postVoteUpdate()};var RYMcommunityPage={onNotificationSignal:function(event,data){RYMcommunityPage.updateOnlineUsers(data)},updateOnlineUsers:function(data){var numOnline=data.length;if(numOnline==0){$("#community_online_user_summary")[0].className="community_online_user_summary online_zero"}else if(numOnline==1){$("#community_online_user_summary")[0].className="community_online_user_summary online_one"}else{$("#community_online_user_summary")[0].className="community_online_user_summary online_multi"}var lstUsers=new Array;for(user in data){lstUsers.push('<a href="/user/'+data[user].username+'" class="user_online">'+data[user].username+"</a>")}$("#community_num_online").text(numOnline);$("#community_online_user_list").html(lstUsers.join(", "));$("#community_online_user_list_one").html(lstUsers.join(", "))}};var RYMcropper={source:null,width:null,height:null,cl:null,ct:null,cr:null,cb:null,onSubmit:null,current_invert:0,current_direction:null,current_mouse_drag_x:0,current_mouse_drag_y:0,current_zoom:1,init:function(source,width,height,cl,ct,cr,cb,onSubmit){RYMcropper.source=source;RYMcropper.width=width;RYMcropper.height=height;RYMcropper.cl=cl;RYMcropper.ct=ct;RYMcropper.cr=cr;RYMcropper.cb=cb;RYMcropper.onSubmit=onSubmit;RYMcropper.current_invert=0;RYMcropper.current_direction=null;RYMcropper.current_mouse_drag_x=0;RYMcropper.current_mouse_drag_y=0;RYMcropper.current_zoom=1;$("#ui_cropper_frame").html(RYMtemplate["ui.cropper"].render());var imageEl=$("#ui_cropper_image");imageEl.css("background-image","url('"+source+"')");imageEl.on("wheel",RYMcropper.onMouseWheel);RYMcropper._update();var arrows=new Array("topleft","top","topright","left","center","right","bottomleft","bottom","bottomright");for(id in arrows){$("#ui_cropper_image_"+arrows[id]).unbind()}isTouch="ontouchstart"in window;for(id in arrows){var dir=arrows[id];if(isTouch){$("#ui_cropper_image_"+arrows[id]).on("touchstart",function(event){RYMcropper.onTouchStart(event,$(this).data("dir"))});$("#ui_cropper_image_"+arrows[id]).on("touchmove",function(event){RYMcropper.onTouchMove(event,$(this).data("dir"))});$("#ui_cropper_image_"+arrows[id]).on("touchend",function(event){RYMcropper.onTouchEnd(event,$(this).data("dir"))})}else{$("#ui_cropper_image_"+arrows[id]).on("mousedown",function(event){RYMcropper.onMouseDown(event,$(this).data("dir"))});$("#ui_cropper_image_"+arrows[id]).on("mousemove",function(event){RYMcropper.onMouseMove(event,$(this).data("dir"))});$("#ui_cropper_image_"+arrows[id]).on("mouseup",function(event){RYMcropper.onMouseUp(event,$(this).data("dir"))});$("#ui_cropper_image_"+arrows[id]).on("mouseout",function(event){RYMcropper.onMouseOut(event,$(this).data("dir"))})}$("#ui_cropper_image_new_size_width").text(RYMcropper.width-RYMcropper.cr-RYMcropper.cl);$("#ui_cropper_image_new_size_height").text(RYMcropper.height-RYMcropper.ct-RYMcropper.cb);$("#ui_cropper_image_orig_size_width").text(RYMcropper.width);$("#ui_cropper_image_orig_size_height").text(RYMcropper.height)}},onMouseWheel:function(event){if(event.originalEvent.deltaY<0){RYMcropper.zoomIn()}else{RYMcropper.zoomOut()}},onTouchStart:function(event,dir){var evt=event.originalEvent;if(evt.touches.length==2){RYMcropper.onMouseDown(evt.touches[0],dir);evt.preventDefault();evt.stopPropagation()}},onTouchMove:function(event,dir){var evt=event.originalEvent;if(evt.touches.length==2){RYMcropper.onMouseMove(evt.touches[0],dir);evt.preventDefault();evt.stopPropagation()}},onTouchEnd:function(event,dir){RYMcropper.current_direction=null},onMouseUp:function(event,dir){RYMcropper.current_direction=null},onMouseOut:function(event,dir){RYMcropper.current_direction=null},onMouseDown:function(event,dir){RYMcropper.current_direction=dir;RYMcropper.current_mouse_drag_x=event.pageX;RYMcropper.current_mouse_drag_y=event.pageY;RYMcropper.current_scroll_x=$("#ui_cropper_image_frame")[0].scrollLeft;RYMcropper.current_scroll_y=$("#ui_cropper_image_frame")[0].scrollTop},onMouseMove:function(event,dir){var moved=false;if(dir==="center"&&event.originalEvent.buttons>0){var dX=event.pageX-RYMcropper.current_mouse_drag_x;var dY=event.pageY-RYMcropper.current_mouse_drag_y;$("#ui_cropper_image_frame")[0].scrollLeft=RYMcropper.current_scroll_x-dX;$("#ui_cropper_image_frame")[0].scrollTop=RYMcropper.current_scroll_y-dY;return}if(RYMcropper.current_direction&&RYMcropper.current_direction==dir){var dX=event.pageX-RYMcropper.current_mouse_drag_x;var dY=event.pageY-RYMcropper.current_mouse_drag_y;var aL=0,aT=0,aR=0,aB=0;switch(dir){case"topleft":case"top":case"topright":if(dY>3){RYMcropper.current_mouse_drag_y=event.pageY;aT=1}if(dY<-3){RYMcropper.current_mouse_drag_y=event.pageY;aT=-1}break;case"bottomleft":case"bottom":case"bottomright":if(dY>3){RYMcropper.current_mouse_drag_y=event.pageY;aB=-1}if(dY<-3){RYMcropper.current_mouse_drag_y=event.pageY;aB=1}break}switch(dir){case"topleft":case"left":case"bottomleft":if(dX>3){RYMcropper.current_mouse_drag_x=event.pageX;aL=1}if(dX<-3){RYMcropper.current_mouse_drag_x=event.pageX;aL=-1}break;case"topright":case"right":case"bottomright":if(dX>3){RYMcropper.current_mouse_drag_x=event.pageX;aR=-1}if(dX<-3){RYMcropper.current_mouse_drag_x=event.pageX;aR=1}break}RYMcropper.adjust(aL,aT,aR,aB)}},zoomOut:function(){RYMcropper.current_zoom-=.333;if(RYMcropper.current_zoom<.6666){RYMcropper.current_zoom=.6666}RYMcropper._updateZoom()},zoomIn:function(){RYMcropper.current_zoom+=.333;if(RYMcropper.current_zoom>5){RYMcropper.current_zoom=5}RYMcropper._updateZoom()},resetZoom:function(){RYMcropper.current_zoom=1;RYMcropper._updateZoom()},_updateZoom:function(){$("#ui_cropper_image").css("transform","scale("+RYMcropper.current_zoom+")").css("-webkit-transform","scale("+RYMcropper.current_zoom+")").css("-moz-transform","scale("+RYMcropper.current_zoom+")");$("#ui_cropper_image_inner").css("width",RYMcropper.width-RYMcropper.cl-RYMcropper.cr+40+"px").css("height",RYMcropper.height-RYMcropper.ct-RYMcropper.cb+40+"px");RYMcropper._update()},reset:function(left,top,right,bottom){if(left){RYMcropper.cl=0}if(top){RYMcropper.ct=0}if(right){RYMcropper.cr=0}if(bottom){RYMcropper.cb=0}RYMcropper._update()},adjust:function(left,top,right,bottom){RYMcropper.cl+=left;RYMcropper.ct+=top;RYMcropper.cr+=right;RYMcropper.cb+=bottom;if(RYMcropper.cl<0){RYMcropper.cl=0}if(RYMcropper.ct<0){RYMcropper.ct=0}if(RYMcropper.cr<0){RYMcropper.cr=0}if(RYMcropper.cb<0){RYMcropper.cb=0}RYMcropper._update()},_update:function(){var imageEl=$("#ui_cropper_image");imageEl.css("width",RYMcropper.width-RYMcropper.cl-RYMcropper.cr+"px").css("height",RYMcropper.height-RYMcropper.ct-RYMcropper.cb+"px");imageEl.css("background-size",RYMcropper.width+"px "+RYMcropper.height+"px");imageEl.css("background-position",-RYMcropper.cl+"px "+-RYMcropper.ct+"px");$("#ui_cropper_image_inner").css("width",(RYMcropper.width-RYMcropper.cl-RYMcropper.cr+100)*RYMcropper.current_zoom+"px").css("height",(RYMcropper.height-RYMcropper.ct-RYMcropper.cb)*RYMcropper.current_zoom+"px");document.getElementById("ui_cropper_toolbar_btn_top_minus").className="ui_cropper_toolbar_top_btn "+(RYMcropper.ct>=0?"":"disabled");document.getElementById("ui_cropper_toolbar_btn_top_plus").className="ui_cropper_toolbar_top_btn "+(RYMcropper.ct>0?"":"disabled");document.getElementById("ui_cropper_toolbar_btn_top_zero").className="ui_cropper_toolbar_top_btn "+(RYMcropper.ct!=0?"":"disabled");document.getElementById("ui_cropper_toolbar_btn_left_minus").className="ui_cropper_toolbar_top_btn "+(RYMcropper.cl>=0?"":"disabled");document.getElementById("ui_cropper_toolbar_btn_left_plus").className="ui_cropper_toolbar_top_btn "+(RYMcropper.cl>0?"":"disabled");document.getElementById("ui_cropper_toolbar_btn_left_zero").className="ui_cropper_toolbar_top_btn "+(RYMcropper.cl!=0?"":"disabled");document.getElementById("ui_cropper_toolbar_btn_right_minus").className="ui_cropper_toolbar_top_btn "+(RYMcropper.cr>=0?"":"disabled");document.getElementById("ui_cropper_toolbar_btn_right_plus").className="ui_cropper_toolbar_top_btn "+(RYMcropper.cr>0?"":"disabled");document.getElementById("ui_cropper_toolbar_btn_right_zero").className="ui_cropper_toolbar_top_btn "+(RYMcropper.cr!=0?"":"disabled");document.getElementById("ui_cropper_toolbar_btn_bot_minus").className="ui_cropper_toolbar_top_btn "+(RYMcropper.cb>=0?"":"disabled");document.getElementById("ui_cropper_toolbar_btn_bot_plus").className="ui_cropper_toolbar_top_btn "+(RYMcropper.cb>0?"":"disabled");document.getElementById("ui_cropper_toolbar_btn_bot_zero").className="ui_cropper_toolbar_top_btn "+(RYMcropper.cb!=0?"":"disabled");document.getElementById("ui_cropper_toolbar_btn_zoom_minus").className="ui_cropper_toolbar_top_btn "+(RYMcropper.current_zoom>=.6666?"":"disabled");document.getElementById("ui_cropper_toolbar_btn_zoom_plus").className="ui_cropper_toolbar_top_btn "+(RYMcropper.current_zoom<5?"":"disabled");document.getElementById("ui_cropper_toolbar_btn_zoom_zero").className="ui_cropper_toolbar_top_btn "+(RYMcropper.current_zoom!=1?"":"disabled");document.getElementById("ui_cropper_toolbar_btn_zero_all").className="ui_cropper_toolbar_top_btn "+(RYMcropper.ct!=0||RYMcropper.cl!=0||RYMcropper.cb!=0||RYMcropper.cr!=0?"":"disabled");$("#ui_cropper_image_new_size_width").text(RYMcropper.width-RYMcropper.cr-RYMcropper.cl);$("#ui_cropper_image_new_size_height").text(RYMcropper.height-RYMcropper.ct-RYMcropper.cb);RYMcropper.open()},open:function(){$("#ui_cropper").show();$("html,body").addClass("in_crop")},close:function(){$("#ui_cropper").hide();$("html,body").removeClass("in_crop")},toggleInvert:function(){RYMcropper.current_invert++;if(RYMcropper.current_invert>3){RYMcropper.current_invert=0}$("#ui_cropper")[0].className="ui_cropper invert_"+RYMcropper.current_invert},toggleArrows:function(){$("#ui_cropper").toggleClass("hide_image_adj")},submit:function(){RYMcropper.onSubmit(RYMcropper.cl,RYMcropper.ct,RYMcropper.cr,RYMcropper.cb);RYMcropper.close()}};var RYMdateHelp={show:function(nameObj){var pos=$(nameObj).offset();var width=$(nameObj).outerWidth();$("#ui_date_help").css({top:pos.top+23+"px",left:pos.left+"px"}).show()},hide:function(){$("#ui_date_help").hide()}};var RYMdate=function(id,parent){this.uiType="date";RYMFormUI.call(this,id,parent);this.frameObj=$("#"+id+"_frame");this.textObj=$("#"+id+"_text");this.iconObj=$("#"+id+"_icon");this.val=$(this.uiObj).val();this.textVal=$(this.textObj).val();this.dirty=false;this.data_format=$(this.uiObj).data("data_format");validationReq=null};extend(RYMdate,RYMFormUI);RYMdate.prototype.init=function(){if(this.val&&this.val.length>3){this.setStatus("valid")}};RYMdate.prototype.onFocus=function(event){RYMdateHelp.show(this.textObj)};RYMdate.prototype.onBlur=function(event){RYMdateHelp.hide();this.validate();this.propagateEvent("onChildBlur")};RYMdate.prototype.onKeyUp=function(event){if(event&&event.keyCode){if(event.keyCode==g_keyCodes["return"]){this.validate();return}else if(event.keyCode==g_keyCodes["esc"]){this.clear();return}}if(this.textVal!=$(this.textObj).val()){this.textVal=$(this.textObj).val();this.clearStatusText();this.markDirty()}};RYMdate.prototype.setStatus=function(precision){var icon="blank";switch(precision){case"valid":{icon="ok-sign";color="#595";break}case"blank":{icon="calendar";color="#aaa";break}case"error":{icon="exclamation-sign";color="#922";break}case"loading":{icon="spinner icon-spin";color="#666";break}}$(this.iconObj).html('<i class="icon-'+icon+'" style="color:'+color+';"></i>')};RYMdate.prototype.clear=function(){this.dirty=false;$(this.frameObj).removeClass("dirty");$(this.textObj).val("");this.setStatus("blank")};RYMdate.prototype.markDirty=function(){if(!this.dirty){this.dirty=true;$(this.frameObj).addClass("dirty");this.setStatus("blank");this.clearStatusText()}};RYMdate.prototype.markValid=function(){this.dirty=false;$(this.frameObj).removeClass("dirty");this.textVal=$(this.textObj).val();this.setStatus("valid")};RYMdate.prototype.onChange=function(event){if(this.textVal!=$(this.textObj).val()){this.textVal=$(this.textObj).val();this.markDirty()}this.propagateEvent("onChildChange");var customAction=$(this.uiObj).data("custom-action");if(customAction&&customAction.length){eval(customAction)}};RYMdate.prototype.validate=function(){if(!this.dirty){return}if($(this.textObj).val().length==0){this.textVal="";$(this.uiObj).val("");this.clear();return}RYMdateHelp.hide();this.setStatus("loading");if(this.validationReq){this.validationReq.abort();this.validationReq=null}this.validationReq=$.ajax({url:"/httprequest/UiValidateFuzzyDate",type:"POST",datatype:"json",data:{id:this.id,action:"UiValidateFuzzyDate",data_format:this.data_format,text:$(this.textObj).val()}}).done(function(data){var obj=uiObjFromId(data.id);if(data.error.length>0){obj.showError(data.error);obj.setStatus("error")}else{obj.setVal(data.datestr);$(obj.textObj).val(data.text);obj.clearStatusText();obj.markValid();$(obj.uiObj).trigger("change")}})};function RYMpoll(user_id,poll_data,user_choices){this.user_id=user_id;this.poll_data=poll_data;this.user_choices=user_choices;this.poll_id=poll_data.poll_id;this._setupInitialState();this._setupTemplateData();$("#poll_frame_"+this.poll_id).html(this.render())}RYMpoll.prototype._setupInitialState=function(){this.state="not_voted";if(this.user_choices.length>0){this.state="voted"}};RYMpoll.prototype._setupTemplateData=function(){this.poll_data.state_not_voted=this.state=="not_voted";this.poll_data.state_voting=this.state=="voting";this.poll_data.state_voted=this.state=="voted";this.poll_data.state_not_voted_showing_votes=this.state=="not_voted_showing_votes";this.poll_data.multiple_items=this.poll_data.max_num_items>1;this.poll_data.single_item=this.poll_data.max_num_items==1;this.poll_data.is_poll_admin=this.user_id==this.poll_data.author_id;var num_points=this.poll_data.max_num_items;var num_votes=this.user_choices.length;for(var i=0;i<num_votes;i++){var choice=this.user_choices[i];if(choice!=0){this.poll_data.choices[choice-1].my_vote=true;if(this.poll_data.poll_type=="weighted"){this.poll_data.choices[choice-1].my_vote_points=num_points;num_points--}}}};RYMpoll.prototype._updateState=function(state){this.state=state;var el=$("#poll_"+this.poll_id);el.removeClass("state_voted state_voting state_not_voted state_not_voted_showing_votes");el.addClass("state_"+state)};RYMpoll.prototype._beginVoting=function(choice_id){if(this.poll_data.is_closed){return}this.choices=new Array(choice_id);this._updateState("voting");this._addVote(choice_id)};RYMpoll.prototype._addVote=function(choice_id){var num_voted=this.user_choices.length;if(num_voted>=this.poll_data.max_num_items){return}var pollEl=$("#poll_choice_"+this.poll_id+"_"+choice_id).addClass("my_vote");var pollCheckEl=$("#poll_my_vote_check_"+this.poll_id+"_"+choice_id).addClass("my_vote");if(this.poll_data.poll_type=="weighted"){var num_points=this.poll_data.max_num_items-this.user_choices.length;$("#poll_my_vote_points_"+this.poll_id+"_"+choice_id).text(num_points)}this.user_choices.push(choice_id)};RYMpoll.prototype._endVoting=function(){var choices=this.user_choices.join(",");rym.request.post("PollSetVotes",{poll_id:this.poll_id,choices:choices})};RYMpoll.prototype._cancelVoting=function(choice_id){this.user_choices=new Array;this._updateState("not_voted");$(".my_vote").removeClass("my_vote");$(".my_vote_points").text("")};RYMpoll.prototype.onClickChoice=function(choice_id){switch(this.state){case"not_voted":case"not_voted_showing_votes":this._beginVoting(choice_id);break;case"voting":this._addVote(choice_id);break}};RYMpoll.prototype.render=function(){return RYMtemplate["poll"].render(this.poll_data)};RYMpoll.prototype.onClickShowVoters=function(){var votersEL=$(".voters_"+this.poll_id);$(".voters_"+this.poll_id).slideToggle(100);if(votersEL.first().is(":visible")){$("#poll_show_voters_"+this.poll_id).text("Hide voters")}else{$("#poll_show_voters_"+this.poll_id).text("Show voters")}};RYMpoll.prototype.onClickAbstain=function(){rym.request.post("PollSetVotes",{poll_id:this.poll_id,choices:"0"})};RYMpoll.prototype.onClickSubmitVote=function(){this._endVoting()};RYMpoll.prototype.onClickCancelVote=function(){this._cancelVoting()};RYMpoll.prototype.onClickSeeVotes=function(){this._updateState("not_voted_showing_votes")};RYMpoll.prototype.onClickResetVote=function(){rym.request.post("PollResetVote",{poll_id:this.poll_id})};RYMpoll.prototype.onClickClosePoll=function(){if(confirm("Are you sure you want to close the poll?")){rym.request.post("PollClose",{poll_id:this.poll_id})}};RYMpoll.prototype._loadAdditionalVoters=function(choice_id){rym.request.post("PollLoadAdditionalVoters",{poll_id:this.poll_id,choice:choice_id})};RYMpoll.prototype.onClickMoreVoters=function(choice_id){this._loadAdditionalVoters(choice_id)};var RYMthreadPage={openDeleteThread:function(thread_id){$("#delete_thread_dlg_inner").data("threadid",thread_id);rym.doModal($("#delete_thread_dlg").html())},_doDeleteThreadCallbackError:function(error_msg){alert(error_msg)},_doDeleteThreadCallbackSuccess:function(url){window.location=url},doDeleteThread:function(){var thread_id=$("#delete_thread_dlg_inner").data("threadid");if(thread_id==0){return}$("#delete_thread_dlg_inner").data("threadid",0);rym.closeModal();rym.request.post("DiscussionRemoveThread",{thread_id:thread_id})},openDeletePost:function(post_id){$("#delete_dlg_inner").data("postid",post_id);$("#modal_content").html($("#delete_dlg").html());rym.doModalWithTarget(null,"#modal_content")},doDelete:function(){var post_id=$("#delete_dlg_inner").data("postid");if(post_id==0){return}$("#delete_dlg_inner").data("postid",0);rym.closeModal();rym.request.post("DiscussionRemovePost",{post_id:post_id})},_doDeletePostCallbackSuccess:function(post_id,result){$("#post_frame_"+post_id).html(result);rym.setupPage()},_doDeletePostCallbackError:function(error_msg){alert(error_msg)},openEditPost:function(post_id){var post_body_el=$("#post_body_"+post_id);if(!post_body_el.is(":visible")){RYMthreadPage.undoEditPost(post_id);return}$("#post_edit_actions_"+post_id).show();$("#post_actions_"+post_id).hide();$("#post_voting_p_"+post_id).hide();var height=post_body_el.outerHeight()+em(1.3);var original=$("#post_"+post_id).data("original");post_body_el.hide();$("#thread_reply_frame").css("visibility","hidden");$("#post_body_edit_frame_"+post_id).show();$("#post_body_edit_"+post_id).css({height:height+"px"}).focus().val(original)},_doEditPostCallbackSuccess:function(post_id,result){RYMthreadPage._enablePostUI(true);$("#post_frame_"+post_id).html(result);$("#post_voting_p_"+post_id).show();$("#post_edit_actions_"+post_id).hide();$("#post_actions_"+post_id).show();$("#thread_reply_frame").css("visibility","visible");$("#post_body_"+post_id).show();$("#post_body_edit_frame_"+post_id).hide();rym.setupPage()},_doEditPostCallbackError:function(error_msg){RYMthreadPage._enablePostUI(true);var errorEl=$("#post_edit_error_"+post_id);errorEl.html('<i class="fa fa-warning"></i> '+error_msg).fadeIn()},doEditPost:function(post_id){if($(".thread_post_btn").hasClass("disabled")){return}var errorEl=$("#post_edit_error_"+post_id).hide();var textEl=$("#post_body_edit_"+post_id);var body=textEl.val();RYMthreadPage._enablePostUI(false);rym.request.post("DiscussionEditPost",{post_id:post_id,body:body})},undoEditPost:function(post_id){var post_body_el=$("#post_body_"+post_id);post_body_el.show();$("#thread_reply_frame").show();$("#post_voting_p_"+post_id).show();$("#post_edit_actions_"+post_id).hide();$("#post_actions_"+post_id).show();$("#thread_reply_frame").css("visibility","visible");$("#post_body_edit_frame_"+post_id).hide()},previewEditPost:function(post_id){var body=$("#post_body_edit_"+post_id).val();rym.request.post("DiscussionPreview",{body:body,post_id:post_id})},openEditSubject:function(thread_id){$("#discussion_thread_subject_edit_"+thread_id+"_frame").show();$("#discussion_thread_subject_frame_"+thread_id).hide();$("#discussion_thread_subject_edit_"+thread_id).focus()},doEditSubject:function(thread_id){var subject=$("#discussion_thread_subject_edit_"+thread_id).val();$("#discussion_thread_subject_edit_"+thread_id).attr("disabled","disabled");rym.request.post("DiscussionEditThreadSubject",{thread_id:thread_id,subject:subject})},_editSubjectCallback:function(thread_id,subject){$("#discussion_thread_subject_edit_"+thread_id).data("changed",false);$("#discussion_thread_subject_edit_"+thread_id).removeAttr("disabled");$("#discussion_thread_subject_"+thread_id).html(subject);$("#discussion_thread_subject_edit_"+thread_id+"_frame").hide();$("#discussion_thread_subject_frame_"+thread_id).show();$("title").html(subject+" Sonemic/Rate Your Music")},onSubjectChanged:function(thread_id){$("#discussion_thread_subject_edit_"+thread_id).data("changed",true)},onSubjectBlur:function(thread_id){if($("#discussion_thread_subject_edit_"+thread_id).data("changed")){RYMthreadPage.doEditSubject(thread_id)}},quotePost:function(post_id){var original=$("#post_"+post_id).data("original");var author=$("#post_"+post_id).data("author");var oldVal=$("#thread_reply").val();var quote=oldVal+"[quote "+author+" "+post_id+"]"+original+"[/quote]\n\n";$("#thread_reply").focus().val(quote).scrollintoview(100)},_enablePostUI:function(enabled){var textEl=$("#thread_reply");if(!enabled){$(".thread_post_btn").addClass("disabled");textEl.attr("disabled","disabled")}else{$(".thread_post_btn").removeClass("disabled");textEl.removeAttr("disabled")}},_showPostError:function(error_msg){var errorEl=$("#thread_post_error");errorEl.html('<i class="fa fa-warning"></i> '+error_msg).fadeIn()},_postCallbackSuccess:function(thread_id,post_id,result,last_page,last_page_url){if(last_page!=page_num){window.location=last_page_url;return}$("#post_frame_"+post_id).remove();RYMthreadPage._enablePostUI(true);$("#thread_reply").val("");$("#thread_"+thread_id).append(result);rym.setupPage()},_hidePreview:function(){$("#total_cover").hide();$("#preview_frame").hide()},_previewCallback:function(content){rym.doModal(content)},preview:function(thread_id){var body=$("#thread_reply").val();rym.request.post("DiscussionPreview",{body:body,post_id:0})},_postCallbackError:function(error_msg){RYMthreadPage._enablePostUI(true);RYMthreadPage._showPostError(error_msg)},post:function(thread_id){if($(".thread_post_btn").hasClass("disabled")){return}var errorEl=$("#thread_post_error").hide();var textEl=$("#thread_reply");var body=textEl.val();if(body.trim().length==0){RYMthreadPage._showPostError("You cannot post a blank reply");return}RYMthreadPage._enablePostUI(false);rym.request.post("DiscussionPost",{thread_id:thread_id,body:body})},_postNewTopicCallbackSuccess:function(thread_id,url){window.location=url},_postNewTopicCallbackError:function(error_msg){RYMthreadPage._enablePostUI(true);RYMthreadPage._showPostError(error_msg)},postNewTopic:function(group_id){if($(".thread_post_btn").hasClass("disabled")){return}var errorEl=$("#thread_post_error").hide();var textEl=$("#thread_body");var subjectEl=$("#discussion_thread_subject");var body=textEl.val();var subject=subjectEl.val();if(body.trim().length==0){RYMthreadPage._showPostError("You cannot post a blank topic");return}if(subject.trim().length==0){RYMthreadPage._showPostError("You cannot post a blank topic");return}var formData={group_id:group_id,subject:subject,body:body};formData["add_poll"]=$("#add_poll").val();formData["poll_question"]=$("#poll_question").val();formData["poll_type"]=$("input[name=poll_type]:checked").val();formData["poll_num_items"]=0;poll_num_items=1;if(formData["poll_type"]=="weighted"){poll_num_items=$("#poll_weighted_num_items").val()}else if(formData["poll_type"]=="multiple"){poll_num_items=$("#poll_multiple_num_items").val()}formData["poll_num_items"]=poll_num_items;formData["poll_can_change_votes"]=$("#poll_can_change_votes").is(":checked");formData["poll_privacy"]=$("input[name=poll_privacy]:checked").val();formData["poll_can_see_results_before_voting"]=$("#poll_can_see_results_before_voting").is(":checked");formData["poll_choices"]=$("#poll_choices").val();RYMthreadPage._enablePostUI(false);rym.request.post("DiscussionPostNewTopic",formData)},toggleLock:function(thread_id){$("#mod_thread_lock_text").html("Loading...");rym.request.post("DiscussionToggleLock",{thread_id:thread_id})},setSticky:function(thread_id,status){$("#mod_thread_sticky_text").html("Loading...");$("#toolbar_small_sticky_menu").hide();rym.request.post("DiscussionSetSticky",{thread_id:thread_id,sticky:status})},toggleThreadSubscription:function(thread_id){var subscribed=$("#thread_subscribe_btn_"+thread_id).data("subscribed");RYMthreadPage.subscribeToThread(thread_id,!subscribed)},_subscribeToThreadCallback:function(thread_id,subscribed){},subscribeToThread:function(thread_id,subscribe){var el=$("#thread_subscribe_btn_"+thread_id);el.data("subscribed",subscribe);if(subscribe){el.html('<i class="fa fa-circle"></i>')}else{el.html('<i class="fa fa-circle-o"></i>')}rym.request.post("DiscussionSubsSubscribeToThread",{thread_id:thread_id,subscribe:subscribe})},_markAllSubsReadCallback:function(){$(".new_posts").removeClass("new_posts");$(".group_thread_post_count_new").fadeOut()},markAllSubsRead:function(){rym.request.post("DiscussionSubsMarkAllRead",{})},_removeAllSubsCallback:function(){$(".group_thread").fadeOut();$(".thread_toolbar_nav").fadeOut();window.location="/community/"},openRemoveAllSubs:function(){$("#modal_content").html($("#delete_dlg").html());rym.doModalWithTarget(null,"#modal_content")},doRemoveAllSubs:function(){rym.request.post("DiscussionSubsRemoveAll",{})},toggleAddPoll:function(){var is_visible=$("#thread_post_poll").toggle().is(":visible");if(is_visible){$("#thread_post_poll_btn").text("Cancel add poll");$("#add_poll").val("true")}else{$("#thread_post_poll_btn").text("Add poll");$("#add_poll").val("false")}}};var RYMfollow={_followCallback:function(following_object,following_id,following,data){var el=$("#follow_btn_"+following_object+"_"+following_id);var countEl=$("#follow_count_"+following_object+"_"+following_id);var listEl=$("#follow_list_"+following_object+"_"+following_id);countEl.text((data.count+"").toString().replace(/\B(?=(\d{3})+(?!\d))/g,","));var html="";for(var i in data.followers){html+=RYMtemplate["page.section.followers.singleitem"].render(data.followers[i])}listEl.html(html);if(data.count==0){listEl[0].className="follower_list no_rows"}else if(data.count<10){listEl[0].className="follower_list one_row"}else{listEl[0].className="follower_list"}el.data("following",following);if(following){el[0].className="rym_follow_btn following"}else{el[0].className="rym_follow_btn "}rym.closeModal()},follow:function(element){var el=$(element);var following=el.data("following");var following_id=el.data("following-id");var following_object=el.data("following-object");var scope=el.data("scope")||"all";rym.request.post("FollowFollow",{following_id:following_id,following_object:following_object,scope:scope,follow:!following},null,"script")}};var RYMfullname={punctuation:["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","\\","[","]"," "],init:function(el,clientSide){var id=el.data("id");el.unbind();var inputEl=$("#ui_fullname_input_"+id);var overlayEl=$("#ui_fullname_overlay_"+id);inputEl.unbind();overlayEl.unbind().on("click",function(event){RYMfullname.onClickedOverlay($(this),event)});inputEl.on("change",function(event){RYMfullname.onInputChange($(this),event)});inputEl.on("keyup",function(event){RYMfullname.onInputKeyUp($(this),event)});inputEl.on("focus",function(event){RYMfullname.onInputFocus($(this),event)});inputEl.on("blur",function(event){RYMfullname.onInputBlur($(this),event)});RYMfullname.doClientUI(el)},doClientUI:function(el){var id=el.data("id");var jsonText=el.val();var name;if(!jsonText||jsonText.length==0){name={firstname:"",lastname:"",separator:""};el.val(JSON.stringify(name))}else{name=JSON.parse(jsonText)}var inputEl=$("#ui_fullname_input_"+id);el.data("sortIndex",name.firstname.length+name.separator.length);inputEl.val(name.firstname+name.separator+name.lastname);RYMfullname.updateOverlay(el);RYMfullname.updateSortChoices(el)},onClickedOverlay:function(overlayEl,event){var id=overlayEl.data("id");var el=$("#"+id);var inputEl=$("#ui_fullname_input_"+id);RYMfullname.enterEditMode(el);inputEl.focus()},enterEditMode:function(el){var id=el.data("id");$("#ui_fullname_frame_"+id)[0].className="ui_fullname_frame mode_edit";var inputEl=$("#ui_fullname_input_"+id)},leaveEditMode:function(el){var id=el.data("id");$("#ui_fullname_frame_"+id)[0].className="ui_fullname_frame"},onInputChange:function(inputEl,event){var id=inputEl.data("id");var el=$("#"+id);RYMfullname.updateValue(el)},onInputKeyUp:function(inputEl,event){var id=inputEl.data("id");var el=$("#"+id);var ctrlPressed=el.data("ctrlPressed")||false;if(event.keyCode==17){RYMfullname.toggleSortMode(id)}RYMfullname.updateSortChoices(el)},onInputFocus:function(inputEl,event){var id=inputEl.data("id");var el=$("#"+id);RYMfullname.enterEditMode(inputEl);el.data("focused",true)},onInputBlur:function(inputEl,event){var id=inputEl.data("id");var el=$("#"+id);el.data("focused",false);setTimeout(function(){if(!el.data("focused")){RYMfullname.leaveEditMode(inputEl)}},100)},onClickSortChoice:function(el,event){var id=el.data("id")},updateValue:function(el){var id=el.data("id");var name=JSON.parse(el.val());var inputEl=$("#ui_fullname_input_"+id);var sortIndex=parseInt(el.data("sortIndex"))||0;var str=inputEl.val();var lastname=str.substring(sortIndex);var firstname="";var separator="";var lastSep=sortIndex-1;for(var i=lastSep;i>=0;i--){var isPunctuation=-1!=RYMfullname.punctuation.indexOf(str[i]);if(!isPunctuation){break}}if(i==-1){lastname=str}else{firstname=str.substring(-1,i+1);separator=str.substring(i+1,lastSep+1)}var val1=str.substring(-1,sortIndex);var obj={lastname:lastname,firstname:firstname,separator:separator};var newVal=JSON.stringify(obj);el.val(newVal);RYMfullname.updateOverlay(el)},setSortIndex:function(id,index){var el=$("#"+id);el.data("sortIndex",index);RYMfullname.updateValue(el);RYMfullname.leaveEditMode(el)},toggleSortMode:function(id){var el=$("#"+id);var ctrlPressed=el.data("ctrlPressed")||false;ctrlPressed=!ctrlPressed;var inputEl=$("#ui_fullname_input_"+id);el.data("ctrlPressed",ctrlPressed);$("#ui_fullname_sort_toggle_"+id).text(ctrlPressed?"character":"word");RYMfullname.updateSortChoices(el);inputEl.focus()},updateSortChoices:function(el){var id=el.data("id");var inputEl=$("#ui_fullname_input_"+id);var choicesEl=$("#ui_fullname_sort_choices_"+id);var text=inputEl.val();var splitAll=el.data("ctrlPressed");if(text.length==0){choicesEl[0].className="ui_fullname_sort_choices no_data"}else{choicesEl[0].className="ui_fullname_sort_choices"}var inPunctuation=false;var word="";var ret="";for(var i=0;i<text.length;i++){var isPunctuation=-1!=RYMfullname.punctuation.indexOf(text[i]);if(word.length>0&&(splitAll||inPunctuation&&!isPunctuation)){if(word!=" "){ret+='<div class="ui_fullname_sort_choice" onClick="RYMfullname.setSortIndex(\''+id+"',"+(i-word.length)+');">'+word+"</div>"}word="";inPunctuation=false}if(!inPunctuation&&isPunctuation){inPunctuation=true}word+=text[i]}if(word.length>0&&word!=" "){ret+='<div class="ui_fullname_sort_choice" onClick="RYMfullname.setSortIndex(\''+id+"',"+(i-word.length)+');">'+word+"</div>"}choicesEl.html(ret)},updateOverlay:function(el,switchToOverlayMode){var id=el.data("id");var name=JSON.parse(el.val());var overlayEl=$("#ui_fullname_overlay_"+id);overlayEl.html(name.firstname+name.separator+"<b>"+name.lastname+"</b>"+"&nbsp;")},stringVal:function(el){var id=el.data("id");var jsonText=el.val();var name;if(!jsonText||jsonText.length==0){return""}else{name=JSON.parse(jsonText)}return name.firstname+name.separator+name.lastname}};$.fn.extend({fullnameUI:function(clientSide){$(this).each(function(index){RYMfullname.init($(this),clientSide)})}});function _captchaCallback(){if(rym.captcha_target=="login"){$("#recaptcha_frame")[0].className="captcha_frame confirmed"}else{$("#recaptcha_frame_support")[0].className="captcha_frame confirmed"}}var RYMlogin={facebookLoaded:false,loading:false,userinfo:null,mode:null,recaptchaLoaded:false,modalTarget:null,_refreshCaptcha:function(){if(window.grecaptcha){grecaptcha.reset();$("#recaptcha_frame")[0].className="captcha_frame"}},login:function(force_login){var obj={};if(location.host.indexOf("sonemic")!=-1){obj.site_name="Sonemic";obj.site="sonemic"}else if(location.host.indexOf("cinemos")!=-1){obj.site_name="Cinemos";obj.site="cinemos"}else{obj.site_name="Glitchwave";obj.site="glitchwave"}RYMlogin._ensureRecaptchaLoaded();if(RYMlogin.userinfo){obj.userinfo=RYMlogin.userinfo;obj.login_known=true;obj.mode_login=true;obj.login_signup_mode_existing=true;RYMlogin.mode="login"}else{if(force_login){obj.mode_login=true;RYMlogin.mode="login"}else{obj.mode_signup=true;RYMlogin.mode="signup"}}var html=RYMtemplate["ui.login"].render(obj);rym.doModal(html,"",{frame_class:"login"});if(RYMlogin.userinfo){}else{}RYMlogin._refreshCaptcha()},onClickCaptcha:function(){rym.captcha_target="login";$("#recaptcha_frame")[0].className="captcha_frame loading";grecaptcha.execute()},_getRecaptchaResponse:function(){var e1=$("#g-recaptcha-response").val();if(e1&&e1.length>0){return e1}var e2=document.getElementById("recaptcha-token");if(e2&&e2.value&&e2.value.length>0){return e2}return null},_ensureRecaptchaLoaded:function(){if(!RYMlogin.recaptchaLoaded){$("#body").prepend("<scr"+"ipt src='https://www.google."+"com/recaptcha/api.js' defer async></sc"+"ript>");RYMlogin.recaptchaLoaded=true}},_validateUserCallbackFound:function(user_info){$(".login_error").hide();if(RYMlogin.mode==="login"){$("#login_intro_username").text("@"+user_info.username);$("#login_intro_name").text(user_info.realname);$("#login_intro").css("background-image","url("+user_info.image_url_300+")");$("#login_outer_frame").addClass("login_known")}else if(RYMlogin.mode==="signup"||RYMlogin.mode==="signup_complete"){$("#login_username_error").text("That username is already taken.").fadeIn(100)}},_validateUserCallbackNotFound:function(){$("#login_outer_frame").removeClass("login_known")},_validateUserCallbackError:function(){$("#login_username_error").text("That is not a valid username. Usernames can be 3-24 characters long and can only include the _ and . symbols.")},onChangeUsernameInput:function(){$("#login_username_error").text("").hide();rym.request.post("LoginValidateFoundUser",{login_username:$("#login_username").val()})},goLogin:function(){$(".login_error").hide();var el=$("#login_outer_frame")[0];el.className="login_outer_frame mode_login";if(RYMlogin.userinfo){$("#login_signup_username").val(RYMlogin.userinfo.username);el.className+=" login_known "}RYMlogin.mode="login"},goReset:function(){$(".login_error").hide();var el=$("#login_outer_frame")[0];el.className="login_outer_frame mode_recover_password";RYMlogin.mode="recover_password"},goCompleteSignup:function(){$(".login_error").hide();var el=$("#login_outer_frame")[0];el.className="login_outer_frame mode_signup_complete";$("#login_username").val("");RYMlogin.mode="signup_complete"},goSignup:function(){$(".login_error").hide();$("#login_username").val("");$("#login_password").val("");var el=$("#login_outer_frame")[0];el.className="login_outer_frame mode_signup";if(RYMlogin.userinfo){el.className+=" login_signup_mode_existing"}RYMlogin.mode="signup"},_doSignupCallback:function(result){$(".login_error").hide();switch(result.status){case"success":window.location+="?welcome";return;break;case"error":for(var i in result.errors){var error=result.errors[i];$("#login_"+i+"_error").text(error).fadeIn(100)}break}RYMlogin._hideLoadingAnimation();RYMlogin._refreshCaptcha()},doSignup:function(){var obj={email:$("#login_signup_email").val(),login_username:$("#login_username").val(),login_password:$("#login_password").val(),captcha:RYMlogin._getRecaptchaResponse(),terms_accepted:$("#login_terms_accepted").is(":checked")};rym.request.post("LoginSignupStandard",obj,null,"script")},go:function(){$(".login_error").hide();RYMlogin._showLoadingAnimation();switch(RYMlogin.mode){case"login":RYMlogin.doLogin();break;case"signup":RYMlogin.doSignup();break;case"two_factor_create":RYMlogin.do2faCreate();break;case"recover_password":RYMlogin.doReset();break;case"signup_complete":RYMlogin.doCompleteSignup();break;case"modal":RYMcollectiveVoting.close();if(RYMlogin.modalTarget){window.location=RYMlogin.modalTarget}break}},_doCompleteSignupCallback:function(result){$(".login_error").hide();RYMlogin._hideLoadingAnimation();switch(result.status){case"success":$("#header_profile_username").text(result.username);RYMcollectiveVoting.close();return;break;case"error":for(var i in result.errors){var error=result.errors[i];$("#login_"+i+"_error").text(error).fadeIn(100)}break}window.location.reload()},doCompleteSignup:function(){var obj={email:$("#login_signup_email").val(),login_username:$("#login_username").val(),terms_accepted:$("#login_terms_accepted").is(":checked")};rym.request.post("LoginSignupComplete",obj,null,"script")},_showLoadingAnimation:function(){$("#login_overlay").show();$("#login_overlay_content").loadingAnim()},_hideLoadingAnimation:function(){$("#login_overlay").hide()},_doLoginCallback:function(result){$(".login_error").hide();switch(result.status){case"success":window.location.reload();return;break;case"requirements":var requirements=result.requirements;for(var i in requirements){var req=requirements[i];switch(req){case"captcha":$("#login_outer_frame").addClass("captcha_required");break;case"two_factor":$("#login_outer_frame").addClass("two_factor_required");break;case"undelete":$("#login_outer_frame").addClass("undelete_required");break}}break;case"error":for(var i in result.errors){var error=result.errors[i];$("#login_"+i+"_error").text(error).fadeIn(100)}break}RYMlogin._hideLoadingAnimation();RYMlogin._refreshCaptcha()},doLogin:function(){var obj={login_username:$("#login_username").val(),login_password:$("#login_password").val(),two_factor_token:$("#login_two_factor_token").val(),captcha:RYMlogin._getRecaptchaResponse(),undelete:$("#login_undelete").is(":checked")};rym.request.post("LoginLoginStandard",obj,null,"script")},_doLogoutCallback:function(){window.location.reload()},doLogout:function(){rym.request.post("LoginLogout",{},null,"script")},_doResetCallback:function(result){$(".login_error").hide();if(result.status==="success"){rym.doModal("Password reset sent.")}else{for(var error in result.errors){$("#login_"+error+"_error").text(result.errors[error]).fadeIn(100)}}RYMlogin._hideLoadingAnimation();RYMlogin._refreshCaptcha()},doReset:function(){var obj={login_username_or_email:$("#login_signup_email").val(),captcha:RYMlogin._getRecaptchaResponse()};rym.request.post("LoginRequestPasswordReset",obj,null,"script")},_setup2faCallback:function(key){RYMlogin._hideLoadingAnimation();RYMlogin.userinfo.two_factor_key=key;RYMlogin.login();var el=$("#login_outer_frame")[0];el.className="login_outer_frame mode_2fa_create";RYMlogin.mode="two_factor_create"},_do2faCreateCallback:function(result){if(result.status==="success"){window.location.reload()}else{for(var error in result.errors){$("#login_"+error+"_error").text(result.errors[error]).fadeIn(100)}}RYMlogin._hideLoadingAnimation()},do2faCreate:function(){rym.request.post("SettingsEnable2FA",{two_factor_token:$("#login_two_factor_create_token").val()},null,"script")},_twitterConnectErrorCallback:function(error){$("#login_general_error").text(error).fadeIn(100);RYMlogin._hideLoadingAnimation()},_twitterConnectCallbackFinal:function(access_token){if(window.sessionStorage&&window.sessionStorage["twitter_last_url"]){var url=window.sessionStorage["twitter_last_url"];window.sessionStorage.removeItem("twitter_last_url");window.location=url}else{window.location="/"}},_twitterConnectCallback:function(access_token){if(window.sessionStorage){window.sessionStorage["twitter_last_url"]=window.location.pathname}window.location="https://api.twitter.com/oauth/authenticate?oauth_token="+access_token;RYMlogin._hideLoadingAnimation()},twitterConnect:function(){rym.request.post("LoginConnectTwitter",{url:window.location.href},null,"script")},spotifyConnect:function(){rym.request.post("LoginConnectSpotify",{url:window.location.href},null,"script")},ensureFacebookLoaded:function(){if(!RYMlogin.facebookLoaded){RYMlogin.facebookLoaded=true;$("body").append("<scr"+'ipt src="//connect.facebook.net/en_US/all.js"></scr'+"ipt>");return false}else{return true}},doFacebookLoginDialog:function(){$(".login_error").hide();FB.login(function(response){if(response.authResponse){if(response.status=="connected"){rym.request.post("LoginConnectFacebook",{user_id:response.authResponse.userID,access_token:response.authResponse.accessToken,expires_in:response.authResponse.expiresIn},null,"script")}else if(response.status==="not_authorized"){$("#login_general_error").text("You must authorize Sonemic in order to login with Facebook. Otherwise, you can sign up using email.").fadeIn(100);RYMlogin._hideLoadingAnimation()}}else{RYMlogin._hideLoadingAnimation()}})},_doFacebookConnectCallback:function(result){if(result.status==="success"){window.location.reload()}else{RYMlogin._hideLoadingAnimation();for(var error in result.errors){$("#login_"+error+"_error").text(result.errors[error]).fadeIn(100)}}},doFacebookConnect:function(){$(".login_error").hide();FB.getLoginStatus(function(response){if(response.status==="connected"){rym.request.post("LoginConnectFacebook",{user_id:response.authResponse.userID,access_token:response.authResponse.accessToken,expires_in:response.authResponse.expiresIn},null,"script")}else if(response.status==="not_authorized"){$("#login_general_error").text("You must authorize Sonemic in order to login with Facebook. Otherwise, you can sign up using email.").fadeIn(100);RYMlogin._hideLoadingAnimation()}else{RYMlogin.doFacebookLoginDialog()}})},facebookConnect:function(){RYMlogin._showLoadingAnimation();window.fbAsyncInit=function(){FB.init({appId:"291030577597585",status:true,cookie:true,xfbml:true});RYMlogin.doFacebookConnect();window.fbAsyncInit=null};var alreadyLoaded=RYMlogin.ensureFacebookLoaded();if(alreadyLoaded){RYMlogin.doFacebookConnect()}}};var RYMgalleryPage={toggle:function(){var el=$(".gallery_btn").toggleClass("depressed");var imageFrame=$("#page_gallery_overlay_frame");if(el.hasClass("depressed")){if(imageFrame.hasClass("loaded")){imageFrame.fadeIn(100);el.parent().css("min-height",imageFrame.outerHeight()+25+"px")}else{RYMgalleryPage.init(galleryData)}$("#ui_gallery_header_close_toolbar").scrollintoview(100)}else{RYMgalleryPage.close()}},close:function(){var el=$("#page_gallery_overlay_frame").fadeOut(100);el.parent().css("min-height","auto")},initGallery:function(gallery){var layout=justifiedLayout(gallery.metadata.aspect_ratios,$("#ui_gallery_images_"+gallery.metadata.schema+"_"+gallery.metadata.assoc_id).innerWidth(),10);var images=gallery.images;var html="";height=layout.containerHeight;$("#ui_gallery_images_"+gallery.metadata.schema+"_"+gallery.metadata.assoc_id).css("height",layout.containerHeight+"px");for(var i in images){var image=images[i];var box=layout.boxes[i];image.renderedWidth=box.width;image.renderedHeight=box.height;image.renderedTop=box.top;image.renderedLeft=box.left;html+=RYMtemplate["ui.gallery.item"].render(image)}$("#ui_gallery_images_"+gallery.metadata.schema+"_"+gallery.metadata.assoc_id).html(html);return height},init:function(data){$("#page_gallery_overlay_frame").fadeIn(100);$("#page_gallery_overlay_frame").html(RYMtemplate["ui.gallery"].render(data));var totalHeight=200;var numImages=0;for(var i in data.galleries){var gallery=data.galleries[i];totalHeight+=RYMgalleryPage.initGallery(gallery);numImages+=gallery.images.length}$("#gallery_btn_left").text("Images ["+numImages+"]");$("#gallery_btn_right").text("Images ["+numImages+"]");var el=$("#page_gallery_overlay_frame").css("min-height",totalHeight+"px");el.parent().css("min-height",totalHeight+25+"px");$("#page_gallery_overlay_frame .delayed_background_img").on("appear",function(){if(window.devicePixelRatio>1&&$(this).data("delayloadurl2x")){$(this).css("background-image",$(this).data("delayloadurl2x"))}else{$(this).css("background-image",$(this).data("delayloadurl"))}$(this).off("appear")});$(".delayed_background_img").appear();$(".delayed_foreground_img").appear();$.force_appear()},setPlacement:function(){},_votePlacementCallback:function(object){var gallery=RYMgalleryPage._getGalleryForSchema(object.schema);for(var i in gallery.images){if(gallery.images[i].lnk_id==object.lnk_id){gallery.images[i]=object;return RYMgalleryPage.openPlacement(null,object.schema,object.assoc_id,object.lnk_id)}}},votePlacement:function(event,schema,assoc_id,link_id,placement,polarity){if(event){event.stopPropagation()}var obj={link_id:link_id,placement:placement,polarity:polarity};rym.request.post("GalleryVotePlacement",obj,null,"script")},_getGalleryForSchema:function(schema){var galleries=window.galleryData.galleries;for(var i in galleries){var gl=galleries[i];if(gl.metadata.schema===schema){return gl;break}}return null},openPlacement:function(event,schema,assoc_id,link_id){if(event){event.stopPropagation()}var gallery=RYMgalleryPage._getGalleryForSchema(schema);var image=null;for(var j in gallery.images){if(gallery.images[j].lnk_id===link_id){image=gallery.images[j];break}}var obj=Object.assign(image,{site:rym.site,metadata:gallery.metadata,schema:schema});obj["placement_"+image.placement]=true;var html=RYMtemplate["ui.image_placement"].render(obj);rym.doModal(html,"",{frame_class:"gallery_placement"})},onClickDeleteConfirm:function(event,schema,assoc_id,link_id){if(event){event.stopPropagation()}rym.request.post("GalleryImageDelete",{schema:schema,link_id:link_id,assoc_id:assoc_id},null,"script");$("#ui_gallery_image_frame_"+schema+"_"+assoc_id+"_"+link_id).css("opacity","0.5")},onPlacementChange:function(event,placement){$("#ui_image_placement_chooser")[0].className="ui_image_placement_chooser placement_"+placement},_onClickSavePlacementCallback:function(){window.location.reload()},onClickSavePlacement:function(event,lnk_id,placement){var placement=$("input[name=image_placement_chooser_placement]:checked").val();var scope=$("input[name=image_placement_chooser_site]:checked").val();var obj={link_id:lnk_id,placement:placement,scope:scope};rym.doModalLoading();rym.request.post("GallerySetPlacement",obj,null,"script")},_deleteCallback:function(schema,link_id,assoc_id){var gallery=RYMgalleryPage._getGalleryForSchema(schema);for(var j in gallery.images){if(gallery.images[j].lnk_id===link_id){gallery.images.splice(j,1);break}}gallery.metadata.aspect_ratios.splice(j,1);RYMgalleryPage.init(window.galleryData);$("#ui_gallery_"+schema+"_"+assoc_id).addClass("mode_edit")},_deleteErrorCallback:function(link_id,error_msg){rym.doModal(error_msg)},onClickDelete:function(event,schema,assoc_id,link_id){if(event){event.stopPropagation()}$("#ui_gallery_image_frame_"+schema+"_"+assoc_id+"_"+link_id).addClass("in_delete_confirmation")},onClickDeleteCancel:function(event,schema,assoc_id,link_id){if(event){event.stopPropagation()}$("#ui_gallery_image_frame_"+schema+"_"+assoc_id+"_"+link_id).removeClass("in_delete_confirmation")},onClickUpload:function(schema,assoc_id,callback_page){rym.doModalLoading();rym.request.post("UploaderLaunch",{schema:schema,assoc_id:assoc_id,callback_page:"gallery"},null,"script")},onUploadSuccess:function(id,data){var gallery=RYMgalleryPage._getGalleryForSchema(schema);gallery.images.unshift(data);gallery.metadata.aspect_ratios.unshift(data.aspect_ratio);RYMgalleryPage.init(window.galleryData)},_setDefaultCallback:function(link_id,url_150){},_setDefaultError:function(link_id,error_msg){}};var RYMgenreBrowser={onClickGenreListBtn:function(){window.location="/music/genre/"},expandGenre:function(genre_id){$("#all_genres").css("opacity",.1);$("#genre_block_frame_"+genre_id).addClass("selected")},_showLoadingAnim:function(){$("#genre_expand_content").html($("#loading_anim").html())},chooseGenre:function(genre_id,url){},onClickGenre:function(event,genre_id){console.log("clickGenre");window.location=$("#genre_block_"+genre_id).data("url");return false},_setupHeights:function(genre_id){var cloneHeight=$("#genre_block_"+genre_id+"_clone").outerHeight();var expandedContentHeight=$("#genre_expand_content").outerHeight();var allGenreHeight=RYMgenreBrowser.allGenreHeight;console.log("cloneHeight (For #genre_block_"+genre_id+"_clone:"+cloneHeight+", expandedContentHeight:",expandedContentHeight);var minHeight=Math.max(cloneHeight,expandedContentHeight,allGenreHeight);$("#content").css("min-height",minHeight+em(9)+"px")},_loadSubGenresCallback:function(genre_id,content){$("#genre_expand_content").html(content);rym.setupPage();RYMgenreBrowser._setupHeights(genre_id)},loadSubGenres:function(genre_id){RYMgenreBrowser._showLoadingAnim();rym.request.post("GenreBrowseLoadSubgenres",{genre_id:genre_id})},onCloneClickGenre:function(event,genre_id){$(".genre_block_frame_std").css("opacity",.1).show();var el=$("#genre_block_frame_"+genre_id);var elClone=$("#genre_block_frame_"+genre_id+"_clone");var allGenresEl=$("#all_genres");var height=el.outerHeight();var top=el.offset().top-allGenresEl.offset().top;var left=el.offset().left-allGenresEl.offset().left;$(".genre_block_frame_std").animate({opacity:1}).show();elClone.show().animate({top:top,left:left},400,function(){$(this).hide();el.css({opacity:1})}).removeClass("shown");$("#genre_expand_content").fadeOut();$.force_appear()},onClickExpandGenre:function(event,genre_id,genre_url){console.log("expandGenre");event.stopPropagation();$(".genre_block_frame_std").fadeOut();var el=$("#genre_block_frame_"+genre_id);var elClone=$("#genre_block_frame_"+genre_id+"_clone");var allGenresEl=$("#all_genres");var height=el.outerHeight();var top=el.offset().top-allGenresEl.offset().top;var left=el.offset().left-allGenresEl.offset().left;el.css({opacity:0});history.replaceState(null,null,window.location.href+genre_url+"/");RYMgenreBrowser.loadSubGenres(genre_id);elClone.css({top:top+"px",left:left+"px",opacity:1}).show().animate({top:0,left:0},400,function(){$("#genre_expand_content").fadeIn(300)}).addClass("shown");$.force_appear();$("html, body").animate({scrollTop:0},400);return false},onMouseOutGenre:function(event,genre_id){$("#genre_block_outer_"+genre_id).removeClass("active");console.log("mouseout")},onMouseMoveGenre:function(event,ui,genre_id){var top=event.pageY-$("#genre_block_outer_"+genre_id).offset().top;if(top<em(14)){$("#genre_block_outer_"+genre_id).addClass("active")}else{$("#genre_block_outer_"+genre_id).removeClass("active")}}};var RYMimageBrowser={images:null,currentIndex:0,active:false,schema:null,assoc_id:null,lastScroll:null,init:function(images){RYMimageBrowser.images=images;RYMimageBrowser.currentIndex=0},load:function(schema,assoc_id,starting_id){RYMimageBrowser.schema=schema;RYMimageBrowser.assoc_id=assoc_id;if(window["g_images_"+schema+"_"+assoc_id]){RYMimageBrowser.init(window["g_images_"+schema+"_"+assoc_id]);RYMimageBrowser.launch(starting_id)}else{rym.request.post("ImagesLoad",{schema:schema,assoc_id:assoc_id,starting_id:starting_id},null,"script")}},launch:function(starting_id){$("#image_browser").show();$("body,html").css("overflow","hidden");RYMimageBrowser.currentIndex=0;for(var i in RYMimageBrowser.images){if(RYMimageBrowser.images[i].image_id==starting_id){RYMimageBrowser.currentIndex=parseInt(i);break}}RYMimageBrowser.active=true;RYMimageBrowser.navigateTo(RYMimageBrowser.currentIndex);RYMimageBrowser.lastScroll=$("body").scrollTop();window.location.hash="#images,"+RYMimageBrowser.schema+","+RYMimageBrowser.assoc_id+","+starting_id},navigateTo:function(index){var img=RYMimageBrowser.images[index];if(typeof img=="undefined"){RYMimageBrowser.hide();return}var classes="";if(RYMimageBrowser.images.length>1&&RYMimageBrowser.currentIndex!=0){classes+="can_nav_prev "}if(RYMimageBrowser.images.length-1!=RYMimageBrowser.currentIndex){classes+="can_nav_next";var nextImg=RYMimageBrowser.images[index+1];var html='<img src="'+nextImg.url_fullres+'"/>';$("#image_browser_preload").html(html)}$("#image_browser_progress").html("Image "+(RYMimageBrowser.currentIndex+1)+" of "+RYMimageBrowser.images.length);if(img.pts){$("#image_browser_date").html("Uploaded: "+img.pts)}else{$("#image_browser_date").html("")}$("#image_browser")[0].className="image_browser "+classes;$("#image_browser_caption").html(img.caption);$("#image_browser_loading").show();var html='<img src="'+img.url_fullres+'" onload="RYMimageBrowser.hideLoading();" /><div class="helper"></div>';$("#image_browser_image").html(html);$("#image_browser_download_btn").prop("download",img.image_id).prop("href",img.url_fullres);$("#image_browser_download_btn").off("click").on("click",function(event){window.open(img.url_o,"_blank");event.stopPropagation()});window.location.hash="#images,"+RYMimageBrowser.schema+","+RYMimageBrowser.assoc_id+","+img.image_id},hideLoading:function(){$("#image_browser_loading").hide()},hide:function(){$("#image_browser").hide();$("body,html").css("overflow","auto");RYMimageBrowser.active=false;window.location.hash="";$("body").scrollTop(RYMimageBrowser.lastScroll)},prev:function(){RYMimageBrowser.currentIndex--;if(RYMimageBrowser.currentIndex<0){RYMimageBrowser.currentIndex=RYMimageBrowser.images.length-1}RYMimageBrowser.navigateTo(RYMimageBrowser.currentIndex)},next:function(){RYMimageBrowser.currentIndex++;if(RYMimageBrowser.currentIndex>RYMimageBrowser.images.length-1){RYMimageBrowser.currentIndex=0}RYMimageBrowser.navigateTo(RYMimageBrowser.currentIndex)}};var RYMmediatimeline={init:function(){moment.locale(window.navigator.userLanguage||window.navigator.language||"en-GB");$(".timeline_list_item").each(function(){var id=$(this).data("id");RYMmediatimeline.initItem(id)});$(".timeline_time_tz_example").text(moment().format("lll"));$(".timeline_time_tz_name").text(RYMmediatimeline._getTimeZoneName())},initItem:function(id){$("#timeline_list_delete_"+id).unbind().on("click",function(event){RYMmediatimeline.onClickDelete($(this))});$("#timeline_list_state_"+id).unbind().on("click",function(event){RYMmediatimeline.onClickState($(this))});var elStart=$("#timeline_list_start_date_"+id);var elEnd=$("#timeline_list_end_date_"+id);if(elStart.length){RYMmediatimeline.renderDate(elStart);elStart.unbind().on("change",function(event){RYMmediatimeline.onDateChange($(this))})}if(elEnd.length){RYMmediatimeline.renderDate(elEnd);elEnd.unbind().on("change",function(event){RYMmediatimeline.onDateChange($(this))})}},load:function(base_el,id){var url="/api/1/media_timeline/";var user_id=rym.session.userid;if(!user_id){rym.showGlobalError("Please login or signup to add this to your timeline!");return}var assoc_id=base_el.data("assoc-id");var sec_id=base_el.data("sec-id");var object=base_el.data("object");var obj={user_id:user_id,assoc_id:assoc_id,sec_id:sec_id,ulv:rym.session.token,object:object};var pageHeight=$(document).height()+"px";$("#total_cover").css({width:"100%",height:pageHeight,top:0,left:0}).show().on("click",function(){RYMmediatimeline.dismiss()});$.ajax({url:url,method:"GET",dataType:"json",data:obj,success:function(data,status,xhr){var html=RYMtemplate["ui.media_timeline"].render(data);$("#content_total_cover").html(html);var position=base_el.offset();var windowWidth=$(window).outerWidth();var left=0;var frameEl=$("#timeline_frame");var frameWidth=frameEl.outerWidth();if(position.left<windowWidth/2){left=position.left}else{left=position.left-frameWidth+base_el.outerWidth()}RYMmediatimeline.init();frameEl.css("top",position.top+1+base_el.outerHeight()+"px").css("left",left+"px")},error:function(data,status,xhr){RYMmediatimeline.dismiss();alert("Error loading timeline")}})},dismiss:function(){$("#content_total_cover").html("");$("#total_cover").hide()},_getTimeZoneName:function(){return(new Date).toString().match(/\(([A-Za-z\s].*)\)/)[1]},renderDate:function(el){var ts=el.data("ts");if(ts&&ts.length){el.val(RYMmediatimeline._ISOtoDateText(el.data("ts")))}else{el.val("")}},_setDateSuccessCallback:function(data){var edited_item=data.edited_item;edited_item.metadata=data.metadata;var html=RYMtemplate["ui.media_timeline.singleitem"].render(data.edited_item);$("#timeline_list_item_"+edited_item.id).replaceWith(html);RYMmediatimeline.initItem(edited_item.id);$("#timeline_list_item_"+edited_item.id).removeClass("loading");RYMmediatimeline.updateCounts(data)},setDate:function(el){var id=el.data("id");var tstype=el.data("tstype");var ts_str=el.val();var iso=RYMmediatimeline._dateTextToISO(ts_str);console.log(iso);el.data("ts",iso);el.val(RYMmediatimeline._ISOtoDateText(iso));$("#timeline_list_item_"+id).addClass("loading");var obj={item_id:id,ulv:rym.session.token};if(tstype==="start"){obj.ts=iso}else{obj.ts_end=iso}if(iso&&iso.length>0){}else{if(tstype==="start"){RYMmediatimeline.showError("That is not a valid date - try using the example format given below.");return}else{obj={item_id:id,ulv:rym.session.token,state:"active"}}}$.ajax({url:"/api/1/media_timeline/edit",method:"POST",dataType:"json",data:obj,success:function(data,status,xhr){RYMmediatimeline._setDateSuccessCallback(data)},error:function(data,status,xhr){$("#timeline_list_item_"+id).removeClass("loading");RYMmediatimeline.showError(data.responseJSON.errors[0].message)}})},hideError:function(){$("#timeline_log_error").hide()},showError:function(message){console.log(message);$("#timeline_log_error").text(message).fadeIn(100)},_dateTextToISO:function(dateText){var a=new Date(dateText);if(isNaN(a.getTime())){return""}else{return moment(a).toISOString()}},_ISOtoDateText:function(isoText){var d=new Date(isoText);if(isNaN(d.getTime())){return""}return moment(d).format("lll")},toggleEdit:function(id){$("#"+id).toggleClass("editing")},logPlay:function(id){},toggleCompleted:function(item_id){},onClickAdd:function(object,assoc_id,sec_id){$.ajax({url:"/api/1/media_timeline/add",method:"POST",dataType:"json",data:{object:object,assoc_id:assoc_id,sec_id:sec_id,ulv:rym.session.token},success:function(data,status,xhr){RYMmediatimeline._addCallback(data);console.log("success add "+status)},error:function(data,status,xhr){RYMmediatimeline.showError(data.responseJSON.errors[0].message)}})},onClickDelete:function(el){var id=el.data("id");$.ajax({url:"/api/1/media_timeline/delete",method:"POST",dataType:"json",data:{item_id:id,ulv:rym.session.token},success:function(data,status,xhr){RYMmediatimeline._deletePlayCallback(id,data)},error:function(data,status,xhr){RYMmediatimeline.showError(data.responseJSON.errors[0].message)}})},_setStateCallback:function(data){},onClickState:function(el){var id=el.data("id");var obj={item_id:id,ulv:rym.session.token};var ts_end=$("#timeline_list_end_date_"+id).val();if(ts_end.length){obj.state="active"}else{obj.state="completed"}$("#timeline_list_item_"+id).addClass("loading");$.ajax({url:"/api/1/media_timeline/edit",method:"POST",dataType:"json",data:obj,success:function(data,status,xhr){RYMmediatimeline._setDateSuccessCallback(data)},error:function(data,status,xhr){$("#timeline_list_item_"+id).removeClass("loading");RYMmediatimeline.showError(data.responseJSON.errors[0].message)}})},onDateChange:function(el){var id=el.data("id");RYMmediatimeline.hideError(id);console.log(el.val());RYMmediatimeline.setDate(el)},_addCallback:function(data){var added_item=data.added_item;added_item.metadata=data.metadata;var html=RYMtemplate["ui.media_timeline.singleitem"].render(data.added_item);$("#timeline_list_items").prepend(html);RYMmediatimeline.initItem(added_item.id);RYMmediatimeline.updateCounts(data)},_deletePlayCallback:function(id,data){$("#timeline_list_item_"+id).fadeOut(150);alert(JSON.stringify(data));RYMmediatimeline.updateCounts(data)},_dateEditCallback:function(id,item,date){},updateCounts:function(data){var html=RYMtemplate["ui.catalog.timeline"].render(data);if(data.counts.num_plays==0){$("#timeline_frame").addClass("no_entries").removeClass("has_plays")}else{$("#timeline_frame").addClass("has_plays").removeClass("no_entries")}$("#ui_catalog_timeline_"+data.metadata.object+"_"+data.metadata.assoc_id+"_"+data.metadata.sec_id).replaceWith(html)}};var RYMmessagingPage={timer:null,appearTimer:null,inSelectMode:false,lastSelectedThreadId:null,searchTimer:null,lastSearchTerm:"",threadLoadingTimer:null,extendHeight:200,delayed_foreground_imgCount:0,hasPushed:false,lastThreadScrollY:0,lastDirection:"down",initialComposeHeight:1.8,maxComposeHeight:10,_scrollThreadToMessage:function(message_id,extraHeight){if(typeof extraHeight=="undefined"){extraHeight=200}var scrollTop=$("#message_"+message_id).offset().top-$(".messaging_thread").offset().top-extraHeight;$("#messaging_thread").off("scroll");$("#messaging_thread")[0].scrollTop=scrollTop;RYMmessagingPage.lastThreadScrollY=scrollTop;$("#messaging_thread").on("scroll",function(event){RYMmessagingPage.onThreadScroll(event)});$("#messaging_thread").css("visibility","visible")},_loadThreadCallback:function(thread_id,reference_id,direction,content,subject,num_messages,recipient_username,new_unread_count,notify_html,is_last_message){if(RYMmessagingPage.threadLoadingTimer){clearTimeout(RYMmessagingPage.threadLoadingTimer);RYMmessagingPage.threadLoadingTimer=null}if(RYMmessagingPage.timer){clearTimeout(RYMmessagingPage.timer);RYMmessagingPage.timer=null}$("#compose_to").val(recipient_username);$("#compose_subject").val(subject);if(direction=="initial"){$("#messaging_thread").css("visibility","hidden");$("#messaging_thread").html(content);setTimeout(function(){RYMmessagingPage._scrollThreadToMessage(reference_id,0)},50)}else if(direction=="down"){$("#message_load_next_page_"+reference_id).hide();$("#message_thread_"+thread_id).append(content)}else if(direction=="up"){$("#message_load_prev_page_"+reference_id).hide();$("#message_thread_"+thread_id).prepend(content);RYMmessagingPage._scrollThreadToMessage(reference_id,47)}else{$("#messaging_thread").html(content)}if(direction=="compose"){$("#thread_inner").addClass("compose");$("#compose_message").attr("placeholder","Write your message...");$("#compose_new").show();$("#messaging_thread").html($("#messaging_rules_info").html());if(notify_html&&notify_html.length>0){$("#away_message").html(notify_html);$("#messaging_away_message_frame").show()}else{$("#messaging_away_message_frame").hide()}if(recipient_username==""){$("#compose_to").focus();RYMmessagingPage._enableComposeControls(false,false)}else{$("#compose_message").focus()}}else{$("#thread_inner").removeClass("compose");$("#compose_message").attr("placeholder","Reply to this message...");$("#compose_new").hide();RYMmessagingPage._enableComposeControls(true,false)}if(subject.length==0){if(direction=="compose"){subject='<span style="color:#888;">New message</span>'}else{subject='<span style="color:#888;">(no subject)</span>'}}$("#thread_subject").html(subject);RYMmessagingPage._restoreComposeMessage();$(".message_load_page:visible").appear();if(is_last_message){$("#thread_list_item_frame_"+thread_id).removeClass("has_unread")}RYMmobile.mobileMenu.enterSelectionMode();if(new_unread_count!=null){RYMmessagingPage.updateUnreadMessagecount(new_unread_count)}RYMmessagingPage.reflowPage();rym.setupPage()},returnToThreadList:function(){if(history&&history.pushState){history.pushState(null,null,"/messaging/");RYMmessagingPage.hasPushed=true}else{window.location="/messaging/"}RYMmobile.mobileMenu.exitSelectionMode()},_scrollThreadListToMessage:function(message_id){if($("#thread_"+message_id)[0]){$("#thread_"+message_id)[0].scrollintoview()}},_loadThreadPageCallback:function(reference_id,direction,content){if(direction=="initial"){$("#thread_list").html(content);RYMmessagingPage._scrollThreadListToMessage(reference_id);$("#thread_"+reference_id).addClass("active")}else if(direction=="down"){$("#thread_load_next_page_"+reference_id).hide();$("#thread_list").append(content)}else if(direction=="up"){$("#thread_load_prev_page_"+reference_id).hide();$("#thread_list").prepend(content);RYMmessagingPage._scrollThreadListToMessage(reference_id)}else{$("#thread_list").html(content)}$(".thread_load_page:visible").appear()},reportMessage:function(message_id){$("#modal_content").html($("#report_dlg").html());$("#messaging_report_message_id").val(message_id);rym.doModalWithTarget(null,"#modal_content")},quoteMessage:function(message_id){$("#compose_message")[0].value+="[quote]"+$("#message_body_"+message_id).data("unformatted")+"[/quote]"},confirmReportMessage:function(message_id){var reason=$("#message_report_reason").val();var message_id=$("#messaging_report_message_id").val();rym.closeModal();rym.request.post("MessagingReport",{message_id:message_id,reason:reason})},_deleteThreadCallback:function(thread_id){var thread_list_el=$("#thread_"+thread_id);var newThread=thread_list_el.next(".thread_list_item");if(newThread.length==0){newThread=thread_list_el.prev(".thread_list_item")}thread_list_el.fadeOut();if(newThread.length==1){RYMmessagingPage.selectThread(newThread.data("threadid"))}else{$("#messaging_thread").html("")}RYMmessagingPage.reflowPage()},_deleteMessageCallback:function(message_id,thread_key,num_messages_before_delete){$("#message_"+message_id).fadeOut();if(num_messages_before_delete<=1){$("#thread_list_item_frame_"+thread_key).fadeOut();$("#thread_subject").html("")}},deleteMessage:function(message_id){clearTimeout(RYMmessagingPage.timer);RYMmessagingPage.timer=null;rym.request.post("MessagingDeleteMessage",{message_id:message_id})},deleteMessageThread:function(thread_id){clearTimeout(RYMmessagingPage.timer);RYMmessagingPage.timer=null;rym.request.post("MessagingDeleteThread",{thread_id:thread_id})},selectThread:function(thread_id,message_id){if(!message_id){message_id=thread_id}clearTimeout(RYMmessagingPage.timer);RYMmessagingPage.timer=null;var wevt;if(typeof event!="undefined"){wevt=event}else if(window.event){wevt=window.event}if(wevt&&(wevt.shiftKey||wevt.metaKey||event&&event.which==2)){window.open("/messaging/"+message_id+"/","_blank");return false}$("#messaging_thread").html("");$(".thread_list_item").removeClass("active");$("#thread_"+thread_id).addClass("active");if(history&&history.pushState){history.pushState(null,null,"/messaging/"+message_id+"/");RYMmessagingPage.hasPushed=true;RYMmessagingPage._loadThreadFromUrl("/messaging/"+message_id+"/")}else{window.location="/messaging/"+message_id+"/"}},_loadThreadFromUrl:function(url){var thread_id=url.split("/")[2];var reference_id=thread_id;if(thread_id=="compose"){reference_id=url.split("/")[3]}if(RYMmessagingPage.threadLoadingTimer){clearTimeout(RYMmessagingPage.threadLoadingTimer);RYMmessagingPage.threadLoadingTimer=null}RYMmessagingPage.threadLoadingTimer=setTimeout(function(){RYMmessagingPage._showThreadLoadingAnim()},500);rym.request.post("MessagingLoadThread",{thread_id:thread_id,reference_id:reference_id,direction:"initial"})},onAppearThreadLoadMarker:function(el){},onNavStateChange:function(url){var thread_id=url.split("/")[2];if(url=="/messaging/"){RYMmobile.mobileMenu.exitSelectionMode()}if(thread_id.length){RYMmessagingPage._loadThreadFromUrl(url)}rym.request.post("MessagingLoadThreadPage",{reference_id:thread_id,direction:"initial"})},onThreadScroll:function(event){var scrollTop=$("#messaging_thread")[0].scrollTop;if(scrollTop<RYMmessagingPage.lastThreadScrollY){RYMmessagingPage.lastDirection="up"}else{RYMmessagingPage.lastDirection="down"}RYMmessagingPage.lastThreadScrollY=scrollTop;if(RYMmessagingPage.appearTimer!=null){clearTimeout(RYMmessagingPage.appearTimer);RYMmessagingPage.appearTimer=null}RYMmessagingPage.appearTimer=setTimeout(function(){$.force_appear()},200)},onPositionChange:function(message_id){if(RYMmessagingPage.timer!=null){if(RYMmessagingPage.lastDirection=="up"){return}clearTimeout(RYMmessagingPage.timer);RYMmessagingPage.timer=null}RYMmessagingPage.timer=setTimeout(function(){RYMmessagingPage._doPositionChange(message_id)},100)},_doPositionChange:function(message_id){if(history&&history.pushState){history.replaceState(null,null,"/messaging/"+message_id+"/");RYMmessagingPage.hasPushed=true}RYMmessagingPage.timer=null},compose:function(){if(history&&history.pushState){history.pushState(null,null,"/messaging/compose/");RYMmessagingPage.hasPushed=true;RYMmessagingPage._loadThreadFromUrl("/messaging/compose/")}else{window.location="/messaging/compose/"}},toggleSelectMode:function(){RYMmessagingPage.inSelectMode=!RYMmessagingPage.inSelectMode;if(RYMmessagingPage.inSelectMode){$("#thread_list").addClass("select_items");$("#messaging_toolbar").addClass("delete_mode")}else{$(".thread_list_frame").removeClass("selected");$("#thread_list").removeClass("select_items");$("#messaging_toolbar").removeClass("delete_mode");$(".thread_list_item_checkbox").removeClass("selected");RYMmessagingPage.lastSelectedThreadId=null;$("#messaging_toolbar_delete_selected").removeClass("enabled").text("Delete selected")}},toggleThreadItemSelected:function(thread_id,thread_key){var wevt;if(typeof event!="undefined"){wevt=event}else if(window.event){wevt=window.event}if(wevt&&(wevt.shiftKey||event&&event.which==2)&&RYMmessagingPage.lastSelectedThreadId!=null){var id1=RYMmessagingPage.lastSelectedThreadId;var id2=thread_key;if($("#thread_list_item_frame_"+id1).index()>$("#thread_list_item_frame_"+id2).index()){var tmp=id1;id1=id2;id2=tmp}var parent="#thread_list";var el=$("#thread_list_item_frame_"+id1);while(el&&el.length){if(!el.hasClass("thread_list_frame")){el=el.next();continue}var id=el[0].dataset.threadkey;var frameEl=document.getElementById("thread_list_item_frame_"+id);if(frameEl){frameEl.className="thread_list_frame selected"}el=el.next();if(id==id2){break}}}else{var is_selected=$("#thread_list_item_frame_"+thread_key).toggleClass("selected").hasClass("selected");if(is_selected){RYMmessagingPage.lastSelectedThreadId=thread_key}}var numSelected=$(".thread_list_frame.selected").length;if(numSelected>0){$("#messaging_toolbar_delete_selected").addClass("enabled").text("Delete selected ["+numSelected+"]")}else{$("#messaging_toolbar_delete_selected").removeClass("enabled").text("Delete selected")}},confirmDeleteSelectedThreads:function(){var thread_ids=new Array;$(".thread_list_frame.selected").each(function(){thread_ids.push($(this).data("threadid"))});var thread_id_txt=JSON.stringify(thread_ids);rym.request.post("MessagingDeleteSelectedThreads",{thread_ids:thread_id_txt})},deleteSelectedThreads:function(){if($("#messaging_toolbar_delete_selected.enabled").length==0){return}$("#modal_content").html($("#delete_dlg").html());rym.doModalWithTarget(null,"#modal_content")},_deleteSelectedThreadsCallback:function(){rym.closeModal();$(".thread_list_frame.selected").slideUp(200);RYMmessagingPage.toggleSelectMode()},onSearchKeyUp:function(){if(RYMmessagingPage.searchTimer){clearTimeout(RYMmessagingPage.searchTimer);RYMmessagingPage.searchTimer=null}var searchterm=$("#messaging_search").val();if(RYMmessagingPage.lastSearchTerm!=searchterm){RYMmessagingPage.searchTimer=setTimeout(function(){RYMmessagingPage.doSearch()},800)}},_showThreadListLoadingAnim:function(){$("#thread_list").html($("#loading_anim").html())},_showThreadLoadingAnim:function(){$("#thread_subject").html($("#loading_anim").html())},_showThreadNoResults:function(){$("#thread_list").html($("#no_results").html())},_showThreadNoMessages:function(){$("#thread_list").html($("#no_messages").html())},doSearch:function(){var searchterm=$("#messaging_search").val();RYMmessagingPage._showThreadListLoadingAnim();RYMmessagingPage.lastSearchTerm=searchterm;console.log("dosearch:"+searchterm);rym.request.post("MessagingLoadThreadPage",{reference_id:null,direction:"initial",searchterm:searchterm})},preview:function(){if($("#messaging_preview_btn").hasClass("disabled")){return}var body=$("#compose_message").val();rym.request.post("MessagingPreview",{body:body})},_hidePreview:function(){$("#total_cover").hide();$("#preview_frame").hide()},_previewCallback:function(content){var pageHeight=$(document).height()+"px";$("#total_cover").css({width:"100%",height:pageHeight,top:0,left:0}).show().on("click",function(){RYMmessagingPage._hidePreview()});var pageWidth=$(document).width();var left=pageWidth/2-em(50)/2;$("#preview_frame").html(content).show().css("left",left+"px").on("click",function(){return false})},validateRecipient:function(){var recipient_username=$("#compose_to").val();rym.request.post("MessagingValidateRecipient",{recipient_username:recipient_username});$("#compose_status")[0].className="compose_status loading"},_enableComposeControls:function(enable,enable_to){if(enable){if(enable_to){$("#compose_to").prop("disabled",false)}$("#ui_textarea_toolbar_compose_message").show();$("#messaging_send_btn").show();$("#messaging_preview_btn").show();$("#compose_subject_line").show();$("#compose_message").prop("disabled",false);$("#messaging_send_btn").removeClass("disabled");$("#messaging_preview_btn").removeClass("disabled");$("#messaging_compose").show();$("#compose_error").hide()}else{if(enable_to){$("#compose_to").prop("disabled",true)}RYMmessagingPage.resetComposeRecipient();$("#ui_textarea_toolbar_compose_message").hide();$("#messaging_send_btn").hide();$("#messaging_preview_btn").hide();$("#compose_subject_line").hide();$("#compose_message").prop("disabled",true);$("#messaging_send_btn").addClass("disabled");$("#messaging_preview_btn").addClass("disabled")}},resetComposeRecipient:function(){$("#compose_status")[0].className="compose_status";$("#compose_status").css("background-image","")},_validateRecipientCallback:function(error,image_url,username,invalid_username){$("#compose_error").hide();if(invalid_username){$("#compose_error").hide();$("#compose_status")[0].className="compose_status";$("#compose_status").css("background-image","");RYMmessagingPage._enableComposeControls(false,false);$("#compose_error_message").html(error);$("#compose_error").fadeIn()}else if(error.length){$("#compose_error_message").html(error);$("#compose_error").fadeIn();$("#compose_status")[0].className="compose_status warning";$("#compose_status").css("background-image","");RYMmessagingPage._enableComposeControls(false,false)}else{RYMmessagingPage._enableComposeControls(true);$("#compose_status")[0].className="compose_status";$("#compose_to").val(username);$("#compose_status").css("background-image","url('"+image_url+"')");$("#compose_subject").focus()}},send:function(){if($("#messaging_send_btn").hasClass("disabled")){return}$("#compose_error").hide();RYMmessagingPage._enableComposeControls(false);var recipient_username=$("#compose_to").val();var subject=$("#compose_subject").val();var body=$("#compose_message").val();rym.request.post("MessagingSend",{recipient_username:recipient_username,subject:subject,body:body})},_sendCallbackError:function(error){RYMmessagingPage._enableComposeControls(true);$("#compose_error_message").html(error);$("#compose_error").fadeIn()},_sendCallback:function(message_id,message_key,message_subject,message_content,thread_count,thread_pts,thread_tsz){var el=$("#thread_list_item_frame_"+message_key);if(el.length==0){rym.request.post("MessagingLoadThreadPage",{reference_id:message_id,direction:"initial",searchterm:""})}var threadEl=$("#message_thread_"+message_key);if(threadEl.length!=0){threadEl.append(message_content)}else{if(history&&history.pushState){history.pushState(null,null,"/messaging/"+message_id+"/");RYMmessagingPage.hasPushed=true;var html='<div id="message_thread_'+message_key+'" class="messaging_thread">';html+=message_content;html+="</div>";$("#messaging_thread").html(html);$("#thread_subject").html(message_subject)}else{window.location="/messaging/"+message_id+"/"}}RYMmessagingPage._scrollThreadToMessage(message_id);RYMmessagingPage._clearStoredComposeMessage();$("#compose_message").val("");RYMmessagingPage._enableComposeControls(true);RYMmessagingPage.reflowPage()},_composeAutoResize:function(el){RYMmessagingPage._reflowCompose()},_clearStoredComposeMessage:function(){if("localStorage"in window&&window["localStorage"]!==null){var recipient_username=$("#compose_to").val();var subject=$("#compose_subject").val();localStorage.removeItem(recipient_username+"_"+subject)}},_restoreComposeMessage:function(){if("localStorage"in window&&window["localStorage"]!==null){var recipient_username=$("#compose_to").val();var subject=$("#compose_subject").val();var restored_msg=localStorage[recipient_username+"_"+subject];if(restored_msg){$("#compose_message").val(restored_msg)}else{$("#compose_message").val("")}}else{$("#compose_message").val("")}},_onComposeTextKeyUp:function(event,el){if("localStorage"in window&&window["localStorage"]!==null){var recipient_username=$("#compose_to").val();if(recipient_username&&recipient_username.length>0){var subject=$("#compose_subject").val();var body=$("#compose_message").val();localStorage[recipient_username+"_"+subject]=body}}RYMmessagingPage._composeAutoResize(el)},updateUnreadMessagecount:function(new_count){var el=$(".profile_num_messages");if(new_count==0){el.fadeOut()}else{$(".profile_num_messages").html(new_count);if(!el.is(":visible")){el.fadeIn()}}},onClickNewMessages:function(){var el=$("#messaging_more");var threadid=el.data("threadid");var messageid=el.data("messageid");if(messageid!=0){el.data("messageid",0);RYMmessagingPage.selectThread(threadid,messageid);el.hide()}},onClickNewThreads:function(event){$("#new_threads").hide();rym.request.post("MessagingLoadThreadPage",{reference_id:null,direction:"down",searchterm:null})},_messagingAppendSingleCallback:function(message_html,key){var threadEl=$("#messaging_thread");$("#message_thread_"+key).append(message_html);threadEl[0].scrollTop=threadEl[0].scrollHeight-threadEl.outerHeight()+1},onSignalNewMessage:function(data){var scrollExtraThreshold=5;var updateMainCount=true;var threadEl=$("#messaging_thread");var threadItem=$("#thread_list_item_frame_"+data.key);var isLookingAtThread=$("#message_thread_"+data.key).length>0;var isScrolledToBottom=false;if(threadEl[0]){isScrolledToBottom=threadEl[0].scrollTop+threadEl.outerHeight()+scrollExtraThreshold>=threadEl[0].scrollHeight}console.log("scrolly  "+isScrolledToBottom);if(isLookingAtThread){if(isScrolledToBottom){rym.request.post("MessagingAppendSingle",{message_id:data.message_id},null,"script")}else{var el=$("#messaging_more");$("#messaging_more_count").text(data.unread_messages_thread);el.data("threadid",data.thread_id);el.data("messageid",data.message_id);el.show()}if(threadItem.is(":appeared")&&$("#thread_load_marker_first").length>0){$("#thread_list_unread_count_"+data.key).text(data.unread_messages_thread);$("#thread_list_item_frame_"+data.key).remove().insertAfter("#thread_load_marker_first").addClass("has_unread")}}else{if(threadItem.is(":appeared")&&$("#thread_load_marker_first").length>0){$("#thread_list_unread_count_"+data.key).text(data.unread_messages_thread);$("#thread_list_item_frame_"+data.key).remove().insertAfter("#thread_load_marker_first").scrollintoview(100).addClass("has_unread")}else{$("#new_threads").show()}}if(updateMainCount){RYMmessagingPage.updateUnreadMessagecount(data.unread_messages)}},onSignalNewThread:function(data){$("#new_threads").show()},onSignal:function(event,data){switch(event){case"new_message":return RYMmessagingPage.onSignalNewMessage(data);break;case"new_thread":return RYMmessagingPage.onSignalNewThread(data);break}},_reflowCompose:function(){var msgJl=$("#messaging_thread");var newMsgEl=$("#messaging_more");var msgEl=msgJl[0];var oldScrollTop=msgEl.scrollTop;var composeHeight=0;if($("#messaging_compose").is(":visible")){composeHeight=$("#messaging_compose").outerHeight()}var newMessagesHeight=0;if(newMsgEl.is(":visible")){var newMessagesHeight=newMsgEl.outerHeight()}var msgHeight=msgJl.outerHeight();newMsgEl.css("bottom",composeHeight);msgJl.css("bottom",composeHeight+newMessagesHeight);var newMsgHeight=msgJl.outerHeight();msgEl.scrollTop=oldScrollTop-(newMsgHeight-msgHeight)},setupPage:function(){window.addEventListener("popstate",function(e){if(RYMmessagingPage.hasPushed){RYMmessagingPage.onNavStateChange(location.pathname)}else{if(location.pathname=="/messaging/"){RYMmobile.mobileMenu.exitSelectionMode()}}});RYMmessagingPage.reflowPage();$(".delayed_profile_img").appear();$(document).on("appear click",".thread_load_page",function(){var referenceid=$(this).data("referenceid");var direction=$(this).data("direction");var searchterm=$(this).data("searchterm");if(referenceid!=0){$(this).data("referenceid",0);rym.request.post("MessagingLoadThreadPage",{reference_id:referenceid,direction:direction,searchterm:searchterm})}});$(document).on("appear click",".message_load_page",function(){var threadid=$(this).data("threadid");var referenceid=$(this).data("referenceid");var direction=$(this).data("direction");if(referenceid!=0){$(this).data("referenceid",0);rym.request.post("MessagingLoadThread",{thread_id:threadid,reference_id:referenceid,direction:direction})}});$(document).on("appear",".messaging_message",function(){var message_id=$(this).data("messageid");if(message_id!=0){RYMmessagingPage.onPositionChange(message_id)}});$(document).on("appear",".delayed_profile_img",function(){RYMmessagingPage.delayed_foreground_imgCount++;if(window.devicePixelRatio>1){$(this).css("background",$(this).data("delayloadurl2x"))}else{$(this).css("background",$(this).data("delayloadurl"))}});$(".has_tip").tipTip();new ResizeSensor($("#messaging_compose"),function(){RYMmessagingPage._reflowCompose()});$(document).on("touchmove",function(evt){evt.preventDefault()});$(document).on("touchmove",".scrollable",function(evt){evt.stopPropagation()});$(window).on("resize",function(){RYMmessagingPage.reflowPage()});$.force_appear()},reflowPage:function(){var windowOuterHeight=$(window).outerHeight();var headerOuterHeight=$("header").outerHeight();$("#content_wrapper").css("height",windowOuterHeight-headerOuterHeight+"px");$("#content").css("height",windowOuterHeight-headerOuterHeight+"px");var maxThreadlistHeight=windowOuterHeight-headerOuterHeight-$("#messaging_toolbar").outerHeight();$("#thread_list").css("height",maxThreadlistHeight);var maxThreadFrameHeight=windowOuterHeight-headerOuterHeight-44;$("#messaging_thread_frame").css("height",maxThreadFrameHeight);RYMmessagingPage._composeAutoResize($("#compose_message")[0])}};var RYMmobile={mobileMenu:{enterSelectionMode:function(){$(".mobile_menu")[0].className="mobile_menu selection_mode"},exitSelectionMode:function(){$(".mobile_menu")[0].className="mobile_menu"}},mobileExpand:{toggleFull:function(id){$("#expand_full_"+id).toggleClass("expanded")},toggleSection:function(id){$("#expand_section_"+id).toggleClass("expanded")},toggleFade:function(id){$("#expand_fade_"+id).toggleClass("expanded")}}};var RYMdynamicSection={initFade:function(el){var initialized=el.data("dynamic-fade-initialized");if(initialized){return}el.data("dynamic-fade-initialized",true);var section_id=el[0].id;var height=el.outerHeight();var scrollHeight=el[0].scrollHeight;if(scrollHeight-50>height){el.find(".page_section_dynamic_fade_cover").show();el.find(".page_section_dynamic_fade_expand_button").show().unbind().on("click",function(){el.toggleClass("expanded")})}else{el.removeClass("page_section_dynamic_fade")}},initList:function(el){}};$.fn.extend({dynamicFadeSectionUI:function(){$(this).each(function(index){RYMdynamicSection.initFade($(this))})}});var RYMmoderationPage={_setPromotedContentCallback:function(content_id,judgement){alert("yeah! "+judgement)}};var RYMobjectPage={baseUrl:null,onNavStateChange:function(path){console.log("hey")},_saveCustomizeCallback:function(){window.location.reload()},saveCustomize:function(object){var obj={object:page_options.object,show_background_image:$("#page_object_customize_show_background_image").is(":checked"),show_hero_image:$("#page_object_customize_show_hero_image").is(":checked"),show_reviews:$("#page_object_customize_show_reviews").is(":checked"),show_suggestions:$("#page_object_customize_show_suggestions").is(":checked"),show_synopsis:$("#page_object_customize_show_synopsis").is(":checked"),show_comments:$("#page_object_customize_show_comments").is(":checked"),show_lists:$("#page_object_customize_show_lists").is(":checked"),show_catalog:$("#page_object_customize_show_catalog").is(":checked"),show_media:$("#page_object_customize_show_media").is(":checked"),show_discussion:$("#page_object_customize_show_discussion").is(":checked"),show_extra_issues:$("#page_object_customize_show_extra_issues").is(":checked")};rym.request.post("PageObjectSaveCustomize",obj,null,"script");$(".page_object_section_customize").loadingAnim()},openCustomize:function(object){if(rym.session.userid==0){return RYMlogin.login()}else{var html=RYMtemplate["page.object.section.customize"].render(page_options);rym.doModal(html);rym.setupPage()}},goDrilldownPage:function(drilldown,page){var newUrl;if(page==1){newUrl=RYMobjectPage.baseUrl}if(page>1){newUrl=RYMobjectPage.baseUrl+drilldown+"/"+page+"/"}if(history&&history.pushState){history.pushState(null,null,newUrl)}else{window.location=newUrl}},goReviewPage:function(page){return RYMobjectPage.goDrilldownPage("reviews",page)},goCatalogPage:function(page){return RYMobjectPage.goDrilldownPage("catalog",page)},highlightReviewDocSection:function(page){$(".ui_review_documentation").removeClass("highlighted");$("#ui_review_document_"+page).addClass("highlighted").scrollintoview(100)},setup:function(baseUrl){RYMobjectPage.baseUrl=baseUrl;var hasPushed=false;window.addEventListener("popstate",function(e){if(hasPushed){RYMobjectPage.onNavStateChange(location.pathname)}else{console.log("not pushed yet, ignoring "+location.pathname)}})}};var RYMadminPage={_loadPaneCallback:function(pane_id,html){$("#pane_admin_content").html(html)},loadAdminPane:function(pane_id,pushState,pane_context,pane_page,initial_load){$(".page_admin_pane_item").removeClass("selected");$("#page_admin_pane_item_"+pane_id).addClass("selected");if(history&&history.pushState&&pushState){if(pane_context&&pane_page){history.pushState(null,null,"/admin/"+pane_id+"/"+pane_context+"/"+pane_page);$("#pane_admin_content").loadingAnim()}else{history.pushState(null,null,"/admin/"+pane_id+"/");$("#pane_admin_content").loadingAnim()}hasPushed=true}rym.request.post("LoadAdminPane",{pane_id:pane_id,pane_context:pane_context,pane_page:pane_page,initial_load:initial_load},null,"script");RYMmobile.mobileMenu.enterSelectionMode();document.body.scrollTop=document.documentElement.scrollTop=0},returnToAdminMenu:function(){$(".admin_header").removeClass("selected");RYMmobile.mobileMenu.exitSelectionMode()},onNavStateChange:function(url){var pane_id=url.split("/")[2];var pane_context=url.split("/")[3];var pane_page=url.split("/")[4];$("#pane_admin_content").loadingAnim();console.log("navstateChange"+url);if(url=="/admin/"){RYMmobile.mobileMenu.exitSelectionMode()}if(pane_id.length){if(pane_context&&pane_page){RYMadminPage.loadAdminPane(pane_id,false,pane_context,pane_page)}else{RYMadminPage.loadAdminPane(pane_id,false,null,null)}}}};var RYMcatalogPage={currentRequest:null,currentSort:"ts.d",currentFilter:"all",currentPage:1,_loadCallback:function(data){var object=$("#page_object_section_catalog").data("object");var assoc_id=$("#page_object_section_catalog").data("assoc-id");var sec_id=$("#page_object_section_catalog").data("sec-id");var html="";for(var i in data.items){html+=RYMtemplate["page.catalog.singleitem"].render(data.items[i])}if(!data.metadata.has_more_items){RYMnav.notifyNoCountLastPage("catalog",data.metadata.page)}$("#page_object_section_catalog_cover_"+data.metadata.object+"_"+data.metadata.assoc_id+"_"+data.metadata.sec_id).hide();$("#page_object_section_catalog_items_"+data.metadata.object+"_"+data.metadata.assoc_id+"_"+data.metadata.sec_id).html(html);rym.setupPage()},goPage:function(data,page){RYMcatalogPage.currentPage=page;RYMcatalogPage.update();return false},update:function(){var object=$("#page_object_section_catalog").data("object");var assoc_id=$("#page_object_section_catalog").data("assoc-id");var sec_id=$("#page_object_section_catalog").data("sec-id");$("#page_object_section_catalog_cover_"+object+"_"+assoc_id+"_"+sec_id).show();if(RYMcatalogPage.currentRequest){RYMcatalogPage.currentRequest.abort();RYMcatalogPage.currentRequest=null}RYMcatalogPage.currentRequest=rym.request.post("PageObjectCatalogLoad",{object:object,assoc_id:assoc_id,sec_id:sec_id,page:RYMcatalogPage.currentPage,sort:RYMcatalogPage.currentSort,filter:RYMcatalogPage.currentFilter},null,"script")},selectCatalogFilter:function(filter){var object=$("#page_object_section_catalog").data("object");var assoc_id=$("#page_object_section_catalog").data("assoc-id");var sec_id=$("#page_object_section_catalog").data("sec-id");$(".filter_catalog").removeClass("selected");$("#filter_catalog_"+filter).addClass("selected");RYMcatalogPage.currentFilter=filter;RYMnav.reset($("#nav_page_object_catalog_nav_"+object+"_"+assoc_id));RYMcatalogPage.update();return false},selectCatalogSort:function(sort){var object=$("#page_object_section_catalog").data("object");var assoc_id=$("#page_object_section_catalog").data("assoc-id");var sec_id=$("#page_object_section_catalog").data("sec-id");var currentSort=RYMcatalogPage.currentSort;switch(sort){case"ts":if(currentSort==="ts.d"){RYMcatalogPage.currentSort="ts"}else{RYMcatalogPage.currentSort="ts.d"}break;case"rating":if(currentSort==="rating.d"){RYMcatalogPage.currentSort="rating"}else{RYMcatalogPage.currentSort="rating.d"}break;case"played":if(currentSort==="played.d"){RYMcatalogPage.currentSort="played"}else{RYMcatalogPage.currentSort="played.d"}break}RYMnav.reset($("#nav_page_object_catalog_nav_"+object+"_"+assoc_id));$("#page_catalog_sort")[0].className="issue_filters issue_sort_catalog issue_sort_catalog_"+RYMcatalogPage.currentSort.replace(".","_");RYMcatalogPage.update();return false}};RYMcollectionPage={hasPushed:false,ajaxRequest:null,ajaxRequestTimer:null,statsLoaded:false,settings:null,searchType:"title",_onSelectSearchType:function(event,el){RYMcollectionPage.searchType=$(el).val();$("#collection_catalog_search_type_label").text($("#collection_catalog_search_type_select option:selected").text());$("#catalog_filter_search_input").focus();if(RYMcollectionPage.searchType==="release_date"){$("#collection_search_release_date_hint").show()}else{$("#collection_search_release_date_hint").hide()}},onClickSearch:function(event){var query=$("#catalog_filter_search_input").val();if(-1!=RYMcollectionPage.disallowSearchFields.indexOf(RYMcollectionPage.searchType)){return}if(RYMcollectionPage.searchType==="release_date"){var year=new RegExp("^[0-9][0-9][0-9][0-9]$","i");var min,max=0;var year_range_two=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]$","i");var year_range_four=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]$","i");var year_decade=new RegExp("^[0-9][0-9][0-9]0s$","i");if(query.match(year)){min=parseInt(query);max=min}else if(query.match(year_range_two)){min=parseInt(query.substring(0,4));century=parseInt(query.substring(0,2));m1=parseInt(query.substring(2,5));m2=parseInt(query.substring(5,8));if(m2>m1){max=parseInt(century+""+query.substring(5,8))}else{max=parseInt(century+1+""+query.substring(5,8))}}else if(query.match(year_range_four)){min=parseInt(query.substring(0,4));max=parseInt(query.substring(5,9))}else if(query.match(year_decade)){min=parseInt(query.substring(0,4));max=min+9}if(min<1800||max>2020||isNaN(min)||isNaN(max)){rym.showGlobalError("Invalid date or date range entered.");return}else{if(max==min){RYMcollectionPage.addFilter("release_date","is",null,min,min)}else{RYMcollectionPage.addFilter("release_date","between",null,null,null,min,max)}return}}if(query.length>0){RYMcollectionPage.addFilter(RYMcollectionPage.searchType,"search",query)}},searchTimer:null,searchRequest:null,searchBlurTimer:null,clearAutoSuggest:function(data){$("#catalog_filter_search_suggestions").html("").hide();if(RYMcollectionPage.searchBlurTimer!=null){clearTimeout(RYMcollectionPage.searchBlurTimer)}if(RYMcollectionPage.searchTimer){clearTimeout(RYMcollectionPage.searchTimer);RYMcollectionPage.searchTimer=null}},_searchAutosuggestCallback:function(data){var html="";for(var i in data.results){var result=data.results[i];html+=RYMtemplate["page.collection.searchsuggestion"].render(result)}var el=$("#catalog_filter_search_suggestions").html(html);if(!$("#catalog_filter_search_input").is(":focus")){el.hide();return}if(data.results.length){el.show()}else{el.hide()}},autoSuggestFields:["performer","composer","tag","genre","label","descriptor","platform"],disallowSearchFields:["platform"],onSearchKeyUp:function(event){if(event.keyCode==g_keyCodes["ret"]){RYMcollectionPage.onClickSearch();RYMcollectionPage.clearAutoSuggest();return}else if(event.keyCode==g_keyCodes["esc"]){$("#catalog_filter_search_input").val("");RYMcollectionPage.clearAutoSuggest();return}var query=$("#catalog_filter_search_input").val();if(RYMcollectionPage.searchRequest){RYMcollectionPage.searchRequest.abort();RYMcollectionPage.searchRequest=null}if(query.length==0||RYMcollectionPage.autoSuggestFields.indexOf(RYMcollectionPage.searchType)==-1){$("#catalog_filter_search_suggestions").html("").hide()}else{if(RYMcollectionPage.searchTimer){clearTimeout(RYMcollectionPage.searchTimer);RYMcollectionPage.searchTimer=null}RYMcollectionPage.searchTimer=setTimeout(function(){RYMcollectionPage.searchRequest=rym.request.post("CollectionGetSearchAutosuggestions",{user:RYMcollectionPage.settings.username,object:RYMcollectionPage.settings.object,collection_selected:RYMcollectionPage.settings.collection_selected,collection_type:RYMcollectionPage.settings.collection_type,field:RYMcollectionPage.searchType,searchterm:query})},200)}},onSearchFocus:function(event){if(RYMcollectionPage.searchBlurTimer!=null){clearTimeout(RYMcollectionPage.searchBlurTimer)}var el=$("#catalog_filter_search_suggestions");if(el.html().length>0){$("#catalog_filter_search_suggestions").show()}},onSearchBlur:function(event){if(RYMcollectionPage.searchBlurTimer!=null){clearTimeout(RYMcollectionPage.searchBlurTimer)}RYMcollectionPage.searchBlurTimer=setTimeout(function(){$("#catalog_filter_search_suggestions").hide()},100)},_filterIsDefault:function(filterList){if(filterList.length==0){return true}if(filterlist.length==1){}return false},_sortIsDefault:function(sortList){if(sortList.length==0){return true}if(sortList.length==1){if(sortList[0].field==="performer"&&sortList[0].direction==="asc"){return true}}return false},_sortGoingToDefault:function(sortList){if(sortList.length==0){return true}if(sortList.length==1){if(sortList[0].field==="performer"&&sortList[0].direction==="desc"){return true}}return false},init:function(){var hash=window.location.hash.substring(1);if(hash==="stats"){RYMcollectionPage.toggleStats(true)}switch(RYMcollectionPage.settings.object){case"release":case"song":RYMcollectionPage.searchType="performer";break;case"film":case"game":RYMcollectionPage.searchType="title";break}$("#collection_catalog_search_type_label").text(RYMcollectionPage.sortFilterNames[RYMcollectionPage.searchType]);RYMcollectionPage.renderFilters();RYMcollectionPage.renderSort()},_loadStatsCallback:function(html){$("#stats").html(html);RYMcollectionPage.statsLoaded=true;if($("#musicmap").length){RYMmapVis.create("musicmap")}RYMstatsPage.selectGenreVis("sunburst")},loadStats:function(){rym.request.post("CollectionLoadStats",{user:RYMcollectionPage.settings.username,object:RYMcollectionPage.settings.object,collection_selected:RYMcollectionPage.settings.collection_selected,collection_type:RYMcollectionPage.settings.collection_type});$("#stats").loadingAnim()},toggleStats:function(force){force=force||false;var hash=window.location.hash.substring(1);if(hash==="stats"&&!force){window.location.hash="";$("#collection_stats_toggle_btn").removeClass("expanded");$("#stats_column").hide();$("#collections_column")[0].className="large-12 medium-12 columns no_stats"}else{window.location.hash="stats";if(!RYMcollectionPage.statsLoaded){RYMcollectionPage.loadStats()}$("#collection_stats_toggle_btn").addClass("expanded");$("#stats_column").show();$("#collections_column")[0].className="large-8 medium-7 columns has_stats"}},removefilter:function(index){RYMcollectionPage.settings.filters.splice(index,1);RYMcollectionPage.settings.page=1;RYMcollectionPage.renderFilters();RYMcollectionPage.navigateToCollectionUrl()},addFilter:function(field,operator,query,name_display,assoc_id,min,max){var obj={field:field,operator:operator};if(query){obj.query=query}if(name_display){obj.name_display=name_display}if(assoc_id){obj.assoc_id=assoc_id}if(min){obj.min=min}if(max){obj.max=max}var newFilters=new Array;for(var i in RYMcollectionPage.settings.filters){var filter=RYMcollectionPage.settings.filters[i];if(JSON.stringify(obj)===JSON.stringify(filter)){continue}if(filter.field===obj.field){var singleFilters=["rating","location","release_date","ownership","release_type","format","label"];var singleFilterSearch=["performer","composer","label","title","catalog_no"];var add=true;for(var j in singleFilters){if(obj.field===singleFilters[j]){add=false;break}}for(var k in singleFilterSearch){if(obj.field===singleFilterSearch[k]&&obj.operator==="search"&&filter.operator==="search"){add=false;break}}if(!add){continue}}newFilters.push(filter)}newFilters.push(obj);RYMcollectionPage.settings.filters=newFilters;if(RYMcollectionPage.settings.filter_mode==="off"){RYMcollectionPage.settings.filters=[obj]}RYMcollectionPage.settings.page=1;RYMcollectionPage.renderFilters();RYMcollectionPage.navigateToCollectionUrl();RYMcollectionPage.clearAutoSuggest();$("#catalog_filter_search_input").val("")},renderFilters:function(){var html="";var filters=RYMcollectionPage.settings.filters;for(var i in filters){var filter=filters[i];var field=null,operator=null,query=null,assoc_id=null,min=null,max=null,name_display=null;var fieldName=RYMcollectionPage.sortFilterNames[filter.field];switch(filter.operator){case"search":field=fieldName;operator="contains";query=""+filter.query;break;case"is":field=fieldName;operator="is";query=""+filter.name_display;break;case"between":field=fieldName;operator="between";query=""+filter.min+" and "+filter.max;break;case"exists":field="Has "+fieldName;operator="";query="";break;case"not_exists":if(filter.field==="rating"){field="Unrated"}else if(filter.field==="ownership"){field="Not cataloged"}else{field="No "+fieldName;operator="";query=""}break}var obj={field:field,operator:operator,query:query,index:i};html+=RYMtemplate["page.catalog.filter"].render(obj)}$("#collection_catalog_filters").html(html);if(!filters.length){}else{}},openCollectionSelect:function(){$(".collection_catalog_filter_list").hide();$("#overlay_invisible").show().on("click",function(){RYMcollectionPage.closeCollectionSelect()});$("#collection_catalog_collection_select").show()},onClickCollectionSelect:function(event,collection){RYMcollectionPage.closeCollectionSelect();event.stopPropagation();$("#collection_catalog_select_label")[0].className="collection_catalog_"+collection;RYMcollectionPage.settings.collection_selected=collection;RYMcollectionPage.navigateToCollectionUrl();RYMcollectionPage.statsLoaded=false;RYMcollectionPage.settings.page=1;if($("#stats_column").is(":visible")){RYMcollectionPage.loadStats()}return false},closeCollectionSelect:function(){$("#overlay_invisible").unbind().hide();$("#collection_catalog_collection_select").hide()},openCollectionTypeSelect:function(){$(".collection_catalog_filter_list").hide();$("#overlay_invisible").show().on("click",function(){RYMcollectionPage.closeCollectionTypeSelect()});$("#collection_catalog_type_select").show()},onclickCollectionTypeSelect:function(event,type){RYMcollectionPage.closeCollectionTypeSelect();event.stopPropagation();$("#collection_catalog_type_label")[0].className="collection_catalog_type_"+type;RYMcollectionPage.settings.collection_type=type;RYMcollectionPage.navigateToCollectionUrl();RYMcollectionPage.statsLoaded=false;if($("#stats_column").is(":visible")){RYMcollectionPage.loadStats()}return false},closeCollectionTypeSelect:function(){$("#overlay_invisible").unbind().hide();$("#collection_catalog_type_select").hide()},openCollectionFilter:function(){$(".collection_catalog_filter_list").hide();$("#overlay_invisible").show().on("click",function(){RYMcollectionPage.closeCollectionFilter()});$("#collection_catalog_filter_list").show()},onclickCollectionFilter:function(event,filter){RYMcollectionPage.closeCollectionFilter();event.stopPropagation();$("#collection_catalog_filter_label")[0].className="collection_catalog_filter_"+filter;RYMcollectionPage.settings.filter_mode=filter;RYMcollectionPage.settings.page=1;RYMcollectionPage.navigateToCollectionUrl();return false},closeCollectionFilter:function(){$("#overlay_invisible").unbind().hide();$("#collection_catalog_filter_list").hide()},closeSortOptions:function(){$("#overlay_invisible").unbind().hide();$("#collection_sort_more").hide()},expandSortOptions:function(){$(".collection_catalog_filter_list").hide();$("#overlay_invisible").show().on("click",function(){RYMcollectionPage.closeSortOptions()});$("#collection_sort_more").show()},goPage:function(page){RYMcollectionPage.settings.page=page;RYMcollectionPage.navigateToCollectionUrl()},render:function(data){$("#collection_list").html(RYMtemplate["collection.singleitem"].render(data))},setDisplayMode:function(mode){$("html").removeClass("collection_display_standard collection_display_visual collection_display_minimal theme_night").addClass("collection_display_"+mode+" theme_"+rym_initdata.theme);if(mode==="visual"){$("html").addClass("theme_night");RYMmapVis.updateNightView("musicmap",true)}else{RYMmapVis.updateNightView("musicmap",false)}$.force_appear()},_buildCollectionUrl:function(){var settings=RYMcollectionPage.settings;var url="/collection/"+settings.username+"/"+settings.object+"/";var elements=new Array;if(settings.collection_type==="all"){elements.push("all")}else if(settings.collection_type==="rated"){elements.push("ratings")}else if(settings.collection_type==="wishlist"){elements.push("wishlist")}else if(settings.collection_type==="played"){elements.push("played")}if(settings.collection_selected==="primary"){elements.push("primary")}else if(settings.collection_selected==="secondary"){elements.push("secondary")}var sortElements=new Array;if(!RYMcollectionPage._sortIsDefault(RYMcollectionPage.settings.sort)){for(var i in settings.sort){var sort=settings.sort[i];var sortCode=RYMcollectionPage.sortFilterCodes[sort.field];if(sortCode){if(sort.direction==="asc"){sortElements.push(sortCode)}else{sortElements.push(sortCode+"d")}}}}if(sortElements.length){sortElements.splice(0,0,"ss");elements.push(sortElements.join("."))}if(settings.filters.length>1){if(settings.filter_mode==="all"){elements.push("filter_all")}}for(var i in settings.filters){var filter=settings.filters[i];if(!RYMcollectionPage.sortFilterCodes[filter.field]){continue}if(!RYMcollectionPage.operatorFilterCodes[filter.operator]){continue}var element="f.";element+=RYMcollectionPage.sortFilterCodes[filter.field]+".";element+=RYMcollectionPage.operatorFilterCodes[filter.operator];switch(filter.operator){case"search":element+=":";element+=encodeURIComponent(filter.query.replace(",","").replace("/",""));break;case"is":element+=":";element+=encodeURIComponent(filter.assoc_id);break;case"between":element+=":"+parseInt(filter.min)+":"+parseInt(filter.max);break;case"exists":case"not_exists":break}elements.push(element)}if(settings.rpp&&settings.rpp!==40){elements.push("n."+settings.rpp)}if(settings.display_mode&&settings.display_mode!=="standard"){elements.push(settings.display_mode)}var completeUrl=url+elements.join(",");if(completeUrl[completeUrl.length-1]!=="/"){completeUrl+="/"}if(settings.page>1){completeUrl+=settings.page+"/"}return completeUrl},_doLoadCollectionPage:function(url){},loadCollectionPage:function(url){},_loadCollectionPageCallback:function(url){},setupPage:function(){window.addEventListener("popstate",function(e){if(RYMcollectionPage.hasPushed){if(e.state.page){RYMcollectionPage.settings.page=e.state.page;RYMnav.setPageNumByComponent("collection",e.state.page)}RYMcollectionPage.onNavStateChange(location.pathname)}})},onNavStateChange:function(url){$("#collection_list_cover").show();$("html,body").scrollTop(0);if(RYMcollectionPage.ajaxRequest){RYMcollectionPage.ajaxRequest.abort();RYMcollectionPage.ajaxRequest=null}RYMcollectionPage.ajaxRequest=$.ajax("/api/1"+url,{success:function(data){RYMcollectionPage.render(data);$("#collection_list_cover").hide();rym.setupPage();RYMcollectionPage.ajaxRequest=null;var el=$(".nav_collection");el.data("page",data.metadata.page).data("rpp",data.metadata.rpp).data("num-items",data.metadata.num_results).data("num-pages",data.metadata.num_pages);RYMnav.render(el)},error:function(data){}})},navigateToCollectionUrl:function(){var url=RYMcollectionPage._buildCollectionUrl();console.log("push "+url);var hash=window.location.hash.substring(1);if(hash==="stats"){url+="#stats"}history.pushState({page:RYMcollectionPage.settings.page},null,url);RYMcollectionPage.hasPushed=true;RYMcollectionPage.onNavStateChange(url)},sortFilterCodes:{actor:"act",attribute:"att",acquisition_date:"p",avg_rating:"ra",chart_position:"ch",company:"b",comment:"cmt",composer:"c",director:"dir",descriptor:"ds",descriptor_all:"dsa",format:"fmt",custom_format:"cfmt",genre:"h",genre_all:"ha",location:"loc",catalog_number:"j",catalog_date:"d",num_ratings:"rn",ownership:"o",performer:"a",platform:"pl",rating:"r",play_count:"pc",custom_rating:"rs",review:"v",rating_sub:"rs",release_date:"e",release_type:"t",tag:"tg",title:"l"},operatorFilterCodes:{search:"s",is:"i",between:"b",exists:"e",not_exists:"n"},sortFilterNames:{actor:"Actor",attribute:"Attributes",acquisition_date:"Acquisition Date",avg_rating:"Average rating",chart_position:"Chart position",company:"Label",comment:"Comment",composer:"Composer",director:"Director",descriptor:"Descriptor",descriptor_all:"Descriptor (+sub-descriptors)",format:"Format",custom_format:"Custom Format",genre:"Genre",genre_all:"Genre (+sub-genres)",location:"Location",catalog_number:"Catalog number",catalog_date:"Catalog date",num_ratings:"Num. Ratings",ownership:"Ownership",performer:"Performer",platform:"Platform",rating:"Rating",custom_rating:"Custom rating",review:"Review",rating_sub:"Custom rating",release_date:"Release date",release_type:"Release type",tag:"Tag",play_count:"Play count",title:"Title"},defaultSortDirections:{performer:"asc",director:"asc",actor:"asc",composer:"asc",title:"asc",release_date:"asc",company:"desc",catalog_date:"asc",ownership:"asc",rating:"desc",play_count:"desc",release_type:"asc",avg_rating:"desc",chart_position:"asc",num_ratings:"desc"},clearSort:function(column_name){RYMcollectionPage.settings.sort=[];RYMcollectionPage.applySort("performer")},renderSort:function(){var first=true;var classes=new Array;if(RYMcollectionPage.settings.sort.length==0){RYMcollectionPage.settings.sort=[{field:"performer",direction:"asc"}]}var sort=RYMcollectionPage.settings.sort;for(var i in sort){if(first){classes.push("sort_"+sort[i].field+"_first");first=false}classes.push("sort_"+sort[i].field+"_"+sort[i].direction);classes.push("sort_"+sort[i].field)}$("#collection_sort_toolbar")[0].className="collection_sort_toolbar "+classes.join(" ")},applySort:function(column_name){var sort=RYMcollectionPage.settings.sort;if(sort.length&&sort[0].field===column_name){if(sort[0].direction===RYMcollectionPage.defaultSortDirections[column_name]){sort[0].direction=sort[0].direction==="asc"?"desc":"asc"}else{if(RYMcollectionPage._sortGoingToDefault(sort)){sort[0].direction=sort[0].direction==="asc"?"desc":"asc"}else{sort.splice(0,1)}}}else{var pos=sort.findIndex(function(a){return a.field===column_name});if(pos!=-1){sort.splice(pos,1)}sort.splice(0,0,{field:column_name,direction:RYMcollectionPage.defaultSortDirections[column_name]})}if(sort.length==0){RYMcollectionPage.settings.sort=[{field:"performer",direction:"asc"}]}RYMcollectionPage.renderSort();RYMcollectionPage.settings.page=1;RYMcollectionPage.navigateToCollectionUrl()}};RYMstats={stats:null};RYMstatsPage={toggleSection:function(id){$("#expandable_box_"+id).toggleClass("closed")},selectGenreVis:function(vis){$(".page_stats_vis_selector_btn").removeClass("selected");$("#page_stats_vis_selector_"+vis).addClass("selected");switch(vis){case"none":$("#genre_vis_frame").html("").hide();break;case"streamgraph":debugger;RYMstreamgraphVis.create("genre_vis_frame");break;case"sunburst":RYMsunburstVis.create("genre_vis_frame","genre_vis_name");break;case"cloud":RYMwordcloudVis.create("genre_vis_frame");break}},sort:function(component,filter,items){var el=$("#expandable_list_header_"+component);var asc=false;if(el.hasClass("sort_"+filter)){if(el.hasClass("sort_desc")){el.removeClass("sort_desc").addClass("sort_asc");asc=true}else{el.removeClass("sort_asc").addClass("sort_desc")}}else{var default_sort="sort_desc";if(filter==="name"){default_sort="sort_asc";asc=true}el[0].className="expandable_list_guide "+"sort_"+filter+" "+default_sort}var sortedItems=items.slice();sortedItems.sort(function(a,b){switch(filter){case"count":return asc?parseInt(a.count)<parseInt(b.count)?-1:1:parseInt(a.count)>parseInt(b.count)?-1:1;break;case"avg_rating":return asc?a.avg_rating<b.avg_rating?-1:1:a.avg_rating>b.avg_rating?-1:1;break;case"name":return asc?a.name<b.name?-1:1:a.name>b.name?-1:1;break;default:debugger;break}});var ul=$("#expandable_list_"+component);var html="";for(var i in sortedItems){if(sortedItems[i].avg_rating==="0.0"){sortedItems[i].avg_rating="-.-"}html+=RYMtemplate["page.stats.genre_list.singleitem"].render(sortedItems[i])}ul.html(html);$("#expandable_box_"+component).addClass("expanded")},filter:function(component,filter){var el=$("#expandable_list_header_"+component);switch(component){case"genre":{var genre=filter.split("/")[2];additional_filters=new Array("genre:"+genre);break}}RYMcollectionPage._buildCollectionUrl();$("#expandable_box_"+component).addClass("expanded")},toggleExpand:function(component){$("#expandable_box_"+component).toggleClass("expanded").scrollintoview(100)},getGenreColor:function(cid){var colors=["#000000","#FFFF00","#1CE6FF","#FF34FF","#FF4A46","#008941","#006FA6","#A30059","#FFDBE5","#7A4900","#0000A6","#63FFAC","#B79762","#004D43","#8FB0FF","#997D87","#5A0007","#809693","#FEFFE6","#1B4400","#4FC601","#3B5DFF","#4A3B53","#FF2F80","#61615A","#BA0900","#6B7900","#00C2A0","#FFAA92","#FF90C9","#B903AA","#D16100","#DDEFFF","#000035","#7B4F4B","#A1C299","#300018","#0AA6D8","#013349","#00846F","#372101","#FFB500","#C2FFED","#A079BF","#CC0744","#C0B9B2","#C2FF99","#001E09","#00489C","#6F0062","#0CBD66","#EEC3FF","#456D75","#B77B68","#7A87A1","#788D66","#885578","#FAD09F","#FF8A9A","#D157A0","#BEC459","#456648","#0086ED","#886F4C","#34362D","#B4A8BD","#00A6AA","#452C2C","#636375","#A3C8C9","#FF913F","#938A81","#575329","#00FECF","#B05B6F","#8CD0FF","#3B9700","#04F757","#C8A1A1","#1E6E00","#7900D7","#A77500","#6367A9","#A05837","#6B002C","#772600","#D790FF","#9B9700","#549E79","#FFF69F","#201625","#72418F","#BC23FF","#99ADC0","#3A2465","#922329","#5B4534","#FDE8DC","#404E55","#0089A3","#CB7E98","#A4E804","#324E72","#6A3A4C"];var topLevelColors={32988:colors[28],35250:colors[1],36:colors[2],8:colors[3],82:colors[4],10139:colors[5],543:colors[6],32990:colors[7],6:colors[8],5:colors[9],35195:colors[10],38713:colors[11],22108:colors[12],27640:colors[13],131:colors[14],558:colors[15],10191:colors[16],145:colors[17],584:colors[18],84:colors[19],32948:colors[20],293:colors[21],31103:colors[22],11:colors[23],31012:colors[24],31829:colors[25],26677:colors[26],37294:colors[27]};if(topLevelColors[cid]){return topLevelColors[cid]}else{if(RYMcollectionPage.settings.object==="game"){return d3.scale.linear().range(["#000","#b00"])(parseInt(cid)%100/100)}else{return d3.scale.linear().range(["#000","#bb0"])(parseInt(cid)%100/100)}}},genreColors:{32988:"#b7b28b",35250:"#333",36:"#ff2f80",8:"#ddd",82:"#fff",10139:"",543:"rgb(189,217,189)",32990:"#000",6:"#2731b3",5:"#ab2a95",35195:"#f7e03c",38713:"#000",22108:"",27640:"",131:"#0b136f",558:"#bf761b",10191:"",145:"",584:"#985c1f",84:"#d4e0b6",32948:"",293:"",31103:"",11:"",31012:"",31829:"",26677:"#438649",37294:"#ea3aff"}};var RYMobjectListPage={hasPushed:false,currentRequest:null,filterRequest:null,settings:[],navData:{},mainObject:null,_loadCallback:function(data){var html="";for(var i in data.items){var item=data.items[i];html+=RYMtemplate["page.discography.singleitem"].render(item)}if(data.searchterm.length>0){if(data.items.length==0){html="<h4>No items found.</h4>"}var wrapped_html='<ul id="page_discography_items_search_results_'+data.object+'" class="page_discography_items">';wrapped_html+=html;wrapped_html+="</ul>";$("#ui_textfilter_frame_all_object_list_"+data.object+"_").removeClass("loading");$("#page_discography_search_results_"+data.object).html(wrapped_html)}else{$("#nav_page_discography_nav_"+data.object+"_top").data("num-items",data.metadata.count).data("initialized",false).data("prerendered",false).navUI();$("#nav_page_discography_nav_"+data.object+"_bottom").data("num-items",data.metadata.count).data("initialized",false).data("prerendered",false).navUI();$("#page_object_section_discography_count_"+data.object).text(RYMutil.comma(data.metadata.count));$("#page_discography_item_cover_"+data.object).hide();$("#page_discography_itemlist_"+data.object).html(html)}rym.setupPage()},setDevPubFilter:function(object,devpub_filter){var sortEl=$("#page_discography_sort_"+object);var filter=sortEl.data("filter");sortEl.data("devpub-filter",devpub_filter);var filter_id=sortEl.data("filter-id");var obj=RYMobjectListPage.settings[object];if(!obj){obj={object:object,filter:filter,filter_id:filter_id,devpub_filter:devpub_filter,page:1};RYMobjectListPage.settings[object]=obj}else{obj.devpub_filter=devpub_filter;obj.page=1}$("#page_discography_item_cover_"+object).show();$("#page_discography_release_type_"+object).scrollintoview(100);RYMnav.setPageNumByComponent("page_discography_nav_"+object,1);var url=RYMobjectListPage.baseUrl;if(devpub_filter!=="all"){url+=devpub_filter+"/"}history.pushState({page:1},null,url);rym.request.post("PageObjectDiscographyLoad",obj,null,"script")},sort:function(object,column){if(RYMobjectListPage.currentRequest){RYMobjectListPage.currentRequest.abort();RYMobjectListPage.currentRequest=null}var sortEl=$("#page_discography_sort_"+object);var filter=sortEl.data("filter");var devpub_filter=sortEl.data("devpub-filter");var filter_id=sortEl.data("filter-id");var linkEl=$("#page_discography_sort_link_"+object+"_"+column);var current_direction=linkEl.data("direction");if(current_direction.length==0){current_direction=linkEl.data("default-direction")}else{current_direction=current_direction==="a"?"d":"a"}if(current_direction==="d"){column+=".d"}linkEl.data("direction",current_direction);$(".page_discography_sort_link_"+object).removeClass("sorted_d sorted_a").data("direction","");linkEl.addClass("sorted_"+current_direction).data("direction",current_direction);var column_full=column+"."+current_direction;var obj={object:object,filter:filter,filter_id:filter_id,devpub_filter:devpub_filter,sort:column,page:1};RYMobjectListPage.settings[object]=obj;$("#page_discography_item_cover_"+object).show();$("#page_discography_release_type_"+object).scrollintoview(100);RYMnav.setPageNumByComponent("page_discography_nav_"+object,1);rym.request.post("PageObjectDiscographyLoad",obj,null,"script")},onClearFilter:function(object){console.log("clear!");$(".nav_component_page_discography_nav_"+object).css("visibility","visible")},willFilter:function(object){$(".nav_component_page_discography_nav_"+object).css("visibility","hidden")},onFilter:function(object,searchTerm){console.log("s"+searchTerm);var sortEl=$("#page_discography_sort_"+object);var filter=sortEl.data("filter");var filter_id=sortEl.data("filter-id");var obj={object:object,filter:filter,filter_id:filter_id,searchterm:searchTerm};rym.request.post("PageObjectDiscographyLoad",obj,null,"script")},getPageFromPath:function(pathname){var paths=pathname.split("/");if(paths.length==4){return paths[3]||1}else{return paths[4]||1}},getDevPubFilterFromPath:function(pathname){var devpub=pathname.split("/")[3];if(devpub==="published"||devpub=="developed"){return devpub}else{return"all"}},onNavStateChange:function(pathname){$("#page_discography_item_cover_"+RYMobjectListPage.mainObject).show();$("html,body").scrollTop(0);if(RYMobjectListPage.currentRequest){RYMobjectListPage.currentRequest.abort();RYMobjectListPage.currentRequest=null}var settings=RYMobjectListPage.settings[RYMobjectListPage.mainObject];if(!settings){var sortEl=$("#page_discography_sort_"+RYMobjectListPage.mainObject);var filter=sortEl.data("filter");var filter_id=sortEl.data("filter-id");settings={object:RYMobjectListPage.mainObject,filter:filter,filter_id:filter_id}}settings.page=RYMobjectListPage.getPageFromPath(pathname);settings.devpub_filter=RYMobjectListPage.getDevPubFilterFromPath(pathname);var segmentEl=$("#page_"+settings.filter+"_devpub_filter");if(segmentEl){RYMsegmented.setSelected("page_"+settings.filter+"_devpub_filter",settings.devpub_filter)}RYMnav.setPageNumByComponent("page_discography_nav_"+RYMobjectListPage.mainObject,settings.page);rym.request.post("PageObjectDiscographyLoad",settings,null,"script")},goPage:function(data,page){var settings=RYMobjectListPage.settings[data.object];var sortEl=$("#page_discography_sort_"+data.object);var filter=sortEl.data("filter");var filter_id=sortEl.data("filter-id");var devpub_filter=sortEl.data("devpub-filter");if(!settings){settings={object:data.object,filter:filter,filter_id:filter_id,devpub_filter:devpub_filter,page:page}}else{settings.page=page}$("#page_discography_item_cover_"+data.object).show();$("#page_discography_release_type_"+data.object).scrollintoview(100);RYMobjectListPage.settings[data.object]=settings;rym.request.post("PageObjectDiscographyLoad",settings,null,"script");var url=RYMobjectListPage.baseUrl;if(devpub_filter&&devpub_filter!=="all"){url+=devpub_filter+"/"}if(page!=1){url+=page+"/"}RYMobjectListPage.navData.page=page;history.pushState({page:page},null,url);RYMobjectListPage.hasPushed=true;return false},setupPage:function(mainObject,baseUrl){RYMobjectListPage.mainObject=mainObject;RYMobjectListPage.baseUrl=baseUrl;window.addEventListener("popstate",function(e){if(1||RYMobjectListPage.hasPushed){if(e.state&&e.state.page){RYMobjectListPage.navData.page=e.state.page;RYMnav.setPageNumByComponent("page_discography_nav_"+RYMobjectListPage.mainObject,e.state.page)}else{RYMobjectListPage.navData.page=1;RYMnav.setPageNumByComponent("page_discography_nav_"+RYMobjectListPage.mainObject,1)}RYMobjectListPage.onNavStateChange(location.pathname)}})}};var RYMdiscographyPage={currentRequest:null,filterRequest:null,expandSection:function(artist_id,type){$(".page_discography_sort_link_"+type).removeClass("sorted_d sorted_a").data("direction","");RYMdiscographyPage.sortSection(artist_id,type,"release_date")},sortSection:function(artist_id,type,column){if(RYMdiscographyPage.currentRequest){return}var linkEl=$("#page_discography_sort_link_"+type+"_"+column);var current_direction=linkEl.data("direction");if(current_direction.length==0){current_direction=linkEl.data("default-direction")}else{current_direction=current_direction=="a"?"d":"a"}linkEl.data("direction",current_direction);$(".page_discography_sort_link_"+type).removeClass("sorted_d sorted_a").data("direction","");linkEl.addClass("sorted_"+current_direction).data("direction",current_direction);var column_full=column+"."+current_direction;$("#page_discography_expand_link_"+type).hide();$("#page_discography_expand_bar_"+type).hide();var obj={artist_id:artist_id,type:type,column:column_full,include_appearances:false};$("#page_discography_item_cover_"+type).show();$("#page_discography_release_type_"+type).scrollintoview(100);RYMdiscographyPage.currentRequest=rym.request.post("DiscographySortSection",obj,null,"script")},_filterCallback:function(artist_id,scope,data){var html=RYMtemplate["page.discography.searchresults"].render({items:data});$("#ui_textfilter_frame_"+scope+"_discography_artist_"+artist_id).removeClass("loading");$("#page_discography_search_results").html(html);rym.setupPage()},onFilter:function(scope,artist_id,searchterm){if(RYMdiscographyPage.filterRequest){RYMdiscographyPage.filterRequest.abort();RYMdiscographyPage.filterRequest=null}RYMdiscographyPage.filterRequest=rym.request.post("DiscographyFilter",{artist_id:artist_id,scope:scope,searchterm:searchterm,include_appearances:false},null,"script");console.log(1)},_showDetailsCallback:function(object,assoc_id,data){var mainEl=$("#page_discography_line_"+object+"_"+assoc_id);mainEl.data("detail-state","loaded");var html=RYMtemplate["page.discography.singleitem.detail"].render(data);$("#page_discography_line_detail_"+object+"_"+assoc_id).html(html);rym.setupPage()},showDetails:function(object,assoc_id){var mainEl=$("#page_discography_line_"+object+"_"+assoc_id);if(mainEl.hasClass("has_details")){mainEl.removeClass("has_details")}else{mainEl.addClass("has_details");if(mainEl.data("detail-state")!=="loaded"){$("#page_discography_line_detail_"+object+"_"+assoc_id).loadingAnim();rym.request.post("DiscographyShowDetails",{object:object,assoc_id:assoc_id},null,"script")}}},_sortSectionCallback:function(type,data){var html='<div id="page_discography_item_cover_'+type+'" class="page_discography_release_cover"></div>';for(var item in data){html+=RYMtemplate["page.discography.singleitem"].render(data[item])}$("#page_discography_item_cover_"+type).hide();$("#page_discography_items_"+type).html(html);RYMdiscographyPage.currentRequest=null;rym.setupPage()}};var RYMsonglistPage={currentRequest:null,expandSection:function(artist_id){$(".page_songlist_sort_link").removeClass("sorted_d sorted_a").data("direction","");RYMsonglistPage.sortSection(artist_id,type,"release_date")},sortSection:function(artist_id,column){if(RYMsonglistPage.currentRequest){}var linkEl=$("#page_songlist_sort_link_"+column);var current_direction=linkEl.data("direction");if(current_direction.length==0){current_direction=linkEl.data("default-direction")}else{current_direction=current_direction=="a"?"d":"a"}linkEl.data("direction",current_direction);$(".page_songlist_sort_link").removeClass("sorted_d sorted_a").data("direction","");linkEl.addClass("sorted_"+current_direction).data("direction",current_direction);var column_full=column+"."+current_direction;$("#page_songlist_expand_bar").hide();var obj={artist_id:artist_id,column:column_full,include_appearances:false};$("#page_songlist_item_cover").show();RYMsonglistPage.currentRequest=rym.request.post("SonglistSortSection",obj,null,"script")},onFilter:function(){},_sortSectionCallback:function(data){var html='<div id="page_songlist_item_cover" class="page_songlist_release_cover"></div>';for(var item in data){html+=RYMtemplate["page.song.singleitem"].render(data[item])}$("#page_songlist_item_cover").hide();$("#page_songlist_items").html(html);RYMsonglistPage.currentRequest=null;rym.setupPage()}};var RYMlistsPage={init:function(){}};var RYMgamePage={selectIssuesByPlatform:function(platformId){$(".filter_platform").removeClass("selected");$(".filter_platform_"+platformId).addClass("selected");if(platformId=="all"){$(".page_object_issue").show()}else{$(".page_object_issue").hide();$(".page_object_issue.platform_"+platformId).show()}$("#page_object_issue_addl_items").show();$("#page_object_issue_show_all").hide()}};var RYMreviewsPage={currentSort:null,currentPublishTypeFilter:null,currentLanguageTypeFilter:null,currentRequest:null,currentFollowingFirst:null,isDirty:false,currentPage:1,init:function(prefs){RYMreviewsPage.selectSort(prefs.sort,false);RYMreviewsPage.selectFilter(prefs.filter_publish_type,false);RYMreviewsPage.selectLanguageFilter(prefs.filter_language_type,false);RYMreviewsPage.setFollowingFirst(prefs.following_first,false)},goPage:function(data,page){var object=$("#page_object_section_reviews").data("object");var assoc_id=$("#page_object_section_reviews").data("assoc-id");var sec_id=$("#page_object_section_reviews").data("sec-id");RYMreviewsPage.currentPage=page;RYMreviewsPage.load();return false},_loadCallback:function(data){var html="";for(var i in data.results){html+=RYMtemplate["ui.review"].render(data.results[i])}if(!data.metadata.has_more_items){RYMnav.notifyNoCountLastPage("reviews",data.metadata.page)}$("#page_object_section_reviews_cover").hide();$("#page_object_section_reviews_items").html(html);rym.setupPage()},load:function(){var object=$("#page_object_section_reviews").data("object");var assoc_id=$("#page_object_section_reviews").data("assoc-id");var sec_id=$("#page_object_section_reviews").data("sec-id");$("#page_object_section_reviews_cover").show();if(RYMreviewsPage.currentRequest){RYMreviewsPage.currentRequest.abort();RYMreviewsPage.currentRequest=null}RYMreviewsPage.currentRequest=rym.request.post("PageObjectReviewsLoad",{object:object,assoc_id:assoc_id,sec_id:sec_id,page:RYMreviewsPage.currentPage,sort:RYMreviewsPage.currentSort,filter_publish_type:RYMreviewsPage.currentPublishTypeFilter,filter_language_type:RYMreviewsPage.currentLanguageTypeFilter,following_first:RYMreviewsPage.currentFollowingFirst},null,"script")},expandAllReviews:function(){$("#page_object_section_reviews").data("sec-id","");RYMreviewsPage.currentPage=1;RYMreviewsPage.load()},setFollowingFirst:function(followingFirst,update){RYMreviewsPage.currentFollowingFirst=followingFirst;$("#filter_reviews_following_first")[0].className="filter_reviews_following "+(followingFirst?"selected":"");if(update){RYMreviewsPage.markDirty();RYMreviewsPage.load()}},toggleFollowingFirst:function(){RYMreviewsPage.currentFollowingFirst=!RYMreviewsPage.currentFollowingFirst;RYMreviewsPage.setFollowingFirst(RYMreviewsPage.currentFollowingFirst,true)},selectFilter:function(filter,update){RYMreviewsPage.currentPublishTypeFilter=filter;$(".filter_reviews").removeClass("selected");$("#filter_reviews_"+filter).addClass("selected");if(update){RYMreviewsPage.markDirty();RYMreviewsPage.load()}},selectLanguageFilter:function(language,update){RYMreviewsPage.currentLanguageTypeFilter=language;$(".filter_reviews_language").removeClass("selected");$("#filter_reviews_language_"+language).addClass("selected");if(update){RYMreviewsPage.markDirty();RYMreviewsPage.load()}},selectSort:function(sort,update){var object=$("#page_object_section_reviews").data("object");var assoc_id=$("#page_object_section_reviews").data("assoc-id");var sec_id=$("#page_object_section_reviews").data("sec-id");if(!update){RYMreviewsPage.currentSort=sort}else{var currentSort=RYMreviewsPage.currentSort;switch(sort){case"ts":if(currentSort==="ts.d"){RYMreviewsPage.currentSort="ts"}else{RYMreviewsPage.currentSort="ts.d"}break;case"score":RYMreviewsPage.currentSort="score.d";break;case"rating":if(currentSort==="rating.d"){RYMreviewsPage.currentSort="rating"}else{RYMreviewsPage.currentSort="rating.d"}break;case"length":if(currentSort==="length.d"){RYMreviewsPage.currentSort="length"}else{RYMreviewsPage.currentSort="length.d"}break;case"bookmarked":RYMreviewsPage.currentSort="bookmarked.d";break}}RYMnav.reset($("#nav_page_object_reviews_top"));$("#page_reviews_sort")[0].className="issue_filters issue_sort_reviews issue_sort_reviews_"+RYMreviewsPage.currentSort.replace(".","_");if(update){RYMreviewsPage.markDirty();RYMreviewsPage.load()}},markDirty:function(){RYMreviewsPage.isDirty=true;$("#page_reviews_save_settings")[0].className="page_reviews_save_settings dirty"},saveSettings:function(){RYMreviewsPage.isDirty=false;$("#page_reviews_save_settings")[0].className="page_reviews_save_settings saved";rym.request.post("PageObjectReviewsSaveSettings",{sort:RYMreviewsPage.currentSort,filter_publish_type:RYMreviewsPage.currentPublishTypeFilter,filter_language_type:RYMreviewsPage.currentLanguageTypeFilter,following_first:RYMreviewsPage.currentFollowingFirst},null,"script")}};var RYMsupportPage={selectType:function(type){$("#page_support").data("type",type)[0].className="page_support item_selected page_support_"+type},clearType:function(type){$("#page_support")[0].className="page_support"},onClickCaptcha:function(){rym.captcha_target="support";$("#recaptcha_frame_support")[0].className="captcha_frame loading";grecaptcha.execute()},_setStatusCallback:function(ticket_id){alert("Error setting ticket status.")},_setStatusCallback:function(ticket_id,html){$("#page_admin_support_ticket_frame_"+ticket_id).replaceWith(html);rym.setupPage()},setStatus:function(ticket_id,status){rym.request.post("SupportTicketSetStatus",{ticket_id:ticket_id,status:status},null,"script")},_submitCallbackErrors:function(errors){var html="<p>There were errors with your submission; please fix them and resubmit:</p><ul>";for(var i in errors){var error=errors[i];html+="<li>"+error.message+"</li>";$("#support_label_"+error.field).addClass("has_error")}html+="</ul>";grecaptcha.reset();$("#recaptcha_frame_support")[0].className="captcha_frame";$("#page_support_overlay").hide();$("#page_support_error").html(html).show()},_submitCallback:function(logged_in){$("#page_support_submitted")[0].className="page_support_submitted "+(logged_in?"logged_in":"logged_out");$("#page_support")[0].className="page_support submitted";$("#page_support_overlay").hide()},submit:function(){$("#page_support_overlay").fadeIn(50).loadingAnim();$("#page_support_error").hide();$(".support_label").removeClass("has_error");var obj={name:$("#support_name").val(),email:$("#support_email").val(),category:$("#page_support").data("type"),reply_requested:$("#support_response").val(),referrer:$("#referrer").val(),subject:$("#support_subject").val(),body:$("#support_message").val(),captcha:RYMlogin._getRecaptchaResponse()};rym.request.post("SupportTicketSubmit",obj,null,"script")}};var RYMpickerList={focusedPicker:null,currentLoadedDataType:null,_unencodeName:function(name){return $("<div/>").html(name).text()},_isMatch:function(name,val){val=removeDiacritics(val.toLowerCase()).replace(/^\s+|\s+$/g,"");name=removeDiacritics(name.toLowerCase());if(name.indexOf(val)==0){return 2}var names=name.replace(/^\s+|\s+$/g,"").split(" ");var vals=val.replace(/^\s+|\s+$/g,"").split(" ");var inARow=0;var numMatches=0;var prefixMatch=false;var valsMatched=new Array;var jLen=names.length;for(var j=0;j<jLen;j++){var valPart=names[j].trim();var iLen=vals.length;for(var i=0;i<iLen;i++){var namePart=vals[i].trim();if(namePart.indexOf(valPart)==0&&namePart.length>0&&valPart.length>0){var matchIndex=valsMatched.indexOf(valPart);if(matchIndex==-1){numMatches++;if(j==0&&i==0){prefixMatch=true}else{console.log("val:"+val+" namePart: "+namePart+" valpart "+valPart+" j"+j+"i"+i)}valsMatched.push(valPart)}}}}if(numMatches>=names.length){if(prefixMatch){return 2}else{return 1}}return 0},renderItems:function(el,filter,filterById){var picker_type=el.data("picker-type");console.log("renderItems "+el[0].id);var items=RYMpicker.cachedData[picker_type];if(!items||items.length==0){RYMpickerList.hide(el);return}var showAllResults=el.data("show-all-results");var html="";if(filter){filter=filter.replace(/^\s+|\s+$/g,"")}var numMatches=0;var bestFirstMatchId=null;for(var i in items){var item=items[i];if(item){var isMatch;var aka;var bestMatchingItem;if(filter.length==0&&showAllResults){isMatch=true}else{isMatch=RYMpickerList._isMatch(filter,item.name);if(!isMatch&&item.akas&&item.akas.length>0){for(var k in item.akas){isMatch=RYMpickerList._isMatch(item.akas[k],filter);if(isMatch>0){aka=item.akas[k];break}}}if(isMatch==2&&!bestFirstMatchId){bestFirstMatchId=item.id}}if(isMatch){var obj={id:item.id,item_id:el[0].id+"_"+item.id,flag:item.flag,name:item.name,aka:aka};console.log("adding : "+JSON.stringify(obj));numMatches++;html+=RYMtemplate["ui.picker.listitem"].render(obj)}}}console.log("bestFirstMatchId is "+bestFirstMatchId);console.log("rendering items for "+el[0].id+", item count:"+numMatches);var pickerListEl=$("#ui_picker_list_"+el[0].id).html(html);$("#ui_picker_list_"+el[0].id+" .ui_picker_list_item").unbind().on("click",function(event){RYMpickerList.chooseItem($(this).data("value"))});if(bestFirstMatchId){var firstMatchEl=$("#ui_picker_list_item_"+el[0].id+"_"+bestFirstMatchId);pickerListEl[0].scrollTop=firstMatchEl.position().top}if(showAllResults||filter&&filter.length>0&&numMatches>0){RYMpickerList.show(el)}else{RYMpickerList.hide(el)}RYMpickerList.currentLoadedDataType=picker_type},chooseItem:function(id){var el=RYMpickerList.focusedPicker;if(!el){return}RYMpicker.addItem(el,id)},show:function(el){$("#ui_picker_list_"+el[0].id).show()},toggle:function(el){$("#ui_picker_list_"+el[0].id).toggle()},hide:function(el){$("#ui_picker_list_"+el[0].id).hide()}};var RYMpicker={dataSources:{country:"/api/1/sources/country.json",country_region:"/api/1/sources/country_region.json",locale:"/api/1/sources/locale.json",locale_id:"/api/1/sources/locale_id.json",role_music:"/api/1/sources/role_music.json",role_film:"/api/1/sources/role_film.json",role_games:"/api/1/sources/role_games.json",platform:"/api/1/sources/platform.json",tag_music:"/api/1/sources/tag_music.json",tag_film:"/api/1/sources/tag_film.json",tag_games:"/api/1/sources/tag_games.json",format_music:"/api/1/sources/format_music.json",genre_music:"/api/1/sources/genre_music.json",genre_film:"/api/1/sources/genre_film.json",genre_games:"/api/1/sources/genre_games.json",descriptor_music:"/api/1/sources/descriptor_music.json",descriptor_film:"/api/1/sources/descriptor_film.json",classifier_release:"/api/1/sources/classifier_release.json",classifier_list:"/api/1/sources/classifier_list.json",attribute_games_release:"/api/1/sources/attribute_games_release.json"},cachedData:{},cachedDataRequests:{},initRenderRequests:{},ajaxRequest:null,saveAjaxRequest:null,focusTimer:null,_saveCallback:function(el){},save:function(el){var callback=el.data("callback");switch(callback){case"catalog":{return RYMcataloger.onSaveTags(el)}}if(RYMpicker.saveAjaxRequest){RYMpicker.saveAjaxRequest.abort();RYMpicker.saveAjaxRequest=null}RYMpicker.saveAjaxRequest=rym.request.post("UiPickerSave",{object:el.data("object"),assoc_id:el.data("assoc-id"),sec_id:el.data("sec-id"),val:el.val(),picker_type:el.data("picker-type")},null,"script")},_performSaveAction:function(el){var saveAction=el.data("save-action");switch(saveAction){case"save":{RYMpicker.save(el)}}},init:function(el){var type=el.data("type");var assoc_id=el.data("assoc-id");var sec_id=el.data("sec-id");var initialized=Boolean(el.data("initialized"));if(initialized){return}el.data("initialized",true);var picker_type=el.data("picker-type");var selection_mode=el.data("selection-mode");var onchange=el.data("onchange");var frameEl=$("#ui_picker_frame_"+el[0].id);var inputEl=$("#ui_picker_input_"+el[0].id);frameEl.unbind();inputEl.unbind();frameEl.on("keyup",function(event){RYMpicker.onFrameKeyUp(el,event)});frameEl.on("click",function(event){RYMpicker.onFrameClick(el,event)});inputEl.on("keyup",function(event){RYMpicker.onInputKeyUp(inputEl,el,event)});inputEl.on("focus",function(event){RYMpicker.onInputFocus(inputEl,el,event)});inputEl.on("blur",function(event){RYMpicker.onInputBlur(inputEl,el,event)});RYMpicker.requestData(el,picker_type)},_attachItemEvents:function(el,itemEl){itemEl.unbind().on("click",function(event){RYMpicker.removeItem(el,$(this).data("value"));event.stopPropagation()})},renderInitialItems:function(el){var selection_mode=el.data("selection-mode");var mainId=el.attr("id");var items;var picker_type=el.data("picker-type");var value_mode=el.data("value-mode");var cachedItems=RYMpicker.cachedData[picker_type];if(selection_mode=="single"){if(el.val().length==0){items=new Array}else{items=new Array(el.val())}}else{var val=el.val();if(!val.length){items=[]}else{items=JSON.parse(val)}if(!Array.isArray(items)){console.log("Error: items not in correct format?");items=new Array}}var html="";for(var i in items){var item=items[i];if(value_mode==="names_only"){item={name:item,id:md5(item)}}var itemFound=false;for(var j in cachedItems){var cachedItem=cachedItems[j];if(item==cachedItem.id){var obj=cachedItem;obj.main_id=mainId;RYMpicker.addItemEl(el,obj,true);itemFound=true}}if(!itemFound){var obj={id:md5(items[i]),name:items[i],main_id:mainId};html=RYMtemplate["ui.picker.item"].render(obj);var itemsEl=$("#ui_picker_items_"+el[0].id);itemsEl.append(html);RYMpicker._attachItemEvents(el,$("#ui_picker_items_"+el[0].id+" .ui_picker_item"))}}if(selection_mode=="single"){if(items.length>0){el.val(items[0])}else{el.val("")}}else{el.val(JSON.stringify(items))}el.removeAttr("data-items");el.data("items-loaded",true)},renderInitialItemQueue:function(picker_data_type){if(RYMpicker.initRenderRequests[picker_data_type]&&RYMpicker.initRenderRequests[picker_data_type].length){for(var i in RYMpicker.initRenderRequests[picker_data_type]){var el=RYMpicker.initRenderRequests[picker_data_type][i];RYMpicker.renderInitialItems(el)}}RYMpicker.initRenderRequests[picker_data_type]=null},requestData:function(el,picker_data_type){if(RYMresource[picker_data_type]){RYMpicker.cachedData[picker_data_type]=RYMresource[picker_data_type];RYMpicker.renderInitialItems(el);return}if(!RYMpicker.dataSources[picker_data_type]){console.log("No data source available for "+picker_data_type);return}var req=RYMpicker.cachedDataRequests[picker_data_type];if(!RYMpicker.initRenderRequests[picker_data_type]||typeof RYMpicker.initRenderRequests[picker_data_type]=="undefined"){RYMpicker.initRenderRequests[picker_data_type]=new Array(el)}else{RYMpicker.initRenderRequests[picker_data_type].push(el)}if(req==null||typeof req==="undefined"){RYMpicker.cachedDataRequests[picker_data_type]=$.ajax({url:RYMpicker.dataSources[picker_data_type],data:{ulv:rym.session.token},type:"GET",dataType:"json"}).done(function(data){RYMpicker.cachedData[picker_data_type]=data.results;RYMresource[picker_data_type]=data.results;RYMpicker.cachedDataRequests[picker_data_type]=null;RYMpicker.renderInitialItemQueue(picker_data_type)})}},onDataLoaded:function(el,picker_type){},onInputFocus:function(inputEl,el,event){var picker_type=el.data("picker-type");var filter_by_id=el.data("filter-by-id");if(!RYMpicker.cachedData[picker_type]&&!RYMpicker.cachedDataRequests[picker_type]){RYMpicker.requestData(el,picker_type);return}RYMpickerList.focusedPicker=el;RYMpickerList.currentLoadedDataType=null;RYMpickerList.renderItems(el,inputEl.val(),filter_by_id)},onInputBlur:function(inputEl,el,event){if(RYMpicker.focusTimer){clearTimeout(RYMpicker.focusTimer);RYMpicker.focusTimer=null}RYMpicker.focusTimer=setTimeout(function(){RYMpicker._onInputBlur(inputEl,el,event)},200)},_onInputBlur:function(inputEl,el,event){var allowFreeform=el.data("allow-freeform");var newVal=inputEl.val();if(newVal.length>0){if(allowFreeform){RYMpicker.addFreeformItem(el,newVal)}else{RYMpicker.addLikelyItem(el,newVal)}}RYMpicker.focusTimer=null;if(!inputEl.is(":focus")&&RYMpickerList.focusedPicker==el){RYMpickerList.focusedPicker=null;RYMpickerList.currentLoadedDataType=null;$("#ui_picker_list_"+el[0].id).html("")}RYMpickerList.hide(el)},removeLastItem:function(el){var selection_mode=el.data("selection-mode");var value_mode=el.data("value-mode");if(selection_mode==="multiple"){var items=JSON.parse(el.val());if(items.length>0){if(value_mode==="names_only"){RYMpicker.removeItem(el,md5(items[items.length-1]))}else{RYMpicker.removeItem(el,items[items.length-1].id)}}}else{RYMpicker.removeItem(el,el.val())}},removeItem:function(el,item_id){var selection_mode=el.data("selection-mode");var elVal=el.val();var value_mode=el.data("value-mode");var items;if(selection_mode=="single"){if(elVal.length){items=new Array(elVal)}else{items=new Array}}else{items=JSON.parse(elVal)}var mainId=el.attr("id");var newItems=new Array;for(var i in items){if(value_mode==="names_only"){if(item_id!=md5(items[i])){newItems.push(items[i])}}else if(item_id!=items[i]){newItems.push(items[i])}}if(selection_mode=="single"){el.val("")}else{el.val(JSON.stringify(newItems))}$("#"+mainId+"_"+item_id).fadeOut(80).remove();if(selection_mode=="single"){$("#ui_picker_input_frame_"+mainId).show()}var inputEl=$("#ui_picker_input_"+el[0].id);inputEl.focus();RYMpicker._performSaveAction(el)},addItemEl:function(el,obj,initialRender){var mainId=el.attr("id");var selection_mode=el.data("selection-mode");var value_mode=el.data("value-mode");obj.main_id=mainId;var html=RYMtemplate["ui.picker.item"].render(obj);var elVal=el.val();var items;if(selection_mode!="single"){items=JSON.parse(elVal)}$("#ui_picker_items_"+mainId).append(html);RYMpicker._attachItemEvents(el,$("#"+obj.main_id+"_"+obj.id));if(selection_mode=="single"){if(value_mode=="names_only"){el.val(obj.name)}else{el.val(obj.id)}}else{if(!initialRender){if(value_mode=="names_only"){if(items.indexOf(obj.name)==-1){items.push(obj.name)}}else{if(items.indexOf(obj.id)==-1){items.push(obj.id)}}el.val(JSON.stringify(items))}}if(selection_mode=="single"){$("#ui_picker_input_frame_"+mainId).hide()}},addItem:function(el,item_id){var mainId=el.attr("id");var selection_mode=el.data("selection-mode");var value_mode=el.data("value-mode");var picker_type=el.data("picker-type");var inputEl=$("#ui_picker_input_"+el[0].id);var cachedItems=RYMpicker.cachedData[picker_type];var elVal=el.val();var items;if(selection_mode!="single"){items=JSON.parse(elVal)}for(var i in cachedItems){var cachedItem=cachedItems[i];if(cachedItem.id==item_id){var itemExists=false;for(var j in items){if(value_mode=="names_only"){if(items[j]==cachedItem.name){itemExists=true;break}}else if(items[j]==item_id){itemExists=true;break}}if(itemExists){break}var obj=cachedItem;obj.main_id=mainId;RYMpicker.addItemEl(el,obj,false);RYMpicker.clear(el);RYMpicker._performSaveAction(el)}}},_entitify:function(text){return $("<div/>").text(text).html()},addFreeformItem:function(el,val){var mainId=el.attr("id");var value_mode=el.data("value-mode");if(-1!=val.indexOf(",")){return}var id=md5(val);var picker_type=el.data("picker-type");var cachedItems=RYMpicker.cachedData[picker_type];var items=cachedItems;var itemFound=false;for(var j in cachedItems){var cachedItem=cachedItems[j];if(id==cachedItem.id){var obj=cachedItem;obj.main_id=mainId;RYMpicker.addItemEl(el,obj,true);itemFound=true}}if(!itemFound){var obj={id:id,name:val};RYMpicker.cachedData[picker_type].push(obj);RYMpicker.addItemEl(el,obj,false)}RYMpicker.clear(el);RYMpicker._performSaveAction(el)},addLikelyItem:function(el,val){var els=$(".ui_picker_list_item.shown");if(els.length==1){els.click();RYMpicker.clear(el)}},onInputKeyUp:function(inputEl,el,event){},clear:function(el){var inputEl=$("#ui_picker_input_"+el[0].id);var inputClearEl=$("#ui_picker_input_clear_"+el[0].id);inputEl.val("");inputEl.data("val","");inputClearEl.css("visibility","hidden")},onFrameKeyUp:function(el,event){var inputEl=$("#ui_picker_input_"+el[0].id);var oldVal=inputEl.data("val");if(!oldVal){oldVal=""}var val=inputEl.val();if(event&&event.keyCode){switch(event.keyCode){case g_keyCodes.esc:if(val==""){RYMpickerList.toggle(el);return}RYMpicker.clear(el);val="";var filter_by_id=el.data("filter-by-id");RYMpickerList.renderItems(el,inputEl.val(),filter_by_id);break;case g_keyCodes.backspace:if(val==""&&oldVal==""){RYMpicker.removeLastItem(el)}break;case g_keyCodes.ret:var allowFreeform=el.data("allow-freeform");var newVal=inputEl.val();if(newVal.length>0){if(allowFreeform){RYMpicker.addFreeformItem(el,newVal)}else{RYMpicker.addLikelyItem(el,newVal)}}break;case g_keyCodes.comma:var allowFreeform=el.data("allow-freeform");if(val==","){inputEl.val("")}else{inputEl.val(val.substr(0,val.length-1))}var newVal=inputEl.val();if(newVal.length>0){if(allowFreeform){RYMpicker.addFreeformItem(el,newVal)}else{RYMpicker.addLikelyItem(el,newVal)}}break}}var inputClearEl=$("#ui_picker_input_clear_"+el[0].id);if(inputEl.val().length){inputClearEl.css("visibility","visible")}else{inputClearEl.css("visibility","hidden")}var filter_by_id=el.data("filter-by-id");RYMpickerList.renderItems(el,inputEl.val(),filter_by_id);inputEl.data("val",val)},onFrameClick:function(el,event){var inputEl=$("#ui_picker_input_"+el[0].id);inputEl.focus()}};$.fn.extend({pickerUI:function(){$(this).each(function(index){RYMpicker.init($(this))})}});var RYMprofilePage={getRatingDistData:function(rating_dist,scope,username,object){var max=0;var has_rating_labels=false;for(var i in rating_dist.items){var item=rating_dist.items[i];if(item.count>max){max=item.count}if(rating_dist.items[i].rating_label_desc){has_rating_labels=true}}var ratings={items:[],scope:scope,username:username,object:object};for(var i in rating_dist.items){var item=rating_dist.items[i];var pct=item.count/(1e-4+max);var item_out={label_items:[]};var rating_label_indexes=[0,10,9,8,7,6,5,4,3,2,1];for(var j in rating_label_indexes){var index=rating_label_indexes[j];var dist_item=item.rating_label_dist[index];var dist_pct=Math.floor(100*pct*dist_item.count/(item.count+1e-6));var custom_rating_index=index*10+(dist_item.rating_label_index+1);var dist_item_out={rating:10-i,rating_label_index:dist_item.rating_label_index,custom_rating_index:custom_rating_index,rating_label:dist_item.rating_label,count:dist_item.count,pct:dist_pct};item_out.label_items.push(dist_item_out)}if(has_rating_labels){item_out.rating_label_desc=""+item.rating_label_desc}ratings.items.push(item_out)}ratings.has_rating_labels=has_rating_labels;ratings.max_row=max;return ratings},confirmBlock:function(){var el=$("#block");var blocked=el.data("blocked");if(blocked){RYMprofilePage.blockUser();return}rym.doModalLoading()},_blockUserCallback:function(blocked_user_id,blocked){var el=$("#block");el.data("blocked",blocked);if(blocked){el[0].className="blocked"}else{el[0].className=""}rym.closeModal()},blockUser:function(){var el=$("#block");var blocked=el.data("blocked");var user_id=el.data("userid");rym.request.post("BlockUser",{user_id:user_id,block:!blocked,reason:$("#block_explanation").val(),page_src:"profile"},null,"script")}};var RYMmediaPage={vol:.5,playPreview:function(url,song_name){var html='<audio id="playerel" onvolumechange="RYMmediaPage.vol = volume" controls autoplay src="'+url+'" type="audio/mp4"></audio>';var flashHtml='<object width="320" height="32" type="application/x-shockwave-flash" data="//e.snmc.io/2.5/img/flashmediaelement.swf">';flashHtml+='<param name="movie" value="//e.snmc.io/2.5/img/flashmediaelement.swf" /> ';flashHtml+='<param name="flashvars" value="autoplay=true&controls=true&amp;file='+url+'" /></object>';$("#track_preview_text").html("Playing <b>"+song_name+"</b>");var a=document.createElement("audio");if(typeof a!="undefined"&&a.canPlayType&&a.canPlayType("audio/mp4").replace(/no/,"")){$("#track_preview").html(html);$("#track_preview_frame").show()}else{$("#track_preview").html(flashHtml);$("#track_preview_frame").show()}if(document.getElementById("playerel")){document.getElementById("playerel").volume=RYMmediaPage.vol}a=null;return}};var RYMreview={selectPublishLevel:function(id,level){$("#ui_review_publishing_edit_"+id)[0].className="ui_review_publishing_edit ui_review_publishing_edit_"+level;$("#ui_review_publish_"+id).val(level)},invalidate:function(){},_deleteCallback:function(review_id){$("#ui_review_"+review_id).fadeOut()},delete:function(review_id){if(confirm("Are you sure you want to delete your review?")){rym.request.post("ReviewDelete",{review_id:review_id},"","script")}},_saveCallback:function(id,html){$("#ui_review_"+id).replaceWith(html);$("#ui_review_new").replaceWith(html);rym.setupPage()},save:function(id){var obj={id:id,publish_level:$("#ui_review_publish_"+id).val(),object:$("#ui_review_object_"+id).val(),assoc_id:$("#ui_review_assoc_id_"+id).val(),sec_id:$("#ui_review_sec_id_"+id).val(),language:$("#ui_review_language_"+id).val(),body:$("#ui_review_body_"+id).val(),title:$("#ui_review_title_"+id).val(),attribution:$("#ui_review_attribution_"+id).val(),supplement:$("#ui_review_supplement_"+id).val()};rym.request.post("ReviewSave",obj,null,"script")},_previewCallback:function(html){$("#modal_content").html(html);rym.doModalWithTarget(null,"#modal_content");rym.setupPage()},preview:function(id){var obj={id:id,publish_level:$("#ui_review_publish_"+id).val(),object:$("#ui_review_object_"+id).val(),assoc_id:$("#ui_review_assoc_id_"+id).val(),sec_id:$("#ui_review_sec_id_"+id).val(),language:$("#ui_review_language_"+id).val(),body:$("#ui_review_body_"+id).val(),title:$("#ui_review_title_"+id).val(),attribution:$("#ui_review_attribution_"+id).val(),supplement:$("#ui_review_supplement_"+id).val()};rym.request.post("ReviewPreview",obj,null,"script")}};var RYMrules={};RYMrules.ruleset={community:{code:"community",title:"Community rules",categories:[{title:"Treat others with respect.",code:"community.respect",category_description:"We want Sonemic to be a place where any person can feel welcome to contribute. We expect members to be friendly and welcoming to each other and to respect others' views and opinions, even when disagreeing.",rules:[{code:"community.respect.respect",title:"Be respectful toward other members of this site, even when you disagree with them."},{code:"community.respect.belligerent",title:"Do not mock or antagonize others, or act in a belligerent or aggressive manner.",description:"This includes throwing out insults in a way that's designed to indirectly or passive-aggressively target other users."},{code:"community.respect.friends",title:"Do not post public comments to friends that would otherwise break the rules here.",description:"It doesn't matter if the other person is not offended, we don't want such content on this site at all, because a random visitor will not know you're friends with the person; they will simply think that such behavior is tolerated here."}]},{title:"Do not harass others.",code:"community.harassment",category_description:"Do not contact people in ways that would make them feel uncomfortable. Harassment takes many forms; please see the examples below.",rules:[{code:"community.harassment.communication",title:"Do not communicate with someone after they've repeatedly ignored you or explicitly made it clear that they don't wish for you to contact them.",description:"Repeatedly making unwanted contact is considered harassment and will result in account suspension. Follow basic common sense in knowing when someone doesn't want you to contact them, even if they haven't made it explicit."},{code:"community.harassment.attacks",title:"Do not attack others because you disagree with their taste in music/film/games, their ratings, reviews, or similar.",description:"If you disagree with someone, provide respectful, constructive counterarguments or leave them alone. If you think someone is trolling, then report them rather than responding."},{code:"community.harassment.campaign",title:"Do not participate in any kind of campaign (including campaigns that were started outside of this site) to harass or demean someone, including artists and other professionals.",description:"We do not tolerate spreading hate toward people - site members or otherwise - or personally attacking those who create the music/film/games that appear on this site. Keep discussion focused on the actual content."},{code:"community.harassment.stalking",title:"Do not stalk users or inappropriately follow other others' activity on this site in an excessive manner.",description:"Engaging in non-direct harassment, such as mirroring someone's ratings or activity on the site, is prohibited."},{code:"community.harassment.personal_info",title:"Do not post others' personal information without their consent, and don't create lists or posts centered on a particular user without their permission."}]},{title:"Don't post racist, sexist, misogynist, homophobic, transphobic or otherwise tactless/insensitive comments.",category_description:"Such language is disallowed on RYM in any context, even among friends, even when mild terminology is used. If you have any doubts about whether something might be offensive, then don't post it. It's not allowed to make comments which create a hostile/unwelcoming atmosphere toward others and/or marginalizes groups of people.",code:"community.insensitive",rules:[{code:"community.insensitive.racism",title:"Do not make racist comments or use racist terms."},{code:"community.insensitive.sexism",title:"Do not use sexist or misogynist language or gendered slurs."},{code:"community.insensitive.homophobic",title:"Do not use homophobic language (including mild terms)."},{code:"community.insensitive.transphobic",title:"Do not use transphobic language (including mild terms)."},{code:"community.insensitive.marginalization",title:"Do not post comments or create threads, lists, groups or similar dedicated to hatred or marginalization of groups of people.",description:"This includes lists or other content that's negatively focused on religions, races, etc."},{code:"community.insensitive.tactless",title:"Do not post comments that are extremely tactless and/or insensitive."},{code:"community.insensitive.objectification",title:"Do not needlessly bring in race, sex, physical attractiveness or similar topics into discussions when it has nothing to do with the topic.",description:"For example: when writing a music review, you should focus the review on the musical content, not the artist's race, sex, attractiveness, sexual orientation, gender identity or similar, unless it's the subject of the lyrics or otherwise significantly related to the musical content of the recording."}]},{title:"Do not post pornographic or extremely offensive/shocking images, links or other content.",code:"community.offensive",category_description:"Sonemic is a site dedicated to media, and you are naturally welcome to discuss artists and projects that contain offensive material and submit information to the database (including properly-flagged cover art which is offensive). However, outside of the above, you may not post offensive material. Do not upload images that contain nudity, explicit sexual content (including images that don't contain nudity but are obviously pornographic in nature), NSFW/NSFL material, extreme gore or violence, NS/Nazi material, or other content designed to be extremely shocking and offensive.",rules:[{code:"community.offensive.shocking",title:"Do not post images that are extreme in nature, including images of gore and violence or other shocking images."},{code:"community.offensive.nudity",title:"Do not post images that contain nudity, or which are obviously sexual in nature even if containing no nudity."},{code:"community.offensive.tagging_images",title:"Although offensive cover are permitted as part of the database portion of the site, make sure to correctly tag them as offensive when uploading."}]},{title:"Do not engage in behavior that impedes or ruins discussions.",code:"community.discussion",category_description:"Do not use this site to self-promote except where it's clearly allowed and avoid sabotaging discussions by posting spammy/low-effort/off-topic content.",rules:[{code:"community.discussion.self_promotion",title:'Do not use this site to promote your own work or projects unless you\'ve been an active, contributing user for a long time and you are posting in a place where self-promotion is allowed (specifically, in the "bio" section of your profile and in message board threads marked for self-promotion).'},{code:"community.discussion.uninterested",title:"If you are uninterested in a topic, then don't participate in the discussion. Don't ruin the ability of others to have a conversation about a topic they enjoy just because you are personally uninterested."},{code:"community.discussion.low_effort",title:"Do not clutter the site by adding repetitive or low-effort comments out of boredom."},{code:"community.discussion.trolling",title:"Don't post disingenuous threads or comments that were deliberately designed to provoke drama or engage in similar trolling behavior."},{code:"community.discussion.level_participation",title:"Be aware of your level of participation, and make sure not to monopolize discussions or other areas of the site.",description:"For example: If you notice that a large percentage of the most recent topics on a particular forum were started by yourself, it's a clear indication that you are monopolizing the forum and not giving others a chance to have their say."}]}]},general:{code:"general",title:"General site rules",categories:[{title:"Do not spam or engage in self-promotion",code:"general.selfpromotion",category_description:"",rules:[{code:"general.selfpromotion.selfpromotion",title:'Do not use this site to promote your own work or projects unless you\'ve been an active, contributing user for a long time and you are posting in a place where self-promotion is allowed (specifically, in the "bio" section of your profile and in message board threads marked for self-promotion).'},{code:"general.selfpromotion.marketing",title:"Do not use this site for any sort of marketing or promotional purposes, with the exception of sanctioned behavior mentioned above. Don't message others with sales pitches or send messages with referral links."},{code:"general.selfpromotion.disclosure",title:"Always disclose if you have any type of relationship to the organization or people who were involved with the media that you're reviewing."}]},{title:"Do not violate or subvert copyright law.",code:"general.copyright",category_description:"Sonemic does not allow the use of this site to subvert or break copyright law.",rules:[{code:"general.copyright.begging",title:"Do not beg users for pirated music in public or private."},{code:"general.copyright.sites",title:"Do not post links to sites that break copyright laws (mp3 blogs, torrent sites, etc)."},{code:"general.copyright.methods",title:"Do not discuss methods for subverting copyright (for example, which software, websites, tools, etc)."},{code:"general.copyright.plagiarism",title:"Do not plagiarize content (including copying/pasting the work of others into reviews, comments, forum posts, etc)."}]},{title:"Do not abuse account creation",code:"general.accounts",category_description:"",rules:[{code:"general.accounts.multiple",title:"Do not create more than three accounts on the Sonemic network (Sonemic, Cinemos, and Glitchwave) for any reason without asking first.",description:"You should never maintain more than three accounts on the Sonemic network unless you have our permission. If you start over with your account, make sure to delete the old one first."},{code:"general.accounts.circumvention",title:"Do not create new accounts to circumvent previous bans or account restrictions.",description:"You cannot simply create a new account to bypass bans or restrictions placed on your account. If you want those restrictions lifted, you must address them directly with us and have the ban lifted. Creating duplicate accounts will lead to permanent, irrevocable suspension from using this site."},{code:"general.accounts.novelty",title:"Do not create novelty accounts or make accounts to represent brands or identities that don't belong to you.",description:"Novely accounts are joke accounts based on the personalities of celebrities, false personas, etc. Don't make accounts for this purpose. Similarly, don't make accounts to replicate the ratings or other views of outside publications (such as music magazines)."}]},{title:"Don't do anything that subverts the integrity of the site, including abusing ratings, genre votes, and reviews",code:"general.integrity",category_description:"It should be clear that this site is designed to help people learn about media. Any kind of action which violates the integrity of our system and/or helps to present a false or manipulated view of facts or our users' opinions is prohibited.",rules:[{code:"general.integrity.multiple",title:"Do not use multiple accounts to duplicate ratings or votes, or to attempt to artifically manipulate anything on the site",description:""},{code:"general.integrity.astroturfing",title:"Do not use this site in the capacity of working for any type of organization",description:"Any ratings, reviews, or votes you place on this site should be your own, and not influenced by your employment or membership in any group."},{code:"general.integrity.campaigns",title:"Do not vote as part of any organized campaign, including ones organized outside of this site.",description:"Sometimes people will post messages encouraging others to rate a particular album, vote for/against particular genre or descriptor, vote up a particular database submission or similar. If multiple people follow along and participate, that is considered an organized campaign. If you participate in such a campaign, you will be banned from the site. This also applies to indirect involvement (for example, if you saw a friend vote a specific genre/descriptor and thought it was funny, so you followed along even though you weren't part of the original campaign, you are violating this rule). Make your own decisions on what to rate and how to do so, and don't follow along campaigns suggested by others."}]},{title:"Do not abuse or misuse site features",code:"general.features",category_description:"Every feature of this site was designed for a specific purpose. Do not abuse features to engage in behavior that's annoying and/or attention seeking. When in doubt, ask us first.",rules:[{code:"general.features.text",title:"Do not post text that is formatted in a way that is obnoxious or covers the content of other users",description:"This includes using text to draw ASCII Art, using Zalgo, using long, uninterrupted strings of characters to force the width of pages to be larger than normal, using large amounts of whitespace, and other annoying methods."},{code:"general.features.features",title:"Do not misuse features in ways that makes them less useful to others or disrupts the functionality of that feature"}]}],rules:[{code:"general.rules.tos",title:"Read the Terms of Service before using the site and do not violate anything mentioned in it.",description:'The Terms of Service is located <a target="_blank" rel="nofollow noopener" href="/terms-of-service/">here</a>'}]},database:{code:"database",title:"Database submission rules",rules:[{code:"database.standards",title:"Do not contribute to this site unless you are willing to submit quality work that meets our standards.",description:"Our community has developed a set of standards for our database. If you add anything to it, you should be willing to put in the work necessary to ensure that the quality of your data meets our standards of correctness, formatting, and research. You don't have to be perfect from the first submission, but you have to be willing to learn from feedback given from users and continually improve as you submit new data."},{code:"database.documentation",title:"Read all relevant documentation before submitting something data to this site for the first time.",description:"On every submit page, you can find links to documentation related to that item, and for each field there are links that explain precisely how to enter that field and how it should be formatted."},{code:"database.responding",title:"If you submit data, keep track of feedback and respond in a reasonable timeframe.",description:"When you submit data to this site, moderators and users will provide feedback to point out issues. You must keep track of these comments (you'll receive notifications in your newsfeed) and fix any legitimate concerns <b>yourself</b>. "},{code:"database.fixing_own_submissions",title:"If you submit data, and moderators or users point out issues, you must correct them yourself in a reasonable timeframe rather than asking or expecting others to do so.",description:"Ultimately, it is <b>your</b> responsibility to make your submission up to standards. There are not enough moderators to fix others' submissions and they shouldn't be expected to do so. Instead, you should read their feedback, fix your submission and learn from the experience. If you rely on moderators or others to fix your mistakes, you will lose submission privileges."},{code:"database.joking",title:"Do not joke around with the site's database and related features.",description:"Adding fake/joke submissions will lead to permanent revocation of submission privileges, and doing so as part of a campaign will lead to account suspension."},{code:"database.protesting",title:"Do not purposely create problematic database submissions or edits in an attempt to prove a point or to stage protest.",description:"Similarly, do not purposely submit incorrect edits as a sign of disrespect or to be passive-aggressive. If you have an issue with site standards or policy, post in the site policy board."},{code:"database.guessing",title:"Do not attempt to guess or predict information when submitting to the database. ",description:"If you don't have a source, don't enter the information."},{code:"database.db_sourcing",title:"Do not source data from other media databases unless absolutely necessary.",description:""},{code:"database.banned_sourcing",title:"Do not source data from banned data sources ",description:""}]},submission_voting:{code:"submission_voting",title:"Submission voting and commenting rules",ruleset_description:"It is important to take voting on this site seriously, as the database is a shared resource used by millions of people. ",rules:[{code:"submission_voting.understanding",title:"Do not vote on submissions until you have a good understanding of how that type of submission should be entered.",description:""},{code:"submission_voting.blind_voting",title:'Do not blindly vote "yes" on submissions which clearly do not adhere to standards and/or contain errors that have been pointed out by others.',description:""},{code:"submission_voting.retaliation",title:"Do not use votes to retaliate against others or express dissatisfaction with anything other than the quality of the submission. ",description:""},{code:"submission_voting.off_topic",title:"In the discussion section of submission voting, keep discussion strictly limited to discussion about the submission in question.",description:"Any side discussions should be posted in the Site Policy forum instead."}]},collective_voting:{code:"collective_voting",title:"Genre/descriptor voting and commenting rules",ruleset_description:"It is important to take voting on this site seriously, as the database is a shared resource used by millions of people. ",rules:[{code:"collective_voting.joking",title:"Do not joke around with genre/descriptor voting",description:"Many of the site's features rely on accurate descriptors and genres for releases, songs, films and games. Joking around with the genre system affects the integrity of those systems."},{code:"collective_voting.campaign",title:"Do not vote as part of any organized campaign, including ones organized outside of this site.",description:"If you see someone suggest to vote for/against particular genre or descriptor and you participate, you will be banned from voting. This also applies if you weren't directly involved in such a campaign (for example, if you saw a friend vote a specific genre/descriptor and thought it was funny, so you followed along)."},{code:"collective_voting.defacto_deletion",title:"Do not abuse genre/descriptor voting in an attempt to delete genres/descriptors you think should not exist.",description:"Submission queues can be used to propose the addition, deletion or merging of genres and descriptors. Don't try to remove them by voting down every instance of the genre/descriptor that you find."},{code:"collective_voting.off_topic",title:"In the discussion section of genre/descriptor voting, keep discussion strictly limited to discussion about which genres/descriptors should be applied to the item."}]}};var RYMsettingsPage={loadSettingsPane:function(pane_id,pushState,pane_context,pane_page,initial_load){$(".settings_header").removeClass("selected");$("#settings_tab_"+pane_id).addClass("selected");if(history&&history.pushState&&pushState){if(pane_context&&pane_page){history.pushState(null,null,"/settings/"+pane_id+"/"+pane_context+"/"+pane_page);$("#pane_content_"+pane_context+"_content").loadingAnim()}else{history.pushState(null,null,"/settings/"+pane_id+"/");$("#pane_content").loadingAnim()}hasPushed=true}rym.request.post("LoadSettingsPane",{pane_id:pane_id,pane_context:pane_context,pane_page:pane_page,initial_load:initial_load},null,"script");RYMmobile.mobileMenu.enterSelectionMode();document.body.scrollTop=document.documentElement.scrollTop=0},returnToSettingsMenu:function(){$(".settings_header").removeClass("selected");RYMmobile.mobileMenu.exitSelectionMode()},onNavStateChange:function(url){var pane_id=url.split("/")[2];var pane_context=url.split("/")[3];var pane_page=url.split("/")[4];console.log("navstateChange"+url);if(url=="/settings/"){RYMmobile.mobileMenu.exitSelectionMode()}if(pane_id.length){if(pane_context&&pane_page){RYMsettingsPage.loadSettingsPane(pane_id,false,pane_context,pane_page)}else{RYMsettingsPage.loadSettingsPane(pane_id,false,null,null)}}},_changeUsernameCheckOkCallback:function(username,message,credits){$("#namechange_result_ok").fadeIn();$("#namechange_result_fail").hide();$("#namechange_result_username_success").text(username);$(".namechange_result_cost").text(credits)},_changeUsernameCheckFailCallback:function(username,message){$("#namechange_result_ok").hide();$("#namechange_result_fail").fadeIn();$("#namechange_result_username_fail").text(username);$("#namechange_result_fail_reason").text(message)},_changeUsernameRequestOkCallback:function(username,message,credits){$("#namechange_result_ok").fadeIn();$("#namechange_result_fail").hide();$("#namechange_result_username_success").text(username);$(".namechange_result_cost").text(credits)},_changeUsernameRequestFailCallback:function(username,message){$("#namechange_result_ok").hide();$("#namechange_result_fail").fadeIn();$("#namechange_result_username_fail").text(username);$("#namechange_result_fail_reason").text(message)},_changeUsernameCancelOkCallback:function(username,message,credits){$("#namechange_result_ok").fadeIn();$("#namechange_result_fail").hide();$("#namechange_result_username_success").text(username);$(".namechange_result_cost").text(credits)},_changeUsernameCancelFailCallback:function(username,message){$("#namechange_result_ok").hide();$("#namechange_result_fail").fadeIn();$("#namechange_result_username_fail").text(username);$("#namechange_result_fail_reason").text(message)},requestNameChange:function(){rym.request.post("SettingsRequestUsernameChange",{new_username:$("#new_username").val()})},cancelNameChange:function(request_id){if(confirm("Are you sure?")){rym.request.post("SettingsCancelUsernameChange",{request_id:request_id})}},toggleProfileSection:function(site){if($("#"+site+"_profile").is(":checked")){$("#settings_site_profile_"+site).fadeIn(100)}else{$("#settings_site_profile_"+site).fadeOut(100)}},requestWeightingUpdate:function(){$("#com_standing_update").loadingAnim();rym.request.post("SettingsRequestWeightingUpdate",{},null,"script")},chooseContentFilter:function(filter){RYMsettingsPage.loadSettingsPane("com_content",true,filter,1);$(".settings_com_content_chooser_item").removeClass("selected");$("#settings_com_content_chooser_item_"+filter).addClass("selected")}};var RYMsubmissionPage={submit:function(object,submitAction,submissionId,data){rym.request.post("SubmitSubmission",{object:object,submit_action:submitAction,submission_id:submissionId,data:data},null,"script")},_submitErrorCallback:function(errormsg){$("#submit_errors").append('<div class="error">'+errormsg+"</div>");$("#submitbtn").prop("disabled",false);$("#submit_errors").show()},_submitSuccessCallback:function(msg){$("#submitbtn_box").html('<div class="submit_success_msg">'+msg+"</div>")},_statusChangeCallback:function(submissionId,statusInfo){var statusInfoObj=JSON.parse(statusInfo);$("#submission_submission_"+submissionId).addClass("submission_"+statusInfoObj.new_status);$("#submission_status_"+submissionId).html(statusInfoObj.status_fmt);if(statusInfoObj.new_status=="approved"||statusInfoObj.new_status=="denied"||statusInfoObj.new_status=="cancelled"){$("#submission_closed_info_"+submissionId).html("Closed by "+statusInfoObj.moderator_link+', <date class="timeago dateonly has_tip" data-tiptip title="'+statusInfoObj.ts_closed+'">'+statusInfoObj.ts_closed+"</date>").show();$("#submission_closed_info_"+submissionId+" .timeago").timeago()}if(statusInfoObj.new_status=="waiting_submitter"||statusInfoObj.new_status=="waiting_moderator"){$("#modrequest_"+submissionId).html(statusInfoObj.modrequest);$("#submission_modreq_"+submissionId).toggle(statusInfoObj.new_status=="waiting_submitter")}},_adoptCallback:function(submissionId,userLink){$("#submission_owner_"+submissionId).html(userLink);$("#submission_adopt_"+submissionId).hide()}};var RYMsubscriptionPage={_loading:function(){$("#subscribe_step_3").html($("#loading_anim").html())},choosePlan:function(plan_id,recipient_id){$(".pricing_option").removeClass("selected");$("#plan_"+plan_id).addClass("selected");RYMsubscriptionPage._loading();rym.request.post("SubscriptionUpdatePaymentButtons",{plan_id:plan_id,recipient_id:recipient_id})},_updatePaymentButtonsCallback:function(stripe_ret,paypal_ret){$("#subscribe_step_3").html(stripe_ret+paypal_ret)},_giftUsernameReset:function(username){$("#gift_check").show()},_giftUsernameSuccessCallback:function(username,recipient_id){uiObjFromId("gift_user").clearStatusText();$("#recipient_id").val(recipient_id);$("#gift_user").val(username);$("#subscribe_step_2").show();$("#gift_check").hide()},_giftUsernameFailCallback:function(){uiObjFromId("gift_user").clearStatusText();uiObjFromId("gift_user").showError("Invalid Username");$("#recipient_id").val("");$("#subscribe_step_2").hide();$("#subscribe_step_3").html("")},cancelPlan:function(subscription_id){var msg=$("#settings_sub_cancel_text").text();var provider=$("#settings_sub_cancel_text").data("provider");if(provider=="stripe"){if(confirm(msg)){rym.request.post("SubscriptionCancel",{subscription_id:subscription_id})}}else{$("#settings_sub_cancel_text").hide().fadeIn(100)}}};var RYMsuggestions={_loadErrorCallback:function(object,assoc_id,error){var el=$("#suggestions_"+object+"_"+assoc_id);el.html('<div class="page_suggestions_not_available cl-999">No suggestions available</div>').addClass("not_available")},_loadSuccessCallback:function(object,assoc_id,results,url){var el=$("#suggestions_"+object+"_"+assoc_id);var html="";for(var i in results){var result=results[i];html+=RYMtemplate["page.discography.singleitem"].render(result)}el.html(html);if(object==="release"||object==="song"){var playlist_frame=$("#suggestions_playlist_frame_"+object+"_"+assoc_id);var btn=$("#suggestions_playlist_"+object+"_"+assoc_id);btn.unbind().on("click",function(event){RYMplaylist.generatePlaylist(url,"suggestions",object,assoc_id)});playlist_frame.show()}rym.setupPage();var buttonEl=$("#suggestions_refresh_"+object+"_"+assoc_id);buttonEl.removeClass("disabled")},refresh:function(el){var object=el.data("object");var assoc_id=el.data("assoc-id");var buttonEl=$("#suggestions_refresh_"+object+"_"+assoc_id);el.css("min-height",el.outerHeight());if(!buttonEl.hasClass("disabled")){buttonEl.addClass("disabled");el.data("loaded",false);RYMsuggestions.load(el);el.loadingAnim()}},load:function(el){if(el.data("loaded")){el.off("appear");return}el.data("loaded",true);var object=el.data("object");var assoc_id=el.data("assoc-id");el.loadingAnim();console.log("Loading suggestions for ["+object+assoc_id+"]");rym.request.post("SuggestionsLoad",{object:object,assoc_id:assoc_id},null,"script")}};var RYMtextarea={init:function(frameEl){var id=$(frameEl).data("id");var el=$("#"+id);var autoresize=el.data("autoresize")||false;var boldEl=$("#ui_textarea_tool_bold_"+id);var italicEl=$("#ui_textarea_tool_italic_"+id);var imageEl=$("#ui_textarea_tool_image_"+id);var embedEl=$("#ui_textarea_tool_embed_"+id);var embedInsertEl=$("#ui_textarea_embed_insert_"+id);var linkEl=$("#ui_textarea_tool_link_"+id);var linkInsertEl=$("#ui_textarea_link_insert_"+id);var tipsEl=$("#ui_textarea_tool_tips_"+id);var hasTouch="ontouchstart"in window;boldEl.unbind().on("click",function(event){RYMtextarea.onClickBold($(el),event)});italicEl.unbind().on("click",function(event){RYMtextarea.onClickItalic($(el),event)});imageEl.unbind().on("click",function(event){RYMtextarea.onClickImage($(el),event)});embedEl.unbind().on("click",function(event){RYMtextarea.onClickEmbed($(el),event)});embedInsertEl.unbind().on("click",function(event){RYMtextarea.onClickEmbedInsert($(el),event)});linkEl.unbind().on("click",function(event){RYMtextarea.onClickLink($(el),event)});linkInsertEl.unbind().on("click",function(event){RYMtextarea.onClickLinkInsert($(el),event)});tipsEl.unbind().on("click",function(event){RYMtextarea.onClickTips($(el),event)});if(autoresize){el.on("input",function(event){RYMtextarea._autoResize(el,event)})}RYMtextarea._autoResize(el,null);if(hasTouch){}else{}},_autoResize:function(el,event){var oldHeight=parseInt(el.css("height"));var initialComposeHeight=parseFloat(el.data("initial-compose-height"));var maxComposeHeight=parseFloat(el.data("max-compose-height"));el[0].style.height="auto";var originalHeightPx=em(initialComposeHeight);var maxHeightPx=em(maxComposeHeight);var scrollHeight=el[0].scrollHeight;var newHeight=scrollHeight>originalHeightPx?scrollHeight:originalHeightPx;if(newHeight>maxHeightPx){newHeight=maxHeightPx;el.css("overflow-y","scroll")}else{el.css("overflow-y","hidden")}el[0].style.height=newHeight.toString()+"px"},insertFormatTag:function(textareaEl,text1,text2){var ta=textareaEl[0];var saveScroll=ta.scrollTop;if(document.selection){var str=document.selection.createRange().text;ta.focus();var sel=document.selection.createRange();sel.text=text1+str+text2}else if(ta.selectionStart|ta.selectionStart==0){if(ta.selectionEnd>ta.value.length){ta.selectionEnd=ta.value.length}var firstPos=ta.selectionStart;var secondPos=ta.selectionEnd+text1.length;ta.value=ta.value.slice(0,firstPos)+text1+ta.value.slice(firstPos);ta.value=ta.value.slice(0,secondPos)+text2+ta.value.slice(secondPos);ta.selectionStart=firstPos+text1.length;ta.selectionEnd=secondPos;ta.focus()}ta.scrollTop=saveScroll},onClickBold:function(el,event){var id=$(el).data("id");var textareaEl=$("#"+id);RYMtextarea.insertFormatTag(textareaEl,"[b]","[/b]")},onClickItalic:function(el,event){var id=$(el).data("id");var textareaEl=$("#"+id);RYMtextarea.insertFormatTag(textareaEl,"[i]","[/i]")},onClickImage:function(el,event){var id=$(el).data("id");$("#ui_textarea_link_"+id).hide();$("#ui_textarea_embed_"+id).hide();$("#ui_textarea_image_"+id).slideToggle(100)},onClickEmbed:function(el,event){var id=$(el).data("id");$("#ui_textarea_link_"+id).hide();$("#ui_textarea_image_"+id).hide();$("#ui_textarea_embed_"+id).slideToggle(100);$("#ui_textarea_embed_error_"+id).hide()},onClickEmbedInsert:function(el,event){var id=$(el).data("id");var text=$("#ui_textarea_embed_input_"+id).val();rym.request.post("UiValidateEmbedCode",{id:id,text:text},null,"script")},_embedCodeSuccessCallback:function(id,code){RYMtextarea.insertFormatTag($("#"+id),code,"");$("#ui_textarea_embed_input_"+id).val("");$("#ui_textarea_embed_"+id).hide()},_embedCodeFailureCallback:function(id,message){$("#ui_textarea_embed_error_"+id).text(message).hide().fadeIn(200)},_imageUploadCallback:function(id,image_name,data){var tag="[image:"+image_name+"]";RYMtextarea.insertFormatTag($("#"+id),tag,"")},onClickLink:function(el,event){var id=$(el).data("id");$("#ui_textarea_image_"+id).hide();$("#ui_textarea_embed_"+id).hide();$("#ui_textarea_link_"+id).slideToggle(100);$("#ui_textarea_link_error_"+id).hide()},onClickLinkInsert:function(el,event){var id=$(el).data("id");var url=$("#ui_textarea_link_url_"+id).val();var name=$("#ui_textarea_link_name_"+id).val();$("#ui_textarea_link_error_"+id).hide();if(url.indexOf("https://")!=0&&url.indexOf("http://")!=0){$("#ui_textarea_link_error_"+id).text("The link you entered is not valid.  Please use a link that starts with http:// or https://").fadeIn(200)}else{if(name.length>0){RYMtextarea.insertFormatTag($("#"+id),"["+url+","+name+"]","")}else{RYMtextarea.insertFormatTag($("#"+id),url,"")}}},onClickTips:function(el,event){var id=$(el).data("id");$("#ui_textarea_help_"+id).slideToggle(100)}};$.fn.extend({textareaUI:function(){$(this).each(function(index){RYMtextarea.init($(this))})}});var RYMguide={_loadCommentsCallback:function(guide_id,html){var el=$("#guide_comment_section_"+guide_id);el.data("state","loaded");el.html(html);rym.setupPage()},toggleComments:function(guide_id){var el=$("#guide_comment_section_"+guide_id);var state=el.data("state");var isVisible=el.is(":visible");el.toggle();if(state==="initial"){el.loadingAnim();el.data("state","loading");rym.request.post("GuideLoadCommentsSection",{guide_id:guide_id},null,"script")}},submit:function(guide_id){RYMguide.hideError(guide_id);var guide_type=$("#guide_type_"+guide_id).val();var assoc_id=$("#guide_object_id_"+guide_id).val();var body=$("#guide_body_"+guide_id).val();if(!$("#guide_agree_"+guide_id).is(":checked")){RYMguide.showError(guide_id,"You must agree to the rules before submitting.");return}rym.request.post("GuideSubmit",{guide_id:guide_id,type:guide_type,assoc_id:assoc_id,body:body},null,"script")},submitEmbed:function(guide_id){RYMguide.hideError(guide_id);var guide_type=$("#guide_type_"+guide_id).val();var assoc_id=$("#guide_object_id_"+guide_id).val();var embed_url=$("#guide_body_embed_"+guide_id).val();if(!$("#guide_agree_"+guide_id).is(":checked")){RYMguide.showError(guide_id,"You must agree to the rules before submitting.");return}rym.request.post("GuideSubmitEmbed",{guide_id:guide_id,type:guide_type,assoc_id:assoc_id,embed_url:embed_url},null,"script")},_submitCallback:function(guide_id,html){$("#guide_"+guide_id).replaceWith(html)},delete:function(guide_id){rym.request.post("GuideDelete",{guide_id:guide_id},null,"script")},_deleteCallback:function(guide_id){$("#guide_"+guide_id).fadeOut(200)},showError:function(guide_id,message){$("#guide_error_"+guide_id).html(message).fadeIn(100)},hideError:function(guide_id){$("#guide_error_"+guide_id).hide()}};var RYMcollectiveVoting={object_type:null,object_assoc_id:null,open:function(object_type,object_assoc_id,vote_types){rym.doModalLoading();RYMcollectiveVoting.object_type=object_type;RYMcollectiveVoting.object_assoc_id=object_assoc_id;rym.request.post("CollectiveVotingOpen",{object_type:object_type,object_assoc_id:object_assoc_id,vote_types:vote_types})},close:function(){$("#modal_parent_frame").hide();$("#modal_content").html("");$("#modal_overlay").hide();$("#body").removeClass("modal_active")},onClickPropose:function(el,vote_type,result){$.ajax({url:"/api/1/collective_vote/"+vote_type+"/"+RYMcollectiveVoting.object_type+"/"+RYMcollectiveVoting.object_assoc_id+"/vote",method:"POST",dataType:"json",data:{vote_assoc_id:result.id,ulv:rym.session.token,polarity:1},success:function(data,status,xhr){if($.isEmptyObject(data.result)){}else{var html=RYMtemplate["ui.collective_voting.item"].render(data.result);var ele=$("#collective_vote_votes_"+data.result.object_type+"_"+data.result.object_assoc_id+"_"+data.result.vote_type);ele.append(html)}}})},onClickVote:function(object_type,object_assoc_id,vote_type,vote_assoc_id,polarity){$.ajax({url:"/api/1/collective_vote/"+vote_type+"/"+object_type+"/"+object_assoc_id+"/vote",method:"POST",dataType:"json",data:{vote_assoc_id:vote_assoc_id,ulv:rym.session.token,polarity:polarity},success:function(data,status,xhr){if($.isEmptyObject(data.result)){$("#collective_voting_vote_"+object_type+"_"+object_assoc_id+"_"+vote_type+"_"+vote_assoc_id).remove()}else{$("#collective_voting_vote_"+object_type+"_"+object_assoc_id+"_"+vote_type+"_"+vote_assoc_id).replaceWith(RYMtemplate["ui.collective_voting.item"].render(data.result))}}})},onClickUnvote:function(object_type,object_assoc_id,vote_type,vote_assoc_id){$.ajax({url:"/api/1/collective_vote/"+vote_type+"/"+object_type+"/"+object_assoc_id+"/vote_delete",method:"POST",dataType:"json",data:{vote_assoc_id:vote_assoc_id,ulv:rym.session.token},success:function(data,status,xhr){if($.isEmptyObject(data.result)){$("#collective_voting_vote_"+object_type+"_"+object_assoc_id+"_"+vote_type+"_"+vote_assoc_id).remove()}else{$("#collective_voting_vote_"+object_type+"_"+object_assoc_id+"_"+vote_type+"_"+vote_assoc_id).replaceWith(RYMtemplate["ui.collective_voting.item"].render(data.result))}}})},onClickReport:function(object_type,object_assoc_id,vote_type,vote_assoc_id){},onClickUnreport:function(object_type,object_assoc_id,vote_type,vote_assoc_id){}};var RYMcataloger={currentCatalog:null,currentComponent:null,newItemId:null,customFormats:{categories:[{category:"Tape",items:[{name_display:"Acetate",format_id:80},{name_display:"8 Track",format_id:21},{name_display:"VHS",format_id:40},{name_display:"Beta",format_id:41},{name_display:"Cassette",format_id:66},{name_display:"Reel-to-reel",format_id:92}]},{category:"Optical Disc",items:[{name_display:"UMD",format_id:81},{name_display:"HDCD",format_id:83},{name_display:"SACD",format_id:76},{name_display:"DVD-A",format_id:77},{name_display:"DVD",format_id:78},{name_display:"VCD",format_id:79},{name_display:"CD",format_id:60},{name_display:"DualDisc",format_id:54},{name_display:"MiniDisc",format_id:48},{name_display:"CD-R",format_id:32},{name_display:"HDAD",format_id:62},{name_display:"Blu-ray",format_id:88},{name_display:"Laserdisc",format_id:89}]},{category:"Digital File",items:[{name_display:"Digital File",format_id:58},{name_display:"Lossless Digital",format_id:59}]},{category:"Record",items:[{name_display:"Vinyl",format_id:95},{name_display:"Shellac",format_id:96}]},{category:"Other",items:[{name_display:"Phonograph cylinder",format_id:91}]}]},sec_ids_all:{release:[],song:[],game:[],film:[]},init:function(component,catalog_id){var catalog=$("#ui_catalog_btn_display_"+component+"_"+catalog_id).data("catalog");RYMcataloger.currentComponent=component;return RYMcataloger._doInit(catalog)},initNew:function(component,id){var catalog=$("#"+id).data("catalog");RYMcataloger.currentComponent=component;RYMcataloger.newItemId=id;return RYMcataloger._doInit(catalog)},_getRatingSystem:function(rating_system){var ret={};if(typeof rating_system.r_1==="undefined"){return{}}for(var i=1;i<=10;i++){var rating_item=[];for(var j=1;j<=10;j++){var rating_label=rating_system["r_"+i][j-1];rating_item.push({rating:i,index:j,label:rating_label})}ret["r_"+i]=rating_item}return ret},doLoading:function(){$("#ui_catalog_dialog_overlay").fadeIn(50)},_clearLoading:function(){$("#ui_catalog_dialog_overlay").fadeOut(50);$("#ui_catalog_dialog_overlay_inner").html("")},_onCatalogUpdateSuccess:function(data,doInit){RYMcataloger._clearLoading();var item=data.result;var object=RYMcataloger.currentCatalog.object;var assoc_id=RYMcataloger.currentCatalog.assoc_id;$("#ui_cataloger_format").hide();item.component=RYMcataloger.currentComponent;item.data=JSON.parse(JSON.stringify(item));if(typeof item.deleted_id!=="undefined"){$(".ui_catalog_id_"+item.deleted_id).remove();var catalog=RYMcataloger.currentCatalog;if(RYMcataloger.sec_ids_all[catalog.object][catalog.assoc_id]){var sec_id=catalog.sec_id;if(typeof sec_id==="undefined"||sec_id===""){sec_id=0}RYMcataloger.sec_ids_all[catalog.object][catalog.assoc_id]=RYMcataloger.sec_ids_all[catalog.object][catalog.assoc_id].filter(function(v,i){return v!=sec_id})}if(!RYMcataloger.newItemId){RYMcataloger.newItemId="ui_catalog_btn_display_"+RYMcataloger.currentComponent+"_"+object+"_"+assoc_id+"__new"}RYMcataloger.initNew(RYMcataloger.currentComponent,RYMcataloger.newItemId)}else{RYMcataloger.currentCatalog=item;if(!item.sec_ids_all){alert("Error updating catalog state")}RYMcataloger.sec_ids_all[item.object][item.assoc_id]=item.sec_ids_all;var newCatalog=RYMtemplate["ui.catalog"].render(item);var el=$("#ui_catalog_btn_display_"+RYMcataloger.currentComponent+"_"+item.catalog_id);if(el.length>0){el.replaceWith(newCatalog);var els=$(".ui_catalog_id_"+item.catalog_id);els.each(function(index){var component=$(this).data("component");item.component=component;item.data=JSON.parse(JSON.stringify(item));var newCatalog=RYMtemplate["ui.catalog"].render(item);$("#ui_catalog_btn_display_"+component+"_"+item.catalog_id).replaceWith(newCatalog)});if(doInit){RYMcataloger._doInit(item)}}else{$("#catalog_container_inner_"+item.object+"_"+item.assoc_id).append(newCatalog);if(doInit){RYMcataloger._doInit(item)}}}var container=$("#catalog_container_"+object+"_"+assoc_id);var maxItems=container.data("max-items");var numItems=$("#catalog_container_inner_"+object+"_"+assoc_id+" .ui_catalog_btn_display").length;if(container.length){if(numItems==0){container[0].className="cataloger_container "}else if(numItems>=maxItems){container[0].className="cataloger_container full has_items "}else{container[0].className="cataloger_container "+(numItems>0?"has_items":"")}}},_onCatalogUpdateError:function(data){RYMcataloger._clearLoading();$("#ui_cataloger_format").hide();rym.showGlobalError(data.responseJSON.errors[0].message)},_getApiUrl:function(resource){var catalog=RYMcataloger.currentCatalog;var url="/api/1/catalog/"+catalog.object+"/"+catalog.assoc_id;if(catalog.sec_id){url+="/"+catalog.sec_id}url+="/"+resource;return url},_makeApiCall:function(component,obj,options){if(rym.session.userid==0){rym.showGlobalError("You must log in to use this feature.");RYMlogin.login();return}options=options||{show_loading:true};var catalog=RYMcataloger.currentCatalog;rym.clearGlobalError();if(catalog.is_new){var sec_id=catalog.sec_id;if(!sec_id||sec_id===""){sec_id=0}var sec_ids_all=RYMcataloger.sec_ids_all[catalog.object][catalog.assoc_id]||catalog.sec_ids_all;if(sec_ids_all&&sec_ids_all.indexOf(sec_id)!=-1){rym.showGlobalError("You must first select an issue that you haven't already cataloged.");return}}if(options.show_loading){RYMcataloger.doLoading()}var url=RYMcataloger._getApiUrl(component);$.ajax({url:url,method:"POST",dataType:"json",data:obj,success:function(data,status,xhr){if(component==="tags"){RYMcataloger._onCatalogUpdateSuccess(data,false)}else{RYMcataloger._onCatalogUpdateSuccess(data,true)}if(component==="notes"){$("#ui_cataloger_dialog_section_notes")[0].className="ui_cataloger_dialog_section ui_cataloger_dialog_section_notes saved"}},error:function(data,status,xhr){RYMcataloger._onCatalogUpdateError(data)}})},onClickRating:function(rating,custom_rating){var obj;if(custom_rating){obj={rating:rating,label_index:custom_rating}}else{obj={rating:rating}}RYMcataloger._makeApiCall("rating",obj)},onClickBump:function(catalog_id){if(confirm("Press OK to bump the catalog date to the current date. This action cannot be undone.")){RYMcataloger._makeApiCall("bump",{catalog_id:catalog_id})}},onSaveTags:function(pickerEl){var tags=pickerEl.val();RYMcataloger._makeApiCall("tags",{tags:tags},{show_loading:false})},onClickOwnership:function(ownership){RYMcataloger._makeApiCall("ownership",{ownership:ownership})},onClickInitialPlay:function(play_status){RYMcataloger._makeApiCall("play_status",{play_status:play_status})},onClickIncrementPlays:function(){RYMcataloger._makeApiCall("play_count",{action:"increment"})},onClickOpenCustomFormat:function(){var formats=RYMcataloger.customFormats;var html=RYMtemplate["ui.cataloger.format"].render(formats);$("#ui_cataloger_format_frame").html(html);$("#ui_cataloger_format").show()},onClickCancelCustomFormat:function(){$("#ui_cataloger_format").hide()},onClickCustomFormat:function(format){RYMcataloger._makeApiCall("custom_format",{format_id:format})},onClickGameCompleted:function(){if($("#ui_cataloger_dialog_section_listening").hasClass("played")){RYMcataloger._makeApiCall("play_status",{play_status:"completed"})}else{RYMcataloger._makeApiCall("play_status",{play_status:"played"})}},onClickResetPlays:function(){if(!confirm("Resetting will delete all play history and cannot be undone. Press OK to continue")){return}RYMcataloger._makeApiCall("plays",{action:"reset"})},onClickEditPlays:function(){alert("edit plays")},onClickAddPlay:function(){RYMcataloger._makeApiCall("plays",{action:"append"})},onClickIssueSelectorItem:function(issue_id){var catalog=RYMcataloger.currentCatalog;rym.clearGlobalError();$("#ui_cataloger_issue_selector").hide();if(catalog.is_new){catalog.sec_id=issue_id;for(var i in catalog.issue_data.issues){var issue=Object.assign(catalog.issue_data.issues[i],{current_in_list:false,disabled:false});if(typeof catalog.sec_id!=="undefined"&&catalog.sec_id&&issue.issue_id==catalog.sec_id){html=RYMtemplate["ui.cataloger.issue_selector.item"].render(Object.assign(issue,{selected_item_ui:true}))}else if((typeof catalog.sec_id==="undefined"||catalog.sec_id==0||catalog.sec_id==null)&&issue.issue_id==0){html=RYMtemplate["ui.cataloger.issue_selector.item"].render(Object.assign(issue,{selected_item_ui:true}))}}$("#ui_cataloger_dialog_selected_issue").html(html)}else{RYMcataloger.doLoading();RYMcataloger._makeApiCall("change_sec_id",{new_sec_id:issue_id})}},_getIssueHtml:function(catalog){var issue_html="";var sec_ids_all=RYMcataloger.sec_ids_all[catalog.object][catalog.assoc_id]||catalog.sec_ids_all;for(var i in catalog.issue_data.issues){var issue=Object.assign(catalog.issue_data.issues[i],{selected_item_ui:false});if(typeof catalog.sec_id!=="undefined"&&catalog.sec_id&&issue.issue_id==catalog.sec_id){issue.current_in_list=true}else if((typeof catalog.sec_id==="undefined"||catalog.sec_id==0||catalog.sec_id==null)&&issue.issue_id==0){if(catalog.is_new&&sec_ids_all.indexOf(0)!==-1){issue.disabled=true}else{issue.current_in_list=true}}else{issue.current_in_list=false;if(!sec_ids_all){RYMcataloger.sec_ids_all[catalog.object][catalog.assoc_id]=catalog.sec_ids_all;sec_ids_all=RYMcataloger.sec_ids_all[catalog.object][catalog.assoc_id]}if(sec_ids_all.indexOf(issue.issue_id)!==-1){issue.disabled=true}}issue_html+=RYMtemplate["ui.cataloger.issue_selector.item"].render(issue)}return issue_html},_doInit:function(catalog){var scope;switch(catalog.object){case"release":case"song":scope="music";catalog.rating_system=RYMcataloger._getRatingSystem(window.rating_system["music"]);break;case"film":scope="film";catalog.rating_system=RYMcataloger._getRatingSystem(window.rating_system["film"]);break;case"game":scope="games";catalog.rating_system=RYMcataloger._getRatingSystem(window.rating_system["games"]);break}if(window.issue_data[catalog.object][catalog.assoc_id]){catalog.issue_data=Object.assign(window.issue_data[catalog.object][catalog.assoc_id],{})}var issue_html=RYMcataloger._getIssueHtml(catalog);catalog["object_"+catalog.object]=true;RYMcataloger.currentCatalog=catalog;catalog.tags_ui={id:"ui_cataloger_tags_"+catalog.component+"_"+catalog.object+"_"+catalog.assoc_id+"_"+catalog.sec_id,main_id:"ui_cataloger_tags_"+catalog.component+"_"+catalog.object+"_"+catalog.assoc_id+"_"+catalog.sec_id,picker_type:"tag_"+scope,object:catalog.object,assoc_id:catalog.assoc_id,sec_id:catalog.sec_id,save_action:"save",callback:"catalog",catalog_id:catalog.catalog_id,show_all_results:true,allow_freeform:true,bracketed_aka:false,filter_by_id:false,selection_mode:"multiple",value_mode:"names_only",value:JSON.stringify(catalog.tags)};var html=RYMtemplate["ui.cataloger"].render(catalog);rym.doModal(html,"",{frame_class:"catalog"});$("#ui_cataloger_issue_selector_content").html(issue_html);RYMcataloger._refreshUI();rym.setupPage()},_refreshUI:function(){var catalog=RYMcataloger.currentCatalog;var html="";for(var i in catalog.issue_data.issues){var issue=Object.assign(catalog.issue_data.issues[i],{current_in_list:false,disabled:false});if(typeof catalog.sec_id!=="undefined"&&catalog.sec_id&&issue.issue_id==catalog.sec_id){html=RYMtemplate["ui.cataloger.issue_selector.item"].render(Object.assign(issue,{selected_item_ui:true}))}else if((typeof catalog.sec_id==="undefined"||catalog.sec_id==0||catalog.sec_id==null)&&issue.issue_id==0){html=RYMtemplate["ui.cataloger.issue_selector.item"].render(Object.assign(issue,{selected_item_ui:true}))}}$("#ui_cataloger_dialog_selected_issue").html(html);$("#ui_cataloger_ownership")[0].className="ui_cataloger_ownership ownership_"+catalog.ownership;$("#ui_cataloger_dialog_section_listening")[0].className="ui_cataloger_dialog_section ui_cataloger_dialog_section_listening first_play "+catalog.play_status;$("#ui_cataloger_listening_status_not_yet_played")[0].className="ui_cataloger_listening_status_not_yet_played "+catalog.play_status;$(".ui_cataloger_dialog_rating_custom").removeClass("selected");$(".ui_cataloger_dialog_rating_base").removeClass("selected base_selected");if(catalog.rating){if(catalog.label_index){$("#ui_cataloger_dialog_rating_base_r"+catalog.rating).addClass("selected");$("#ui_cataloger_dialog_rating_custom_r"+catalog.rating+"_"+catalog.label_index).addClass("selected")}else{$("#ui_cataloger_dialog_rating_base_r"+catalog.rating).addClass("selected base_selected")}}rym.setupPage()},onClickToggleIssue:function(){$("#ui_cataloger_issue_selector").toggle()},onClickCancelIssueSelection:function(){$("#ui_cataloger_issue_selector").hide()},onClickChangeIssue:function(){$("#ui_cataloger_issue_selector").show()},onNotesChanged:function(){$("#ui_cataloger_dialog_section_notes")[0].className="ui_cataloger_dialog_section ui_cataloger_dialog_section_notes unsaved"},onSaveNotes:function(){RYMcataloger._makeApiCall("notes",{notes:$("#ui_cataloger_notes").val()})}};var RYMtags={init:function(el){var object=el.data("object");var assoc_id=el.data("assoc-id");var sec_id=el.data("sec-id");var user_id=el.data("user-id");var is_owner=user_id===rym.session.userid;var display_only=el.data("display-only");if(!is_owner||display_only){return}var initialized=Boolean(el.data("initialized"));if(initialized){return}el.data("initialized",true);el.unbind();if(is_owner){el.addClass("is_owner")}var el=$("#ui_catalog_tags_"+user_id+"_"+object+"_"+assoc_id+"_"+sec_id);el.unbind().on("click",function(event){RYMtags.onClick($(el),event)})},onClick:function(el,event){var object=el.data("object");var assoc_id=el.data("assoc-id");var sec_id=el.data("sec-id");var user_id=el.data("user-id");var scope=RYMutil.getScopeForObject(object);var el=$("#ui_catalog_tags_"+user_id+"_"+object+"_"+assoc_id+"_"+sec_id);el.addClass("edit_mode");var tags=el.data("tags");var is_owner=user_id===rym.session.userid;if(!is_owner){return}var obj={object:object,assoc_id:assoc_id,sec_id:sec_id,user_id:user_id,tags:tags,scope:scope};var html=RYMtemplate["ui.catalog.tags.edit"].render(obj);$("#content_total_cover").html(html);var pageHeight=$(document).height()+"px";$("#total_cover").css({width:"100%",height:pageHeight,top:0,left:0}).show().on("click",function(){RYMcatalog.dismiss(el)});var position=$("#ui_catalog_tags_"+user_id+"_"+object+"_"+assoc_id+"_"+sec_id).offset();var windowWidth=$(window).outerWidth();var left=0;var frameEl=$("#ui_catalog_tags_edit_frame_"+user_id+"_"+object+"_"+assoc_id+"_"+sec_id);var frameWidth=frameEl.outerWidth();if(position.left<windowWidth/2){left=position.left}else{if(windowWidth-position.left+frameWidth+50>windowWidth){left=windowWidth-frameWidth}else{left=position.left-frameWidth+$("#ui_catalog_tags_"+user_id+"_"+object+"_"+assoc_id+"_"+sec_id).outerWidth()}}frameEl.css("top",position.top+1+$("#ui_catalog_tags_"+user_id+"_"+object+"_"+assoc_id+"_"+sec_id).outerHeight()+"px").css("left",left+"px");var pickerObj={id:"tag_edit_"+user_id+"_"+object+"_"+assoc_id+"_"+sec_id,picker_type:"tag_"+scope,object:object,assoc_id:assoc_id,sec_id:sec_id,selection_mode:"multiple",show_all_results:true,allow_freeform:true,save_action:"save",value_mode:"names_only",value:JSON.stringify(tags)};var pickerEl=$("#ui_catalog_tags_picker_"+user_id+"_"+object+"_"+assoc_id+"_"+sec_id);pickerEl.html(RYMtemplate["ui.picker"].render(pickerObj));$("#tag_edit_"+user_id+"_"+object+"_"+assoc_id+"_"+sec_id).pickerUI();$("#ui_picker_input_tag_edit_"+user_id+"_"+object+"_"+assoc_id+"_"+sec_id).focus()},_saveCallback:function(user_id,object,assoc_id,sec_id,tags){var el=$("#ui_catalog_tags_"+user_id+"_"+object+"_"+assoc_id+"_"+sec_id);var taglistEl=$("#ui_catalog_tags_taglist_"+user_id+"_"+object+"_"+assoc_id+"_"+sec_id);var html="";for(var i in tags){html+='<span class="ui_catalog_tags_tag">'+RYMpicker._entitify(tags[i])+"</span>"}taglistEl.html(html);if(tags.length==0){el.addClass("no_tags")}else{el.removeClass("no_tags")}el.data("tags",tags)}};$.fn.extend({tagsUI:function(){$(this).each(function(index){RYMtags.init($(this))})}});var RYMnav={reset:function(el){el.data("initialized",false);el.data("nocount-page-limit-reached",false);el.data("page",1)},init:function(el){var initialized=Boolean(el.data("initialized"));var noCount=Boolean(el.data("nocount"));if(initialized){return}var id=el.data("mainid");var preRendered=Boolean(el.data("prerendered"));var page=parseInt(el.data("page"));if(!page||isNaN(page)){page=1;el.data("page",page)}var rpp=parseInt(el.data("rpp"));if(!rpp||isNaN(rpp)){rpp=1;el.data("rpp",rpp)}var num_items=parseInt(el.data("num-items"));if(!num_items||isNaN(num_items)){num_items=1;el.data("num-items",num_items)}var num_pages=Math.floor((num_items-1)/rpp+1);el.data("num-pages",num_pages);if(!preRendered){RYMnav.render(el)}if(num_pages>1||noCount){$("#nav_"+id).css("visibility","visible")}$("#nav_prev_"+id).unbind().on("click",function(event){return RYMnav.onClickPrev(el,event)});$("#nav_next_"+id).unbind().on("click",function(event){return RYMnav.onClickNext(el,event)});$("#nav_page_"+id).unbind().on("click",function(event){return RYMnav.onClickPage(el,event)});el.data("initialized",true)},render:function(el){var id=el.data("mainid");var sync_id=el.data("sync-id");var page=parseInt(el.data("page"));var rpp=parseInt(el.data("rpp"));var num_items=parseInt(el.data("num-items"));var num_pages=el.data("num-pages");var noCount=Boolean(el.data("nocount"));var noCountPageLimitReached=Boolean(el.data("nocount-page-limit-reached"));$(".nav_component_"+sync_id).each(function(){var id=$(this).data("mainid");var el=$("#nav_"+id);$("#nav_page_current_"+id).text(page);$("#nav_page_num_pages_"+id).text(num_pages);var prevEl=$("#nav_prev_"+id);var nextEl=$("#nav_next_"+id);prevEl[0].className="nav_btn nav_prev "+(page==1?"disabled":"");if(noCount){nextEl[0].className="nav_btn nav_next "+(num_pages==1||page==num_pages&&noCountPageLimitReached?"disabled":"")}var urlPrefix=el.data("url-prefix")||"";var urlSuffix=el.data("url-suffix")||"";var endWithSlash=el.data("always-end-with-slash");if(page>1){var prevUrl=urlPrefix+(page-1)+urlSuffix;if(prevUrl[prevUrl.length-1]!=="/"&&endWithSlash){prevUrl+="/"}prevEl.attr("href",prevUrl)}else{prevEl.removeAttr("href")}if(page<num_pages){var nextUrl=urlPrefix+(page+1)+urlSuffix;if(nextUrl[nextUrl.length-1]!=="/"&&endWithSlash){nextUrl+="/"}nextEl.attr("href",nextUrl)}else{nextEl.removeAttr("href")}});if(num_pages>1||noCount){$("#nav_"+id).css("visibility","visible")}else{}},setPageNumByComponent:function(sync_id,pageNum){$(".nav_component_"+sync_id).each(function(){var id=$(this).data("mainid");var el=$("#nav_"+id);$("#nav_page_current_"+id).text(pageNum);el.data("page",pageNum);RYMnav.render(el)})},onClickPageNum:function(el,pageNum){var id=el.data("mainid");var el=$("#nav_"+id);var sync_id=el.data("sync-id");var page=pageNum;var num_pages=el.data("num-pages");var noCount=Boolean(el.data("nocount"));var noCountPageLimitReached=Boolean(el.data("nocount-page-limit-reached"));if(page>num_pages||page<1){return}var callback=el.data("callback-component");if(callback&&callback.length){var ret=RYMnav.onPageNav(el,pageNum,sync_id);RYMnav.closeNav();return ret}else{var urlPrefix=el.data("url-prefix")||"";var urlSuffix=el.data("url-suffix")||"";var endWithSlash=el.data("always-end-with-slash");var url="";if(pageNum>1){var url=urlPrefix+pageNum+urlSuffix;if(url[url.length-1]!=="/"&&endWithSlash){url+="/"}window.location=url}else{window.location=urlPrefix}return false}},notifyNoCountLastPage:function(sync_id,num_pages){var el;$(".nav_component_"+sync_id).each(function(){var id=$(this).data("mainid");el=$("#nav_"+id);el.data("num-pages",num_pages);el.data("nocount-page-limit-reached",true)});if(el){RYMnav.render(el)}},onPageNav:function(el,pageNum,sync_id){var id=el.data("mainid");var callback=el.data("callback-component");if(callback&&callback.length){$(".nav_component_"+sync_id).each(function(){var id=$(this).data("mainid");var el=$("#nav_"+id);$("#nav_page_current_"+id).text(pageNum);el.data("page",pageNum);RYMnav.render(el)});var callback_data=el.data("callback-data");if(callback_data){if(typeof callback_data!=="object"){callback_data=JSON.parse(callback_data)}}switch(callback){case"collection":{RYMcollectionPage.goPage(pageNum);return false}case"discography":{RYMobjectListPage.goPage(callback_data,pageNum);return false}case"catalog":{RYMcatalogPage.goPage(callback_data,pageNum);return false}case"reviews":{RYMreviewsPage.goPage(callback_data,pageNum);return false}break}}else{return true}},onClickNext:function(el,event){var id=el.data("mainid");var sync_id=el.data("sync-id");var page=parseInt(el.data("page"));var num_pages=el.data("num-pages");var noCount=Boolean(el.data("nocount"));var noCountPageLimitReached=Boolean(el.data("nocount-page-limit-reached"));var num_items=parseInt(el.data("num-items"));var rpp=parseInt(el.data("rpp"));if(noCount){if(page>=num_pages&&noCount&&noCountPageLimitReached){return}if(num_items<rpp){return}}else{if(page>=num_pages){return}}page++;if(noCount){}var ret=RYMnav.onPageNav(el,page,sync_id);RYMnav.closeNav();return ret},onClickPrev:function(el,event){var id=el.data("mainid");var sync_id=el.data("sync-id");var page=parseInt(el.data("page"));var num_pages=el.data("num-pages");if(page<=1){return}page--;var ret=RYMnav.onPageNav(el,page,sync_id);RYMnav.closeNav();return ret},buildPages:function(el){var id=el.data("mainid");var page=parseInt(el.data("page"));var num_pages=el.data("num-pages");var pages=[];var ret;if(num_pages<=30){for(var i=1;i<=num_pages;i++){pages.push({name:"Page "+i,page:i})}ret={pages:pages}}else{var rpp=10;if(num_pages>=200){rpp=50}var sections=[];var num_sections=Math.ceil(num_pages/rpp);for(var i=0;i<num_sections;i++){var first_page=1+i*rpp;var last_page=Math.min(num_pages,rpp+i*rpp);var section={name:"Pages "+first_page+" - "+last_page};var section_pages=[];for(var j=first_page;j<=last_page;j++){section_pages.push({name:"Page "+j,page:j})}section.pages=section_pages;section.section_id="section_"+i;sections.push(section)}ret={sections:sections}}ret.id=id;return RYMtemplate["ui.nav.pagelist"].render(ret);console.log(JSON.stringify(ret))},closeNav:function(){$("#modal_overlay").hide();$(".nav_popup").hide();$("#modal_content").html("").hide()},onClickPage:function(el,event){var noCount=Boolean(el.data("nocount"));if(noCount){return}var id=el.data("mainid");var html=RYMnav.buildPages(el);if($(window).width()/em(1)<=48){$("#modal_content").html(html).show();$("#modal_parent_frame").show();$("#modal_overlay").show().on("click",function(){RYMnav.closeNav()})}else{$("#modal_overlay").show().on("click",function(){RYMnav.closeNav()});$("#nav_popup_"+id).html(html).toggle()}}};$.fn.extend({navUI:function(){$(this).each(function(index){RYMnav.init($(this))})}});var RYMnotificationPage={dismiss:function(id){rym.request.post("NotificationDismiss",{notification_id:id},null,"script");$("#ui_notification_"+id).fadeOut(100)}};var RYMplaylist={removeItem:function(index){var lst=[];for(var i in RYMplaylist.listdata){if(RYMplaylist.listdata[i].index!=index){lst.push(RYMplaylist.listdata[i])}}RYMplaylist.listdata=lst;$("#page_fragment_track_index_"+index).remove();RYMplaylist.update()},_saveCallback:function(uri){window.location=uri;RYMcollectiveVoting.close()},save:function(){var song_ids=[];var els=$("#ui_playlist_tracks_new").find(".page_fragment_track_track");els.each(function(){song_ids.push($(this).data("song-id"))});var song_id_json=JSON.stringify(song_ids);rym.request.post("ChartSavePlaylist",{song_ids:song_id_json,name:$("#ui_playlist_name_new").val(),description:RYMplaylist.playlist_description},null,"script");rym.doModalLoading()},update:function(){var duration=0;for(var i in RYMplaylist.listdata){var item=RYMplaylist.listdata[i];if(item.duration){duration+=item.duration}}$("#ui_playlist_duration_value_new").text((duration+"").toHHMMSS());$("#ui_playlist_count_value_new").text(RYMplaylist.listdata.length+" tracks")},updatePlaylistName:function(){RYMplaylist.playlist_name_index++;if(RYMplaylist.playlist_name_index>=RYMplaylist.playlist_names.length){RYMplaylist.playlist_name_index=0}$("#ui_playlist_name_new").val(RYMplaylist.playlist_names[RYMplaylist.playlist_name_index])},_generatePlaylistCallback:function(html,description,listdata,playlist_names){rym.doModal(html,"",{frame_class:"playlist"});RYMplaylist.listdata=listdata;RYMplaylist.playlist_names=playlist_names;RYMplaylist.playlist_name_index=0;RYMplaylist.playlist_description=description;rym.setupPage();$("#ui_playlist_tracks_new").sortable()},generatePlaylist:function(url,context,object,assoc_id){rym.doModalLoading();rym.request.post("ChartGeneratePlaylist",{url:url,context:context,object:object,assoc_id:assoc_id},null,"script")}};var RYMratingSystem={_saveCallback:function(scope,rating_system){window.rating_system[scope]=rating_system;RYMratingSystem.loadSystem({system:rating_system});$("#settings_rating_system")[0].className="settings_rating_system using_custom"},save:function(scope){var obj={scope:scope};obj.outof=$("#ui_rating_system_outof").val();for(var r=1;r<=10;r++){for(var ln=1;ln<=10;ln++){if($("#ui_rating_system_edit_r"+r+"_"+ln).val().length>0){obj["r_"+r+"_"+ln]=$("#ui_rating_system_edit_r"+r+"_"+ln).val()}}}rym.request.post("SettingsSaveRatingSystem",obj,null,"script")},edit:function(){$("#settings_rating_system")[0].className="settings_rating_system editing_custom"},editExisting:function(scope){$("#settings_rating_system")[0].className="settings_rating_system editing_custom has_existing";RYMratingSystem.loadSystem({system:rating_system[scope]})},cancel:function(scope){if($("#settings_rating_system").hasClass("has_existing")){$("#settings_rating_system")[0].className="settings_rating_system using_custom";RYMratingSystem.loadSystem({system:rating_system[scope]})}else{$("#settings_rating_system")[0].className="settings_rating_system using_base"}},_resetToBaseCallback:function(){$("#settings_rating_system")[0].className="settings_rating_system using_base"},resetToBase:function(scope){if(!confirm("Are you sure you want to delete your custom rating system?  You will lose all of your custom ratings; only your base ratings (0.5-5.0) will be preserved.")){return}var obj={scope:scope};rym.request.post("SettingsResetRatingSystem",obj,null,"script")},isEmpty:function(name){for(var r=1;r<=10;r++){for(var ln=1;ln<=10;ln++){if($("#ui_rating_system_edit_r"+r+"_"+ln).val().length>0){return false}}}return true},clear:function(name){$("#ui_rating_system_outof").val("");$("#ui_rating_system_outof_incl").prop("checked",false);for(var r=1;r<=10;r++){for(var ln=1;ln<=10;ln++){$("#ui_rating_system_edit_r"+r+"_"+ln).val("")}}},loadSystem:function(preset){if(preset.outof&&preset.outof.length>0){$("#ui_rating_system_outof").val(preset.outof);$("#ui_rating_system_outof_incl").prop("checked",true)}else{$("#ui_rating_system_outof").val("");$("#ui_rating_system_outof_incl").prop("checked",false)}for(var r=1;r<=10;r++){$("#ui_rating_system_custom_items_r_"+r).html("");for(var ln=1;ln<=10;ln++){var line=preset.system["r_"+r];var val=line[ln-1];if(val){$("#ui_rating_system_edit_r"+r+"_"+ln).val(val);$("#ui_rating_system_custom_items_r_"+r).append('<div class="ui_rating_system_custom_item">'+val+"</div> ")}else{$("#ui_rating_system_edit_r"+r+"_"+ln).val(" ");$("#ui_rating_system_custom_items_r_"+r).append('<div class="ui_rating_system_custom_item">'+" "+"</div> ")}}}},loadPreset:function(name){if(!RYMratingSystem.isEmpty()&&!confirm("Are you sure you want to replace the current entries with this preset?")){return}$("#ui_rating_system_save").removeClass("disabled");for(var i in RYMratingSystemPresets){var preset=RYMratingSystemPresets[i];if(preset.name==name){RYMratingSystem.loadSystem(preset);if(preset.outof&&preset.outof.length>0){$("#ui_rating_system_outof").val(preset.outof);$("#ui_rating_system_outof_incl").prop("checked",true)}else{$("#ui_rating_system_outof").val("");$("#ui_rating_system_outof_incl").prop("checked",false)}}}}};var RYMratingSystemPresets=[{name:"100 point",system:{outof:"100",r_10:[91,92,93,94,95,96,97,98,99,100],r_9:[81,82,83,84,85,86,87,88,89,90],r_8:[71,72,73,74,75,76,77,78,79,80],r_7:[61,62,63,64,65,66,67,68,69,70],r_6:[51,52,53,54,55,56,57,58,59,60],r_5:[41,42,43,44,45,46,47,48,49,50],r_4:[31,32,33,34,35,36,37,38,39,40],r_3:[21,22,23,24,25,26,27,28,29,30],r_2:[11,12,13,14,15,16,17,18,19,20],r_1:[1,2,3,4,5,6,7,8,9,10]}},{name:"10 point decimal",system:{outof:"10",r_10:["9.1","9.2","9.3","9.4","9.5","9.6","9.7","9.8","9.9","10.0"],r_9:["8.1","8.2","8.3","8.4","8.5","8.6","8.7","8.8","8.9","9.0"],r_8:["7.1","7.2","7.3","7.4","7.5","7.6","7.7","7.8","7.9","8.0"],r_7:["6.1","6.2","6.3","6.4","6.5","6.6","6.7","6.8","6.9","7.0"],r_6:["5.1","5.2","5.3","5.4","5.5","5.6","5.7","5.8","5.9","6.0"],r_5:["4.1","4.2","4.3","4.4","4.5","4.6","4.7","4.8","4.9","5.0"],r_4:["3.1","3.2","3.3","3.4","3.5","3.6","3.7","3.8","3.9","4.0"],r_3:["2.1","2.2","2.3","2.4","2.5","2.6","2.7","2.8","2.9","3.0"],r_2:["1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0"],r_1:["0.1","0.2","0.3","0.4","0.5","0.6","0.7","0.8","0.9","1.0"]}},{name:"Letter grade",system:{outof:"",r_10:["A+"],r_9:["A"],r_8:["A-"],r_7:["B","B+"],r_6:["C+","B-"],r_5:["C"],r_4:["D+","C-"],r_3:["D-","D"],r_2:["F","F+"],r_1:["F-"]}},{name:"Letter grade simple",system:{outof:"",r_10:["A"],r_9:[],r_8:["B"],r_7:[],r_6:["C"],r_5:[],r_4:["D"],r_3:[],r_2:["F"],r_1:[]}}];var RYMsegmented={setSelected:function(id,segment_id){var el=$("#"+id);$(".ui_segmented_btn_"+id).removeClass("selected");var segmentEl=$("#"+id+"_segment_"+segment_id);segmentEl.addClass("selected")},select:function(segmentEl,segment_id){var segmentEl=$(segmentEl);var id=segmentEl.data("mainid");var el=$("#"+id);var val=segmentEl.data("val");RYMsegmented.setSelected(id,segment_id);var component=el.data("callback-component");var component_data=el.data("callback-data");if(!component_data){return}if(typeof component_data!=="object"){component_data=JSON.parse(component_data)}switch(component){case"page_company_game":RYMobjectListPage.setDevPubFilter(component_data.object,val);break}}};var RYMsingleObject={onSelectObject:function(el,result){var id=el.data("id");var parent_id=el.data("parent-id");var val=$("#ui_chooser_"+id).val();$("#ui_singleobject_chosen_"+parent_id).html(result.name.join(""));$("#"+parent_id).val(result.id);$("#ui_singleobject_frame_"+parent_id).addClass("item_chosen")},onClickClose:function(id){$("#ui_singleobject_frame_"+id).removeClass("item_chosen");$("#"+id).val("")}};var RYMmultiObject={onSelectObject:function(el,result){var id=el.data("id");var parent_id=el.data("parent-id");var val=$("#ui_chooser_"+id).val();var obj={id:parent_id,item_id:result.id,text:result.name.join("")};var values=JSON.parse($("#"+parent_id).val());if(-1!=values.indexOf(result.id)){return}values.push(result.id);$("#ui_multiobject_objects_"+parent_id).append(RYMtemplate["ui.multiobject.singleitem"].render(obj));$("#"+parent_id).val(JSON.stringify(values));$("#ui_chooser_input_"+parent_id+"_chooser_obj").val("").focus()},onClickClose:function(id,item_id){$("#ui_multiobject_obj_frame_"+id+"_"+item_id).remove();var values=JSON.parse($("#"+id).val());var item_filtered=item_id;var filtered_values=values.filter(function(e){return e!=item_filtered});$("#"+id).val(JSON.stringify(filtered_values))}};var RYMtextfilter={searchTimers:{},searchRequests:{},searchDelayMs:300,_getId:function(el){var scope=el.data("scope");var component=el.data("component");var object_type=el.data("object-type");var object_assoc_id=el.data("object-assoc-id");return scope+"_"+component+"_"+object_type+"_"+object_assoc_id},init:function(el){var id=RYMtextfilter._getId(el);var initialized=Boolean(el.data("initialized"));if(initialized){return}el.data("initialized",true);el.unbind();var closeEl=$("#ui_textfilter_close_"+id);closeEl.unbind().on("click",function(event){RYMtextfilter.onClickClose(el,event)});el.unbind().on("input",function(event){RYMtextfilter.onInput(el,event)}).on("keyup",function(event){RYMtextfilter.onKeyUp(el,event)})},onClickClose:function(el,event){var id=RYMtextfilter._getId(el);var closeEl=$("#ui_textfilter_close_"+id);el.val("");closeEl.hide();RYMtextfilter.onInput(el,event)},willFilter:function(el,event){var id=RYMtextfilter._getId(el);var scope=el.data("scope");var component=el.data("component");var object_type=el.data("object-type");var object_assoc_id=el.data("object-assoc-id");var component=el.data("component");var searchterm=el.val();switch(component){case"song_list":{}break;case"object_list":{RYMobjectListPage.willFilter(object_type)}break;case"discography":{}break}console.log(el.val())},onTimer:function(el,event){var id=RYMtextfilter._getId(el);var scope=el.data("scope");var component=el.data("component");var object_type=el.data("object-type");var object_assoc_id=el.data("object-assoc-id");var component=el.data("component");var searchterm=el.val();switch(component){case"song_list":{}break;case"object_list":{RYMobjectListPage.onFilter(object_type,searchterm)}break;case"discography":{RYMdiscographyPage.onFilter(scope,object_assoc_id,searchterm)}break}console.log(el.val())},onClear:function(el){var id=RYMtextfilter._getId(el);var scope=el.data("scope");var component=el.data("component");var object_type=el.data("object-type");var object_assoc_id=el.data("object-assoc-id");var component=el.data("component");var searchterm=el.val();switch(component){case"song_list":{}break;case"object_list":{RYMobjectListPage.onClearFilter(object_type)}break;case"discography":{}break}},_filterCallback:function(id){var el=$("#ui_textfilter_"+id);$("#ui_textfilter_frame_"+id).removeClass("loading")},onKeyUp:function(el,event){if(event&&event.keyCode){switch(event.keyCode){case g_keyCodes.esc:RYMtextfilter.onClickClose(el,event);return false;break}}},onInput:function(el,event){var id=RYMtextfilter._getId(el);var closeEl=$("#ui_textfilter_close_"+id);var val=el.val();var resultTarget=el.data("result-target");if(RYMtextfilter.searchTimers[id]){clearTimeout(RYMtextfilter.searchTimers[id]);RYMtextfilter.searchTimers[id]=null}if(RYMtextfilter.searchRequests[id]){RYMtextfilter.searchRequests[id].abort();RYMtextfilter.searchRequests[id]=null}if(val.length>0){closeEl.show();$("#"+resultTarget).fadeIn(150);RYMtextfilter.willFilter(el)}else{closeEl.hide();$("#"+resultTarget).html("").fadeOut(150);$("#ui_textfilter_frame_"+id).removeClass("loading");RYMtextfilter.onClear(el);return}RYMtextfilter.searchTimers[id]=setTimeout(function(){RYMtextfilter.onTimer(el)},RYMtextfilter.searchDelayMs);$("#ui_textfilter_frame_"+id).addClass("loading")}};$.fn.extend({textfilterUI:function(){$(this).each(function(index){RYMtextfilter.init($(this))})}});var RYMupcoming={_addExclusionCallback:function(scope,type,assoc_id){$(".upcoming_cat_"+type+"_"+assoc_id).fadeOut(100);$(".disco_upcoming_exclude_menu").hide()},addExclusion:function(scope,type,assoc_id,reload){rym.request.post("UpcomingAddExclusion",{scope:scope,type:type,assoc_id:assoc_id,reload:reload},null,"script")},_loadCallback:function(week,filter_list_txt,content){$("#upcoming_filter_list").html(filter_list_txt);$("#upcoming_week_label").text(week);$("#upcoming_items").html(content);rym.setupPage()},reload:function(){var scope=$("#upcoming_scope").val();var user_filter=$("#upcoming_main_filter").val();var week_num=$("#upcoming_week_num").val();var order_by=$("#upcoming_order").val();var exclude_types=$("#upcoming_type_exclude").val();rym.request.post("UpcomingLoad",{scope:scope,user_filter:user_filter,week_num:week_num,order_by:order_by,exclude_types:exclude_types},null,"script");$("#upcoming_items").loadingAnim()},goPrevWeek:function(){var week_num=parseInt($("#upcoming_week_num").val())-1;$("#upcoming_week_num").val(week_num);RYMupcoming.reload()},goNextWeek:function(){var week_num=parseInt($("#upcoming_week_num").val())+1;$("#upcoming_week_num").val(week_num);RYMupcoming.reload()},selectMainFilter:function(filter){$(".upcoming_main_filter_btn").removeClass("selected");$("#upcoming_main_filter_"+filter).addClass("selected");$("#upcoming_main_filter").val(filter);RYMupcoming.reload();RYMupcoming.showSettingsSave()},selectOrder:function(order){$(".upcoming_order_btn").removeClass("selected");$("#upcoming_order_"+order).addClass("selected");$("#upcoming_order").val(order);RYMupcoming.reload();RYMupcoming.showSettingsSave()},toggleExcludeType:function(exclude_type){$("#upcoming_exclude_"+exclude_type).toggleClass("selected");var lst_selected=new Array;var exclude_types=new Array;if($("#upcoming_exclude_c").hasClass("selected")){exclude_types.push("c")}if($("#upcoming_exclude_i").hasClass("selected")){exclude_types.push("i")}if($("#upcoming_exclude_d").hasClass("selected")){exclude_types.push("d")}if($("#upcoming_exclude_collection").hasClass("selected")){exclude_types.push("collection")}if($("#upcoming_exclude_expansion").hasClass("selected")){exclude_types.push("expansion")}$("#upcoming_type_exclude").val(exclude_types.join("."));RYMupcoming.reload();RYMupcoming.showSettingsSave()},showSettingsSave:function(){$("#upcoming_save_settings").show().removeClass("saved").on("click",function(){RYMupcoming.saveSettings()});$("#upcoming_save_text").show();$("#upcoming_saved_text").hide()},saveState:function(){var scope=$("#upcoming_scope").val();var user_filter=$("#upcoming_main_filter").val();var week_num=$("#upcoming_week_num").val();var order_by=$("#upcoming_order").val();var exclude_types=$("#upcoming_type_exclude").val();rym.request.post("UpcomingSettingsSave",{scope:scope,user_filter:user_filter,week_num:week_num,order_by:order_by,exclude_types:exclude_types},null,"script")},saveSettings:function(){$("#upcoming_save_settings").addClass("saved").off("click");$("#upcoming_save_text").hide();$("#upcoming_saved_text").show();RYMupcoming.saveState()}};var RYMuploader={currentFiles:{},_supportsDragAndDrop:function(){var div=document.createElement("div");return"draggable"in div||"ondragstart"in div&&"ondrop"in div},init:function(el){var id=el.data("id");var uploadEl=$("#ui_uploader_"+id);var u=RYMuploader;if(!u._get(el,"has-source")){u._el("ui_uploader_source",id).hide()}if(!u._get(el,"has-content-flags")){u._el("ui_uploader_content_flags",id).hide()}else{u._el("ui_uploader_content_noflags",id).hide()}if(!u._get(el,"has-caption")){u._el("ui_uploader_caption",id).hide()}if(!u._get(el,"has-issue-info")){u._el("ui_uploader_issue_info",id).hide()}else{u._el("ui_uploader_issue_field_format",id).text(u._get(el,"issue-format"));u._el("ui_uploader_issue_field_catalog_no",id).text(u._get(el,"issue-catalog-no"));u._el("ui_uploader_issue_field_release_date",id).text(u._get(el,"issue-release-date"));u._el("ui_uploader_issue_field_label",id).text(u._get(el,"issue-label"))}if(!u._get(el,"has-name")){u._el("ui_uploader_name",id).hide()}if(!u._get(el,"has-standards-msg")){u._el("ui_uploader_rules",id).hide()}if(!u._get(el,"replacing-scan")){u._el("ui_uploader_selfscan_warning",id).hide()}u._el("ui_uploader_submit_btn",id).unbind().on("click",function(event){u.onSubmit(el,event)});u._el("ui_uploader_source_scan",id).unbind().on("click",function(event){u.onClickSource(el,"scan")});u._el("ui_uploader_source_photo",id).unbind().on("click",function(event){u.onClickSource(el,"photo")});u._el("ui_uploader_source_website",id).unbind().on("click",function(event){u.onClickSource(el,"website")});u._el("ui_uploader_source_other",id).unbind().on("click",function(event){u.onClickSource(el,"other")});u._el("ui_uploader_crop_btn",id).unbind().on("click",function(event){u.onClickCrop(el)});var dragdrop=u._supportsDragAndDrop();$("#ui_uploader_file_manual_"+id).unbind().on("change",function(event){u.handleFiles(el,this.files)});if(dragdrop){uploadEl.unbind();uploadEl[0].className="ui_uploader start drag_supported";window.addEventListener("dragenter",function(event){u.onUploadDragEnter(el,event)},false);window.addEventListener("dragleave",function(event){u.onUploadDragLeave(el,event)},false);window.addEventListener("dragover",function(event){u.onUploadDragOver(el,event)},false);window.addEventListener("drop",function(event){u.onUploadDrop(el,event)},false)}$("#ui_uploader_close_"+id).unbind().on("click",function(event){u.onCancelUpload(el)})},onClickCrop:function(el){var id=el.data("id");var crop=el.data("crop");if(!crop){crop={cl:0,ct:0,cr:0,cb:0}}var currentFile=RYMuploader.currentFiles[id];RYMcropper.init(currentFile.src,currentFile.width,currentFile.height,crop.cl,crop.ct,crop.cr,crop.cb,function(cl,ct,cr,cb){RYMuploader.onFinishCrop(el,cl,ct,cr,cb)})},onFinishCrop:function(el,cl,ct,cr,cb){var id=el.data("id");el.data("crop",{cl:cl,ct:ct,cr:cr,cb:cb});RYMuploader.currentFiles[id].crop={cl:cl,ct:ct,cr:cr,cb:cb};RYMuploader.updateCropFrame(el)},updateCropFrame:function(el){var id=el.data("id");var frameWidth=em(12)*.8;var frameHeight=em(12)*.8;var file=RYMuploader.currentFiles[id];var aspectRatio=1*file.width/file.height;var fullImageWidth,fullImageHeight;if(aspectRatio>1){fullImageWidth=frameWidth;fullImageHeight=frameHeight/aspectRatio}else{fullImageWidth=frameWidth*aspectRatio;fullImageHeight=frameHeight}var scale=fullImageWidth/file.width;var frameImageWidth,frameImageHeight;frameImageWidth=(file.width-file.crop.cl-file.crop.cr)*scale;frameImageHeight=(file.height-file.crop.cb-file.crop.ct)*scale;fullImageOffsetX=-file.crop.cl*scale;fullImageOffsetY=-file.crop.ct*scale;frameImageOffsetX=(frameWidth-frameImageWidth)/2;frameImageOffsetY=(frameHeight-frameImageHeight)/2;$("#ui_uploader_crop_frame_"+id).css({width:frameImageWidth+"px",height:frameImageHeight+"px",left:frameImageOffsetX+"px",top:frameImageOffsetY+"px"});$("#ui_uploader_crop_frame_image_"+id).css({width:fullImageWidth+"px",height:fullImageHeight+"px",left:fullImageOffsetX+"px",top:fullImageOffsetY+"px"})},onClickSource:function(el,source){var u=RYMuploader;var id=el.data("id");var replacingSelfScan=el.data("replacing-scan");var replacingExisting=el.data("replacing-existing");var sourceTextEl=u._el("ui_uploader_source_text_frame",id);var selfPhotoConfirmEl=u._el("ui_uploader_source_confirm_frame",id);var sourceWebsiteLabelEl=u._el("ui_uploader_source_text_website",id);var sourceOtherLabelEl=u._el("ui_uploader_source_text_other",id);var sourceSelfLabelEl=u._el("ui_uploader_source_text_self",id);var replaceJustificationEl=u._el("ui_uploader_justification_text_frame",id);var selfScanWarningEl=u._el("ui_uploader_selfscan_warning",id);switch(source){case"scan":sourceTextEl.show();selfPhotoConfirmEl.show();sourceSelfLabelEl.show();sourceOtherLabelEl.hide();sourceWebsiteLabelEl.hide();break;case"photo":sourceTextEl.show();selfPhotoConfirmEl.show();sourceSelfLabelEl.show();sourceOtherLabelEl.hide();sourceWebsiteLabelEl.hide();break;case"website":sourceTextEl.show();selfPhotoConfirmEl.hide();sourceSelfLabelEl.hide();sourceOtherLabelEl.hide();sourceWebsiteLabelEl.show();break;case"other":sourceTextEl.show();selfPhotoConfirmEl.hide();sourceSelfLabelEl.hide();sourceOtherLabelEl.show();sourceWebsiteLabelEl.hide();break}},_el:function(prefix,id){return $("#"+prefix+"_"+id)},_get:function(el,option){return el.data(option)},setUploadState:function(el,state){var id=el.data("id");var uploadEl=$("#ui_uploader_"+id);uploadEl.removeClass("start file_chosen uploading uploaded").addClass(state)},onCancelUpload:function(el){var id=el.data("id");RYMuploader.setUploadState(el,"start");RYMuploader.currentFiles[id]=null},handleFiles:function(el,files){var id=el.data("id");var file=files[0];if(!file.type.match("image/png|image/jpg|image/gif|image/jpeg")){alert("File must be a JPG, GIF, or PNG");return}var img=document.createElement("img");img.id="ui_uploader_crop_frame_image_"+id;img.className="ui_uploader_preview_frame_image";img.onload=function(){if(!file){RYMuploader.setUploadState(el,"start")}else{RYMuploader.setUploadState(el,"file_chosen")}var sizeKb=Math.floor(file["size"]/1024);var fileName=file["name"];$("#ui_uploader_file_name_"+id).text(fileName);$("#ui_uploader_file_size_"+id).text(sizeKb+"kB, "+img.width+"x"+img.height);var currentFile={src:img.src,filename:file["name"],fileObj:file,width:img.width,crop:{cl:0,cr:0,ct:0,cb:0},height:img.height,sizeKb:sizeKb};$("#ui_uploader_crop_frame_"+id).html(img);RYMuploader.currentFiles[id]=currentFile;RYMuploader.updateCropFrame(el)};img.file=file;var reader=new FileReader;reader.onload=function(aImg){return function(e){aImg.src=e.target.result}}(img);reader.readAsDataURL(file)},onUploadDragEnter:function(el,event){var id=el.data("id");var uploadEl=$("#ui_uploader_"+id);event.stopPropagation();event.preventDefault()},onUploadDragLeave:function(el,event){var id=el.data("id");var uploadEl=$("#ui_uploader_"+id);event.stopPropagation();event.preventDefault()},onUploadDragOver:function(el,event){event.stopPropagation();event.preventDefault()},onUploadDrop:function(el,event){var dt=event.dataTransfer;var files=dt.files;event.stopPropagation();event.preventDefault();RYMuploader.handleFiles(el,files)},showErrors:function(el,errors){var id=el.data("id");$(".ui_uploader_error_"+id).hide();for(var i in errors){$("#ui_uploader_error_"+errors[i]+"_"+id).fadeIn(100)}},validateUpload:function(el,event){var id=el.data("id");var u=RYMuploader;var errors=new Array;var currentFile=RYMuploader.currentFiles[id];if(!currentFile){alert("Error selecting file.")}var minWidth=parseInt(el.data("minimum-width"));var minHeight=parseInt(el.data("minimum-height"));if(minWidth!=NaN&&minWidth!=0&&currentFile.width<minWidth){errors.push("too_small")}if(minHeight!=NaN&&minHeight!=0&&currentFile.height<minHeight){errors.push("too_small")}if(u._get(el,"has-source")){var sourceType=$("input:radio[name=uploader_source_"+id+"]:checked").val();if(!sourceType||typeof sourceType=="undefined"||sourceType.length==0){errors.push("select_source")}else{if(sourceType=="self-scan"||sourceType=="self-photo"){var confirmed=$("#ui_uploader_source_confirm_"+id).is(":checked");if(!confirmed){errors.push("confirm_self_photo")}}else{var source=$("#ui_uploader_source_text_"+id).val();if(source.length<4){errors.push("explain_other_source")}}var bannedSources=new Array("discogs.com","imdb.com");var discouragedSources=new Array("amazon.com","imdb.com")}}RYMuploader.showErrors(el,errors);if(errors.length>0){return}RYMuploader.submit(el)},onSubmit:function(el,event){RYMuploader.validateUpload(el,event)},submit:function(el){var id=el.data("id");var imageId=el.data("image-id");var u=RYMuploader;var formData=new FormData;if(rym.session.token){formData.append("token",rym.session.token)}else{formData.append("token","anonymous")}formData.append("schema",u._get(el,"schema"));formData.append("assoc_id",u._get(el,"assoc-id"));if(u._get(el,"has-source")){var sourceType=$("input:radio[name=uploader_source_"+id+"]:checked").val();formData.append("source_type",sourceType);formData.append("source",u._el("ui_uploader_source",id).val())}if(u._get(el,"has-content-flags")){formData.append("content_flags_nudity",u._el("ui_uploader_content_flags_nudity",id).is(":checked"));formData.append("content_flags_sex",u._el("ui_uploader_content_flags_sex",id).is(":checked"));formData.append("content_flags_gore",u._el("ui_uploader_content_flags_gore",id).is(":checked"));formData.append("content_flags_nazi",u._el("ui_uploader_content_flags_nazi",id).is(":checked"));formData.append("content_flags_mild",u._el("ui_uploader_content_flags_mild",id).is(":checked"))}if(u._get(el,"has-caption")){formData.append("caption",u._el("ui_uploader_caption",id).val())}if(el.data("crop")){var crop=el.data("crop");formData.append("crop_cl",crop.cl);formData.append("crop_cr",crop.cr);formData.append("crop_ct",crop.ct);formData.append("crop_cb",crop.cb)}if(u._get(el,"replacing-scan")){formData.append("source_explanation",u._el("ui_uploader_source_text_explanation",id).val())}var id=el.data("id");var u=RYMuploader;var errors=new Array;var currentFile=RYMuploader.currentFiles[id];formData.append("file",currentFile.fileObj);formData.append("isi",rym.isi);RYMuploader.setUploadState(el,"uploading");$.ajax({url:"https://api.sonemic.com/1/image.upload",type:"POST",xhr:function(){var myXhr=$.ajaxSettings.xhr();if(myXhr.upload){myXhr.upload.addEventListener("progress",function(event){RYMuploader.handleProgress(el,event)},false)}return myXhr},success:function(data){RYMuploader.handleSuccess(el,data)},error:function(data){RYMuploader.handleFailure(el,data)},data:formData,cache:false,contentType:false,processData:false})},handleProgress:function(el,event){var id=el.data("id");$("#ui_uploader_progress_"+id).attr("value",Math.floor(event.loaded/event.total*100));console.log(event.loaded)},handleSuccess:function(el,data){var id=el.data("id");console.log("success yo");RYMuploader.setUploadState(el,"success");var callback_page=el.data("callback-page");var callback_id=el.data("callback-id");var image_name=RYMuploader._el("ui_uploader_name_input",id).val();switch(callback_page){case"gallery":{RYMgalleryPage.onUploadSuccess(id,data.data);break}case"textarea":{RYMtextarea._imageUploadCallback(callback_id,image_name,data);break}}var uploadEl=$("#ui_uploader_"+id);uploadEl.hide().remove();rym.closeModal()},handleFailure:function(el,data){alert("Error uploading image");RYMuploader.setUploadState(el,"file_chosen")}};$.fn.extend({uploaderUI:function(){$(this).each(function(index){RYMuploader.init($(this))})}});var RYMutil={getScopeForObject:function(object){var scope;switch(object){case"release":case"song":scope="music";break;case"film":scope="film";break;case"game":scope="games";break}return scope},comma:function(num){return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}};window.emSize=16;function body_px(){return window.emSize}function content_px(){return 12.8}function px_to_em_content(input){var emSize=content_px();return input/emSize}function em_content(input){var emSize=content_px();return emSize*input}function px_to_em(input){var emSize=body_px();return input/emSize}function em(input){var emSize=body_px();return emSize*input}$.fn.serializeObject=function(){var o={};var a=this.serializeArray();$.each(a,function(){if(o[this.name]!==undefined){if(!o[this.name].push){o[this.name]=[o[this.name]]}o[this.name].push(this.value||"")}else{o[this.name]=this.value||""}});return o};var defaultDiacriticsRemovalMap=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];var changes;function removeDiacritics(str){if(!changes){changes=defaultDiacriticsRemovalMap}for(var i=0;i<changes.length;i++){str=str.replace(changes[i].letters,changes[i].base)}return str}var RYMmapVis={width:500,height:333,updateNightView:function(target_id,force){var el=$("#"+target_id);if(el.length==0){return}if((new Date).getHours()>18||(new Date).getHours()<6||force){el[0].className="musicmap svg-container-55 night"}else{el[0].className="musicmap svg-container-55"}},create:function(target_id){RYMmapVis.projection=d3.geo.mercator().translate([0,0]).scale(RYMmapVis.width/2/Math.PI);RYMmapVis.zoom=d3.behavior.zoom().scaleExtent([1,318]);RYMmapVis.path=d3.geo.path().projection(RYMmapVis.projection);RYMmapVis.updateNightView(target_id,false);RYMmapVis.svg=d3.select("#"+target_id).classed("svg-container-55",true).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 500 333").classed("svg-content-responsive",true).append("g").attr("transform","translate("+RYMmapVis.width/2+","+RYMmapVis.height/2+")").call(RYMmapVis.zoom);RYMmapVis.g=RYMmapVis.svg.append("g").on("zoom",null);RYMmapVis.svg.append("rect").attr("class","overlay").attr("x",-RYMmapVis.width/2).attr("y",-RYMmapVis.height/2).attr("width",RYMmapVis.width).attr("height",RYMmapVis.height);d3.json("https://e.snmc.io/3.0/geo/world-topo.json",function(error,world){if(error)throw error;RYMmapVis.g.append("path").datum(topojson.feature(world,world.objects.countries)).attr("class","land").attr("d",RYMmapVis.path);RYMmapVis.g.append("path").datum(topojson.mesh(world,world.objects.countries,function(a,b){return a!==b})).attr("class","boundary").attr("d",RYMmapVis.path).style("stroke-width",.5);RYMmapVis.drawCircles()});RYMmapVis.tip=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(d){return"<strong>"+d.count+":</strong> "+d.name+""});RYMmapVis.cities=RYMmapVis.getCities(RYMstats.stats.locations)},move:function(t,s){t[0]=Math.min(RYMmapVis.width/2*(s-1),Math.max(RYMmapVis.width/2*(1-s),t[0]));t[1]=Math.min(RYMmapVis.height/2*(s-1)+RYMmapVis.height/2*s,Math.max(RYMmapVis.height/2*(1-s)-RYMmapVis.height/2*s,t[1]));RYMmapVis.zoom.translate(t);RYMmapVis.g.attr("transform","translate("+t+")scale("+s+")");RYMmapVis.svg.selectAll("path").attr("d",RYMmapVis.path).style("stroke-width",Math.min(.5,.5/s));RYMmapVis.svg.selectAll("circle").style("opacity",function(d){return RYMmapVis.getOpacity(d)}).attr("r",function(d){return Math.min(2,5/s)}).attr("cx",function(d){return RYMmapVis.projection([d.lon,d.lat])[0]}).attr("cy",function(d){return RYMmapVis.projection([d.lon,d.lat])[1]}).attr("transform","translate("+t+")scale("+s+")")},zoomCircles:function(){var xmin=99999999,xmax=-99999999,ymin=99999999,ymax=-99999999;RYMmapVis.svg.selectAll("circle").style("opacity",function(d){return RYMmapVis.getOpacity(d)}).attr("cx",function(d){if(RYMmapVis.getOpacity(d)>0){var x=RYMmapVis.projection([d.lon,d.lat])[0];xmin=Math.min(x,xmin);xmax=Math.max(x,xmax);return x}return 0}).attr("cy",function(d){if(RYMmapVis.getOpacity(d)>0){var y=RYMmapVis.projection([d.lon,d.lat])[1];ymin=Math.min(y,ymin);ymax=Math.max(y,ymax);return y}return 0});var dx=xmax-xmin;var dy=ymax-ymin;var x=(xmax+xmin)/2;var y=(ymax+ymin)/2;console.log("xmin:"+xmin+", xmax:"+xmax+", ymin:"+ymin+", ymax:"+ymax);console.log("x:"+x+", dx:"+dx+", y:"+y+", dy:"+dy);var scale=.8/Math.max(dx/RYMmapVis.width,dy/RYMmapVis.height),translate=[RYMmapVis.width/2-scale*x,RYMmapVis.height/2-scale*y];console.log("scale:"+scale+","+", translate:"+translate[0]+", "+translate[1]);500-(123+55);RYMmapVis.move(translate,scale)},drawCircles:function(){RYMmapVis.circles=RYMmapVis.svg.selectAll("circle");var xmin=99999999,xmax=-99999999,ymin=99999999,ymax=-99999999;RYMmapVis.svg.call(RYMmapVis.tip);RYMmapVis.circles.data(RYMmapVis.cities,function(d,i){return"artist"+i}).enter().append("circle").attr("d",RYMmapVis.path).style("opacity",function(d){return RYMmapVis.getOpacity(d)}).attr("r",function(d){return 2}).style("fill",function(d){return"#fff"}).attr("cx",function(d){if(RYMmapVis.getOpacity(d)){var x=RYMmapVis.projection([d.lon,d.lat])[0];xmin=Math.min(x,xmin);xmax=Math.max(x,xmax);return x}return 0}).attr("cy",function(d){if(RYMmapVis.getOpacity(d)){var y=RYMmapVis.projection([d.lon,d.lat])[1];ymin=Math.min(y,ymin);ymax=Math.max(y,ymax);return y}return 0});var dx=xmax-xmin;var dy=ymax-ymin;var x=(xmax-xmin)/2;var y=(ymax-ymin)/2;console.log("xmin:"+xmin+", xmax:"+xmax+", ymin:"+ymin+", ymax:"+ymax);console.log("x:"+x+", dx:"+dx+", y:"+y+", dy:"+dy);var scale=.8/Math.max(dx/RYMmapVis.width,dy/RYMmapVis.height),translate=[RYMmapVis.width/2-scale*x,RYMmapVis.height/2-scale*y];console.log("scale:"+scale+","+", translate:"+translate[0]+", "+translate[1]);500-(123+55)},getOpacity:function(d){var show=false;if(RYMmapVis.filter){switch(RYMmapVis.filter.field){case"continent":if(d.continent_id===RYMmapVis.filter.id){show=true}break;case"country":if(d.country_id===RYMmapVis.filter.id){show=true}break;case"region":if(d.region_id===RYMmapVis.filter.id){show=true}break}}else{return.45}if(show){return.8}else{return 0}},setFilter:function(field,id){RYMmapVis.filter={field:field,id:id};RYMmapVis.svg.selectAll("circle").transition().duration(500).style("opacity",function(d){return RYMmapVis.getOpacity(d)})},clearFilter:function(){RYMmapVis.filter=null;RYMmapVis.svg.selectAll("circle").transition().duration(500).style("opacity",function(d){return RYMmapVis.getOpacity(d)})},getCities:function(locations){var ret=new Array;for(var i in locations.continents){var continent_id=locations.continents[i].continent_id;for(var j in locations.continents[i].countries){var country_id=locations.continents[i].countries[j].country_id;for(var k in locations.continents[i].countries[j].regions){var region_id=locations.continents[i].countries[j].regions[k].region_id;for(var l in locations.continents[i].countries[j].regions[k].cities){var city=locations.continents[i].countries[j].regions[k].cities[l];ret.push({name_display:city.name_display,lon:city.latitude,lat:city.longitude,count:city.count,location_id:city.city_id,region_id:region_id,country_id:country_id,continent_id:continent_id})}}}}return ret}};var RYMcompareUserVis={initUserCompare:function(){(function test(){var width=500,height=270;var opts={dataLength:180,setLength:2,duration:100,circleOpacity:.4,innerOpacity:0};for(var key in opts){test[key]=getSet(key,test).bind(opts)}function getSet(option,component){return function(_){if(!arguments.length){return this[option]}this[option]=_;return component}}var layout=d3.layout.venn().size([width,height]).padding(0).packingStragegy(d3.layout.venn.force);var target_id="compare_vis";svg=d3.select("#"+target_id).classed("svg-container-55",true).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 500 333").classed("svg-content-responsive",true);isFirstLayout=true;tip=d3.tip().attr("class","d3-tip").html(function(d){return d.name_display});svg.call(tip);var globalData=[],generator=0;function generateData(){var ret=[];var user1g=window.compat_info.user1_items;var user2g=window.compat_info.user2_items;var commong=window.compat_info.common_items;for(var j in user1g){ret.push({set:["A","A"],r:8,name:"node"+user1g[j].name_display+"_e",name_display:user1g[j].name_display,url:user1g[j].url,class:user1g[j].class})}for(var j in user2g){ret.push({set:["C","A"],r:8,name:"node"+user2g[j].name_display+"_r",name_display:user2g[j].name_display,url:user2g[j].url,class:user2g[j].class})}for(var j in commong){ret.push({set:["C","C"],r:8,name:"node"+commong[j].name_display+"_g",name_display:commong[j].name_display,url:commong[j].url,class:commong[j].class})}return ret}function getDotColor(d){switch(d.class){case"music_genre":{return"#144080"}case"film_genre":{return"#a95f00"}case"games_genre":{return"#8d2019"}case"music_descriptor":{return"#5baadb"}case"film_descriptor":{return"#b09901"}case"games_descriptor":{return"#bc2422"}default:{return"rgba(0,0,0,0.5)"}}}function refresh(data){if(data){layout.nodes(data)}var vennArea=svg.selectAll("g.venn-area").data(layout.sets().values(),function(d){return d.__key__});var vennEnter=vennArea.enter().append("g").attr("class",function(d){return"venn-area venn-"+(d.sets.length==1?"circle":"intersection")}).attr("fill",function(d,i){var colorMap=["#8a8","#00b","#aa4","#eee","#eee"];console.log("vennfill "+i+"="+colorMap[i]);return colorMap[i]});vennEnter.append("path").attr("class","venn-area-path");vennArea.selectAll("path.venn-area-path").transition().duration(0).attr("opacity",test.circleOpacity()).attrTween("d",function(d){return d.d});var circleContainer=svg.selectAll("g.venn-circle-container").data(layout.sets().values(),function(d){return d.__key__});circleContainer.enter().append("g").attr("class","venn-circle-container");circleContainer.exit().remove();var points=circleContainer.selectAll("circle.node").data(function(d){return d.nodes},function(d){return d.name});var pointsEnter=points.enter().append("circle").attr("r",3).attr("class","node").call(layout.packer().drag).on("mouseover",tip.show).on("mouseout",tip.hide);points.transition().duration(isFirstLayout?0:test.duration()).attr("r",function(d){return d.r}).attr("fill",function(d,i){console.log("circlecontainer "+JSON.stringify(d)+"---"+i);return getDotColor(d)}).attr("opacity",.8);points.exit().transition().attr("r",0).remove();isFirstLayout=false;layout.packingConfig({ticker:function(){points.attr("cx",function(d){return d.x}).attr("cy",function(d){return d.y})}});layout.packer().start();var n=29;for(var i=n*n;i>0;--i)layout.packer().tick();layout.packer().stop();return test}return refresh(generateData())})()}};RYMobjectRatingVis={game_rating_dist_base:{y_2016:6.703691821206,y_2017:6.17958810175946},film_rating_dist_base:{y_2009:6.45493457627429,y_2010:6.3272975742664,y_2011:6.34088773746764,y_2012:6.31909049170981,y_2013:6.32299801487645,y_2014:6.29814112006701,y_2015:6.24022609411031,y_2016:6.27561194978728,y_2017:6.20881927763564},release_rating_dist_base:{y_2001:8.10801195099862,y_2002:7.73362686279297,y_2003:7.52899283490741,y_2004:7.47711629842044,y_2005:7.4199464029524,y_2006:7.40805687757697,y_2007:7.27619596918406,y_2008:7.12992414606252,y_2009:7.03731516427169,y_2010:6.91118825260332,y_2011:6.85000266243981,y_2012:6.80309177124362,y_2013:6.77535505729016,y_2014:6.72714961340338,y_2015:6.718268110179,y_2016:6.76682407669825,y_2017:6.67281673729218},song_rating_dist_base:{y_2002:7.29708176498573,y_2003:8.06117592268293,y_2004:7.60370662372089,y_2005:7.51222525203622,y_2006:7.8011012284337,y_2007:7.61741607688105,y_2008:7.48259040607156,y_2009:7.67371096794319,y_2010:7.61503141608971,y_2011:7.51932306782188,y_2012:7.56396375516027,y_2013:7.34736202682088,y_2014:7.25102117787592,y_2015:7.18641975688349,y_2016:7.14582358653862,y_2017:7.07482420120776},ratingTrend:function(object_type,elemId,data){var width=100;var height=33;var x=d3.scale.linear().range([0,width-4]);var y=d3.scale.linear().range([height-4,4]);var x2=d3.scale.ordinal().rangeRoundBands([0,width-4],0);var line=d3.svg.line().x(function(d){return x(d.year)}).y(function(d){return y(d.avg-(RYMobjectRatingVis[object_type+"_rating_dist_base"]["y_"+d.year]||0))});data.forEach(function(d){d.date=d.year;d.avg=+d.avg});$("#rating_card_rating_trend_low").text(data[0].year);$("#rating_card_rating_trend_high").text(data[data.length-1].year);x.domain(d3.extent(data,function(d){return d.year}));x2.domain(d3.extent(data,function(d){return d.year}));var extentData=[0];for(var i in data){var diff=data[i].avg-RYMobjectRatingVis[object_type+"_rating_dist_base"]["y_"+data[i].year];extentData.push(diff);extentData.push(-diff)}y.domain(d3.extent(extentData,function(d,i){return extentData[i]}));var svg=d3.select(elemId).classed("svg-container-33",true).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 100 33").classed("svg-content-responsive",true).append("g");svg.selectAll(".bar").data(data).enter().append("rect").attr("class","backbar has_tip").attr("x",function(d){return x(d.year)-width/(data.length+1)/2}).attr("data-tiptip",function(d){var diff=((d.avg-RYMobjectRatingVis[object_type+"_rating_dist_base"]["y_"+d.year])/2).toFixed(2);if(diff>0){return d.year+": +"+diff}else{return d.year+": "+diff}}).attr("width",width/(data.length+1)).attr("y",function(d){return 0}).attr("height",function(d){return height});svg.append("path").datum(data).attr("class","sparkline").attr("d",line);svg.append("circle").attr("class","sparkcircle").attr("cx",x(data[data.length-1].year)).attr("cy",y(data[data.length-1].avg-(RYMobjectRatingVis[object_type+"_rating_dist_base"]["y_"+data[data.length-1].year]||0))).attr("r",2)},ratingDistChart:function(elemId,data){var fixedData=[];for(var i=1;i<=10;i++){fixedData.push({rating:i/2,count:data[i]})}data=fixedData;var width=100;var height=33;var x=d3.scale.ordinal().rangeRoundBands([0,width],.1);var y=d3.scale.linear().range([height,0]);x.domain(data.map(function(d){return d.rating}));y.domain([0,d3.max(data,function(d){return d.count})]);var svg=d3.select(elemId).classed("svg-container-33",true).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 100 33").classed("svg-content-responsive",true).append("g");svg.selectAll(".bar").data(data).enter().append("rect").attr("class","backbar has_tip").attr("data-tiptip",function(d){return d.rating+": "+d.count+" ratings"}).attr("x",function(d){return x(d.rating)}).attr("width",x.rangeBand()).attr("y",function(d){return 0}).attr("height",function(d){return height});svg.selectAll(".bar").data(data).enter().append("rect").attr("class","bar").attr("x",function(d){return x(d.rating)}).attr("width",x.rangeBand()).attr("y",function(d){return y(d.count)}).attr("height",function(d){return height-y(d.count)})}};var RYMstreamgraphVis={genrePaths:[],create:function(target_id){$("#"+target_id).html("").removeClass("svg-container").show();RYMstreamgraphVis.items=RYMstats.stats.genres.items.slice();RYMstreamgraphVis.items.sort(function(a,b){return a.path[0]-b.path[0]});RYMstreamgraphVis.setup(RYMstats.stats);for(var i=0;i<RYMstreamgraphVis.items.length;i++){var path=RYMstreamgraphVis.items[i].path;for(var j=0;j<path.length;j++){if(!RYMstreamgraphVis.genrePaths["genre"+path[j]]){RYMstreamgraphVis.genrePaths["genre"+path[j]]=RYMstreamgraphVis.items[i].path.slice(0,j+1)}}RYMstreamgraphVis.genrePaths["genre"+RYMstreamgraphVis.items[i].genre_id]=RYMstreamgraphVis.items[i].path}RYMstreamgraphVis.svg=d3.select("#"+target_id).classed("svg-container-66",true).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 500 333").classed("svg-content-responsive",true);RYMstreamgraphVis.svg.selectAll("path").data(RYMstreamgraphVis.layers).enter().append("path").attr("d",RYMstreamgraphVis.area).style("fill",function(d,i){return RYMstreamgraphVis.fill(d,i)}).style("opacity",function(d,i){return RYMstreamgraphVis.getOpacity(d,i)}).on("mouseover",function(d,index){$("#genre_vis_name").text(RYMstreamgraphVis.items[index].name)})},getOpacity:function(nodes,index){var genre=RYMstreamgraphVis.items[index];var cid="genre"+genre.genre_id;if(RYMstreamgraphVis.genrePaths[cid]&&RYMstreamgraphVis.genrePaths[cid].length){return.5+.5/RYMstreamgraphVis.genrePaths[cid].length}else{return 1}},fill:function(nodes,index){var genre=RYMstreamgraphVis.items[index];var cid="genre"+genre.genre_id;if(cid=="genre0"){return"#000"}var path=RYMstreamgraphVis.genrePaths[cid];if(path){return RYMstatsPage.getGenreColor(path[0])}else{return"#865"}},setup:function(data){RYMstreamgraphVis.min_month=parseInt(data.general.min_month.split("-")[1])-1;RYMstreamgraphVis.max_month=parseInt(data.general.max_month.split("-")[1])-1;RYMstreamgraphVis.min_year=parseInt(data.general.min_year);RYMstreamgraphVis.max_year=parseInt(data.general.max_year);$("#page_stats_genres_min_year").text(RYMstreamgraphVis.min_year);$("#page_stats_genres_max_year").text(RYMstreamgraphVis.min_year);RYMstreamgraphVis.mmv=RYMstreamgraphVis.min_year*12+RYMstreamgraphVis.min_month;RYMstreamgraphVis.mxv=RYMstreamgraphVis.max_year*12+RYMstreamgraphVis.max_month;RYMstreamgraphVis.dateset_length=RYMstreamgraphVis.mxv-RYMstreamgraphVis.mmv+1;RYMstreamgraphVis.numLayers=data.genres.items.length-1;RYMstreamgraphVis.samplesPerLayer=RYMstreamgraphVis.dateset_length;if(RYMstreamgraphVis.samplesPerLayer>50){RYMstreamgraphVis.samplesPerLayer=50}var stack=d3.layout.stack().offset("wiggle");RYMstreamgraphVis.layers=stack(d3.range(RYMstreamgraphVis.numLayers).map(function(a){return RYMstreamgraphVis.getLayerData(a,RYMstreamgraphVis.samplesPerLayer)}));var width=500,height=333;var x=d3.scale.linear().domain([0,RYMstreamgraphVis.samplesPerLayer-1]).range([0,width]);var y=d3.scale.linear().domain([0,d3.max(RYMstreamgraphVis.layers,function(layer){return d3.max(layer,function(d){return d.y0+d.y})})]).range([height,0]);RYMstreamgraphVis.area=d3.svg.area().x(function(d){return x(d.x)}).y0(function(d){return y(d.y0)}).y1(function(d){return y(d.y0+d.y)})},getLayerData:function(layer_index,n){var ret=new Array(RYMstreamgraphVis.dateset_length);for(var i=0;i<RYMstreamgraphVis.dateset_length;i++){ret[i]={x:i,y:0}}for(var j=4;j<RYMstreamgraphVis.items[layer_index].time_dist.length;j++){var month=RYMstreamgraphVis.items[layer_index].time_dist[j].month;var mnthv=parseInt(month.split("-")[0])*12+(parseInt(month.split("-")[1])-1);var idx=mnthv-RYMstreamgraphVis.mmv;var count=RYMstreamgraphVis.items[layer_index].time_dist[j].count;ret[j]={x:j,y:count,cid:"genre"+RYMstreamgraphVis.items[layer_index].genre_id}}for(var k=4;k<RYMstreamgraphVis.dateset_length;k++){ret[k].y=(ret[k-1].y+ret[k-2].y+ret[k-3].y+ret[k-4].y+ret[k].y)/5}return ret}};var RYMsunburstVis={genrePaths:[],radius:300,create:function(target_id,genre_name_id){$("#"+target_id).html("").removeClass("svg-container-66").show();RYMsunburstVis.target_id=target_id;RYMsunburstVis.genre_name_id=genre_name_id;RYMsunburstVis.initParts();var json=RYMsunburstVis.buildHierarchyJson();RYMsunburstVis.createVisualization(json)},initParts:function(){RYMsunburstVis.vis=d3.select("#"+RYMsunburstVis.target_id).classed("svg-container",true).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","-250 -250 500 500").classed("svg-content-responsive",true);RYMsunburstVis.partition=d3.layout.partition().size([2*Math.PI,RYMsunburstVis.radius*RYMsunburstVis.radius]).value(function(d){return d.size});RYMsunburstVis.arc=d3.svg.arc().startAngle(function(d){return d.x}).endAngle(function(d){return d.x+d.dx}).innerRadius(function(d){return Math.sqrt(d.y)}).outerRadius(function(d){return Math.sqrt(d.y+d.dy)})},createVisualization:function(json){RYMsunburstVis.vis.append("svg:circle").attr("r",RYMsunburstVis.radius).style("opacity",0);var nodes=RYMsunburstVis.partition.nodes(json).filter(function(d){return d.dx>.005&&d.name!=="genre0"});var path=RYMsunburstVis.vis.data([json]).selectAll("path").data(nodes).enter().append("svg:path").attr("display",function(d){return d.depth?null:"none"}).attr("d",RYMsunburstVis.arc).style("fill",function(d){return RYMsunburstVis.getColor(d)}).attr("stroke-width",2).style("opacity",function(d){return RYMsunburstVis.getOpacity(d)}).on("mouseover",RYMsunburstVis.mouseover).on("touchstart",RYMsunburstVis.mouseover).on("click",function(d){var id=d.name.replace(/^\D+/g,"");RYMcollectionPage.addFilter("genre_all","is",null,genre_names[d.name],parseInt(id))});$("#"+RYMsunburstVis.target_id).on("mouseleave",RYMsunburstVis.mouseleave)},mouseover:function(d){if(genre_names){d3.select("#"+RYMsunburstVis.genre_name_id).style("visibility","").text(genre_names[d.name])}var sequenceArray=RYMsunburstVis.getAncestors(d);RYMsunburstVis.vis.selectAll("path").style("opacity",.25);RYMsunburstVis.vis.selectAll("path").filter(function(node){return sequenceArray.indexOf(node)>=0}).style("opacity",1)},mouseleave:function(d){console.log("oo");RYMsunburstVis.vis.selectAll("path").on("mouseover",null);RYMsunburstVis.vis.selectAll("path").transition().duration(250).style("opacity",function(d){return RYMsunburstVis.getOpacity(d)}).each("end",function(){d3.select(this).on("mouseover",RYMsunburstVis.mouseover)});d3.select("#"+RYMsunburstVis.genre_name_id).style("visibility","hidden")},getAncestors:function(node){var path=[];var current=node;while(current.parent){path.unshift(current);current=current.parent}return path},buildHierarchyJson:function(){for(var i=0;i<RYMstats.stats.genres.items.length;i++){var path=RYMstats.stats.genres.items[i].path;for(var j=0;j<path.length;j++){if(!RYMsunburstVis.genrePaths["genre"+path[j]]){RYMsunburstVis.genrePaths["genre"+path[j]]=RYMstats.stats.genres.items[i].path.slice(0,j+1)}}RYMsunburstVis.genrePaths["genre"+RYMstats.stats.genres.items[i].genre_id]=RYMstats.stats.genres.items[i].path}var root={name:"root",children:[]};for(var i=0;i<RYMstats.stats.genres.items.length;i++){var path=RYMstats.stats.genres.items[i].path.slice();path.push(0);var size=RYMstats.stats.genres.items[i].count;if(isNaN(size)){continue}var parts=path;var currentNode=root;for(var j=0;j<parts.length;j++){var children=currentNode["children"];if(!children){currentNode.children=new Array;children=currentNode.children}var nodeName="genre"+parts[j];var childNode;if(j+1<parts.length){var foundChild=false;for(var k=0;k<children.length;k++){if(children[k]["name"]==nodeName){childNode=children[k];foundChild=true;break}}if(!foundChild){childNode={name:nodeName,children:[]};children.push(childNode)}currentNode=childNode}else{childNode={name:nodeName,size:size};children.push(childNode)}}}return root},getColor:function(node){if(node.name=="root"||node.name=="genre0"){return"#000"}var path=RYMsunburstVis.genrePaths[node.name];if(!path&&node.name.children){path=RYMsunburstVis.findPath(node)}if(path){return RYMstatsPage.getGenreColor(path[0])}else{debugger;return"#fff"}},getOpacity:function(node){if(RYMsunburstVis.genrePaths[node.name]&&RYMsunburstVis.genrePaths[node.name].length){return.5+.5/RYMsunburstVis.genrePaths[node.name].length}else{return 1}},findPath:function(node){if(RYMsunburstVis.genrePaths[node.name]){return RYMsunburstVis.genrePaths[node.name]}if(!node.children){return false}for(var i=0;i<node.children.length;i++){var item=RYMsunburstVis.findPath(node.children[i]);if(item){return item}}return false}};RYMwordcloudVis={words:null,genrePaths:[],create:function(target_id){$("#"+target_id).html("").removeClass("svg-container").show();for(var i=0;i<RYMstats.stats.genres.items.length;i++){var path=RYMstats.stats.genres.items[i].path;for(var j=0;j<path.length;j++){if(!RYMwordcloudVis.genrePaths["genre"+path[j]]){RYMwordcloudVis.genrePaths["genre"+path[j]]=RYMstats.stats.genres.items[i].path.slice(0,j+1)}}RYMwordcloudVis.genrePaths["genre"+RYMstats.stats.genres.items[i].genre_id]=RYMstats.stats.genres.items[i].path}RYMwordcloudVis.words=RYMwordcloudVis.getWordsGenre(RYMstats.stats);var myWordCloud=RYMwordcloudVis.wordCloud("#"+target_id);myWordCloud.update(RYMwordcloudVis.getWordsGenre(RYMstats.stats))},getColor:function(node){if(node.cid=="genre0"){return"#000"}var path=RYMwordcloudVis.genrePaths[node.cid];if(path){return RYMstatsPage.getGenreColor(path[0])}else{return"#555"}},wordCloud:function(selector){RYMwordcloudVis.fill=function(d,i){return RYMwordcloudVis.getColor(d)};RYMwordcloudVis.svg=d3.select(selector).classed("svg-container-66",true).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","-250 -166 500 333").classed("svg-content-responsive",true);return{update:function(){d3.layout.cloud().size([500,333]).words(RYMwordcloudVis.words).padding(3).rotate(function(){return 0}).font("Raleway").fontSize(function(d){return d.size}).on("end",RYMwordcloudVis.draw).start()}}},draw:function(words){var cloud=RYMwordcloudVis.svg.selectAll("g text").data(words,function(d){return d.text});cloud.enter().append("text").style("font-family","Raleway").style("fill",function(d,i){return RYMwordcloudVis.fill(d,i)}).attr("text-anchor","middle").attr("cursor","pointer").attr("font-size",1).on("click",function(d){RYMcollectionPage.addFilter("genre","is",null,d.text,d.genre_id)}).text(function(d){return d.text});cloud.style("font-size",function(d){return d.size+"px"}).attr("transform",function(d){return"translate("+[d.x,d.y]+")"})},getWords:function(data){var ret=new Array;var maxSize=60;var minSize=20;var firstSize=data.tags[0].count;var multiplier=(maxSize-minSize)/firstSize;for(var i=0;i<data.tags.length;i++){ret.push({text:data.tags[i].tag,size:minSize+data.tags[i].count*multiplier});if(i>300){break}}return ret},getWordsGenre:function(data){var ret=new Array;var maxSize=60;var minSize=10;var firstSize=data.genres.items[0].count;var multiplier=(maxSize-minSize)/firstSize;for(var i=0;i<data.genres.items.length;i++){ret.push({cid:"genre"+data.genres.items[i].genre_id,genre_id:data.genres.items[i].genre_id,text:data.genres.items[i].name,size:minSize+data.genres.items[i].count*multiplier});if(i>300){break}}return ret}};var wsSecondary=new Array;var wsSupported="WebSocket"in window;var g_lstReceivedMessages=new Array;var RYMstream={current_page:null,ws:null,register:function(page_id,channel){RYMstream.current_page=page_id;var url=streamBaseUrl+channel;if(wsSupported){RYMstream.ws=new WebSocket(url);RYMstream.ws.onmessage=function(evt){RYMstream.onMessage(evt)};RYMstream.ws.onerror=function(evt){}}},onMessage:function(messageEvent){var data=JSON.parse(messageEvent.data);data=JSON.parse(data.text);return RYMstream.processMessage(data)},updateUnreadNotificationCount:function(new_count){var el=$(".profile_num_notifications");if(new_count==0){el.fadeOut()}else{$(".profile_num_notifications").html(new_count);if(!el.is(":visible")){el.fadeIn()}}},onNotificationSignal:function(event,data){RYMstream.updateUnreadNotificationCount(data.unread_notifications)},onSignalNewDbStats:function(data){for(var i in data.stats){var stat=data.stats[i];$("#db_stats_"+stat.field_id).html(stat.value_display).removeClass().addClass("flipInX animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass()})}},processMessage:function(data){if(g_lstReceivedMessages[data.tsUs]){console.log("ignored duplicate message at "+data.tsUs);return}g_lstReceivedMessages[data.tsUs]=true;switch(data.component){case"messaging":RYMmessagingPage.onSignal(data.event,data.data);break;case"notifications":RYMstream.onNotificationSignal(data.event,data.data);break;case"community":if(data.event==="users"){RYMcommunityPage.onNotificationSignal(data.event,data.data)}break;case"comments":RYMcomments.onNotificationSignal(data.event,data.data);break;case"dbstats":RYMstream.onSignalNewDbStats(data.data);break}}};rym.nav={currentScope:"music",go:function(event,url,scope){var wevt;if(typeof event!="undefined"){wevt=event}else if(window.event){wevt=window.event}if(wevt&&(wevt.shiftKey||wevt.metaKey||event&&event.which==2)){window.open(url,"_blank");return false}else{window.location=url}}};$(window).on("keyup",function(e){switch(e.keyCode){case 27:if(RYMimageBrowser.active){RYMimageBrowser.hide()}break;case 37:if(RYMimageBrowser.active){RYMimageBrowser.prev()}break;case 39:if(RYMimageBrowser.active){RYMimageBrowser.next()}break}});$(document).ready(function(){if(window.location.hash.indexOf("images")==1){var x=window.location.hash.split(",");var schema=x[1];var assoc_id=x[2];var starting_id=x[3];RYMimageBrowser.load(schema,assoc_id,starting_id)}});for(var i in ryminit){var fn=ryminit[i];fn()}ryminit=null;
